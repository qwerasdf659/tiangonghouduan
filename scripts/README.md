# Scriptsç›®å½•ç®¡ç†è§„èŒƒ

**æœ€åæ›´æ–°**: 2025å¹´10æœˆ14æ—¥ 23:55:00 åŒ—äº¬æ—¶é—´  
**ç»´æŠ¤å›¢é˜Ÿ**: å¼€å‘å›¢é˜Ÿ  
**æ ¸å¿ƒåŸåˆ™**: ç®€å•ã€æ¸…æ™°ã€æ˜“ç»´æŠ¤

---

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ database/          # æ•°æ®åº“ç›¸å…³è„šæœ¬ï¼ˆçº¦20ä¸ªï¼‰
â”‚   â”œâ”€â”€ check-migration-sync.sh
â”‚   â”œâ”€â”€ comprehensive-db-check.js
â”‚   â”œâ”€â”€ optimize-database.sh
â”‚   â”œâ”€â”€ restore-database-from-local.sh
â”‚   â””â”€â”€ verify-restored-data.sh
â”œâ”€â”€ system/           # ç³»ç»Ÿç»´æŠ¤è„šæœ¬ï¼ˆ3ä¸ªï¼‰
â”‚   â”œâ”€â”€ diagnose-sealos-database.sh
â”‚   â”œâ”€â”€ final_quality_check.js
â”‚   â””â”€â”€ process-manager.sh
â”œâ”€â”€ deployment/       # éƒ¨ç½²ç›¸å…³è„šæœ¬ï¼ˆ1ä¸ªï¼‰
â”‚   â””â”€â”€ setup-sealos.sh
â”œâ”€â”€ toolkit/          # å¼€å‘å·¥å…·è„šæœ¬ï¼ˆ7ä¸ªï¼‰
â”‚   â”œâ”€â”€ backup-toolkit.js
â”‚   â”œâ”€â”€ database-toolkit.js
â”‚   â”œâ”€â”€ generate-api-docs.js
â”‚   â”œâ”€â”€ js_module_analyzer.js
â”‚   â””â”€â”€ points-toolkit.js
â”œâ”€â”€ maintenance/      # ç»´æŠ¤ä»»åŠ¡è„šæœ¬ï¼ˆ5ä¸ªï¼‰
â”‚   â”œâ”€â”€ cleanup.js
â”‚   â”œâ”€â”€ scheduled-tasks.js
â”‚   â””â”€â”€ update-prize-probabilities.js
â”œâ”€â”€ migration/        # æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆä¿ç•™ï¼‰
â”œâ”€â”€ diagnostic/       # è¯Šæ–­å·¥å…·ï¼ˆä¿ç•™ï¼‰
â””â”€â”€ fix-points/       # ç§¯åˆ†ä¿®å¤å·¥å…·ï¼ˆä¿ç•™ï¼‰
```

---

## ğŸš¨ ä¸‰æ¡é“å¾‹ï¼ˆå¿…é¡»éµå®ˆï¼‰

### è§„åˆ™1: å…ˆæœç´¢ï¼Œå†åˆ›å»º

**åˆ›å»ºæ–°è„šæœ¬å‰å¿…é¡»ï¼š**
1. âœ… åœ¨å½“å‰ç›®å½•æœç´¢æ˜¯å¦æœ‰ç±»ä¼¼åŠŸèƒ½
2. âœ… å°è¯•æ‰©å±•ç°æœ‰è„šæœ¬ï¼ˆæ·»åŠ å‚æ•°é€‰é¡¹ï¼‰
3. âœ… åªæœ‰ç¡®å®éœ€è¦å…¨æ–°åŠŸèƒ½æ—¶æ‰åˆ›å»ºæ–°æ–‡ä»¶

**ç¤ºä¾‹**ï¼š
```bash
# âŒ é”™è¯¯åšæ³•ï¼šç›´æ¥åˆ›å»ºæ–°è„šæœ¬
touch check-user-data.js

# âœ… æ­£ç¡®åšæ³•ï¼šå…ˆæœç´¢
grep -r "check.*data" scripts/
# å‘ç°å·²æœ‰ database/comprehensive-db-check.jsï¼Œæ‰©å±•å®ƒè€Œä¸æ˜¯æ–°å»º
```

### è§„åˆ™2: ä¸€ä¸ªè„šæœ¬ä¸€ä¸ªèŒè´£

**åŸåˆ™**ï¼šæ¯ä¸ªè„šæœ¬åªåšä¸€ä»¶äº‹ï¼Œåšå¥½ä¸€ä»¶äº‹

**ç¤ºä¾‹**ï¼š
- âœ… **å¥½**: `database/comprehensive-db-check.js` åªåšæ•°æ®åº“å®Œæ•´æ€§æ£€æŸ¥
- âŒ **å·®**: `do-everything.js` è¯•å›¾åšæ‰€æœ‰äº‹æƒ…

**åˆ¤æ–­æ ‡å‡†**ï¼š
- è„šæœ¬åç§°èƒ½å¦ä¸€å¥è¯è¯´æ¸…æ¥šå®ƒçš„åŠŸèƒ½ï¼Ÿ
- å¦‚æœä¸èƒ½ï¼Œè¯´æ˜èŒè´£ä¸æ¸…æ™°ï¼Œéœ€è¦æ‹†åˆ†

### è§„åˆ™3: æ¯æœˆæ¸…ç†ä¸€æ¬¡

**æ¸…ç†æµç¨‹**ï¼ˆæ¯æœˆç¬¬ä¸€ä¸ªå·¥ä½œæ—¥æ‰§è¡Œï¼‰ï¼š

1. **åˆ—å‡ºæœªä½¿ç”¨è„šæœ¬**ï¼ˆ5åˆ†é’Ÿï¼‰
   ```bash
   # æŸ¥æ‰¾3ä¸ªæœˆæœªä¿®æ”¹çš„è„šæœ¬
   find scripts/ -name "*.js" -type f -mtime +90
   ```

2. **ç¡®è®¤æ˜¯å¦è¿˜éœ€è¦**ï¼ˆ5åˆ†é’Ÿï¼‰
   - ä¸å›¢é˜Ÿç¡®è®¤è¿™äº›è„šæœ¬æ˜¯å¦è¿˜åœ¨ä½¿ç”¨
   - å¦‚æœä¸ç¡®å®šï¼Œä¿ç•™ä¸€ä¸ªæœˆè§‚å¯Ÿ

3. **æ¸…ç†æ— ç”¨è„šæœ¬**ï¼ˆ2åˆ†é’Ÿï¼‰
   ```bash
   # ç›´æ¥åˆ é™¤ï¼ˆæ¨èï¼Œå› ä¸ºGitæœ‰å†å²ï¼‰
   git rm scripts/xxx.js
   
   # æäº¤åˆ é™¤
   git commit -m "chore: remove unused script xxx.js"
   ```

---

## ğŸ“– å¸¸ç”¨è„šæœ¬è¯´æ˜

### æ•°æ®åº“ç›¸å…³è„šæœ¬ (database/)

#### `comprehensive-db-check.js`
**åŠŸèƒ½**: å…¨é¢æ£€æŸ¥æ•°æ®åº“æ•°æ®å®Œæ•´æ€§

**ä½¿ç”¨æ–¹æ³•**:
```bash
node scripts/database/comprehensive-db-check.js
```

**æ£€æŸ¥é¡¹ç›®**:
- å¤–é”®å®Œæ•´æ€§
- æ•°æ®ä¸€è‡´æ€§
- ç´¢å¼•å¥åº·åº¦
- è¡¨ç»“æ„å®Œæ•´æ€§

---

#### `optimize-database.sh`
**åŠŸèƒ½**: ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½

**ä½¿ç”¨æ–¹æ³•**:
```bash
bash scripts/database/optimize-database.sh
```

**ä¼˜åŒ–å†…å®¹**:
- è¡¨ä¼˜åŒ–
- ç´¢å¼•é‡å»º
- ç»Ÿè®¡ä¿¡æ¯æ›´æ–°

---

#### `restore-database-from-local.sh`
**åŠŸèƒ½**: ä»æœ¬åœ°å¤‡ä»½æ¢å¤æ•°æ®åº“

**ä½¿ç”¨æ–¹æ³•**:
```bash
bash scripts/database/restore-database-from-local.sh [backup_file]
```

---

### ç³»ç»Ÿç»´æŠ¤è„šæœ¬ (system/)

#### `final_quality_check.js`
**åŠŸèƒ½**: ç³»ç»Ÿè´¨é‡å…¨é¢æ£€æŸ¥

**ä½¿ç”¨æ–¹æ³•**:
```bash
node scripts/system/final_quality_check.js
```

**æ£€æŸ¥é¡¹ç›®**:
- ESLintä»£ç è´¨é‡
- ä¾èµ–åŒ…å®‰å…¨æ€§
- é…ç½®æ–‡ä»¶å®Œæ•´æ€§
- æ•°æ®åº“è¿æ¥çŠ¶æ€

---

#### `process-manager.sh`
**åŠŸèƒ½**: è¿›ç¨‹ç®¡ç†å·¥å…·

**ä½¿ç”¨æ–¹æ³•**:
```bash
# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€
bash scripts/system/process-manager.sh status

# é‡å¯æœåŠ¡
bash scripts/system/process-manager.sh restart
```

---

### éƒ¨ç½²è„šæœ¬ (deployment/)

#### `setup-sealos.sh`
**åŠŸèƒ½**: é…ç½®Sealosäº‘ç¯å¢ƒ

**ä½¿ç”¨æ–¹æ³•**:
```bash
bash scripts/deployment/setup-sealos.sh
```

---

### å·¥å…·è„šæœ¬ (toolkit/)

#### `database-toolkit.js`
**åŠŸèƒ½**: æ•°æ®åº“æ“ä½œå·¥å…·é›†

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å¤‡ä»½æ•°æ®åº“
node scripts/toolkit/database-toolkit.js backup

# æŸ¥è¯¢æ•°æ®
node scripts/toolkit/database-toolkit.js query
```

---

#### `generate-api-docs.js`
**åŠŸèƒ½**: è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£

**ä½¿ç”¨æ–¹æ³•**:
```bash
node scripts/toolkit/generate-api-docs.js
```

**è¾“å‡ºä½ç½®**: `docs/api/`

---

### ç»´æŠ¤è„šæœ¬ (maintenance/)

#### `cleanup.js`
**åŠŸèƒ½**: ç³»ç»Ÿæ¸…ç†ç»´æŠ¤

**ä½¿ç”¨æ–¹æ³•**:
```bash
node scripts/maintenance/cleanup.js
```

**æ¸…ç†å†…å®¹**:
- ä¸´æ—¶æ–‡ä»¶
- è¿‡æœŸæ—¥å¿—
- æ— ç”¨æ•°æ®

---

#### `update-prize-probabilities.js`
**åŠŸèƒ½**: æ›´æ–°å¥–å“æ¦‚ç‡é…ç½®

**ä½¿ç”¨æ–¹æ³•**:
```bash
node scripts/maintenance/update-prize-probabilities.js
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### åˆ›å»ºæ–°è„šæœ¬æ—¶

1. **å‘½åè§„èŒƒ**
   - ä½¿ç”¨kebab-case: `check-data.js` âœ…
   - é¿å…é©¼å³°: `checkData.js` âŒ
   - åç§°è¦æœ‰æ„ä¹‰: `script1.js` âŒ

2. **æ”¾ç½®ä½ç½®**
   - æ ¹æ®åŠŸèƒ½æ”¾åˆ°å¯¹åº”ç›®å½•
   - ä¸ç¡®å®šæ—¶å’¨è¯¢å›¢é˜Ÿ

3. **ä»£ç è§„èŒƒ**
   ```javascript
   /**
    * è„šæœ¬åç§°: æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
    * åˆ›å»ºæ—¶é—´: 2025-10-14
    * ç»´æŠ¤äºº: å¼€å‘å›¢é˜Ÿ
    * åŠŸèƒ½æè¿°: æ£€æŸ¥æ•°æ®åº“æ•°æ®å®Œæ•´æ€§ï¼ŒåŒ…æ‹¬å¤–é”®ã€ç´¢å¼•ç­‰
    * ä½¿ç”¨æ–¹æ³•: node scripts/database/check-data.js
    */
   ```

### ç»´æŠ¤ç°æœ‰è„šæœ¬æ—¶

1. **ä¿®æ”¹å‰å¤‡ä»½**
   ```bash
   cp scripts/xxx.js scripts/xxx.js.backup
   ```

2. **æµ‹è¯•ååˆ é™¤å¤‡ä»½**
   ```bash
   rm scripts/xxx.js.backup
   ```

3. **æ›´æ–°æ³¨é‡Šå’Œæ–‡æ¡£**
   - ä¿®æ”¹åŠŸèƒ½åæ›´æ–°æ–‡ä»¶å¼€å¤´çš„æ³¨é‡Š
   - æ›´æ–°æœ¬READMEçš„ç›¸å…³è¯´æ˜

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åˆ¤æ–­è„šæœ¬æ˜¯å¦è¿˜åœ¨ä½¿ç”¨ï¼Ÿ

A: å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š
```bash
# 1. æŸ¥çœ‹æœ€åä¿®æ”¹æ—¶é—´
ls -lht scripts/database/

# 2. æœç´¢ä»£ç ä¸­æ˜¯å¦æœ‰å¼•ç”¨
grep -r "scripts/xxx.js" .

# 3. æŸ¥çœ‹Gitæäº¤å†å²
git log --all -- scripts/xxx.js
```

### Q: è„šæœ¬åŠŸèƒ½é‡å¤äº†æ€ä¹ˆåŠï¼Ÿ

A: éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
1. ä¿ç•™åŠŸèƒ½æ›´å®Œæ•´çš„é‚£ä¸ª
2. å°†å¦ä¸€ä¸ªè„šæœ¬çš„ç‹¬ç‰¹åŠŸèƒ½åˆå¹¶è¿‡æ¥
3. åˆ é™¤åŠŸèƒ½è¾ƒå°‘çš„è„šæœ¬
4. æ›´æ–°æ‰€æœ‰å¼•ç”¨

### Q: ä¸ç¡®å®šè„šæœ¬æ˜¯å¦è¿˜éœ€è¦æ€ä¹ˆåŠï¼Ÿ

A: 
1. ä¸è¦ç«‹å³åˆ é™¤
2. ä¸å›¢é˜Ÿè®¨è®ºç¡®è®¤
3. å¦‚æœç¡®å®ä¸éœ€è¦ï¼Œç›´æ¥åˆ é™¤ï¼ˆGitæœ‰å†å²è®°å½•ï¼‰

---

## ğŸ“Š Scriptsæ•°é‡è¶‹åŠ¿

**ç›®æ ‡**: ä¿æŒåœ¨ 30-40ä¸ªè„šæœ¬

| æ—¶é—´ | è„šæœ¬æ•°é‡ | è¯´æ˜ |
|------|---------|------|
| 2025-08 | 50+ | å†å²ç´¯ç§¯ï¼Œä¸¥é‡å†—ä½™ |
| 2025-10-09 | 39 | å¤§å¹…æ¸…ç†ï¼Œç§»åˆ°archive |
| 2025-10-14 | 36 | åˆ é™¤archiveï¼Œæ•´ç†ç›®å½•ç»“æ„ |

**ç›®æ ‡**: é•¿æœŸä¿æŒåœ¨30-40ä¸ªï¼Œé‡è´¨é‡ä¸é‡æ•°é‡

---

## ğŸ¯ æ€»ç»“

**æ ¸å¿ƒç†å¿µ**: 
- ç®€å•ä¼˜äºå¤æ‚
- æ¸…æ™°ä¼˜äºå®Œç¾
- ç»´æŠ¤ä¼˜äºåˆ›å»º

**ä¸‰æ¡é“å¾‹**:
1. å…ˆæœç´¢ï¼Œå†åˆ›å»º
2. ä¸€ä¸ªè„šæœ¬ä¸€ä¸ªèŒè´£
3. æ¯æœˆæ¸…ç†ä¸€æ¬¡

éµå®ˆè¿™ä¸‰æ¡è§„åˆ™ï¼Œå°±èƒ½ä¿æŒScriptsç›®å½•é•¿æœŸæ¸…çˆ½ï¼

---

**æ–‡æ¡£ç»´æŠ¤**: å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ14æ—¥ 23:55:00 åŒ—äº¬æ—¶é—´

