{
  "name": "restaurant-lottery-system-v2",
  "version": "2.0.0",
  "description": "餐厅积分抽奖系统 - 全新多业务线分层存储架构 v2.0",
  "main": "app.js",
  "author": "Restaurant Lottery Team",
  "license": "MIT",
  "engines": {
    "node": ">=16.0.0",
    "npm": ">=8.0.0"
  },
  "scripts": {
    "start": "node app.js",
    "dev": "nodemon app.js",
    "test": "jest --testTimeout=30000",
    "lint": "eslint . --ext .js",
    "lint:fix": "eslint . --ext .js --fix",
    "db:migrate": "npx sequelize-cli db:migrate",
    "db:migrate:undo": "npx sequelize-cli db:migrate:undo",
    "db:seed": "npx sequelize-cli db:seed:all",
    "backup": "node scripts/backup-database.js",
    "test:new-feature": "node scripts/test-new-feature.js",
    "deploy:check": "npm run lint && npm run test && npm run test:new-feature"
  },
  "dependencies": {
    "aws-sdk": "^2.1691.0",
    "bcryptjs": "^2.4.3",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "crypto": "^1.0.1",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-rate-limit": "^7.1.5",
    "helmet": "^7.1.0",
    "joi": "^17.11.0",
    "jsonwebtoken": "^9.0.2",
    "lodash": "^4.17.21",
    "moment": "^2.29.4",
    "multer": "^1.4.5-lts.1",
    "mysql2": "^3.6.5",
    "node-cron": "^3.0.3",
    "path": "^0.12.7",
    "redis": "^5.8.0",
    "sequelize": "^6.35.2",
    "sharp": "^0.32.6",
    "socket.io": "^4.8.1",
    "uuid": "^9.0.1",
    "winston": "^3.11.0",
    "ws": "^8.18.3"
  },
  "devDependencies": {
    "eslint": "^8.55.0",
    "eslint-config-standard": "^17.1.0",
    "eslint-plugin-import": "^2.29.0",
    "eslint-plugin-node": "^11.1.0",
    "eslint-plugin-promise": "^6.1.1",
    "husky": "^8.0.3",
    "jest": "^29.7.0",
    "lint-staged": "^15.2.0",
    "nodemon": "^3.0.2",
    "prettier": "^3.1.1",
    "sequelize-cli": "^6.6.2",
    "supertest": "^6.3.3"
  },
  "keywords": [
    "restaurant",
    "lottery",
    "points",
    "storage",
    "layered-architecture",
    "multi-business",
    "image-management",
    "sealos",
    "express",
    "sequelize",
    "mysql"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/your-org/restaurant-lottery-system-v2.git"
  },
  "bugs": {
    "url": "https://github.com/your-org/restaurant-lottery-system-v2/issues"
  },
  "homepage": "https://github.com/your-org/restaurant-lottery-system-v2#readme",
  "jest": {
    "testEnvironment": "node",
    "collectCoverageFrom": [
      "**/*.js",
      "!node_modules/**",
      "!coverage/**",
      "!app-v2.js",
      "!**/*.config.js"
    ],
    "testMatch": [
      "**/__tests__/**/*.js",
      "**/?(*.)+(spec|test).js"
    ]
  },
  "eslintConfig": {
    "env": {
      "node": true,
      "es2021": true,
      "jest": true
    },
    "extends": [
      "standard"
    ],
    "parserOptions": {
      "ecmaVersion": 12,
      "sourceType": "module"
    },
    "rules": {
      "no-console": "off",
      "camelcase": "off",
      "no-unused-vars": [
        "error",
        {
          "argsIgnorePattern": "^_"
        }
      ]
    }
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.js": [
      "eslint --fix",
      "prettier --write",
      "git add"
    ]
  },
  "architecture": {
    "name": "Multi-Business Layered Storage Architecture",
    "version": "2.0.0",
    "description": "全新的多业务线分层存储架构，支持lottery、exchange、trade、uploads四大业务模块",
    "features": [
      "统一图片资源管理",
      "智能分层存储 (hot/standard/archive)",
      "多业务线支持",
      "自动缩略图生成",
      "批量操作支持",
      "RESTful API设计",
      "完整的权限控制",
      "云原生架构设计"
    ],
    "businessTypes": [
      "lottery - 抽奖业务",
      "exchange - 兑换业务",
      "trade - 交易业务",
      "uploads - 用户上传"
    ],
    "storageStrategy": {
      "hot": "新上传和活跃资源，快速访问",
      "standard": "中期存储，平衡性能和成本",
      "archive": "长期存储，低成本"
    },
    "techStack": [
      "Node.js + Express",
      "MySQL + Sequelize ORM",
      "Sealos对象存储",
      "Sharp图片处理",
      "JWT认证",
      "Multer文件上传"
    ]
  },
  "performance": {
    "targetMetrics": {
      "apiResponseTime": "< 100ms",
      "fileUploadTime": "< 2s",
      "databaseQueryTime": "< 50ms",
      "systemAvailability": "> 99.95%",
      "concurrentUsers": "1000+",
      "storageCapacity": "20M+ images"
    },
    "optimizations": [
      "数据库索引优化",
      "图片缓存机制",
      "智能存储分层",
      "批量操作优化",
      "连接池管理",
      "压缩和CDN加速"
    ]
  },
  "deployment": {
    "environments": [
      "development",
      "testing",
      "staging",
      "production"
    ],
    "containerization": {
      "docker": "支持Docker容器化部署",
      "kubernetes": "支持Kubernetes集群部署",
      "sealos": "原生支持Sealos云平台部署"
    },
    "monitoring": [
      "健康检查端点 /health",
      "性能指标监控",
      "错误日志记录",
      "业务数据统计"
    ]
  },
  "security": {
    "authentication": "JWT Bearer Token",
    "authorization": "基于角色的权限控制 (RBAC)",
    "dataProtection": [
      "BCrypt密码加密",
      "文件类型验证",
      "文件大小限制",
      "SQL注入防护",
      "XSS防护",
      "CORS配置"
    ],
    "rateLimit": "API请求频率限制",
    "helmet": "HTTP安全头设置"
  }
}
