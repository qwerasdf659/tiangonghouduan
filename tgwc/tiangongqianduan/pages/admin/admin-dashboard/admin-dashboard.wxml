<!--pages/admin/admin-dashboard/admin-dashboard.wxml - ç®¡ç†å‘˜ä»ªè¡¨æ¿é¡µé¢æ¨¡æ¿-->

<view class="admin-dashboard-container">
  <!-- ğŸ”§ ä¿®å¤ï¼šè¿”å›æŒ‰é’®å§‹ç»ˆå¯è§ï¼Œä¸å—åŠ è½½çŠ¶æ€å½±å“ -->
  <view class="fixed-back-button" bindtap="onBackTap">
    <text class="back-icon">â—€</text>
  </view>

  <!-- ğŸ”§ å¼ºåŒ–ï¼šä¸»è¦å†…å®¹åŒºåŸŸ - åªæœ‰åœ¨æ‰€æœ‰æ¡ä»¶æ»¡è¶³æ—¶æ‰æ˜¾ç¤ºå®Œæ•´å†…å®¹ -->
  <view wx:if="{{!loading && initialized && accessChecked && contentReady && !renderLocked && isLoggedIn && isAdmin}}">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <view class="dashboard-header">
      <view class="header-content">
        <view class="header-title-full">
          <text class="title-text">ğŸ‘‘ ç®¡ç†å‘˜ä»ªè¡¨æ¿</text>
          <text class="title-desc">Administrator Dashboard</text>
        </view>
        <view class="admin-badge">
          <text class="badge-text">ADMIN</text>
        </view>
      </view>
    </view>

    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-info-card">
      <view class="user-avatar">
        <text class="avatar-icon">ğŸ‘‘</text>
      </view>
      <view class="user-details">
        <text class="user-name">{{userInfo.mobile || 'ç®¡ç†å‘˜'}}</text>
        <text class="user-role">ç³»ç»Ÿç®¡ç†å‘˜</text>
      </view>
      <view class="user-status">
        <text class="status-text">åœ¨çº¿</text>
        <view class="status-dot"></view>
      </view>
    </view>

    <!-- ç®¡ç†å‘˜åŠŸèƒ½èœå• -->
    <view class="admin-functions-section">
      <view class="section-title">
        <text class="title-text">ğŸ”§ ç®¡ç†åŠŸèƒ½</text>
        <text class="function-count">{{adminMenuItems.length}}ä¸ªåŠŸèƒ½</text>
      </view>

      <view class="functions-grid">
        <view class="function-item" wx:for="{{adminMenuItems}}" wx:key="id" bindtap="onMenuItemTap" data-item="{{item}}"
          style="border-left: 4rpx solid {{item.color}}">
          <view class="function-icon" style="color: {{item.color}}">
            <text class="icon-emoji">{{item.icon}}</text>
          </view>
          <view class="function-content">
            <text class="function-name">{{item.name}}</text>
            <text class="function-desc">{{item.description}}</text>
          </view>
          <view class="function-arrow">
            <text class="arrow-text">â–¶</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <view class="dashboard-footer">
      <text class="footer-text">é¤å…ç§¯åˆ†æŠ½å¥–ç³»ç»Ÿ v2.0 ç®¡ç†å‘˜æ§åˆ¶å°</text>
      <text class="footer-copyright">Â© 2024 All Rights Reserved</text>
    </view>
  </view>

  <!-- ğŸ”§ å¼ºåŒ–ï¼šåŠ è½½çŠ¶æ€ - åœ¨ä»»ä½•æ¡ä»¶ä¸æ»¡è¶³æ—¶æ˜¾ç¤º -->
  <view class="loading-overlay" wx:if="{{loading || !initialized || !accessChecked || !contentReady || renderLocked}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">
        {{loading ? 'æ­£åœ¨éªŒè¯æƒé™...' :
        (!accessChecked ? 'æ£€æŸ¥æƒé™ä¸­...' :
        (!contentReady ? 'å‡†å¤‡å†…å®¹ä¸­...' :
        (renderLocked ? 'å†…å®¹åŠ è½½ä¸­...' : 'åˆå§‹åŒ–ä¸­...')))}}
      </text>
      <text class="loading-desc">è¯·ç¨å€™ï¼Œç¡®ä¿å†…å®¹å®Œæ•´åŠ è½½</text>
    </view>
  </view>
</view>