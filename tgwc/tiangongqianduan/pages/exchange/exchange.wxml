<!-- pages/exchange/exchange.wxml - äº¤æ˜“å¸‚åœºé¡µé¢æ¨¡æ¿ï¼ˆåŸºäºv2.0æ¥å£æ ‡å‡†ï¼‰ -->
<view class="exchange-container">
  <!-- æ°´å¹³æ’åˆ—å¯¼èˆªæ¨¡å— -->
  <view class="nav-module horizontal" hover-class="none">
    <!-- å¯¼èˆªæŒ‰é’®å®¹å™¨ -->
    <view class="nav-buttons-row" hover-class="none">
      <!-- å•†å“å…‘æ¢ -->
      <view class="nav-item nav-item-horizontal {{currentTab === 'market' ? 'active' : 'trade-market-nav'}}"
        bindtap="onGoToTradeMarket" hover-class="none">
        <view class="nav-content" hover-class="none">
          <!-- å¯¼èˆªå›¾æ ‡å®¹å™¨ -->
          <view class="nav-icon-container" hover-class="none">
            <view class="icon-wrapper" hover-class="none">
              <icon class="nav-icon" type="download" size="20" />
            </view>
          </view>

          <!-- å¯¼èˆªæ–‡å­— -->
          <view class="text-wrapper" hover-class="none">
            <text class="nav-text">å•†å“å…‘æ¢</text>
          </view>
        </view>

        <!-- å½“å‰çŠ¶æ€æ ‡ç­¾ -->
        <view class="nav-status current" wx:if="{{currentTab === 'market'}}">å½“å‰</view>
      </view>

      <!-- äº¤æ˜“å¸‚åœº -->
      <view class="nav-item nav-item-horizontal {{currentTab === 'exchange' ? 'active' : ''}}" bindtap="onGoToExchange"
        hover-class="none">
        <view class="nav-content" hover-class="none">
          <view class="icon-wrapper" hover-class="none">
            <icon class="nav-icon" type="success" size="20" />
          </view>
          <view class="text-wrapper" hover-class="none">
            <text class="nav-text">äº¤æ˜“å¸‚åœº</text>
          </view>
        </view>
        <view class="nav-status current" wx:if="{{currentTab === 'exchange'}}">å½“å‰</view>
      </view>
    </view>
  </view>

  <!-- äº¤æ˜“å¸‚åœºå†…å®¹åŒºåŸŸ -->
  <view wx:if="{{currentTab === 'exchange'}}" class="exchange-content">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <view class="header">
      <view class="user-info">
        <text class="welcome">ğŸ äº¤æ˜“å¸‚åœº</text>
        <view class="points-row">
          <view class="points-info">
            <text class="points-label">å¯ç”¨ç§¯åˆ†ï¼š</text>
            <text class="points-value">{{totalPoints}}</text>
          </view>
          <view class="points-info frozen">
            <text class="points-label">å†»ç»“ç§¯åˆ†ï¼š</text>
            <text class="points-value frozen">{{frozenPoints || 0}}</text>
          </view>
        </view>
      </view>

      <!-- æœç´¢å’Œç­›é€‰åŠŸèƒ½ -->
      <view class="search-filter">
        <view class="search-box">
          <input class="search-input" placeholder="æœç´¢å•†å“åç§°..." value="{{searchKeyword}}" bindinput="onSearchInput" />
          <text class="search-icon">ğŸ”</text>
        </view>

        <view class="filter-buttons">
          <button class="filter-btn {{currentFilter === 'all' ? 'active' : ''}}" bindtap="onFilterChange"
            data-filter="all">
            å…¨éƒ¨
          </button>
          <button class="filter-btn {{currentFilter === 'available' ? 'active' : ''}}" bindtap="onFilterChange"
            data-filter="available">
            å¯å…‘æ¢
          </button>
          <button class="filter-btn {{currentFilter === 'low-price' ? 'active' : ''}}" bindtap="onFilterChange"
            data-filter="low-price">
            ä½ç§¯åˆ†
          </button>
          <button class="advanced-filter-btn {{showAdvancedFilter ? 'active' : ''}}" bindtap="onToggleAdvancedFilter">
            é«˜çº§ç­›é€‰ {{showAdvancedFilter ? 'ğŸ”¼' : 'ğŸ”½'}}
          </button>
        </view>

        <!-- é«˜çº§ç­›é€‰é¢æ¿ -->
        <view class="advanced-filter-panel" wx:if="{{showAdvancedFilter}}">
          <!-- åˆ†ç±»ç­›é€‰ -->
          <view class="filter-row">
            <text class="filter-label">å•†å“åˆ†ç±»</text>
            <view class="filter-options">
              <button class="option-btn {{categoryFilter === 'all' ? 'active' : ''}}" bindtap="onCategoryFilterChange"
                data-category="all">å…¨éƒ¨</button>
              <button class="option-btn {{categoryFilter === 'ä¼˜æƒ åˆ¸' ? 'active' : ''}}" bindtap="onCategoryFilterChange"
                data-category="ä¼˜æƒ åˆ¸">ä¼˜æƒ åˆ¸</button>
              <button class="option-btn {{categoryFilter === 'å®ç‰©å•†å“' ? 'active' : ''}}" bindtap="onCategoryFilterChange"
                data-category="å®ç‰©å•†å“">å®ç‰©å•†å“</button>
              <button class="option-btn {{categoryFilter === 'è™šæ‹Ÿç‰©å“' ? 'active' : ''}}" bindtap="onCategoryFilterChange"
                data-category="è™šæ‹Ÿç‰©å“">è™šæ‹Ÿç‰©å“</button>
            </view>
          </view>

          <!-- ç§¯åˆ†èŒƒå›´ç­›é€‰ -->
          <view class="filter-row">
            <text class="filter-label">ç§¯åˆ†èŒƒå›´</text>
            <view class="filter-options">
              <button class="option-btn {{pointsRange === 'all' ? 'active' : ''}}" bindtap="onPointsRangeChange"
                data-range="all">å…¨éƒ¨</button>
              <button class="option-btn {{pointsRange === '0-500' ? 'active' : ''}}" bindtap="onPointsRangeChange"
                data-range="0-500">0-500åˆ†</button>
              <button class="option-btn {{pointsRange === '500-1000' ? 'active' : ''}}" bindtap="onPointsRangeChange"
                data-range="500-1000">500-1000åˆ†</button>
              <button class="option-btn {{pointsRange === '1000-2000' ? 'active' : ''}}" bindtap="onPointsRangeChange"
                data-range="1000-2000">1000-2000åˆ†</button>
              <button class="option-btn {{pointsRange === '2000+' ? 'active' : ''}}" bindtap="onPointsRangeChange"
                data-range="2000+">2000åˆ†ä»¥ä¸Š</button>
            </view>
          </view>

          <!-- åº“å­˜çŠ¶æ€ç­›é€‰ -->
          <view class="filter-row">
            <text class="filter-label">åº“å­˜çŠ¶æ€</text>
            <view class="filter-options">
              <button class="option-btn {{stockFilter === 'all' ? 'active' : ''}}" bindtap="onStockFilterChange"
                data-filter="all">å…¨éƒ¨</button>
              <button class="option-btn {{stockFilter === 'in-stock' ? 'active' : ''}}" bindtap="onStockFilterChange"
                data-filter="in-stock">åº“å­˜å……è¶³</button>
              <button class="option-btn {{stockFilter === 'low-stock' ? 'active' : ''}}" bindtap="onStockFilterChange"
                data-filter="low-stock">åº“å­˜ç´§å¼ </button>
            </view>
          </view>

          <!-- æ’åºæ–¹å¼ -->
          <view class="filter-row">
            <text class="filter-label">æ’åºæ–¹å¼</text>
            <view class="filter-options">
              <button class="option-btn {{sortBy === 'default' ? 'active' : ''}}" bindtap="onSortByChange"
                data-sort="default">é»˜è®¤</button>
              <button class="option-btn {{sortBy === 'points-asc' ? 'active' : ''}}" bindtap="onSortByChange"
                data-sort="points-asc">ç§¯åˆ†å‡åº</button>
              <button class="option-btn {{sortBy === 'points-desc' ? 'active' : ''}}" bindtap="onSortByChange"
                data-sort="points-desc">ç§¯åˆ†é™åº</button>
              <button class="option-btn {{sortBy === 'rating-desc' ? 'active' : ''}}" bindtap="onSortByChange"
                data-sort="rating-desc">è¯„åˆ†é™åº</button>
              <button class="option-btn {{sortBy === 'stock-desc' ? 'active' : ''}}" bindtap="onSortByChange"
                data-sort="stock-desc">åº“å­˜é™åº</button>
            </view>
          </view>

          <!-- ç­›é€‰æ“ä½œ -->
          <view class="filter-actions">
            <button class="reset-btn" bindtap="onResetFilters">é‡ç½®ç­›é€‰</button>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-container" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- å•†å“ç½‘æ ¼ -->
    <view class="products-section" wx:else>
      <view class="section-title">
        <view class="title-header">
          <text class="title-text">ğŸ“¦ {{currentFilter === 'all' ? 'å…¨éƒ¨å•†å“' : (currentFilter === 'available' ? 'å¯å…‘æ¢å•†å“' :
            'ä½ç§¯åˆ†å•†å“')}}</text>
          <text class="product-count">({{filteredProducts.length}}/{{products.length}})</text>
        </view>
        <view class="tips-container">
          <text class="tips">æŒ‰ç§¯åˆ†æ’åº â€¢ å®æ—¶åº“å­˜åŒæ­¥ â€¢ å·²åŠ è½½{{products.length}}ä¸ªå•†å“</text>
        </view>
      </view>

      <!-- è°ƒè¯•ä¿¡æ¯é¢æ¿å·²ç§»é™¤ - ç”Ÿäº§ç¯å¢ƒä¸éœ€è¦æ˜¾ç¤º -->

      <!-- å•†å“ç½‘æ ¼å¸ƒå±€ -->
      <view class="products-grid">
        <view
          class="product-item {{item.stock <= 0 ? 'sold-out' : ''}} {{totalPoints < item.exchange_points ? 'insufficient-points' : ''}}"
          wx:for="{{filteredProducts}}" wx:key="id" bindtap="onProductTap" data-product="{{item}}">
          <!-- å•†å“å›¾ç‰‡ -->
          <view class="product-image-container">
            <!-- å›¾ç‰‡åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <view wx:if="{{item.imageStatus === 'loading'}}" class="image-loading">
              <text class="loading-text">åŠ è½½ä¸­...</text>
            </view>

            <!-- å•†å“å›¾ç‰‡ -->
            <image class="product-image {{item.imageStatus === 'error' ? 'image-error' : ''}}" src="{{item.image}}"
              mode="aspectFill" bindtap="onPreviewImage" binderror="onImageError" bindload="onImageLoad"
              data-url="{{item.image}}" data-index="{{index}}" data-image-id="product_{{index}}"
              data-src="{{item.image}}" />

            <!-- å›¾ç‰‡åŠ è½½å¤±è´¥æç¤º -->
            <view wx:if="{{item.imageStatus === 'error'}}" class="image-error-tip">
              <text class="error-text">å›¾ç‰‡åŠ è½½å¤±è´¥</text>
            </view>

            <!-- çƒ­é—¨æ ‡ç­¾ -->
            <view class="hot-badge" wx:if="{{item.is_hot}}">
              ğŸ”¥ çƒ­é—¨
            </view>

            <!-- åº“å­˜æ ‡ç­¾ -->
            <view class="stock-badge {{item.stock <= 5 ? 'low-stock' : ''}}">
              å‰©ä½™{{item.stock}}
            </view>

            <!-- å”®ç½„é®ç½© -->
            <view class="sold-out-overlay" wx:if="{{item.stock <= 0}}">
              <text>å·²å”®ç½„</text>
            </view>

            <!-- ç§¯åˆ†ä¸è¶³é®ç½© -->
            <view class="insufficient-overlay" wx:if="{{totalPoints < item.exchange_points && item.stock > 0}}">
              <text>ç§¯åˆ†ä¸è¶³</text>
            </view>
          </view>

          <!-- å•†å“ä¿¡æ¯ -->
          <view class="product-info">
            <view class="product-name">{{item.name}}</view>
            <view class="product-desc">{{item.description}}</view>
            <view class="product-points">
              <text class="points-icon">ğŸ’°</text>
              <text class="points-text">{{item.exchange_points}}ç§¯åˆ†</text>
            </view>

            <!-- å•†å“è¯„åˆ† -->
            <view class="product-rating" wx:if="{{item.rating}}">
              <text class="rating-stars">â­â­â­â­â­</text>
              <text class="rating-text">{{item.rating}}</text>
            </view>
          </view>

          <!-- å…‘æ¢æŒ‰é’® -->
          <view class="exchange-btn-container">
            <button class="exchange-btn {{item.stock <= 0 || totalPoints < item.exchange_points ? 'disabled' : ''}}"
              disabled="{{item.stock <= 0 || totalPoints < item.exchange_points}}">
              {{item.stock <= 0 ? 'å·²å”®ç½„' : (totalPoints < item.exchange_points ? 'ç§¯åˆ†ä¸è¶³' : 'ç«‹å³å…‘æ¢' )}} </button>
          </view>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{!loading && filteredProducts.length === 0}}">
        <view class="empty-icon">ğŸ“¦</view>
        <text class="empty-text">{{searchKeyword ? 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å•†å“' : 'æš‚æ— å•†å“'}}</text>
        <button class="retry-btn" bindtap="onClearSearch" wx:if="{{searchKeyword}}">
          æ¸…é™¤æœç´¢
        </button>
        <button class="retry-btn" bindtap="onRefreshProducts" wx:else>
          é‡æ–°åŠ è½½
        </button>
      </view>

      <!-- åˆ†é¡µå¯¼èˆª -->
      <view class="pagination" wx:if="{{!loading && filteredProducts.length > 0}}">
        <view class="pagination-info">
          <text>ç¬¬ {{currentPage}} é¡µï¼Œå…± {{totalPages}} é¡µ | å…± {{totalProducts}} ä»¶å•†å“</text>
        </view>

        <!-- ğŸ¯ åˆå¹¶å¸ƒå±€ï¼šä¸»æ§åˆ¶åŒºåŸŸ + é¡µç æ•°å­—åŒºåŸŸåœ¨ä¸€è¡Œ -->
        <view class="pagination-row unified-controls"
          style="display: flex; justify-content: center; align-items: center; gap: 6rpx; margin-bottom: 16rpx; flex-wrap: wrap;">

          <!-- ä¸Šä¸€é¡µæŒ‰é’® -->
          <button class="page-btn prev-btn {{currentPage === 1 ? 'disabled' : ''}}" bindtap="onPrevPage"
            disabled="{{currentPage === 1}}">
            â† ä¸Šä¸€é¡µ
          </button>

          <!-- ğŸ¯ è·³è½¬åŠŸèƒ½ -->
          <view class="page-jump center-jump">
            <text>è·³è½¬åˆ°ç¬¬</text>
            <input class="page-input" type="number" placeholder="{{currentPage}}" bindinput="onPageInputChange"
              bindconfirm="onPageInputConfirm" />
            <text>é¡µ</text>
          </view>

          <!-- ä¸‹ä¸€é¡µæŒ‰é’® -->
          <button class="page-btn next-btn {{currentPage === totalPages ? 'disabled' : ''}}" bindtap="onNextPage"
            disabled="{{currentPage === totalPages}}">
            ä¸‹ä¸€é¡µ â†’
          </button>

          <!-- ğŸ“Š é¡µç æ•°å­—åŒºåŸŸ -->
          <view class="page-numbers inline-numbers">
            <!-- å½“æ€»é¡µæ•°å°äºç­‰äº7æ—¶ï¼Œæ˜¾ç¤ºæ‰€æœ‰é¡µç  -->
            <block wx:if="{{totalPages <= 7}}">
              <block wx:for="{{totalPages}}" wx:key="*this">
                <button class="page-number {{currentPage === (item + 1) ? 'active' : ''}}" bindtap="onPageChange"
                  data-page="{{item + 1}}">{{item + 1}}</button>
              </block>
            </block>

            <!-- å½“æ€»é¡µæ•°å¤§äº7æ—¶ï¼Œä½¿ç”¨çœç•¥å·æ˜¾ç¤º -->
            <block wx:else>
              <!-- ç¬¬ä¸€é¡µ -->
              <button class="page-number {{currentPage === 1 ? 'active' : ''}}" bindtap="onPageChange"
                data-page="1">1</button>

              <!-- å·¦ä¾§çœç•¥å· -->
              <text class="page-ellipsis" wx:if="{{currentPage > 4}}">...</text>

              <!-- å½“å‰é¡µé™„è¿‘çš„é¡µç  -->
              <block wx:for="{{totalPages}}" wx:key="*this">
                <button class="page-number {{currentPage === (item + 1) ? 'active' : ''}}" bindtap="onPageChange"
                  data-page="{{item + 1}}"
                  wx:if="{{(item + 1) > 1 && (item + 1) < totalPages && (item + 1) >= (currentPage - 2) && (item + 1) <= (currentPage + 2)}}">{{item
                  + 1}}</button>
              </block>

              <!-- å³ä¾§çœç•¥å· -->
              <text class="page-ellipsis" wx:if="{{currentPage < totalPages - 3}}">...</text>

              <!-- æœ€åä¸€é¡µ -->
              <button class="page-number {{currentPage === totalPages ? 'active' : ''}}" bindtap="onPageChange"
                data-page="{{totalPages}}" wx:if="{{totalPages > 1}}">{{totalPages}}</button>
            </block>
          </view>
        </view>
      </view>
    </view>

    <!-- å¿«æ·æ“ä½œ -->
    <view class="quick-actions" wx:if="{{!loading}}">
      <button class="action-btn" bindtap="onRefreshProducts">
        ğŸ”„ åˆ·æ–°å•†å“
      </button>
      <button class="action-btn" bindtap="onSortByPoints">
        ğŸ“Š æŒ‰ç§¯åˆ†æ’åº
      </button>
    </view>

    <!-- å…‘æ¢ç¡®è®¤å¼¹çª— -->
    <view class="confirm-modal" wx:if="{{showConfirm}}">
      <view class="modal-mask" bindtap="onCancelExchange"></view>
      <view class="modal-content">
        <view class="confirm-header">
          <text class="confirm-title">ç¡®è®¤å…‘æ¢</text>
          <view class="close-btn" bindtap="onCancelExchange">Ã—</view>
        </view>

        <view class="product-preview" wx:if="{{selectedProduct}}">
          <image class="preview-image" src="{{selectedProduct.image}}" mode="aspectFill" />
          <view class="preview-info">
            <text class="preview-name">{{selectedProduct.name}}</text>
            <text class="preview-desc">{{selectedProduct.description}}</text>
            <view class="preview-cost">
              <text class="cost-label">å…‘æ¢æ¶ˆè€—ï¼š</text>
              <text class="cost-points">{{selectedProduct.exchange_points}}ç§¯åˆ†</text>
            </view>
            <view class="remaining-info">
              <text class="remaining-label">å…‘æ¢åå‰©ä½™ï¼š</text>
              <text class="remaining-points">{{totalPoints - selectedProduct.exchange_points}}ç§¯åˆ†</text>
            </view>
          </view>
        </view>

        <view class="confirm-footer">
          <button class="cancel-btn" bindtap="onCancelExchange">å–æ¶ˆ</button>
          <button class="confirm-btn" bindtap="onConfirmExchange">ç¡®è®¤å…‘æ¢</button>
        </view>
      </view>
    </view>

    <!-- å…‘æ¢ç»“æœå¼¹çª— -->
    <view class="result-modal" wx:if="{{showResult}}">
      <view class="modal-mask" bindtap="onCloseResult"></view>
      <view class="modal-content">
        <view class="result-header">
          <text class="result-title">ğŸ‰ å…‘æ¢æˆåŠŸ</text>
          <view class="close-btn" bindtap="onCloseResult">Ã—</view>
        </view>

        <view class="result-content" wx:if="{{resultData}}">
          <view class="success-icon">âœ…</view>
          <text class="success-text">æ­å–œæ‚¨æˆåŠŸå…‘æ¢</text>
          <text class="product-name">{{resultData.product.name}}</text>

          <view class="result-details">
            <view class="detail-item">
              <text class="detail-label">è®¢å•ç¼–å·ï¼š</text>
              <text class="detail-value">{{resultData.orderId}}</text>
            </view>
            <view class="detail-item">
              <text class="detail-label">æ¶ˆè€—ç§¯åˆ†ï¼š</text>
              <text class="detail-value">-{{resultData.pointsDeducted}}</text>
            </view>
            <view class="detail-item">
              <text class="detail-label">å‰©ä½™ç§¯åˆ†ï¼š</text>
              <text class="detail-value">{{resultData.remainingPoints}}</text>
            </view>
          </view>

          <text class="pickup-notice">ğŸ“ è¯·å‡­ç¼–å·é¢†å–å•†å“</text>
        </view>

        <view class="result-footer">
          <button class="continue-btn" bindtap="onCloseResult">ç»§ç»­å…‘æ¢</button>
        </view>
      </view>
    </view>

    <!-- è§„åˆ™è¯´æ˜ -->
    <view class="rules-section" wx:if="{{!loading}}">
      <view class="section-title">
        <text>å…‘æ¢è§„åˆ™</text>
      </view>
      <view class="rules-content">
        <view class="rule-item">â€¢ é™é‡å•†å“ï¼Œæ¢å®Œå³æ­¢</view>
        <view class="rule-item">â€¢ åº“å­˜å®æ—¶åŒæ­¥ï¼Œå…ˆåˆ°å…ˆå¾—</view>
        <view class="rule-item">â€¢ å…‘æ¢æˆåŠŸåè¯·å‡­ç¼–å·é¢†å–</view>
        <view class="rule-item">â€¢ ç§¯åˆ†ä¸€ç»å…‘æ¢ä¸å¯é€€å›</view>
      </view>
    </view>
  </view>

  <!-- ğŸª åŒç©ºé—´å•†å“å…‘æ¢ç³»ç»Ÿ -->
  <view wx:if="{{currentTab === 'market'}}" class="dual-space-market">

    <!-- ğŸ¯ ç©ºé—´åˆ‡æ¢å¯¼èˆª -->
    <view class="space-selector">
      <view class="selector-background"></view>
      <view
        class="space-tab {{item.id === currentSpace ? 'active' : ''}} {{item.id === 'premium' && !premiumUnlockStatus.isUnlocked ? 'locked' : ''}}"
        wx:for="{{spaceList}}" wx:key="id" data-space="{{item.id}}" bindtap="onSpaceChange"
        style="color: {{item.id === currentSpace ? item.color : (item.id === 'premium' && !premiumUnlockStatus.isUnlocked ? '#ccc' : '#666')}}">
        <view class="tab-content">
          <text class="tab-name">
            {{item.id === 'premium' && !premiumUnlockStatus.isUnlocked ? 'ğŸ”’' : ''}}{{item.name}}
          </text>
          <text class="tab-subtitle">
            {{item.id === 'premium' && !premiumUnlockStatus.isUnlocked ? 'éœ€è§£é”' : item.subtitle}}
          </text>
        </view>
        <view wx:if="{{item.id === currentSpace}}" class="active-indicator" style="background: {{item.color}}"></view>

        <!-- ğŸ”’ è‡»é€‰ç©ºé—´è§£é”çŠ¶æ€æŒ‡ç¤ºå™¨ -->
        <view wx:if="{{item.id === 'premium'}}" class="unlock-status">
          <!-- å·²è§£é”çŠ¶æ€ -->
          <view wx:if="{{premiumUnlockStatus.isUnlocked}}" class="unlock-indicator unlocked">
            <text class="unlock-icon">âœ…</text>
            <text class="unlock-text">å·²è§£é”</text>
          </view>
          <!-- æœªè§£é”çŠ¶æ€ -->
          <view wx:else class="unlock-indicator locked">
            <text class="unlock-icon">ğŸ”</text>
            <text class="unlock-text">
              {{premiumUnlockStatus.canUnlock ? 'å¯è§£é”' : 'æœªè§£é”'}}
            </text>
          </view>
        </view>
      </view>
    </view>

    <!-- ğŸ€ å¹¸è¿ç©ºé—´ - ç€‘å¸ƒæµå¡ç‰‡å¸ƒå±€ v2.0 -->
    <!-- ğŸ“‹ åŸºäºå•†å“å…‘æ¢UIå¸ƒå±€ä¼˜åŒ–æ–¹æ¡ˆæŠ€æœ¯æ–‡æ¡£ - æ–¹æ¡ˆ1ï¼šç€‘å¸ƒæµå¡ç‰‡å¸ƒå±€ -->
    <view wx:if="{{currentSpace === 'lucky'}}" class="lucky-space-content waterfall-market-container">

      <!-- ğŸŒŸ ç©ºé—´æ ‡é¢˜åŒº - ç°ä»£åŒ–è®¾è®¡ -->
      <view class="space-header lucky-header modern-header">
        <view class="header-background-modern"></view>
        <view class="header-content modern-content">
          <view class="space-info modern-info">
            <text class="space-title modern-title">ğŸ€ å¹¸è¿ç©ºé—´</text>
            <text class="space-description modern-description">ç°ä»£ç€‘å¸ƒæµè®¾è®¡ï¼Œå¹¸è¿å¥½ç‰©ç­‰ä½ å‘ç°</text>
          </view>
        </view>
      </view>

      <!-- ğŸ” æœç´¢å’Œç­›é€‰åŠŸèƒ½æ¨¡å— -->
      <view class="search-filter-section">
        <view class="search-box">
          <input class="search-input" placeholder="æœç´¢å•†å“åç§°..." value="{{luckySearchKeyword}}"
            bindinput="onLuckySearchInput" />
          <text class="search-icon">ğŸ”</text>
        </view>

        <view class="filter-buttons">
          <button class="filter-btn {{luckyCurrentFilter === 'all' ? 'active' : ''}}" bindtap="onLuckyFilterChange"
            data-filter="all">
            å…¨éƒ¨
          </button>
          <button class="filter-btn {{luckyCurrentFilter === 'available' ? 'active' : ''}}"
            bindtap="onLuckyFilterChange" data-filter="available">
            å¯å…‘æ¢
          </button>
          <button class="filter-btn {{luckyCurrentFilter === 'low-price' ? 'active' : ''}}"
            bindtap="onLuckyFilterChange" data-filter="low-price">
            ä½ç§¯åˆ†
          </button>
          <button class="advanced-filter-btn {{showLuckyAdvancedFilter ? 'active' : ''}}"
            bindtap="onToggleLuckyAdvancedFilter">
            é«˜çº§ç­›é€‰ {{showLuckyAdvancedFilter ? 'ğŸ”¼' : 'ğŸ”½'}}
          </button>
        </view>

        <!-- é«˜çº§ç­›é€‰é¢æ¿ -->
        <view class="advanced-filter-panel" wx:if="{{showLuckyAdvancedFilter}}">
          <!-- åˆ†ç±»ç­›é€‰ -->
          <view class="filter-row">
            <text class="filter-label">å•†å“åˆ†ç±»</text>
            <view class="filter-options">
              <button class="option-btn {{luckyCategoryFilter === 'all' ? 'active' : ''}}"
                bindtap="onLuckyCategoryFilterChange" data-category="all">å…¨éƒ¨</button>
              <button class="option-btn {{luckyCategoryFilter === 'ä¼˜æƒ åˆ¸' ? 'active' : ''}}"
                bindtap="onLuckyCategoryFilterChange" data-category="ä¼˜æƒ åˆ¸">ä¼˜æƒ åˆ¸</button>
              <button class="option-btn {{luckyCategoryFilter === 'å®ç‰©å•†å“' ? 'active' : ''}}"
                bindtap="onLuckyCategoryFilterChange" data-category="å®ç‰©å•†å“">å®ç‰©å•†å“</button>
              <button class="option-btn {{luckyCategoryFilter === 'è™šæ‹Ÿç‰©å“' ? 'active' : ''}}"
                bindtap="onLuckyCategoryFilterChange" data-category="è™šæ‹Ÿç‰©å“">è™šæ‹Ÿç‰©å“</button>
            </view>
          </view>

          <!-- ç§¯åˆ†èŒƒå›´ç­›é€‰ -->
          <view class="filter-row">
            <text class="filter-label">ç§¯åˆ†èŒƒå›´</text>
            <view class="filter-options">
              <button class="option-btn {{luckyPointsRange === 'all' ? 'active' : ''}}"
                bindtap="onLuckyPointsRangeChange" data-range="all">å…¨éƒ¨</button>
              <button class="option-btn {{luckyPointsRange === '0-500' ? 'active' : ''}}"
                bindtap="onLuckyPointsRangeChange" data-range="0-500">0-500åˆ†</button>
              <button class="option-btn {{luckyPointsRange === '500-1000' ? 'active' : ''}}"
                bindtap="onLuckyPointsRangeChange" data-range="500-1000">500-1000åˆ†</button>
              <button class="option-btn {{luckyPointsRange === '1000-2000' ? 'active' : ''}}"
                bindtap="onLuckyPointsRangeChange" data-range="1000-2000">1000-2000åˆ†</button>
              <button class="option-btn {{luckyPointsRange === '2000+' ? 'active' : ''}}"
                bindtap="onLuckyPointsRangeChange" data-range="2000+">2000åˆ†ä»¥ä¸Š</button>
            </view>
          </view>

          <!-- åº“å­˜çŠ¶æ€ç­›é€‰ -->
          <view class="filter-row">
            <text class="filter-label">åº“å­˜çŠ¶æ€</text>
            <view class="filter-options">
              <button class="option-btn {{luckyStockFilter === 'all' ? 'active' : ''}}"
                bindtap="onLuckyStockFilterChange" data-filter="all">å…¨éƒ¨</button>
              <button class="option-btn {{luckyStockFilter === 'in-stock' ? 'active' : ''}}"
                bindtap="onLuckyStockFilterChange" data-filter="in-stock">åº“å­˜å……è¶³</button>
              <button class="option-btn {{luckyStockFilter === 'low-stock' ? 'active' : ''}}"
                bindtap="onLuckyStockFilterChange" data-filter="low-stock">åº“å­˜ç´§å¼ </button>
            </view>
          </view>

          <!-- æ’åºæ–¹å¼ -->
          <view class="filter-row">
            <text class="filter-label">æ’åºæ–¹å¼</text>
            <view class="filter-options">
              <button class="option-btn {{luckySortBy === 'default' ? 'active' : ''}}" bindtap="onLuckySortByChange"
                data-sort="default">é»˜è®¤</button>
              <button class="option-btn {{luckySortBy === 'points-asc' ? 'active' : ''}}" bindtap="onLuckySortByChange"
                data-sort="points-asc">ç§¯åˆ†å‡åº</button>
              <button class="option-btn {{luckySortBy === 'points-desc' ? 'active' : ''}}" bindtap="onLuckySortByChange"
                data-sort="points-desc">ç§¯åˆ†é™åº</button>
              <button class="option-btn {{luckySortBy === 'rating-desc' ? 'active' : ''}}" bindtap="onLuckySortByChange"
                data-sort="rating-desc">è¯„åˆ†é™åº</button>
              <button class="option-btn {{luckySortBy === 'stock-desc' ? 'active' : ''}}" bindtap="onLuckySortByChange"
                data-sort="stock-desc">åº“å­˜é™åº</button>
            </view>
          </view>

          <!-- ç­›é€‰æ“ä½œ -->
          <view class="filter-actions">
            <button class="reset-btn" bindtap="onResetLuckyFilters">é‡ç½®ç­›é€‰</button>
          </view>
        </view>
      </view>

      <!-- ğŸŒŠ ç€‘å¸ƒæµä¸»å®¹å™¨ - æ–¹æ¡ˆ1ä¼˜åŒ–ç‰ˆæœ¬ -->
      <view class="waterfall-container modern-waterfall" style="height: {{containerHeight}}px;">

        <!-- ğŸ“¦ å•†å“å¡ç‰‡åˆ—è¡¨ - ç»å¯¹å®šä½ç€‘å¸ƒæµ -->
        <view class="product-card waterfall-card modern-card"
          wx:for="{{luckyFilteredProducts.length > 0 ? luckyFilteredProducts : waterfallProducts}}" wx:key="id"
          style="position: absolute; left: {{item.layoutInfo.left}}px; top: {{item.layoutInfo.top}}px; width: {{item.layoutInfo.width}}px; z-index: {{item.layoutInfo.zIndex || 1}};"
          data-product="{{item}}" bindtap="onProductTap">

          <!-- ğŸ–¼ï¸ å•†å“å›¾ç‰‡åŒºåŸŸ - æ”¯æŒæ‡’åŠ è½½ -->
          <view class="card-image-container modern-image-container">
            <image class="product-image card-image waterfall-image" src="{{item.image}}" mode="aspectFill"
              lazy-load="{{true}}" data-product-id="{{item.id}}" show-menu-by-longpress="{{false}}" />

            <!-- ğŸ·ï¸ å•†å“æ ‡ç­¾ - ç°ä»£åŒ–æ ·å¼ -->
            <view class="product-tags modern-tags" wx:if="{{item.tags && item.tags.length > 0}}">
              <text class="product-tag modern-tag {{item.isHot ? 'hot-tag' : ''}} {{item.isNew ? 'new-tag' : ''}}"
                wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
            </view>

            <!-- ğŸ’¨ æŠ˜æ‰£æ ‡ç­¾ - å¢å¼ºç‰ˆ -->
            <view class="discount-badge modern-discount-badge" wx:if="{{item.discount > 0}}">
              <text class="discount-text">{{item.discount}}%OFF</text>
            </view>

            <!-- ğŸ€ å¹¸è¿æ ‡ç­¾ - ç‰¹æ®Šæ•ˆæœ -->
            <view class="lucky-badge modern-lucky-badge" wx:if="{{item.isLucky}}">ğŸ€</view>

            <!-- ğŸ“Š é”€é‡æ˜¾ç¤º -->
            <view class="sales-badge modern-sales-badge" wx:if="{{item.sales}}">
              <text class="sales-text">å·²å”®{{item.sales}}</text>
            </view>
          </view>

          <!-- ğŸ“ å•†å“ä¿¡æ¯åŒºåŸŸ - æ–¹æ¡ˆ1ä¼˜åŒ–è®¾è®¡ -->
          <view class="card-content modern-card-content">

            <!-- ğŸ“Œ å•†å“æ ‡é¢˜ -->
            <view class="product-title-section">
              <text class="product-title waterfall-title modern-title">{{item.name}}</text>
            </view>

            <!-- ğŸ’° ä»·æ ¼ä¿¡æ¯ - æ¸å˜æ•ˆæœ -->
            <view class="price-section modern-price-section">
              <view class="price-row waterfall-price">
                <text class="current-price modern-current-price">{{item.price}}</text>
                <text class="original-price modern-original-price"
                  wx:if="{{item.originalPrice && item.originalPrice > item.price}}">{{item.originalPrice}}</text>
              </view>

              <!-- â­ è¯„åˆ†å’Œé”€é‡ -->
              <view class="rating-section waterfall-stats modern-stats" wx:if="{{item.rating}}">
                <view class="rating-stars-wrapper">
                  <text class="rating-stars modern-rating-stars">â˜…â˜…â˜…â˜…â˜…</text>
                  <text class="rating-score modern-rating-score">{{item.rating}}</text>
                </view>
                <text class="sales-count modern-sales-count">å·²å”®{{item.sales}}</text>
              </view>
            </view>

            <!-- ğŸª å•†å®¶ä¿¡æ¯ - ç°ä»£åŒ–æ ·å¼ -->
            <view class="seller-info modern-seller-info" wx:if="{{item.seller}}">
              <text class="seller-name">{{item.seller.name}}</text>
              <text class="seller-rating" wx:if="{{item.seller.rating}}">{{item.seller.rating}}åˆ†</text>
            </view>

            <!-- ğŸ·ï¸ æ ‡ç­¾åŒºåŸŸ - åº•éƒ¨æ ‡ç­¾ -->
            <view class="waterfall-tags modern-bottom-tags" wx:if="{{item.tags && item.tags.length > 0}}">
              <text class="tag modern-bottom-tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
            </view>

          </view>

          <!-- ğŸ­ å¡ç‰‡æ‚¬åœæ•ˆæœé®ç½© -->
          <view class="card-hover-mask modern-hover-mask"></view>

        </view>

      </view>

      <!-- â³ åŠ è½½çŠ¶æ€æ˜¾ç¤º - æ–¹æ¡ˆ1è®¾è®¡ -->
      <view class="loading-section modern-loading" wx:if="{{loading}}">
        <view class="loading-content modern-loading-content">
          <view class="loading-spinner modern-spinner">
            <view class="spinner-dot dot1"></view>
            <view class="spinner-dot dot2"></view>
            <view class="spinner-dot dot3"></view>
          </view>
          <text class="loading-text modern-loading-text">å¹¸è¿å¥½ç‰©åŠ è½½ä¸­...</text>
        </view>
      </view>

      <!-- ğŸ“Š æ— æ›´å¤šæ•°æ®æç¤º -->
      <view class="no-more-data modern-no-more"
        wx:if="{{!loading && (luckyFilteredProducts.length > 0 || waterfallProducts.length > 0) && !hasMore}}">
        <view class="no-more-content">
          <text class="no-more-icon">ğŸ‰</text>
          <text class="no-more-text">å·²åŠ è½½å…¨éƒ¨å¹¸è¿å¥½ç‰©</text>
          <text class="no-more-subtitle">å…±{{luckyFilteredProducts.length > 0 ? luckyFilteredProducts.length :
            waterfallProducts.length}}ä»¶å•†å“ç­‰ä½ å‘ç°</text>
        </view>
      </view>

      <!-- ğŸš« ç©ºçŠ¶æ€æ˜¾ç¤º - ä¼˜åŒ–ç‰ˆ -->
      <view class="empty-state modern-empty"
        wx:if="{{!loading && luckyFilteredProducts.length === 0 && waterfallProducts.length === 0}}">
        <view class="empty-content modern-empty-content">
          <text class="empty-icon modern-empty-icon">ğŸ€</text>
          <text class="empty-title modern-empty-title">å¹¸è¿ç©ºé—´å‡†å¤‡ä¸­</text>
          <text class="empty-subtitle modern-empty-subtitle">å¥½è¿å³å°†åˆ°æ¥ï¼Œè¯·ç¨åå†è¯•</text>
          <button class="empty-retry-btn modern-retry-btn" bindtap="initLuckySpaceData" size="mini">
            é‡æ–°åŠ è½½
          </button>
        </view>
      </view>

      <!-- ğŸ”„ ä¸‹æ‹‰åˆ·æ–°æç¤º -->
      <view class="refresh-hint modern-refresh-hint"
        wx:if="{{!loading && (luckyFilteredProducts.length > 0 || waterfallProducts.length > 0)}}">
        <text class="refresh-text">ä¸‹æ‹‰åˆ·æ–°è·å–æ›´å¤šå¹¸è¿å¥½ç‰©</text>
      </view>

    </view>

    <!-- ğŸ’ è‡»é€‰ç©ºé—´ - æ··åˆå±•ç¤ºå¸ƒå±€ -->
    <view wx:if="{{currentSpace === 'premium'}}" class="premium-space-content mixed-layout">

      <!-- ç©ºé—´æ ‡é¢˜åŒº -->
      <view class="space-header premium-header mixed-header">
        <view class="header-background mixed-bg"></view>
        <view class="header-content">
          <view class="space-info">
            <text class="space-title">ğŸ’ è‡»é€‰ç©ºé—´</text>
            <text class="space-description">ä¸‰å±‚å¼æ··åˆå±•ç¤ºï¼Œç²¾å“ä¸€ç½‘æ‰“å°½</text>
          </view>
          <view class="space-stats">
            <view class="stat-item">
              <text class="stat-number">{{carouselItems.length + cardSections.length + listProducts.length}}+</text>
              <text class="stat-label">ç²¾å“æ•°é‡</text>
            </view>
            <view class="stat-item">
              <text class="stat-number">{{premiumSpaceStats.avg_rating}}</text>
              <text class="stat-label">å¹³å‡è¯„åˆ†</text>
            </view>
          </view>
        </view>
      </view>

      <!-- ç¬¬ä¸€å±‚ï¼šè½®æ’­æ¨èåŒº -->
      <view class="carousel-section" wx:if="{{carouselItems && carouselItems.length > 0}}">
        <view class="section-header">
          <text class="section-title">ğŸ  ç²¾é€‰æ¨è</text>
          <text class="section-subtitle">å“è´¨ä¹‹é€‰ï¼Œå€¼å¾—æ‹¥æœ‰</text>
        </view>
        <swiper class="premium-carousel" autoplay="{{autoPlay}}"
          interval="{{mixedLayoutConfig.carouselInterval || 4000}}" duration="500" circular="{{true}}"
          indicator-dots="{{true}}" indicator-color="rgba(255,255,255,0.5)" indicator-active-color="#ffffff"
          current="{{carouselActiveIndex}}" bindchange="onCarouselChange">
          <swiper-item wx:for="{{carouselItems}}" wx:key="id" class="carousel-item" data-product="{{item}}"
            bindtap="onProductTap">
            <view class="carousel-card" style="background: {{item.background}}">
              <image class="carousel-image" src="{{item.image}}" mode="aspectFill"></image>
              <view class="carousel-content">
                <view class="carousel-badges">
                  <text class="discount-badge" wx:if="{{item.discount}}">-{{item.discount}}%</text>
                  <text class="rating-badge">â­{{item.rating}}</text>
                </view>
                <text class="carousel-title">{{item.title}}</text>
                <text class="carousel-subtitle">{{item.subtitle}}</text>
                <view class="carousel-price-section">
                  <text class="carousel-price">Â¥{{item.price}}</text>
                  <text class="carousel-original-price" wx:if="{{item.originalPrice}}">Â¥{{item.originalPrice}}</text>
                </view>
                <view class="carousel-tags">
                  <text class="carousel-tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
                </view>
              </view>
            </view>
          </swiper-item>
        </swiper>
      </view>

      <!-- ç¬¬äºŒå±‚ï¼šæ¨ªå‘æ»‘åŠ¨å¡ç‰‡ç»„ -->
      <view class="card-sections" wx:if="{{cardSections && cardSections.length > 0}}">
        <view class="card-section" wx:for="{{cardSections}}" wx:key="id" wx:for-item="section">
          <view class="section-header card-section-header" style="background: {{section.backgroundColor}}">
            <view class="section-title-wrapper">
              <text class="section-icon">{{section.icon}}</text>
              <view class="section-titles">
                <text class="section-title" style="color: {{section.titleColor}}">{{section.title}}</text>
                <text class="section-subtitle">{{section.subtitle}}</text>
              </view>
            </view>
          </view>

          <scroll-view class="card-scroll-view" scroll-x enable-flex>
            <view class="card-container">
              <view class="section-card" wx:for="{{section.products}}" wx:key="id" wx:for-item="product"
                data-product="{{product}}" bindtap="onProductTap">
                <view class="card-image-wrapper">
                  <image class="section-card-image" src="{{product.image}}" mode="aspectFill"></image>
                  <view class="card-badges">
                    <text class="discount-badge" wx:if="{{product.discount}}">-{{product.discount}}%</text>
                    <text class="hot-badge" wx:if="{{product.isHot}}">çƒ­é”€</text>
                    <text class="new-badge" wx:if="{{product.isNew}}">æ–°å“</text>
                  </view>
                </view>
                <view class="section-card-content">
                  <text class="section-card-name">{{product.name}}</text>
                  <text class="section-card-sellpoint">{{product.sellPoint}}</text>
                  <view class="section-card-price">
                    <text class="current-price">Â¥{{product.price}}</text>
                    <text class="original-price" wx:if="{{product.originalPrice}}">Â¥{{product.originalPrice}}</text>
                  </view>
                  <view class="section-card-meta">
                    <text class="rating">â­{{product.rating}}</text>
                    <text class="sales">é”€é‡{{product.sales}}</text>
                  </view>
                </view>
              </view>
            </view>
          </scroll-view>
        </view>
      </view>

      <!-- ç¬¬ä¸‰å±‚ï¼šè¯¦ç»†åˆ—è¡¨åŒº -->
      <view class="list-section" wx:if="{{listProducts && listProducts.length > 0}}">
        <view class="section-header list-section-header">
          <text class="section-title">ğŸ“ æ›´å¤šç²¾å“</text>
          <text class="section-subtitle">è¯¦ç»†ä¿¡æ¯ï¼Œç†æ€§é€‰æ‹©</text>
        </view>

        <view class="list-container">
          <view class="list-item" wx:for="{{listProducts}}" wx:key="id" data-product="{{item}}" bindtap="onProductTap">
            <image class="list-image" src="{{item.image}}" mode="aspectFill"></image>
            <view class="list-content">
              <view class="list-header">
                <text class="list-title">{{item.name}}</text>
                <view class="list-badges">
                  <text class="warranty-badge" wx:if="{{item.hasWarranty}}">è´¨ä¿</text>
                  <text class="shipping-badge" wx:if="{{item.freeShipping}}">åŒ…é‚®</text>
                </view>
              </view>

              <text class="list-description" wx:if="{{item.showDescription}}">{{item.description}}</text>

              <view class="list-seller" wx:if="{{item.showSeller}}">
                <text class="seller-name">{{item.seller.name}}</text>
                <text class="seller-rating">â­{{item.seller.rating}}</text>
                <text class="seller-sales">{{item.seller.sales}}+é”€é‡</text>
              </view>

              <view class="list-price-section">
                <view class="price-info">
                  <text class="list-current-price">Â¥{{item.price}}</text>
                  <text class="list-original-price" wx:if="{{item.originalPrice}}">Â¥{{item.originalPrice}}</text>
                  <text class="discount-text" wx:if="{{item.discount}}">çœ{{item.discount}}%</text>
                </view>
                <view class="delivery-info">
                  <text class="delivery-time">{{item.estimatedDelivery}}</text>
                </view>
              </view>

              <view class="list-meta">
                <text class="detailed-rating">â­{{item.rating}}</text>
                <text class="sales-count">é”€é‡{{item.sales}}</text>
                <text class="return-policy">{{item.returnPolicy}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-mixed"
        wx:if="{{(!carouselItems || carouselItems.length === 0) && (!cardSections || cardSections.length === 0) && (!listProducts || listProducts.length === 0)}}">
        <view class="empty-icon">ğŸ’</view>
        <text class="empty-text">è‡»é€‰ç©ºé—´å³å°†ç²¾å½©å‘ˆç°</text>
        <text class="empty-hint">ä¸‰å±‚å¼æ··åˆå±•ç¤ºå¸ƒå±€æ­£åœ¨å‡†å¤‡ä¸­</text>
      </view>

    </view>

  </view>

  <!-- ğŸ¯ ç«ä»·å¼¹çª— -->
  <view class="bid-modal-overlay" wx:if="{{showBidModal}}" bindtap="onCancelBid">
    <view class="bid-modal" catchtap="">
      <view class="modal-header">
        <text class="modal-title">ğŸ¯ å‚ä¸ç«ä»·</text>
        <view class="close-btn" bindtap="onCancelBid">Ã—</view>
      </view>

      <view class="modal-content" wx:if="{{selectedBidProduct}}">
        <!-- å•†å“ä¿¡æ¯ -->
        <view class="bid-product-info">
          <image class="bid-product-image" src="{{selectedBidProduct.image}}" />
          <view class="bid-product-details">
            <text class="bid-product-name">{{selectedBidProduct.name}}</text>
            <text class="bid-product-category">{{selectedBidProduct.category}}</text>
            <view class="current-bid-info">
              <text class="current-bid-label">å½“å‰æœ€é«˜ä»·ï¼š</text>
              <text class="current-bid-price">{{selectedBidProduct.current_price}}ç§¯åˆ†</text>
            </view>
          </view>
        </view>

        <!-- ç«ä»·è¾“å…¥ -->
        <view class="bid-input-section">
          <text class="input-label">æ‚¨çš„å‡ºä»·ï¼š</text>
          <view class="bid-input-wrapper">
            <input class="bid-input" type="number"
              placeholder="{{selectedBidProduct.current_price + selectedBidProduct.min_bid_increment}}"
              value="{{userBidAmount}}" bindinput="onBidAmountInput" />
            <text class="input-unit">ç§¯åˆ†</text>
          </view>
          <text class="bid-hint">æœ€å°å‡ºä»·ï¼š{{selectedBidProduct.current_price +
            selectedBidProduct.min_bid_increment}}ç§¯åˆ†</text>
        </view>

        <!-- ç«ä»·è¯´æ˜ -->
        <view class="bid-instructions">
          <text class="instruction-title">ğŸ’¡ ç«ä»·è¯´æ˜ï¼š</text>
          <text class="instruction-item">â€¢ å‡ºä»·æˆåŠŸåä¸å¯æ’¤å›</text>
          <text class="instruction-item">â€¢ æ¯æ¬¡åŠ ä»·ä¸å°‘äº{{selectedBidProduct.min_bid_increment}}ç§¯åˆ†</text>
          <text class="instruction-item">â€¢ ç«ä»·ç»“æŸæ—¶æœ€é«˜ä»·è€…è·å¾—å•†å“</text>
        </view>
      </view>

      <view class="modal-actions">
        <button class="cancel-bid-btn" bindtap="onCancelBid">å–æ¶ˆ</button>
        <button class="confirm-bid-btn" bindtap="onConfirmBid">ç¡®è®¤ç«ä»·</button>
      </view>
    </view>
  </view>
</view>