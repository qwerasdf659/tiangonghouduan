{
  "rules": [
    "始终使用简体中文回答和编写代码注释 (Always respond in Chinese-simplified)",
    "代码要有详细注释，说明功能和逻辑",
    "编写最小化、实用主义的代码实现",
    "优先编辑现有文件而不是创建新文件",
    "遵循项目现有的命名规范（snake_case for files, camelCase for JS）",
    "不自动添加测试代码，除非明确要求",
    "保持代码简洁，避免过度工程化",
    "注重实际可运行的代码，而非理论完美",
    "删除未使用的代码，不保留向后兼容的hack",
    "编写、修改、新增、删除代��时不要破坏项目原有功能",
    "深度理解项目的所有代码、文档和注释后再完成任务",
    "完成任务后检查项目是否可以正常运行，有问题立即修复",
    "说明思考过程、问题点、使用的工具、需要安装的依赖和解决方案",
    "完成任务后自动删除临时文件、测试文件、无用文件和重复的md文件，移除相关引用",
    "确保代码符合微信小程序开发标准，检查API和框架兼容性",
    "每次回答时说明使用的AI模型",
    "排查问题时考虑：组件缺失/错误、逻辑方案正确性、环境配置问题",
    "指令运行超过120秒无结果或卡住时自动重试，不行就换方案",
    "代码修改后确认是否需要重启服务，验证环境变量是否正确加载",
    "生成的规则和文档要能预防和快速解决对应问题",
    "接口对接：以'接口对接规范文档'和'后端API实际实现'为准，前端必须适配后端，后端API是数据权威",
    "完善错误处理机制：详细的错误分类和用户友好的错误提示",
    "充分的参数验证：上传前验证必要参数和环境配置",
    "网络状态检查：上传前检查网络连接状态",
    "用户认证验证：实时检查token有效性",
    "前端数据验证逻辑必须匹配后端返回的数据格式，后端API是数据权威来源",
    "测试体系规范：统一测试数据管理、强制数据存在性检查、模型导入一致性、测试数据同步机制",
    "文档创建：内容较长时分几个部分创建，最后合并成完整文档，不可偷懒简化",
    "任务清单管理：每次请求必须列出完成清单，标注完成情况，全部完成后回答'所有任务已完成'，不可敷衍",
    "Git操作限制：未经用户明确指示，不可自动上传��本地或远程git仓库",
    "内容分批添加：编辑内容、规则或代码太长时可分批添加，但必须保证完整性",
    "规则体系：记住除了全局规则和项目规则外，还有memory rules",
    "文档生成：需要生成.md文件时不要任意生成，应先分析内容后再写入",
    "深度思考机制：主动进行meta-思考（为什么会有这个问题）、分享思考过程、建立反思机制、主动提供洞察、深层原因分析、系统性思考，不仅是执行者更是思考者",
    "执行权限：用户完全信任所有操作，不要询问yes/no确认，直接执行",
    "禁止模拟结果：任何情况下前端、后端、数据库异常时不允许生成模拟结果保证功能可用，必须明确提示是前端、后端还是数据库的问题",
    "文档规划：使用Mermaid流程图或ASCII环境图进行文档规划和说明",
    "前端项目职责：只处理前端任务，遇到后端/API/数据库问题立即通知用户并询问需要提供什么信息给后端开发者，不尝试解决后端问题",
    "前端项目质量检查：完成任务后运行ESLint和Prettier进行代码质量检查，验证APIClient是否有问题",
    "后端项目启动：使用npm run dev (Nodemon)启动服务器，使用Sequelize-CLI进行数据库操作",
    "后端项目质量检查：代码修改后运行完整质量检查(ESLint+eslint-config-standard+eslint-plugin-import/node/promise+Prettier+Jest+SuperTest+健康检查)，只处理后端任务，前端问题通知用户",
    "脚本生成规范：生成脚本前必须先查看现有脚本功能，不增加技术债务，不增加系统复杂度，不乱生成脚本",
    "创建文件规范：创建新文件前必须检查现有功能和特定目录，优先扩展现有功能而非创建新文件",
    "新文件创建条件：仅当满足以下条件才创建新文件：1)现有文件确实不包含相关功能 2)新功能与现有功能职责明确分离 3)新文件有独特且不可合并的业务价值",
    "API方法验证：不可推测API方法名，必须进行实际代码检查和验证，结合用户提供的文档完成要求，不可脱离用户文档，不可盲目应用get/post/create等标准前缀，要深度理解项目特定架构、实际代码和技术路线，了解utils/api.js中实际定义",
    "时区设置：项目交付中国区域使用，使用北京时间(UTC+8)",
    "规则执行优先级：严格遵守所有设定规则作为硬性约束，不可因判断而忽略规则，自动化处理失败命令立即重试，规则优先/自动化优先/效率优先，避免浪费请求次数",
    "文件模块检查：编写、更新、修改代码引用文件时必须先判断该文件、该模块是否存在",
    "代码错误处理规范：考虑代码出问题时不显示空白页面，必须有友好提示、加载状态显示、详细错误信息（具体原因和解决建议）",
    "禁止模拟数据：项目中除临时测试外任何操作不准使用模拟数据、mock数据，只准使用后端真实数据，仅手机号验证登录环节可使用万能验证码123456（仅限开发测试环境）",
    "错误提示规范：出现问题必须在页面准确提醒具体哪里有问题，不可乱提示或无提示，必须有相应保护措施",
    "命令语法适配：根据操作系统环境调整命令语法，Windows PowerShell使用分号(;)而非&&，避免使用过长复合命令",
    "文档生成限制：未经要求不得额外生成文档",
    "文档日期真实性：文档中的日期必须真实准确，更新文档时间时使用终端命令(date)获取当前时间，不依赖用户提供时间",
    "数据库表结构变更：禁止在生产环境频繁使用sequelize.sync({ alter: true })或force: true，表结构变更必须通过手动SQL脚本或迁移工具完成",
    "数据库索引管理：每张表的索��总数不得超过MySQL的64个限制，如需新增索引必须先评估和清理无用索引",
    "数据库初始化脚本：必须加超时和详细日志，如遇长时间无响应需立即排查数据库连接和表结构问题，运行超过2分钟时应检查数据库状态和表结构，使用timeout命令限制脚本运行时间",
    "数据库批量操作：大批量数据插入必须分批处理，每批不超过100条，避免单次SQL阻塞",
    "数据库变更审查：所有表结构和索引变更需在代码评审时重点检查，防止上线后阻塞数据库",
    "测试数据统一管理：所有测试用户数据必须定义在统一的配置文件中（如config/test-data.js），禁止在多个文件中硬编码相同的测试数据，初始化脚本和测试脚本必须引用同一个数据源",
    "测试脚本命名规��：只保留一个主要的初始化脚本，其他过时脚本必须删除或明确标记，测试脚本必须包含数据存在性检查，所有数据库操作前必须验证依赖数据是否存在",
    "测试模型导入���致性：所有测试文件的模型导入路径必须一致，使用相对路径时必须确保从当前文件位置正确导入，添加模型导入失败的错误处理",
    "测试数据同步检查：每次修改初始化脚本时必须同步更新相关的测试脚本，在CI/CD中添加测试数据一致性检查，测试失败时输出明确的错误信息包含期望数据和实际数据",
    "测试错误处理强化：所有数据库查询必须检查返回结果是否为null/undefined，使用try-catch包装可能失败的操作，提供有意义的错误消息便于快速定位问题",
    "Node.js内存管理：开发环境必须设置合理的内存限制避免超过80%，使用NODE_OPTIONS='--max-old-space-size=512'控制堆内存，PM2配置max_memory_restart低于实际内存限制，超过75%时自动重启，避免开发环境使用集群模式优先fork模式",
    "API路径规范：健康检查端点必须同时提供/health和/api/health两个路径，所有API端点必须有错误处理机制，路径变更时必须同步更新文档和测试用例，实施API版本控制和向后兼容策略",
    "服务监控规范：所有服务组件必须实现isHealthy()方法，WebSocket等实时服务需要实现连接计数和状态检查，健康检查端点必须返回详细的服务状态信息，实施服务依赖检查和故障隔离机制",
    "Node.js进程管理：开发环境使用单进程模式生产环境可使用集群模式，配置合理的进程重启策略和超时时间，实施优雅关闭机制确保数据一致性，配置日志轮转和存储策略",
    "Node.js资源优化：启动参数必须根据环境进行优化，避免使用不支持的启动参数组合，实施资源使用监控和告警机制，定期进行性能分析和优化",
    "Node.js错误处理：所有异步操作必须有错误处理，实施全局错误捕获和处理机制，错误信息必须包含上下文和解决建议，建立错误分类和优先级体系",
    "Node.js部署配置：环境配置必须区分开发测试生产环境，敏感信息必须通过环境变量管理，实施配置验证和兼容性检查，建立配置变更追踪机制",
    "端口占用管理：启动应用前必须检查端口占用状态netstat -tlnp，发现占用时先终止进程pkill -f，应用重启必须等待前一进程完全终止至少2秒间隔，使用PM2时检查进程状态，开发环境建议使用nodemon等热重载工具",
    "系统工具检查：使用系统工具前必须先检查命令可用性which command_name，常用调试工具优先级od>xxd>hexdump>file，建立标准工具替代方案映射，批量检查系统工具可用性避免逐一尝试失败",
    "编码问题诊断：使用od -c检查文件开头字符，使用python3脚本检查编码和BOM标记，并行检查文件大小和字符统计，根据诊断结果选择修复策略，禁止使用多种方法重复分析同一个编码问题，诊断不得超过3次工具调用",
    "文件大小与工具选择：文件<1KB使用任意工具，1KB-10KB优先search_replace或edit_file，10KB-50KB仅使用edit_file分段处理，>50KB使用grep_search定位+分段edit_file，中文文档编码问题优先使用python脚本修复后再编辑",
    "Cursor规则文件管理：处理cursor规则时必须首先检查.cursor/rules/目录，发现现有规则文件时禁止在根目录创建同名文件，所有cursor规则更新必须直接修改.cursor/rules/下的文件，规则更新后必须验证Cursor编辑器是否正确识别",
    "Git分支冲突处理：Git操作前必须先检查本地和远程分支状态git status和git remote -v，发现分支分歧时优先评估冲突程度选择合适策略，开发分支优先merge策略git config pull.rebase false，功能分支可考虑rebase策略，强制推送仅在确认不影响其他开发者时使用git push --force-with-lease",
    "Git命令执行优化：长输出命令必须添加限制参数git log --oneline -10，查看提交历史使用格式化输出，避免产生大量输出的命令，中文内容查看使用合适编码设置git config --global core.quotepath false，大型仓库操作设置合适超时timeout 60s",
    "Git文件管理：提交前必须检查.gitignore完整性，临时文件和构建产物必须明确排除，删除临时文件标准流程检查类型大小确认不在版本控制中批量删除，中文文件名处理使用引号包围",
    "Git远程仓库同步：推送前必须确认远程仓库状态和权限，大型推送使用进度显示git push --progress，网络不稳定环境设置重试机制最多3次，推送完成后验证远程仓库状态git ls-remote origin",
    "用户授权确认机制：任何git push/commit/merge等操作必须明确征得用户同意，删除移动重命名重要文件前必须确认，外部网络操作需要用户授权，修改.env/package.json等关键配置文件前确认，启动停止重启服务前征得同意",
    "操作范围边界控制：开始复杂任务前明确确认具体范围和边界，发现操作可能超出用户预期时立即停止并询问，建立操作风险等级分类高风险操作强制确认，对于可能产生重大影响的操作进行二次确认",
    "Cursor规则文件格式：所有cursor规则文档必须使用.mdc格式禁止使用.md格式，创建规则文档前必须检查现有文件格式ls -la .cursor/rules/*.mdc，规则文档创建后立即验证格式file .cursor/rules/新文档.mdc，发现格式错误时立即修正",
    "文件创建工具选择：新文件创建优先级cat命令>edit_file>search_replace，大文件编辑优先级edit_file分段>search_replace精确替换，中文内容文件优先使用cat命令或echo重定向，cursor规则文件强制使用cat命令创建避免edit_file异常",
    "文件操作强制验证：每次文件创建后立即检查文件大小和内容开头，使用head/tail命令验证文件内容正确性，确认文件格式符合预期，确认文件权限设置正确，发现异常立即删除重新创建",
    "重复请求识别处理：识别用户提出的重复或相似问题请求，记录已完成的任务和生成的规则，对重复请求提供简洁的状态确认而非重复执行，引用之前的分析结果和已完成的工作，仅对新发现的问题进行分析和规则生成",
    "任务完成状态管理：清晰标识哪些任务已完成，记录已生成的规则类型和覆盖范围，验证规则文档的更新完成状态，确认项目运行正常且无新问题，明确告知用户任务完成情况",
    "会话效率优化：缓存已检查的系统状态和配置信息，避免执行已完成的检查和分析，根据会话历史优化后续操作，避免不必要的重复计算和工具调用，提供清晰的任务进度和完成状态",
    "API路由验证：在访问任何API端点前必须先检查实际路由定义，使用grep -r确认路由存在，健康检查优先使用/health路径如404则尝试/api/health，避免盲目重复访问不存在的端点浪费请求次数",
    "命令执行超时控制：所有可能长时间运行的命令必须使用timeout限制，PM2日志查看timeout 10s pm2 logs --lines 10，网络请求curl -m 30或timeout 10s curl，文件搜索timeout 30s find或timeout 20s grep -r，超时时间设置原则简单操作10s复杂操作30-60s",
    "终端环境兼容性：识别和处理screen size bogus类型警告，设置合适的终端尺寸参数，确保命令输出在不同终端环境下正常显示，过滤不影响功能的终端警告信息，适配不同的终端和SSH环境",
    "进程数量监控：建立正常进程数量的基准值，定期检查Node.js和PM2相关进程数量，识别和处理异常或冗余的进程，优化进程配置以减少资源占用，建立定期的进程清理和优化流程",
    "数据库迁移规范：所有表结构变更必须通过迁移脚本完成禁止直接修改数据库，迁移脚本必须包含up和down操作支持回滚，重要迁移操作前必须备份数据库，迁移脚本执行前必须在测试环境验证，迁移操作必须在维护窗口期间执行避免影响正常业务",
    "数据库初始化幂等性：保持初始化脚本的幂等性可重复执行不产生副作用，初始化脚本必须包含完整的错误处理和日志记录，使用事务确保数据的一致性失败时自动回滚，初始化脚本运行时间监控超过预期时间自动报警",
    "数据库性能优化：定期分析查询性能识别和优化慢查询，合理设计索引策略避免过度索引和索引冗余，监控数据库连接池状态避免连接泄漏，实施数据库连接超时和重试机制，定期清理无用数据和日志控制数据库大小",
    "数据库表结构变更策略：优先使用ALTER TABLE而不是DROP TABLE处理表结构变更，避免在生产环境使用force模式重建数据库，表结构变更必须在代码评审时重点检查防止上线后阻塞数据库",
    "部署流程标准化：建立自动化的持续集成持续部署流程，部署前进行完整的回归测试，配置蓝绿部署或滚动发布策略，建立快速回滚机制",
    "监控和告警体系：实施全方位的应用性能监控，配置关键指标的告警机制，建立日志聚合和分析系统，实施健康检查和故障自愈机制",
    "Git操作授权控制：禁止未经授权的git push/commit/merge/rebase等操作前必须明确征得用户同意，执行前说明操作可能的影响范围和潜在风险，严格按照用户明确授权的范围执行git操作，高风险操作强制确认中风险操作建议确认低风险和只读操作可直接执行",
    "Git提交信息规范：提交信息必须使用有意义的描述，中文提交信息格式功能模块:具体修改内容，批量修改时提供详细的变更清单，重要功能变更必须在提交信息中说明影响范围",
    "中文文件名标准化：所有中文文件名必须使用UTF-8编码，避免使用特殊字符和空格优先使用连字符或下划线，文件名操作前必须验证编码，中文文件名在命令行操作时必须使用引号包围，避免在自动化脚本中直接处理包含中文的文件名",
    "UTF-8编码标准化：所有文档文件必须使用UTF-8无BOM编码，创建新文档时强制指定编码，禁止使用带BOM的UTF-8编码避免解析器异常，文档保存时验证编码格式file -i",
    "BOM标记检测清理：使用python3脚本检测BOM标记，清理BOM标记避免解析异常，批量BOM检测find配合python3脚本，新建文档时禁用BOM优先使用编程方式创建文档",
    "编码转换标准流程：使用chardet检测文档编码，GBK转UTF-8使用python3脚本处理，批量编码转换分文件类型处理避免二进制文件损坏，转换后验证对比转���前后的文档内容完整性",
    "跨平台编码兼容：Windows环境强制使用UTF-8，Linux环境验证locale设置grep UTF-8，跨平台文件传输时验证编码一致性，避免使用平台特定的编码格式如Windows-1252",
    "Git编码配置：设置git config --global core.quotepath false，设置i18n.commitencoding utf-8，设置i18n.logoutputencoding utf-8，.gitattributes配置*.md text eol=lf",
    "终端编码环境：设置export LANG=zh_CN.UTF-8，验证终端编码支持echo中文测试|od -c，配置终端字体支持中文显示，SSH连接时保持编码环境一致性",
    "编码问题快速诊断：第一步file -i检查文件编码类型，第二步od -c检查BOM标记，第三步chardet检测内容编码，第四步cat验证终端显示，禁止使用多种方法重复分析同一个编码问题",
    "编码修复标准流程：BOM问题使用Python脚本自动清理，编码转换先备份原文件再执行转换，文件名问题重命名为英文在文档内标注中文标题，跨平台问题统一使用UTF-8无BOM+LF换行",
    "大文件删除操作规范：删除大文件内容前必须分段审查每个章节的价值，禁止使用head/tail等命令一次性删除大范围内容，必须逐章节检查内容不能只看标题，删除范围超过100行时必须先读取内容确认无重要信息，技术文档删除时优先保留字段说明、业务逻辑、技术实现等核心内容",
    "文档内容分类保护：技术规范类内容（字段名、API参数、数据结构）必须保留，业务逻辑说明（业务场景、使用场景、技术实现）必须保留，开发指南类内容（错误处理、性能优化、最佳实践）必须保留，冗余说明性内容（文档特色、更新总结、维护建议）可以删除",
    "文档删除前验证机制：删除前使用grep检查是否包含关键技术术语，删除后立即验证关键内容是否保留，发现误删立即恢复重要内容，大文件操作采用分段处理+精确删除策略",
    "状态检查缓存系统：健康检查、端口检查、进程状态等重复验证必须使用5分钟缓存机制，避免重复工具调用浪费（目标：重复率从70-80%降至<10%）",
    "API接口强制兼容：前后端API路径必须强制映射确保一致性，禁止推测API方法名，必须实际验证utils/api.js中的定义，接口一致性目标>95%",
    "WebSocket功能完整性验证：WebSocket服务方法必须完整实现，禁止注释关键功能代码，部署前必须验证所有WebSocket端点可用性",
    "工具调用并行化优先：独立的文件读取、状态检查、命令执行必须并行调用，最大化执行效率，减少串行等待时间",
    "问题诊断5分钟快速定位：遵循标准诊断流程（检查日志→验证配置→测试连接→分析根因），问题解决时间目标从80分钟缩短至<30分钟",
    "文档信息密度控制：生成文档必须控制冗余度，信息密度目标>70%（当前仅1.2%），避免相同内容重复，文档长度按复杂度限制在1000行内",
    "预防性规则优先级：P0立即执行（状态缓存/API兼容/进程管理），P1紧急优化（文档控制/并行化/错误处理），P2中期改进（质量监控/知识沉淀），P3长期优化（自动化测试/持续改进）",
    "数据库事务安全模式：所有事务操作必须包含完整的错误处理和回滚机制，实施智能重试策略，避免重复提交错误",
    "服务进程统一管理：开发环境使用nodemon单进程模式，生产环境使用PM2集群模式，启动前必须检查端口占用和进程冲突，配置优雅关闭机制",
    "效率量化监控：持续监控工具调用重复率、文档信息密度、问题解决时间、API接口一致性等核心指标，确保达到优化目标",
    "核心问题预防体系：基于历史问题分析建立预防机制，累计效率损失450-665分钟需降至<100分钟，工具调用浪费1380+次需降至400-500次，文档膨胀率2000-5000%需降至<200%",
    "重复状态检查预防：健康检查、端口检查等状态验证建立统一缓存系统，5分钟内不重复检查相同状态，发现频次35+次需降至<5次",
    "API接口不匹配预防：前后端API规范必须一致，TypeError: API.xxx is not a function类错误发现频次15+次需降至0次，强制兼容映射机制确保接口可用性",
    "WebSocket功能缺失预防：WebSocket服务方法不得注释或删除，部署前必须验证完整性，功能缺失发现频次8+次需降至0次",
    "服务进程管理规范化：避免多个Node.js进程同时运行导致端口冲突，进程管理混乱发现频次12+次需降至0次，使用PM2/nodemon统一管理",
    "数据库事务错误预防：事务回滚处理必须完善，避免重复提交错误，事务错误发现频次6+次需降至0次，实施安全事务执行模式",
    "文档生成质量控制：文档信息密度必须>70%，避免相同内容重复20+次，文档长度按复杂度强制限制，冗余模式发现频次100%需降至<10%",
    "系统性解决框架：预防重于治疗、效率优于完美、标准化优于个性化、自动化优于手工化，建立可复用的解决方案模板和知识库",
    "问题诊断标准化流程：遵循检查日志→验证配置→测试连接→分析根因的标准流程，5分钟内快速定位问题，避免盲目尝试和重复检查",
    "工具调用效率优化：独立操作必须并行执行，最大化并行化效率，避免串行等待，工具调用重复率从70-80%降至<10%",
    "质量监控和持续改进：实时监控效率和质量指标，建立问题反馈和改进机制，定期评估规范执行效果，持续优化开发工作流",
    "规范体系查找指引：工具调用重复→02-工具调用优化系统.mdc，API接口不匹配→01-核心开发质量标准.mdc，服务启动冲突→03-服务进程管理系统.mdc，问题诊断→04-问题诊断解决系统.mdc，文档质量→05-文档生成质量控制.mdc，编码Git→06-编码Git管理规范.mdc，时间处理→07-日期时间处理标准.mdc",
    "规范执行优先级分级：P0立即执行（状态缓存/API兼容/进程管理），P1紧急优化（文档控制/并行化/错误处理），P2中期改进（质量监控/知识沉淀/流程标准化），P3长期优化（自动化测试/持续改进机制）",
    "核心设计原则四项：预防重于治疗（建立预防性机制而不是事后修复），效率优于完美（在质量和速度间找到最优平衡），标准化优于个性化（统一规范减少认知负担），自动化优于手工化（减少人工干预和错误）",
    "量化成功指标监控：工具调用重复率从70-80%降至<10%，文档信息密度从1.2%提升至>70%，问题解决时间从80分钟缩短至<30分钟，API接口一致性从60%提升至>95%",
    "预期改进效果目标：问题解决时间缩短62%（80分钟→30分钟），工具调用减少65%（1380+次→400-500次），文档生成优化80%（5000+行→1000行内），重复问题减少90%，服务稳定性提升80%，Claude请求次数减少65%，维护成本降低70%，开发调试时间缩短55%",
    "API端点完整性验证：所有必需的API端点必须实现（用户管理/库存管理/聊天系统），前端API方法必须与后端路由一致，缺失的API方法必须自动补全或明确报错",
    "API路径兼容性映射：建立旧路径到新路径的自动重定向机制，避免404错误，确保API版本兼容性",
    "WebSocket方法完整性检查：聊天系统相关方法（notifyNewSession/forwardChatMessage/broadcastToAdmins/sendToUser/handleTyping）必须实现，库存系统相关方法（notifyMerchants/notifyInventoryUpdate/broadcastSystemMessage）必须实现，缺失方法必须自动生成基础实现",
    "数据库事务安全执行：事务操作必须包含超时保护（默认30秒），事务提交前必须检查finished状态避免重复提交，事务回滚必须安全处理避免已完成事务错误，实施智能重试策略（最多3次，指数退避）",
    "事务错误类型分析：区分可重试错误（deadlock/timeout）和不可重试错误（transaction_already_finished），根据错误类型决定重试策略",
    "环境变量完整性保证：必需的环境变量（数据库/服务器/外部服务/WebSocket）必须配置，缺失时自动生成.env模板，服务启动前必须验证配置完整性",
    "依赖版本兼容性管理：核心依赖版本必须符合项目要求（express/sequelize/mysql2/socket.io/jsonwebtoken等），检测版本不兼容时必须报告并提供升级建议",
    "数据库模型关联标准化：User/CustomerSession/ChatMessage等模型关联必须正确配置，缺失的关联必须自动建立（hasMany/belongsTo），关联配置必须包含正确的as和foreignKey",
    "综合质量检查系统：定期执行API完整性/WebSocket完整性/环境变量/依赖版本的全面检查，计算综合质量评分，生成关键问题清单和改进建议",
    "质量评分标准：综合质量评分<70分需要显著改进，高优先级问题必须优先解决，质量检查结果必须包含具体的修复建议",
    "状态检查缓存机制：健康检查/PM2状态/端口检查/进程检查/数据库状态必须使用5分钟缓存，避免重复调用，缓存命中率目标>30%",
    "重复检查强制拦截：同一检查5分钟内禁止重复执行，单次会话同一检查最多3次，超限自动拦截并报错",
    "工具调用预算控制：简单任务最多20次调用，中等任务最多50次调用，复杂任务最多100次调用，超预算自动中断",
    "并行执行强制优化：独立操作必须并行执行（系统状态检查/文件操作/数据库操作），并行化率目标>60%，最大化执行效率",
    "智能重试策略：网络超时重试3次指数退避，资源忙重试5次，服务不可用重试3次，失败时尝试替代方案（缓存/重启服务）",
    "工具调用效率监控：实时记录调用次数/成功率/缓存率/并行率/平均耗时，每10次调用生成效率报告，综合效率目标>80%",
    "工具选择智能优化：根据成功率/平均耗时/可缓存性选择最优工具，优先选择高成功率和可缓存的工具",
    "效率指标阈值控制：重复率<10%，并行率>60%，缓存命中率>30%，单次调用<30秒，超阈值自动告警",
    "工具调用浪费预防：目标工具调用减少65%（1380+次→400-500次），时间浪费减少（450-665分钟→<150分钟），重复检查率从70-80%降至<10%",
    "工具调用前置检查：每次工具调用前必须检查缓存是否可用、是否可并行执行、是否真正必要、是否设置超时限制",
    "工具调用后置处理：每次工具调用后必须记录性能数据、更新缓存信息、检查预算使用、分析优化机会",
    "会话效率报告：每次会话结束必须生成效率报告（总调用次数/成功率/缓存率/并行率/综合效率评分），与基准数据对比改进效果",
    "失败模式智能分析：根据错误信息自动识别失败模式（网络超时/权限拒绝/资源忙/服务不可用），应用对应的重试策略和替代方案",
    "操作依赖关系检查：判断操作间是否有依赖关系（文件编辑→文件读取/服务启动→健康检查/进程终止→进程检查），有依赖串行执行无依赖并行执行",
    "缓存失效智能管理：仅在状态确实变更后清除缓存（服务重启/配置修改/代码部署），避免不必要的缓存清除导致重复检查",
    "预算动态分配：根据任务复杂度动态分配工具调用预算和时间预算，实时监控使用情况，超限自动中断并报告",
    "并行操作模式库：维护可并行操作模式库（系统状态检查/文件操作/数据库操作），自动识别和分组可并行操作",
    "工具效率统计更新：持续更新工具效率统计数据（成功率/平均耗时/可缓存性），用于后续工具选择优化",
    "进程冲突智能检测：启动服务前必须检测端口占用冲突netstat -tlnp和重复Node.js进程ps aux，发现冲突时自动清理保留最新进程，验证清理效果确保仅剩1个进程",
    "进程清理安全策略：优先使用TERM信号优雅终止kill -TERM，失败后使用KILL强制终止kill -KILL，清理后等待3秒验证效果，保留最新启动的进程PID",
    "服务启动前综合预检：并行执行端口冲突检查/重复进程检查/必需文件检查，任一检查失败必须中断启动并报告具体问题，通过后才能启动服务",
    "启动策略智能选择：检测PM2可用性优先使用PM2启动策略，不可用时使用Nodemon启动策略，启动后等待3秒执行健康检查验证状态",
    "PM2标准化配置：强制单进程模式exec_mode=fork instances=1避免多进程冲突，禁用文件监控watch=false，限制重启次数max_restarts=5，配置内存限制max_memory_restart=512M",
    "PM2安全操作封装：启动前检查是否已运行避免重复启动，确保ecosystem.config.js配置文件存在，启动后等待3秒验证状态，重启和停止操作必须验证执行结果",
    "Nodemon配置优化：监控关键目录app.js/routes/models/services，忽略node_modules/logs/public，延迟重启delay=1000避免频繁重启，启动前清理进程冲突",
    "服务健康监控并行化：并行执行进程状态/端口状态/API健康检查使用Promise.allSettled，计算总体健康状态HEALTHY/WARNING/UNHEALTHY，生成详细健康报告和修复建议",
    "API健康检查标准：访问/health端点设置5秒超时，记录响应时间和状态码，失败时返回具体错误信息，响应时间>3秒标记为WARNING",
    "健康检查结果分级：进程重复WARNING/端口冲突ERROR/API不可用ERROR，综合评分<70分需要显著改进，生成优先级修复建议清单",
    "一键服务管理脚本：支持start/stop/restart/status/cleanup操作，自动选择启动策略PM2或Nodemon，操作后自动执行健康检查验证效果",
    "服务管理检查清单：启动前检查端口冲突/重复进程/必需文件/启动策略，运行中监控健康状态/资源使用/错误日志/API响应，停止时优雅终止/清理文件/验证端口释放/记录原因，故障时分析原因/执行清理/选择恢复策略/验证效果",
    "进程状态实时监控：定期检查Node.js和PM2相关进程数量，识别异常或冗余进程，建立正常进程数量基准值，发现异常自动触发清理流程",
    "服务启动验证机制：启动后必须验证端口监听状态/进程运行状态/API响应正常/无错误日志，任一验证失败必须回滚并报告问题",
    "进程管理统一入口：所有进程管理操作必须通过统一接口执行，记录操作日志和结果，实施操作审计和追踪机制，避免直接使用kill命令",
    "问题诊断快速分类：问题分类决策树30秒内完成，A类配置问题30秒-1分钟解决，B类服务问题1-3分钟解决，C类代码问题3-5分钟解决，D类环境问题5-10分钟解决",
    "问题诊断并行检查：所有独立的诊断检查必须并行执行使用Promise.allSettled，避免串行等待浪费时间，健康检查/进程检查/端口检查必须同时进行",
    "问题诊断2分钟快速定位：遵循标准诊断流程检查日志→验证配置→测试连接→分析根因，问题解决时间目标从80分钟缩短至<30分钟，诊断时间不得超过2-5分钟",
    "症状与根因快速区分：明确区分表面症状和根本原因，避免治标不治本，API请求失败可能是权限问题而非API缺失，健康检查失败可能是网络问题而非服务未启动",
    "问题诊断避免误判：API缺失误判需先检查权限和路由定义，服务状态误判需区分服务未启动和网络配置问题，避免在错误方向上浪费时间",
    "快速解决方案执行库：基于问题类型选择标准解决方案，A类配置问题1-2分钟执行，B类服务问题30秒-3分钟执行，C类代码问题3-5分钟执行，解决方案必须可复用和标准化",
    "解决方案效果验证：解决方案执行后必须立即验证效果，配置问题验证API可访问性，服务问题验证健康检查通过，环境问题验证环境就绪，验证失败必须回滚或尝试替代方案",
    "问题解决自动化工作流：端到端自动化问题解决流程包含快速根因分析90秒→执行解决方案30秒-3分钟→验证解决效果30秒，总耗时目标<5分钟",
    "问题解决效率统计：记录问题解决过程的执行时间/成功率/解决方案效果，生成效率报告分析最佳方案和改进机会，持续优化问题解决流程",
    "诊断效率量化目标：诊断方向错误率从30%降至<5%，状态检查重复从3-8次降至1次，诊断时间从15-20分钟降至2-5分钟，问题解决成功率>90%",
    "文档长度硬性控制：状态检查最大50行2KB，简单调试最大100行5KB，中等任务最大200行10KB，复杂系统最大500行25KB（绝对上限），超限自动截断",
    "文档任务类型识别：根据关键词自动识别任务类型（健康检查/状态检查→status_simple，配置修复/简单调试→debug_simple，接口调试/权限修复→medium_task，系统重构/架构调整→complex_system）",
    "文档重复内容检测：健康检查结果最多1次，任务完成确认最多1次，命令执行最多2次，状态报告最多1次，超出容忍度自动去重",
    "文档信息密度优化：最低40%信息密度（基准线），目标70%信息密度（良好水平），优秀90%信息密度（卓越水平），低于10%视为严重失败，自动删除空白行/分割线/空标题/空代码块",
    "文档标准模板强制：status_simple模板最大50行，debug_simple模板最大100行，task_medium模板最大200行，必须包含必需章节，禁止重复模式",
    "文档质量评分系统：长度控制30%权重，信息密度40%权重，重复控制20%权重，结构质量10%权重，综合评分<70分需要显著改进",
    "文档质量等级判定：A级优秀≥90分，B级良好≥80分，C级一般≥70分，D级较差≥60分，F级失败<60分，必须生成改进建议",
    "文档生成自动化：自动检测任务类型→应用标准模板→执行质量控制→去重处理→最终质量验证→生成质量报告，确保信息密度>70%",
    "文档质量持续改进：记录质量历史数据，生成质量趋势报告，平均质量分数<70分时提供改进建议，维护最近50条质量记录",
    "文档生成检查清单：生成前确定任务类型和复杂度，生成中实时检查信息密度，生成后执行长度限制验证和重复内容检测，发布前确认质量评分达标>70分",
    "Git操作风险等级分类：高风险操作(push/force-push/merge/rebase)强制确认，中风险操作(commit/branch创建/tag创建)建议确认，低风险操作(status/log/diff/show)可直接执行，只读操作(fetch/clone/remote -v)可直接执行",
    "Git分支状态智能分析：并行检查本地和远程状态，评估领先和落后提交数量，仅领先提交可直接推送，仅落后提交执行拉取更新，双向分歧需要合并处理",
    "Git命令安全执行：高风险命令(log/show/diff/blame)使用--no-pager禁用分页器，设置30-60秒超时避免卡死，限制输出行数(log --oneline -10)，使用cat管道确保输出完整",
    "文档编码标准化流程：使用chardet检测当前编码，使用python3脚本检测和清理BOM标记，非UTF-8编码自动转换为UTF-8，验证最终编码格式file -i，确保UTF-8无BOM编码",
    "中文显示问题修复：设置LANG=zh_CN.UTF-8和LC_ALL=zh_CN.UTF-8环境变量，配置Git中文支持core.quotepath false，验证终端中文显示od -c测试，检查系统locale配置locale -a",
    "文件操作结果验证：操作后等待3秒文件系统同步避免缓存问题，验证文件存在性和实际内容，检查文件行数和大小，验证内容完整性grep预期内容，确认编码格式UTF-8",
    "跨平台编码环境统一：检测操作系统平台(Linux/macOS/Windows)，Unix-like系统验证locale设置，Windows环境使用chcp 65001，统一Git编码配置，创建.gitattributes文件(*.md text eol=lf)",
    "编码工具可用性检查：检查file/hexdump/xxd/chardet工具可用性，建立工具备选方案映射，优先使用file -i检查编码，不可用时使用python3 chardet，设置统一的编码检查函数",
    "Git操作并行优化：并行执行status/remote/log/branch/tag查询，使用后台进程&和wait等待完成，设置30秒超时避免阻塞，汇总结果到临时文件，清理临时文件",
    "Git错误智能处理：分析错误类型(分支分歧/权限问题/网络问题/合并冲突)，提供针对性解决方案，分支分歧使用pull --rebase或--no-rebase，权限问题检查SSH密钥和仓库权限，网络问题重试或使用代理，冲突问题手动编辑解决",
    "文件系统缓存一致性：文件操作后等待3秒同步，检查文件实际内容而非元数据，验证行数和大小的实际值，内容完整性使用grep验证，编码格式使用file -i验证",
    "时间处理统一标准：全系统统一使用北京时间(Asia/Shanghai/GMT+8)，数据库连接配置timezone: '+08:00'，禁止混用UTC和本地时间，API传输使用ISO8601格式包含+08:00时区信息",
    "时间格式标准化：内部存储使用ISO8601格式(YYYY-MM-DDTHH:mm:ss.sss+08:00)，前端显示使用YYYY-MM-DD HH:mm:ss，中文界面使用YYYY年MM月DD日 HH:mm:ss，禁止使用toUTCString/getTime/toString等不确定时区的方法",
    "时间创建规范：使用new Date().toLocaleString('zh-CN', {timeZone: 'Asia/Shanghai'})创建北京时间，数据库时间字段使用Sequelize的DataTypes.DATE类型，禁止使用NOW()和new Date()混用导致时区不一致",
    "安全ID生成：禁止单独使用Date.now()作为ID避免高并发冲突，使用时间戳+随机数+计数器组合或UUID v4或雪花算法，业务ID必须包含前缀和时间戳(如msg_20251003170511_uuid)",
    "时间计算标准化：使用StandardTimeCalculator工具类处理时间范围查询，避免复杂的手动时间计算，今日/昨日/最近N天等常用查询使用标准方法，时间差计算返回易读格式(X天X小时X分钟)",
    "时间数据验证：API时间参数必须验证格式正确性，支持ISO8601和YYYY-MM-DD HH:mm:ss格式，时间范围必须验证start_time早于end_time，提供清晰的错误信息包含北京时间示例",
    "日志时间戳规范：所有日志必须使用北京时间格式[YYYY-MM-DD HH:mm:ss]，使用StandardLogger统一日志输出，操作日志必须记录北京时间戳，禁止使用toISOString输出UTC时间到日志",
    "时间计算缓存：频繁的时间计算结果使用1分钟缓存(getTodayStart/getTodayEnd/getCurrentWeekStart)，定期清理过期缓存，提升性能减少重复计算",
    "数据库时区配置：数据库会话必须设置SET time_zone = '+08:00'，Sequelize初始化设置dialectOptions: {timezone: '+08:00'}，环境变量TZ='Asia/Shanghai'，确保数据库服务器时区为北京时间",
    "时间处理测试：所有时间处理功能必须有单元测试验证北京时间正确性，测试时间范围计算/格式化/验证/ID生成等功能，确保时区处理一致性",
    "规范体系导航：遇到问题时根据症状快速定位规范文档(工具重复→02-工具调用优化，API不匹配→01-核心质量标准，进程冲突→03-服务进程管理，诊断慢→04-问题诊断，文档长→05-文档质量控制，编码Git→06-编码Git管理，时间处理→07-日期时间标准)",
    "规范实施优先级：P0立即执行(状态缓存/进程冲突/文档长度)，P1紧急优化(API兼容/快速诊断/编码标准)，P2中期改进(时间统一/质量监控)，按优先级分阶段实施避免一次性改动过大",
    "规范效果量化：持续监控工具调用重复率目标<10%，文档信息密度目标>70%，问题解决时间目标<30分钟，API接口一致性目标>95%，综合效率评分目标>80分",
    "规范持续改进：记录每次规范使用的效果(解决时间/成功率/问题类型)，定期生成效果报告，识别成功率<80%或耗时>5分钟的规范进行优化，建立规范改进反馈机制",
    "核心问题统计意识：累计效率损失450-665分钟需降至<100分钟，工具调用浪费1380+次需降至400-500次，文档信息重复率300-500%需降至<50%，文档膨胀率2000-5000%需降至<200%",
    "六大核心问题预防：重复状态检查(35+次→<5次)、API接口不匹配(15+次→0次)、WebSocket功能缺失(8+次→0次)、服务进程管理混乱(12+次→0次)、数据库事务错误(6+次→0次)、文档生成冗余(100%→<10%)",
    "系统性解决思维：从解决问题到预防问题的思维升级，将过往经验教训转化为可复用的规则和模式，建立可传承的知识体系，预防重于治疗",
    "核心设计原则强化：预防重于治疗(建立预防性机制而不是事后修复)、效率优于完美(在质量和速度间找到最优平衡)、标准化优于个性化(统一规范减少认知负担)、自动化优于手工化(减少人工干预和错误)",
    "量化成功指标追踪：工具调用重复率从70-80%降至<10%(改进85%)、文档信息密度从1.2%提升至>70%(提升58倍)、问题解决时间从80分钟缩短至<30分钟(缩短62%)、API接口一致性从60%提升至>95%(提升58%)",
    "预期改进效果承诺：问题解决时间缩短62%、工具调用减少65%、文档生成优化80%、重复问题减少90%、服务稳定性提升80%、Claude请求次数减少65%、维护成本降低70%、开发调试时间缩短55%",
    "规范查找快速指引系统：建立问题症状到规范文档的快速映射机制，遇到问题时30秒内定位到对应规范文档，避免盲目搜索和重复查找",
    "规范执行三级优先级：P0立即执行(状态缓存/API兼容/进程管理/文档控制)、P1紧急优化(并行化/错误处理/质量监控)、P2中期改进(知识沉淀/流程标准化)、P3长期优化(自动化测试/持续改进机制)",
    "成本控制量化目标：Claude请求次数减少65%、维护成本降低70%、开发调试时间缩短55%、整体效率提升目标>80%",
    "知识体系可传承性：所有规则和经验必须文档化、标准化、可复用，建立问题解决方案模板库，新成员可快速上手遵循规范",
    "效率损失实时监控：每次会话记录工具调用次数/重复率/文档长度/问题解决时间，与基准数据对比，超标自动告警并提供改进建议",
    "API端点完整性强制验证：所有必需API端点必须实现(用户管理/库存管理/聊天系统)，前端API方法必须与后端路由一致，缺失方法自动补全或明确报错，避免TypeError: API.xxx is not a function错误",
    "API路径强制兼容映射：建立旧路径到新路径的自动重定向机制(/admin/chat/sessions→/api/v2/admin/chat/sessions)，避免404错误，确保API版本兼容性，自动生成兼容性路由",
    "WebSocket方法强制完整性：聊天系统方法(notifyNewSession/forwardChatMessage/broadcastToAdmins/sendToUser/handleTyping)必须实现，库存系统方法(notifyMerchants/notifyInventoryUpdate/broadcastSystemMessage)必须实现，缺失方法自动生成基础实现避免功能缺失",
    "数据库事务安全执行模式：事务操作必须包含超时保护(默认30秒)，提交前检查finished状态避免重复提交，回滚必须安全处理避免已完成事务错误，实施智能重试策略(最多3次指数退避)，区分可重试错误(deadlock/timeout)和不可重试错误(transaction_already_finished)",
    "环境变量强制完整性：必需环境变量(数据库/服务器/外部服务/WebSocket)必须配置，缺失时自动生成.env模板，服务启动前验证配置完整性，避免因配置缺失导致服务启动失败",
    "依赖版本强制兼容性：核心依赖版本必须符合项目要求(express^4.18/sequelize^6.35/mysql2^3.6/socket.io^4.7/jsonwebtoken^9.0)，检测版本不兼容时报告并提供升级建议",
    "数据库模型关联标准化：User/CustomerSession/ChatMessage等模型关联必须正确配置，缺失关联自动建立(hasMany/belongsTo)，关联配置必须包含正确的as和foreignKey，避免查询时关联错误",
    "综合质量检查自动化：定期执行API完整性/WebSocket完整性/环境变量/依赖版本/模型关联的全面检查，计算综合质量评分，生成关键问题清单和改进建议，质量评分<70分需要显著改进",
    "开发前强制检查清单：API端点是否完整/WebSocket方法是否实现/环境变量是否配置/依赖版本是否兼容/数据库关联是否正确，不通过不允许继续开发",
    "发布前强制验证清单：所有质量检查是否通过/综合质量评分是否>85分/关键功能是否完整/配置文件是否就绪/错误处理是否健全，不通过不允许发布",
    "质量标准五大核心原则：API强制一致性(前后端接口必须匹配)、WebSocket功能完整性(实时通信方法必须实现)、事务处理安全性(避免重复提交和回滚错误)、配置管理标准化(环境变量完整性)、质量检查自动化(综合评分机制)",
    "前端API方法必需清单：getUserInventory/useInventoryItem/transferInventoryItem/checkPremiumAccess/unlockPremiumSpace/getTransactionHistory/getTransactionStats，缺失时自动补全并抛出明确错误",
    "API路径兼容映射表：/admin/chat/sessions→/api/v2/admin/chat/sessions、/api/inventory→/api/v2/inventory/list、/api/upload→/api/v2/photo/upload、/api/auth/verify→/api/v2/auth/verify，自动生成兼容性路由预防404",
    "WebSocket聊天方法必需：notifyNewSession(通知新会话)/forwardChatMessage(转发消息)/broadcastToAdmins(广播管理员)/sendToUser(发送用户)/handleTyping(处理输入状态)，缺失自动生成基础实现",
    "WebSocket库存方法必需：notifyMerchants(通知商户)/notifyInventoryUpdate(通知库存更新)/broadcastSystemMessage(广播系统消息)，基于方法名自动实现notify和broadcast逻辑",
    "事务超时保护机制：默认30秒超时，使用Promise.race竞速执行，超时自动触发回滚，避免长时间阻塞数据库连接",
    "事务状态检查机制：提交前检查transaction.finished状态，已完成事务不重复提交，回滚前检查finished状态，已完成事务不回滚避免错误",
    "事务错误智能分析：transaction_already_finished不可重试，database_deadlock可重试，connection_timeout可重试，unknown_error默认可重试，根据错误类型决定重试策略",
    "事务重试指数退避：第1次重试延迟1秒，第2次延迟2秒，第3次延迟4秒，最大延迟5秒，最多重试3次后抛出错误",
    "环境变量分类管理：database类(DB_HOST/DB_PORT/DB_NAME/DB_USER/DB_PASSWORD)、server类(PORT/NODE_ENV/JWT_SECRET)、external_services类(REDIS_URL/SEALOS_ACCESS_KEY/SEALOS_SECRET_KEY)、websocket类(WS_PORT/WS_PATH)",
    "环境变量自动模板生成：检测到缺失环境变量时自动生成.env模板文件，包含所有必需变量和默认值示例，提供清晰的配置说明",
    "核心依赖版本标准：express^4.18/sequelize^6.35/mysql2^3.6/socket.io^4.7/jsonwebtoken^9.0/bcryptjs^2.4/cors^2.8/dotenv^16.3，开发依赖nodemon^3.0/jest^29.7/supertest^6.3/eslint^8.50",
    "依赖版本兼容性检查：检测MISSING缺失依赖和VERSION_INCOMPATIBLE版本不兼容，比较已安装版本和要求版本，提供具体的问题类型和修复建议",
    "综合质量评分计算：API完整性/WebSocket完整性/环境变量/依赖版本四项检查，通过检查数/总检查数*100=综合评分，<70分需要显著改进",
    "质量问题优先级分级：api_completeness高优先级HIGH、websocket_completeness高优先级HIGH、environment_variables中优先级MEDIUM、dependencies中优先级MEDIUM",
    "质量改进建议生成：综合评分<70分提示显著改进，高优先级问题优先解决，API缺失提示实现端点，WebSocket缺失提示实现方法，自动生成针对性建议",
    "数据库模型标准关联：User.hasMany(UserInventory/CustomerSession/ChatMessage)、CustomerSession.belongsTo(User)和hasMany(ChatMessage)、ChatMessage.belongsTo(CustomerSession/User)，缺失关联自动建立",
    "模型关联自动验证：检查模型是否存在，检查关联是否已建立，缺失关联自动调用hasMany/belongsTo建立，记录建立日志便于追踪",
    "质量检查自动化脚本：一键执行API/WebSocket/环境变量/依赖版本/综合评分五项检查，使用node -e执行检查逻辑，生成完整质量报告",
    "开发前五项强制检查：API端点完整性/WebSocket方法实现/环境变量配置/依赖版本兼容/数据库关联正确，任一项不通过禁止继续开发",
    "发布前五项强制验证：质量检查通过/综合评分>85分/关键功能完整/配置文件就绪/错误处理健全，任一项不通过禁止发布上线",
    "工具调用浪费量化统计：累计浪费1380+次(预期200-300次)、时间浪费450-665分钟(7.5-11小时)、重复检查率70-80%(应<10%)、最严重案例健康检查重复12+次",
    "状态检查缓存TTL配置：health_check_3000缓存5分钟、pm2_status缓存5分钟、port_check_3000缓存5分钟、process_check缓存3分钟、database_status缓存10分钟",
    "缓存检查智能机制：检查缓存有效性(当前时间-缓存时间<TTL)、缓存命中输出使用时间、缓存未命中执行检查并更新、记录缓存命中率统计",
    "缓存清除触发条件：仅在状态确实变更后清除(服务重启/配置修改/代码部署)、避免不必要的缓存清除、记录清除原因便于追踪",
    "重复检查强制拦截：5分钟内禁止重复同一检查、单次会话同一检查最多3次、超限自动抛出错误中断、记录检查历史和次数统计",
    "工具调用预算分配：simple_status_check最多20次调用5分钟、medium_debug_task最多50次调用15分钟、complex_system_task最多100次调用30分钟",
    "预算超限强制控制：实时监控调用次数和时间使用、超过分配预算自动抛出错误中断、输出预算使用百分比和剩余额度",
    "并行操作模式识别：system_status_check(health/pm2/netstat/ps)并行、file_operations(package.json/app.js/.env)并行、database_operations(connection/structure/integrity)并行",
    "并行执行智能调度：使用Promise.allSettled并行执行、记录成功率和总耗时、并行化率目标>60%、低于60%输出警告",
    "操作依赖关系判断：file_edit→file_read有依赖串行、service_start→health_check有依赖串行、process_kill→process_check有依赖串行、无依赖关系并行执行",
    "失败模式智能分析：network_timeout重试3次指数退避(1s/2s/4s)、permission_denied重试1次延迟500ms、resource_busy重试5次(500ms/1s/1.5s/2s/3s)、service_unavailable重试3次(2s/5s/10s)",
    "智能重试替代方案：network_timeout尝试local_cache/fallback_endpoint、permission_denied尝试alternative_method、resource_busy尝试wait_and_retry/force_unlock、service_unavailable尝试restart_service",
    "效率监控实时统计：记录totalCalls/successfulCalls/cachedCalls/parallelCalls/totalTime/efficiency、每10次调用生成效率报告、计算综合效率评分",
    "效率评级标准：A级≥90%效率优秀继续保持、B级≥80%效率良好可优化并行化、C级≥70%效率一般需增加缓存、D级≥60%效率较低减少重复调用、F级<60%效率严重不足全面优化",
    "工具效率统计数据：curl_health_check成功率90%耗时1500ms可缓存HIGH、pm2_status成功率95%耗时1000ms可缓存HIGH、process_check成功率95%耗时1000ms可缓存MEDIUM、file_read成功率99%耗时500ms可缓存LOW、database_check成功率85%耗时3000ms可缓存HIGH",
    "最优工具选择算法：综合评分=成功率*0.5+(4000-耗时)/4000*0.3+可缓存性(HIGH:0.2/MEDIUM:0.1/LOW:0)、选择评分最高的工具、输出选择理由和评分",
    "并行状态检查脚本：使用后台进程&并行执行health/pm2/netstat/ps检查、设置超时限制(30s/10s/10s/10s)、使用wait等待所有进程完成、分析结果智能决策避免额外调用",
    "效率指标阈值控制：重复率<10%、并行率>60%、缓存命中率>30%、单次调用<30秒、超阈值自动告警输出具体指标",
    "会话开始前检查：根据任务复杂度分配预算、启用状态检查缓存系统、识别可并行执行操作、设置效率监控阈值",
    "工具调用前检查：检查缓存结果可用性、评估是否可并行执行、验证调用必要性和唯一性、设置合理超时限制",
    "工具调用后处理：记录调用结果和性能数据、更新相关缓存信息、检查预算使用情况、分析优化策略需求",
    "会话结束后分析：生成效率报告和对比分析、识别重复和低效调用模式、记录优化建议和改进机会、更新工具效率统计数据",
    "工具调用五大核心原则：缓存优先复用(避免重复检查)、并行执行最大化(提升执行效率)、智能重试策略(失败模式分析)、效率实时监控(每10次报告)、预算严格控制(超限自动中断)",
    "进程冲突实际案例统计：4个Node.js进程同时运行导致端口冲突、多个nodemon进程重复启动、PM2配置复杂性导致管理混乱、累计时间浪费180-240分钟、累计清理次数25+次",
    "端口冲突智能检测：使用netstat -tlnp检查端口占用、识别冲突进程PID和名称、冲突数量>1时输出详细信息、返回hasConflict标志和清理建议",
    "重复进程智能检测：使用ps aux | grep node检查Node.js进程、过滤app.js和npm相关进程、提取PID/命令/内存/CPU/启动时间、重复数量>1时输出详细信息",
    "综合进程健康检查：并行执行端口检查和进程检查使用Promise.all、计算总体状态HEALTHY/NEEDS_CLEANUP、生成修复建议清单",
    "智能进程清理策略：检测端口冲突和重复进程、保留最新启动的进程PID、使用kill -TERM优雅终止失败则kill -KILL强制终止、等待3秒验证清理效果确保仅剩1个进程",
    "服务启动前综合预检：并行执行端口检查/进程检查/必需文件检查、任一检查失败抛出错误中断启动、通过后输出启动前检查通过",
    "启动策略智能选择：检测pm2可用性优先使用PM2、不可用时使用Nodemon、输出选择的启动策略",
    "服务启动验证机制：启动后等待3秒执行健康检查、验证overallStatus是否HEALTHY、状态异常输出警告",
    "PM2标准化配置：exec_mode=fork单进程模式避免冲突、instances=1强制单实例、watch=false禁用文件监控、max_restarts=5限制重启次数、max_memory_restart=512M内存限制、kill_timeout=5000ms终止超时",
    "PM2安全操作封装：启动前检查是否已运行、确保ecosystem.config.js存在不存在自动生成、启动后等待3秒验证状态、重启和停止操作验证执行结果",
    "PM2状态获取：使用pm2 jlist获取JSON格式状态、提取running/status/pid/uptime/restarts/memory/cpu信息、未找到进程返回stopped状态",
    "Nodemon标准化配置：watch监控关键目录(app.js/routes/models/services)、ignore忽略node_modules/logs/public、delay=1000延迟重启避免频繁重启、exec=node app.js执行命令",
    "Nodemon安全启动：启动前检查并清理进程冲突、生成nodemon.json配置文件、使用child_process.spawn启动、监听error和exit事件记录异常",
    "综合健康监控并行化：并行执行进程检查/端口检查/API健康检查使用Promise.allSettled、记录总检查耗时、计算总体状态HEALTHY/WARNING/UNHEALTHY",
    "API健康检查标准：访问http://localhost:3000/health设置5秒超时、记录响应时间和状态码、返回available/status/responseTime/message",
    "健康检查结果格式化：process检查hasDuplicates返回WARNING、port检查hasConflict返回ERROR、api检查available返回HEALTHY、生成详细的状态消息",
    "健康报告生成：输出时间戳和检查耗时、显示总体状态和各项检查结果、响应时间>3秒标记WARNING、生成针对性修复建议",
    "一键服务管理命令：支持start/stop/restart/status/cleanup操作、自动选择启动策略pm2或nodemon、操作后自动执行健康检查验证效果",
    "服务启动四步流程：1.清理进程冲突、2.选择启动策略、3.执行启动命令、4.等待3秒后验证健康状态",
    "并行健康检查脚本：使用后台进程&并行执行curl/pm2/netstat检查、设置超时限制(10s/5s/5s)、使用wait等待所有进程完成、分析结果输出健康状态",
    "启动前四项检查：端口冲突检查/重复进程检查/必需文件检查/启动策略选择，任一失败中断启动",
    "运行中四项监控：定期健康状态监控/资源使用情况检查/错误日志监控/API响应验证",
    "停止时四项操作：优雅停止所有进程/清理临时文件和日志/验证端口释放/记录停止原因",
    "故障恢复四步流程：分析故障原因/执行清理操作/选择恢复策略/验证恢复效果",
    "服务管理五大核心原则：统一进程管理(避免多进程冲突)、冲突智能检测(端口和进程)、安全操作封装(PM2和Nodemon)、并行健康监控(提升检查效率)、自动化故障恢复(智能清理和重启)",
    "诊断效率问题统计：诊断方向错误率30%、症状与根因混淆浪费15-20分钟、状态检查重复3-8次、诊断时间过长平均15-20分钟(目标2-5分钟)",
    "API缺失误判案例：表面症状请求失败认为API不存在、错误诊断以为后端缺少实现、实际根因认证权限问题API存在但需管理员权限、时间浪费20分钟(应2分钟)",
    "服务状态误判案例：表面症状健康检查失败、错误诊断认为服务没启动、实际根因服务正常网络配置问题、时间浪费15分钟(应1分钟)",
    "问题快速分类决策树：A类配置问题(404/路径/配置)30秒-1分钟解决、B类服务问题(连接/端口/进程)1-3分钟解决、C类代码问题(TypeError/逻辑/数据)3-5分钟解决、D类环境问题5-10分钟解决",
    "A类配置问题诊断：并行检查路由定义和.env文件、30秒内完成诊断、识别MISSING_ROUTE/MISSING_CONFIG根因、提供add_route_mapping/create_env_file解决方案",
    "B类服务问题诊断：并行执行health/process/port检查、1分钟内完成诊断、识别API_ERROR/SERVICE_DOWN/DUPLICATE_PROCESSES根因、提供restart/start/cleanup解决方案",
    "C类代码问题诊断：检查TypeError和WebSocket问题、2-3分钟完成诊断、识别MISSING_API_METHOD/WEBSOCKET_ERROR根因、提供implement_api_method/fix_websocket解决方案",
    "D类环境问题诊断：检查Node.js版本和npm依赖、识别NODE_ENV_ERROR/DEPENDENCY_ERROR根因、提供fix_node_environment/reinstall_dependencies解决方案",
    "配置问题解决方案：add_route_mapping添加API路径映射1-2分钟、create_env_file创建环境配置文件包含数据库/服务器/第三方服务配置",
    "服务问题解决方案：start_service智能选择PM2或npm启动30秒-3分钟、cleanup_processes保留最新进程清理其他、restart_service优雅重启验证健康检查",
    "代码问题解决方案：implement_api_method实现缺失的API方法(getUserInventory/useInventoryItem)3-5分钟、fix_websocket_implementation取消注释WebSocket方法调用",
    "环境问题解决方案：fix_node_environment验证Node.js环境、reinstall_dependencies删除node_modules重新npm install",
    "快速根因分析脚本：90秒内完成、第1步症状分类30秒、第2步并行根因检查60秒、输出问题类型/根本原因/解决方案",
    "症状根因区分机制：配置问题检查ENV_MISSING/路由定义/API权限、服务问题检查健康状态/端口占用/进程冲突、明确区分表面症状和实际根因",
    "解决方案执行监控：记录执行时间和成功状态、验证解决效果(API可访问性/服务健康/环境就绪)、返回overallSuccess综合结果",
    "解决效果验证标准：A类C类验证API是否可访问(非404)、B类验证服务是否正常响应(healthy)、D类验证环境是否就绪(node/npm版本)",
    "自动化问题解决流程：第1步快速根因分析90秒、第2步执行解决方案30秒-3分钟、第3步验证解决效果30秒、总耗时<5分钟",
    "问题解决统计分析：记录totalProblems/solvedProblems/averageTime、计算解决方案成功率、统计问题类型分布、生成效率报告",
    "诊断前四项准备：明确记录问题症状和错误信息、估计问题复杂度和预期时间、选择适当诊断策略(2分钟vs5分钟)、准备并行诊断工具",
    "诊断中四项要求：严格按时间限制执行、优先使用并行检查避免串行、准确区分症状和根本原因、选择最匹配解决方案",
    "执行后四项验证：立即验证解决效果、检查是否引入新问题、记录解决过程和耗时、更新解决方案成功率统计",
    "完成后四项总结：分析根本原因和预防措施、更新解决方案知识库、记录经验教训和改进建议、评估整体解决效率",
    "问题诊断五大核心原则：快速准确定位(2-5分钟内)、症状根因区分(避免治标不治本)、并行诊断执行(提升效率)、标准解决方案(可复用方案库)、效果验证确认(确保问题解决)",
    "文档膨胀严重案例：cursor_1.md 165KB 5557行(超标5557%)、cursor_5.md 181KB 6804行(超标4536%)、cursor_8.md 63KB 2084行(超标4068%)、平均信息密度1.2%(98.8%冗余)、平均重复率300-500%",
    "重复内容模式统计：健康检查结果重复12次、任务完成确认重复20+次、命令输出重复记录10次、状态报告重复多次",
    "文档长度硬性标准：status_check最大50行2KB、simple_debug最大100行5KB、medium_task最大200行10KB、complex_system最大500行25KB(绝对上限)",
    "文档长度强制截断：超过行数限制自动截断、保留前N行内容、添加截断标记、记录原始长度和违规信息",
    "任务类型自动识别：status_check关键词(健康检查/状态检查/服务运行)、simple_debug关键词(配置修复/API路径/简单调试)、medium_task关键词(接口调试/权限修复/数据库问题)、complex_system关键词(系统重构/架构调整/大型功能)",
    "重复模式智能检测：healthCheckResults最多1次、taskCompletions最多1次、curlCommands最多2次、statusReports最多1次、超过容忍度自动去重",
    "自动去重处理：检测重复模式、保留前N个匹配、删除其余重复内容、记录删除行数和模式",
    "语义相似度去重：计算段落相似度、80%相似度阈值、删除重复段落、记录删除数量",
    "标准文档模板库：status_simple最大50行包含检查结果/核心数据/总结、debug_simple最大100行包含问题分析/解决方案/验证结果、task_medium最大200行包含任务概述/实现步骤/测试验证",
    "模板验证规则：长度验证不超过标准、必需章节验证(检查结果/问题分析/任务概述)、禁止模式检查(重复描述/重复确认/重复命令)",
    "信息密度标准：最低40%基准线、目标70%良好水平、优秀90%卓越水平、低于10%严重失败",
    "信息密度优化：删除空白和装饰行、合并相似内容、压缩冗余表述、提升密度至目标水平",
    "冗余内容压缩规则：状态确认压缩、时间信息压缩、重复确认压缩、应用压缩规则减少字符数",
    "文档质量评分系统：长度控制30%权重、信息密度40%权重、重复控制20%权重、结构质量10%权重、综合评分计算",
    "质量等级判定：A级≥90分优秀、B级≥80分良好、C级≥70分一般、D级≥60分较差、F级<60分失败",
    "质量改进建议：长度<0.7建议控制文档长度、密度<0.7建议提高信息密度、重复<0.8建议减少重复内容、结构<0.8建议改善文档结构",
    "文档生成自动化流程：检测任务类型→应用标准模板→生成初始内容→执行质量控制→去重处理→最终质量验证→输出文档→生成质量报告",
    "质量趋势监控：记录最近50条质量数据、计算平均质量分数、统计等级分布、生成趋势报告、平均分<70分提供改进建议",
    "生成前四项准备：确定任务类型和复杂度、选择对应标准模板、设定长度和密度目标、准备必要数据和内容",
    "生成中四项要求：严格按照模板结构编写、实时检查信息密度、避免重复内容和描述、保持章节逻辑清晰",
    "生成后四项验证：执行长度限制验证、运行重复内容检测、计算信息密度评分、进行综合质量评估",
    "发布前四项确认：确认质量评分达标>70分、验证模板规范遵守情况、检查关键信息完整性、记录质量数据用于改进",
    "文档质量五大核心原则：长度硬性控制(强制截断超标文档)、密度强制优化(目标70%信息密度)、重复智能检测(自动去重处理)、模板标准化(统一文档结构)、质量持续改进(趋势监控和优化)",
    "Git操作强制授权机制：push/commit/merge/rebase等操作前必须明确征得用户同意、说明操作影响范围和潜在风险、严格按授权范围执行、用户拒绝或未明确同意立即停止",
    "Git操作风险分级：高风险(push/force-push/merge/rebase)强制确认、中风险(commit/branch创建/tag创建)建议确认、低风险(status/log/diff/show)可直接执行、只读(fetch/clone/remote -v)可直接执行",
    "Git分支冲突智能处理：并行检查本地和远程状态、分析领先和落后提交数量、仅领先可直接推送、仅落后执行拉取更新、双向分歧需要合并处理",
    "Git命令安全执行：高风险命令(log/show/diff/blame)使用--no-pager禁用分页器、设置30-60秒超时避免卡死、限制输出行数(log --oneline -10)、使用cat管道确保输出完整",
    "Git命令批量并行：并行执行status/remote/log/branch/tag查询、使用后台进程&和wait等待完成、设置30秒超时避免阻塞、汇总结果到临时文件、清理临时文件",
    "文档编码标准化流程：使用chardet检测当前编码、使用python3脚本检测和清理BOM标记、非UTF-8编码自动转换为UTF-8、验证最终编码格式file -i、确保UTF-8无BOM编码",
    "BOM标记检测清理：使用python3检测文件开头3字节是否为\\xef\\xbb\\xbf、检测到BOM自动清理、转换后验证编码格式、批量处理所有.md文件",
    "中文显示问题修复：设置LANG=zh_CN.UTF-8和LC_ALL=zh_CN.UTF-8环境变量、配置Git中文支持core.quotepath false、验证终端中文显示od -c测试、检查系统locale配置locale -a",
    "Git中文编码配置：git config --global core.quotepath false、git config --global i18n.commitencoding utf-8、git config --global i18n.logoutputencoding utf-8、创建.gitattributes文件(*.md text eol=lf)",
    "文件操作结果验证：操作后等待3秒文件系统同步避免缓存问题、验证文件存在性和实际内容、检查文件行数和大小、验证内容完整性grep预期内容、确认编码格式UTF-8",
    "跨平台编码环境统一：检测操作系统平台(Linux/macOS/Windows)、Unix-like系统验证locale设置、Windows环境使用chcp 65001、统一Git编码配置、创建.gitattributes文件(*.md text eol=lf)",
    "系统工具可用性检查：检查file/hexdump/xxd/chardet工具可用性、建立工具备选方案映射、优先使用file -i检查编码、不可用时使用python3 chardet、设置统一的编码检查函数",
    "Git操作并行优化：并行执行status/remote/log/branch/tag查询、使用后台进程&和wait等待完成、设置30秒超时避免阻塞、汇总结果到临时文件、清理临时文件",
    "Git错误智能处理：分析错误类型(分支分歧/权限问题/网络问题/合并冲突)、提供针对性解决方案、分支分歧使用pull --rebase或--no-rebase、权限问题检查SSH密钥和仓库权限、网络问题重试或使用代理、冲突问题手动编辑解决",
    "Git操作前四项检查：检查操作风险等级和授权要求、并行执行Git状态和远程仓库检查、验证本地编码环境配置、确认文件编码格式一致性",
    "文档操作四项验证：验证文档使用UTF-8无BOM编码、检查中文内容显示是否正常、使用标准化的文件名和路径、操作后验证文件实际内容",
    "Git提交四项确认：检查提交信息的编码格式、验证.gitignore文件完整性、确认临时文件已排除、使用有意义的提交描述",
    "跨平台协作四项标准：统一使用UTF-8编码标准、配置一致的行结束符(LF)、验证不同环境下的编码兼容性、建立编码问题的快速诊断机制",
    "编码Git管理五大核心原则：用户授权优先(禁止未授权Git操作)、编码标准统一(UTF-8无BOM)、Git安全操作(超时和分页器控制)、跨平台兼容(统一编码环境)、自动验证确认(文件操作结果验证)",
    "进程冲突智能检测：启动前检查端口占用netstat -tlnp和重复Node.js进程ps aux，发现冲突自动清理保留最新进程，验证清理效果确保仅剩1个进程",
    "进程清理安全策略：优先TERM信号优雅终止kill -TERM，失败后KILL强制终止kill -KILL，清理后等待3秒验证效果，保留最新启动进程PID",
    "服务启动前综合预检：并行执行端口冲突/重复进程/必需文件检查，任一失败中断启动并报告问题，通过后才能启动服务",
    "启动策略智能选择：检测PM2可用性优先使用PM2启动策略，不可用时使用Nodemon启动策略，启动后等待3秒执行健康检查验证状态",
    "PM2标准化配置：强制单进程模式exec_mode=fork instances=1避免多进程冲突，禁用文件监控watch=false，限制重启次数max_restarts=5，配置内存限制max_memory_restart=512M",
    "PM2安全操作封装：启动前检查是否已运行避免重复启动，确保ecosystem.config.js配置文件存在，启动后等待3秒验证状态，重启和停止操作必须验证执行结果",
    "Nodemon配置优化：监控关键目录app.js/routes/models/services，忽略node_modules/logs/public，延迟重启delay=1000避免频繁重启，启动前清理进程冲突",
    "服务健康监控并行化：并行执行进程状态/端口状态/API健康检查使用Promise.allSettled，计算总体健康状态HEALTHY/WARNING/UNHEALTHY，生成详细健康报告和修复建议",
    "API健康检查标准：访问/health端点设置5秒超时，记录响应时间和状态码，失败时返回具体错误信息，响应时间>3秒标记为WARNING",
    "健康检查结果分级：进程重复WARNING/端口冲突ERROR/API不可用ERROR，综合评分<70分需要显著改进，生成优先级修复建议清单",
    "一键服务管理脚本：支持start/stop/restart/status/cleanup操作，自动选择启动策略PM2或Nodemon，操作后自动执行健康检查验证效果",
    "服务管理检查清单：启动前检查端口冲突/重复进程/必需文件/启动策略，运行中监控健康状态/资源使用/错误日志/API响应，停止时优雅终止/清理文件/验证端口释放/记录原因，故障时分析原因/执行清理/选择恢复策略/验证效果",
    "进程状态实时监控：定期检查Node.js和PM2相关进程数量，识别异常或冗余进程，建立正常进程数量基准值，发现异常自动触发清理流程",
    "服务启动验证机制：启动后必须验证端口监听状态/进程运行状态/API响应正常/无错误日志，任一验证失败必须回滚并报告问题",
    "进程管理统一入口：所有进程管理操作必须通过统一接口执行，记录操作日志和结果，实施操作审计和追踪机制，避免直接使用kill命令",
    "文档长度硬性控制：status_check最大50行2KB，simple_debug最大100行5KB，medium_task最大200行10KB，complex_system最大500行25KB(绝对上限)",
    "文档长度强制截断：超过行数限制自动截断，保留前N行内容，添加截断标记，记录原始长度和违规信息",
    "任务类型自动识别：status_check关键词(健康检查/状态检查/服务运行)，simple_debug关键词(配置修复/API路径/简单调试)，medium_task关键词(接口调试/权限修复/数据库问题)，complex_system关键词(系统重构/架构调整/大型功能)",
    "重复模式智能检测：healthCheckResults最多1次，taskCompletions最多1次，curlCommands最多2次，statusReports最多1次，超过容忍度自动去重",
    "自动去重处理：检测重复模式，保留前N个匹配，删除其余重复内容，记录删除行数和模式",
    "语义相似度去重：计算段落相似度，80%相似度阈值，删除重复段落，记录删除数量",
    "标准文档模板库：status_simple最大50行包含检查结果/核心数据/总结，debug_simple最大100行包含问题分析/解决方案/验证结果，task_medium最大200行包含任务概述/实现步骤/测试验证",
    "模板验证规则：长度验证不超过标准，必需章节验证(检查结果/问题分析/任务概述)，禁止模式检查(重复描述/重复确认/重复命令)",
    "信息密度标准：最低40%基准线，目标70%良好水平，优秀90%卓越水平，低于10%严重失败",
    "信息密度优化：删除空白和装饰行，合并相似内容，压缩冗余表述，提升密度至目标水平",
    "冗余内容压缩规则：状态确认压缩，时间信息压缩，重复确认压缩，应用压缩规则减少字符数",
    "文档质量评分系统：长度控制30%权重，信息密度40%权重，重复控制20%权重，结构质量10%权重，综合评分计算",
    "质量等级判定：A级≥90分优秀，B级≥80分良好，C级≥70分一般，D级≥60分较差，F级<60分失败",
    "质量改进建议：长度<0.7建议控制文档长度，密度<0.7建议提高信息密度，重复<0.8建议减少重复内容，结构<0.8建议改善文档结构",
    "文档生成自动化流程：检测任务类型→应用标准模板→生成初始内容→执行质量控制→去重处理→最终质量验证→输出文档→生成质量报告",
    "质量趋势监控：记录最近50条质量数据，计算平均质量分数，统计等级分布，生成趋势报告，平均分<70分提供改进建议",
    "生成前四项准备：确定任务类型和复杂度，选择对应标准模板，设定长度和密度目标，准备必要数据和内容",
    "生成中四项要求：严格按照模板结构编写，实时检查信息密度，避免重复内容和描述，保持章节逻辑清晰",
    "生成后四项验证：执行长度限制验证，运行重复内容检测，计算信息密度评分，进行综合质量评估",
    "发布前四项确认：确认质量评分达标>70分，验证模板规范遵守情况，检查关键信息完整性，记录质量数据用于改进",
    "文档质量五大核心原则：长度硬性控制(强制截断超标文档)、密度强制优化(目标70%信息密度)、重复智能检测(自动去重处理)、模板标准化(统一文档结构)、质量持续改进(趋势监控和优化)",
    "服务进程管理五大核心原则：统一进程管理(避免多进程冲突)、冲突智能检测(端口和进程)、安全操作封装(PM2和Nodemon)、并行健康监控(提升检查效率)、自动化故障恢复(智能清理和重启)",
    "时间处理统一标准：全系统统一使用北京时间(Asia/Shanghai/GMT+8)，数据库连接配置timezone: '+08:00'，禁止混用UTC和本地时间，API传输使用ISO8601格式包含+08:00时区信息",
    "时间格式标准化：内部存储使用ISO8601格式(YYYY-MM-DDTHH:mm:ss.sss+08:00)，前端显示使用YYYY-MM-DD HH:mm:ss，中文界面使用YYYY年MM月DD日 HH:mm:ss，禁止使用toUTCString/getTime/toString等不确定时区的方法",
    "时间创建规范：使用new Date().toLocaleString('zh-CN', {timeZone: 'Asia/Shanghai'})创建北京时间，数据库时间字段使用Sequelize的DataTypes.DATE类型，禁止使用NOW()和new Date()混用导致时区不一致",
    "安全ID生成：禁止单独使用Date.now()作为ID避免高并发冲突，使用时间戳+随机数+计数器组合或UUID v4或雪花算法，业务ID必须包含前缀和时间戳(如msg_20251003170511_uuid)",
    "时间计算标准化：使用StandardTimeCalculator工具类处理时间范围查询，避免复杂的手动时间计算，今日/昨日/最近N天等常用查询使用标准方法，时间差计算返回易读格式(X天X小时X分钟)",
    "时间数据验证：API时间参数必须验证格式正确性，支持ISO8601和YYYY-MM-DD HH:mm:ss格式，时间范围必须验证start_time早于end_time，提供清晰的错误信息包含北京时间示例",
    "日志时间戳规范：所有日志必须使用北京时间格式[YYYY-MM-DD HH:mm:ss]，使用StandardLogger统一日志输出，操作日志必须记录北京时间戳，禁止使用toISOString输出UTC时间到日志",
    "时间计算缓存：频繁的时间计算结果使用1分钟缓存(getTodayStart/getTodayEnd/getCurrentWeekStart)，定期清理过期缓存，提升性能减少重复计算",
    "数据库时区配置：数据库会话必须设置SET time_zone = '+08:00'，Sequelize初始化设置dialectOptions: {timezone: '+08:00'}，环境变量TZ='Asia/Shanghai'，确保数据库服务器时区为北京时间",
    "时间处理测试：所有时间处理功能必须有单元测试验证北京时间正确性，测试时间范围计算/格式化/验证/ID生成等功能，确保时区处理一致性",
    "禁用时间处理方式：禁止使用new Date().toLocaleString()无时区参数、toUTCString()、getTime()单独作ID、toString()格式不统一，必须使用带Asia/Shanghai时区的标准方法",
    "时间处理五大核心原则：北京时间标准化(全系统GMT+8)、格式强制统一(ISO8601+08:00)、时区处理一致(Asia/Shanghai)、ID生成安全(避免冲突)、验证机制完整(参数验证)",
    "规范体系架构：7个系统化规范文档(核心质量标准/工具调用优化/服务进程管理/问题诊断解决/文档质量控制/编码Git管理/日期时间处理)，消除95%重复信息，建立完整质量保证体系",
    "问题症状规范映射：工具重复→02工具调用优化，API404→01核心质量标准，端口冲突→03服务进程管理，诊断慢→04问题诊断解决，文档长→05文档质量控制，编码错误→06编码Git管理，时区不一致→07日期时间处理",
    "规范实施优先级：P0立即实施(状态缓存/进程冲突/文档长度)0-1周，P1核心优化(API兼容/快速诊断/编码标准)1-2周，P2系统完善(时间统一/质量监控/效率仪表板)2-4周",
    "规范实施KPI：工具调用减少65%(173→60次)，问题解决时间缩短62%(80→30分钟)，文档长度减少77%(3500→800行)，重复率降低89%(75%→8%)，API一致性提升58%(60%→95%)",
    "规范效果监控：记录规范使用次数/成功率/解决时间/问题类型，生成效果报告，识别成功率<80%或耗时>5分钟的规范进行优化，建立持续改进机制",
    "规范质量控制：文档长度<1000行，必须包含标题/示例/核心原则，更新时间标记，结构完整性验证，质量评分≥80分为优秀",
    "规范学习路径：新手入门(总则+质量标准)1-2天，进阶应用(工具优化+进程管理)3-5天，高级精通(问题诊断+文档质量)6-7天，专业应用(编码Git+时间处理)持续学习",
    "预期改进效果：问题解决时间缩短62%，工具调用减少65%，文档生成优化77%，重复问题减少89%，服务稳定性提升80%，维护成本降低70%，开发调试时间缩短55%",
    "规范体系价值：预防性思维(从解决问题到预防问题)，知识沉淀(经验转化为标准)，效率提升(系统性解决重复问题)，质量保证(完整控制监控体系)，知识传承(可复用可学习)",
    "规范实施验证清单：重复工具调用减少>60%，文档长度控制在标准范围，API一致性>95%，问题诊断<5分钟，进程冲突消除，时间处理标准化，规范基于实际问题，解决方案可复制，预防机制覆盖核心问题",
    "规范文档体系结构：.cursor/rules/目录包含7个系统化规范文档(00-开发规范总则/01-核心开发质量标准/02-工具调用优化系统/03-服务进程管理系统/04-问题诊断解决系统/05-文档生成质量控制/06-编码Git管理规范/07-日期时间处理标准)",
    "规范体系核心理念：从解决问题到预防问题的思维升级，将过往经验教训转化为可复用的规则和模式，建立可传承的知识体系，预防重于治疗",
    "规范体系设计原则：预防重于治疗(建立预防性机制而不是事后修复)、效率优于完美(在质量和速度间找到最优平衡)、标准化优于个性化(统一规范减少认知负担)、自动化优于手工化(减少人工干预和错误)",
    "规范查找快速指引：遇到工具调用重复问题查阅02-工具调用优化系统.mdc，遇到API接口不匹配查阅01-核心开发质量标准.mdc，遇到服务启动冲突查阅03-服务进程管理系统.mdc，需要快速问题诊断查阅04-问题诊断解决系统.mdc，需要控制文档质量查阅05-文档生成质量控制.mdc，遇到编码Git问题查阅06-编码Git管理规范.mdc，需要时间处理标准查阅07-日期时间处理标准.mdc",
    "规范执行四级优先级：P0立即执行(状态缓存/API兼容/进程管理)，P1紧急优化(文档控制/并行化/错误处理)，P2中期改进(质量监控/知识沉淀/流程标准化)，P3长期优化(自动化测试/持续改进机制)",
    "规范体系量化目标：工具调用重复率从70-80%降至<10%(改进85%)，文档信息密度从1.2%提升至>70%(提升58倍)，问题解决时间从80分钟缩短至<30分钟(缩短62%)，API接口一致性从60%提升至>95%(提升58%)，综合效率评分目标>80%",
    "规范体系预期效果：问题解决时间缩短62%，工具调用减少65%，文档生成优化80%，重复问题减少90%，服务稳定性提升80%，Claude请求次数减少65%，维护成本降低70%，开发调试时间缩短55%",
    "核心开发质量五大原则：API强制一致性(前后端接口必须匹配)、WebSocket功能完整性(实时通信方法必须实现)、事务处理安全性(避免重复提交和回滚错误)、配置管理标准化(环境变量完整性)、质量检查自动化(综合评分机制)",
    "API路径强制兼容映射：建立旧路径到新路径的自动重定向机制(/admin/chat/sessions→/api/v2/admin/chat/sessions、/api/inventory→/api/v2/inventory/list、/api/upload→/api/v2/photo/upload、/api/auth/verify→/api/v2/auth/verify)，避免404错误确保API版本兼容性",
    "前端API方法必需清单：getUserInventory/useInventoryItem/transferInventoryItem/checkPremiumAccess/unlockPremiumSpace/getTransactionHistory/getTransactionStats，缺失时自动补全并抛出明确错误",
    "WebSocket聊天方法必需：notifyNewSession(通知新会话)/forwardChatMessage(转发消息)/broadcastToAdmins(广播管理员)/sendToUser(发送用户)/handleTyping(处理输入状态)，缺失自动生成基础实现",
    "WebSocket库存方法必需：notifyMerchants(通知商户)/notifyInventoryUpdate(通知库存更新)/broadcastSystemMessage(广播系统消息)，基于方法名自动实现notify和broadcast逻辑",
    "事务超时保护机制：默认30秒超时使用Promise.race竞速执行，超时自动触发回滚避免长时间阻塞数据库连接",
    "事务状态检查机制：提交前检查transaction.finished状态避免已完成事务重复提交，回滚前检查finished状态避免已完成事务回滚错误",
    "事务错误智能分析：transaction_already_finished不可重试，database_deadlock可重试，connection_timeout可重试，unknown_error默认可重试，根据错误类型决定重试策略",
    "事务重试指数退避：第1次重试延迟1秒，第2次延迟2秒，第3次延迟4秒，最大延迟5秒，最多重试3次后抛出错误",
    "环境变量分类管理：database类(DB_HOST/DB_PORT/DB_NAME/DB_USER/DB_PASSWORD)、server类(PORT/NODE_ENV/JWT_SECRET)、external_services类(REDIS_URL/SEALOS_ACCESS_KEY/SEALOS_SECRET_KEY)、websocket类(WS_PORT/WS_PATH)",
    "环境变量自动模板生成：检测到缺失环境变量时自动生成.env模板文件，包含所有必需变量和默认值示例，提供清晰的配置说明",
    "核心依赖版本标准：express^4.18/sequelize^6.35/mysql2^3.6/socket.io^4.7/jsonwebtoken^9.0/bcryptjs^2.4/cors^2.8/dotenv^16.3，开发依赖nodemon^3.0/jest^29.7/supertest^6.3/eslint^8.50",
    "依赖版本兼容性检查：检测MISSING缺失依赖和VERSION_INCOMPATIBLE版本不兼容，比较已安装版本和要求版本，提供具体的问题类型和修复建议",
    "数据库模型标准关联：User.hasMany(UserInventory/CustomerSession/ChatMessage)、CustomerSession.belongsTo(User)和hasMany(ChatMessage)、ChatMessage.belongsTo(CustomerSession/User)，缺失关联自动建立",
    "模型关联自动验证：检查模型是否存在，检查关联是否已建立，缺失关联自动调用hasMany/belongsTo建立，记录建立日志便于追踪",
    "综合质量评分计算：API完整性/WebSocket完整性/环境变量/依赖版本四项检查，通过检查数/总检查数*100=综合评分，<70分需要显著改进",
    "质量问题优先级分级：api_completeness高优先级HIGH、websocket_completeness高优先级HIGH、environment_variables中优先级MEDIUM、dependencies中优先级MEDIUM",
    "质量改进建议生成：综合评分<70分提示显著改进，高优先级问题优先解决，API缺失提示实现端点，WebSocket缺失提示实现方法，自动生成针对性建议",
    "开发前五项强制检查：API端点完整性/WebSocket方法实现/环境变量配置/依赖版本兼容/数据库关联正确，任一项不通过禁止继续开发",
    "发布前五项强制验证：质量检查通过/综合评分>85分/关键功能完整/配置文件就绪/错误处理健全，任一项不通过禁止发布上线",
    "工具调用优化五大核心原则：缓存优先复用(避免重复检查)、并行执行最大化(提升执行效率)、智能重试策略(失败模式分析)、效率实时监控(每10次报告)、预算严格控制(超限自动中断)",
    "工具调用效率量化浪费统计：累计工具调用浪费1380+次(预期200-300次)、累计时间浪费450-665分钟(7.5-11小时)、重复检查率70-80%(应控制在<10%)、最严重案例健康检查重复12+次",
    "状态检查缓存TTL配置：health_check_3000缓存5分钟、pm2_status缓存5分钟、port_check_3000缓存5分钟、process_check缓存3分钟、database_status缓存10分钟",
    "缓存检查智能机制：检查缓存有效性(当前时间-缓存时间<TTL)、缓存命中输出使用时间、缓存未命中执行检查并更新、记录缓存命中率统计",
    "缓存清除触发条件：仅在状态确实变更后清除(服务重启/配置修改/代码部署)、避免不必要的缓存清除、记录清除原因便于追踪",
    "重复检查强制拦截：5分钟内禁止重复同一检查、单次会话同一检查最多3次、超限自动抛出错误中断、记录检查历史和次数统计",
    "工具调用预算分配：simple_status_check最多20次调用5分钟、medium_debug_task最多50次调用15分钟、complex_system_task最多100次调用30分钟",
    "预算超限强制控制：实时监控调用次数和时间使用、超过分配预算自动抛出错误中断、输出预算使用百分比和剩余额度",
    "并行操作模式识别：system_status_check(health/pm2/netstat/ps)并行、file_operations(package.json/app.js/.env)并行、database_operations(connection/structure/integrity)并行",
    "并行执行智能调度：使用Promise.allSettled并行执行、记录成功率和总耗时、并行化率目标>60%、低于60%输出警告",
    "操作依赖关系判断：file_edit→file_read有依赖串行、service_start→health_check有依赖串行、process_kill→process_check有依赖串行、无依赖关系并行执行",
    "失败模式智能分析：network_timeout重试3次指数退避(1s/2s/4s)、permission_denied重试1次延迟500ms、resource_busy重试5次(500ms/1s/1.5s/2s/3s)、service_unavailable重试3次(2s/5s/10s)",
    "智能重试替代方案：network_timeout尝试local_cache/fallback_endpoint、permission_denied尝试alternative_method、resource_busy尝试wait_and_retry/force_unlock、service_unavailable尝试restart_service",
    "效率监控实时统计：记录totalCalls/successfulCalls/cachedCalls/parallelCalls/totalTime/efficiency、每10次调用生成效率报告、计算综合效率评分",
    "效率评级标准：A级≥90%效率优秀继续保持、B级≥80%效率良好可优化并行化、C级≥70%效率一般需增加缓存、D级≥60%效率较低减少重复调用、F级<60%效率严重不足全面优化",
    "工具效率统计数据：curl_health_check成功率90%耗时1500ms可缓存HIGH、pm2_status成功率95%耗时1000ms可缓存HIGH、process_check成功率95%耗时1000ms可缓存MEDIUM、file_read成功率99%耗时500ms可缓存LOW、database_check成功率85%耗时3000ms可缓存HIGH",
    "最优工具选择算法：综合评分=成功率*0.5+(4000-耗时)/4000*0.3+可缓存性(HIGH:0.2/MEDIUM:0.1/LOW:0)、选择评分最高的工具、输出选择理由和评分",
    "并行状态检查脚本：使用后台进程&并行执行health/pm2/netstat/ps检查、设置超时限制(30s/10s/10s/10s)、使用wait等待所有进程完成、分析结果智能决策避免额外调用",
    "效率指标阈值控制：重复率<10%、并行率>60%、缓存命中率>30%、单次调用<30秒、超阈值自动告警输出具体指标",
    "会话开始前检查：根据任务复杂度分配预算、启用状态检查缓存系统、识别可并行执行操作、设置效率监控阈值",
    "工具调用前检查：检查缓存结果可用性、评估是否可并行执行、验证调用必要性和唯一性、设置合理超时限制",
    "工具调用后处理：记录调用结果和性能数据、更新相关缓存信息、检查预算使用情况、分析优化策略需求",
    "会话结束后分析：生成效率报告和对比分析、识别重复和低效调用模式、记录优化建议和改进机会、更新工具效率统计数据",
    "服务进程管理五大核心原则：统一进程管理(避免多进程冲突)、冲突智能检测(端口和进程)、安全操作封装(PM2和Nodemon)、并行健康监控(提升检查效率)、自动化故障恢复(智能清理和重启)",
    "进程冲突实际案例统计：4个Node.js进程同时运行导致端口冲突、多个nodemon进程重复启动、PM2配置复杂性导致管理混乱、累计时间浪费180-240分钟、累计清理次数25+次",
    "端口冲突智能检测：使用netstat -tlnp检查端口占用、识别冲突进程PID和名称、冲突数量>1时输出详细信息、返回hasConflict标志和清理建议",
    "重复进程智能检测：使用ps aux | grep node检查Node.js进程、过滤app.js和npm相关进程、提取PID/命令/内存/CPU/启动时间、重复数量>1时输出详细信息",
    "综合进程健康检查：并行执行端口检查和进程检查使用Promise.all、计算总体状态HEALTHY/NEEDS_CLEANUP、生成修复建议清单",
    "智能进程清理策略：检测端口冲突和重复进程、保留最新启动的进程PID、使用kill -TERM优雅终止失败则kill -KILL强制终止、等待3秒验证清理效果确保仅剩1个进程",
    "服务启动前综合预检：并行执行端口检查/进程检查/必需文件检查、任一检查失败抛出错误中断启动、通过后输出启动前检查通过",
    "启动策略智能选择：检测pm2可用性优先使用PM2、不可用时使用Nodemon、输出选择的启动策略",
    "服务启动验证机制：启动后等待3秒执行健康检查、验证overallStatus是否HEALTHY、状态异常输出警告",
    "PM2标准化配置：exec_mode=fork单进程模式避免冲突、instances=1强制单实例、watch=false禁用文件监控、max_restarts=5限制重启次数、max_memory_restart=512M内存限制、kill_timeout=5000ms终止超时",
    "PM2安全操作封装：启动前检查是否已运行、确保ecosystem.config.js存在不存在自动生成、启动后等待3秒验证状态、重启和停止操作验证执行结果",
    "PM2状态获取：使用pm2 jlist获取JSON格式状态、提取running/status/pid/uptime/restarts/memory/cpu信息、未找到进程返回stopped状态",
    "Nodemon标准化配置：watch监控关键目录(app.js/routes/models/services)、ignore忽略node_modules/logs/public、delay=1000延迟重启避免频繁重启、exec=node app.js执行命令",
    "Nodemon安全启动：启动前检查并清理进程冲突、生成nodemon.json配置文件、使用child_process.spawn启动、监听error和exit事件记录异常",
    "综合健康监控并行化：并行执行进程检查/端口检查/API健康检查使用Promise.allSettled、记录总检查耗时、计算总体状态HEALTHY/WARNING/UNHEALTHY",
    "API健康检查标准：访问http://localhost:3000/health设置5秒超时、记录响应时间和状态码、返回available/status/responseTime/message",
    "健康检查结果格式化：process检查hasDuplicates返回WARNING、port检查hasConflict返回ERROR、api检查available返回HEALTHY、生成详细的状态消息",
    "健康报告生成：输出时间戳和检查耗时、显示总体状态和各项检查结果、响应时间>3秒标记WARNING、生成针对性修复建议",
    "一键服务管理命令：支持start/stop/restart/status/cleanup操作、自动选择启动策略pm2或nodemon、操作后自动执行健康检查验证效果",
    "服务启动四步流程：1.清理进程冲突、2.选择启动策略、3.执行启动命令、4.等待3秒后验证健康状态",
    "并行健康检查脚本：使用后台进程&并行执行curl/pm2/netstat检查、设置超时限制(10s/5s/5s)、使用wait等待所有进程完成、分析结果输出健康状态",
    "启动前四项检查：端口冲突检查/重复进程检查/必需文件检查/启动策略选择，任一失败中断启动",
    "运行中四项监控：定期健康状态监控/资源使用情况检查/错误日志监控/API响应验证",
    "停止时四项操作：优雅停止所有进程/清理临时文件和日志/验证端口释放/记录停止原因",
    "故障恢复四步流程：分析故障原因/执行清理操作/选择恢复策略/验证恢复效果",
    "问题诊断五大核心原则：快速准确定位(2-5分钟内)、症状根因区分(避免治标不治本)、并行诊断执行(提升效率)、标准解决方案(可复用方案库)、效果验证确认(确保问题解决)",
    "诊断效率问题统计：诊断方向错误率30%、症状与根因混淆浪费15-20分钟、状态检查重复3-8次、诊断时间过长平均15-20分钟(目标2-5分钟)",
    "API缺失误判案例：表面症状请求失败认为API不存在、错误诊断以为后端缺少实现、实际根因认证权限问题API存在但需管理员权限、时间浪费20分钟(应2分钟)",
    "服务状态误判案例：表面症状健康检查失败、错误诊断认为服务没启动、实际根因服务正常网络配置问题、时间浪费15分钟(应1分钟)",
    "问题快速分类决策树：A类配置问题(404/路径/配置)30秒-1分钟解决、B类服务问题(连接/端口/进程)1-3分钟解决、C类代码问题(TypeError/逻辑/数据)3-5分钟解决、D类环境问题5-10分钟解决",
    "A类配置问题诊断：并行检查路由定义和.env文件、30秒内完成诊断、识别MISSING_ROUTE/MISSING_CONFIG根因、提供add_route_mapping/create_env_file解决方案",
    "B类服务问题诊断：并行执行health/process/port检查、1分钟内完成诊断、识别API_ERROR/SERVICE_DOWN/DUPLICATE_PROCESSES根因、提供restart/start/cleanup解决方案",
    "C类代码问题诊断：检查TypeError和WebSocket问题、2-3分钟完成诊断、识别MISSING_API_METHOD/WEBSOCKET_ERROR根因、提供implement_api_method/fix_websocket解决方案",
    "D类环境问题诊断：检查Node.js版本和npm依赖、识别NODE_ENV_ERROR/DEPENDENCY_ERROR根因、提供fix_node_environment/reinstall_dependencies解决方案",
    "配置问题解决方案：add_route_mapping添加API路径映射1-2分钟、create_env_file创建环境配置文件包含数据库/服务器/第三方服务配置",
    "服务问题解决方案：start_service智能选择PM2或npm启动30秒-3分钟、cleanup_processes保留最新进程清理其他、restart_service优雅重启验证健康检查",
    "代码问题解决方案：implement_api_method实现缺失的API方法(getUserInventory/useInventoryItem)3-5分钟、fix_websocket_implementation取消注释WebSocket方法调用",
    "环境问题解决方案：fix_node_environment验证Node.js环境、reinstall_dependencies删除node_modules重新npm install",
    "快速根因分析脚本：90秒内完成、第1步症状分类30秒、第2步并行根因检查60秒、输出问题类型/根本原因/解决方案",
    "症状根因区分机制：配置问题检查ENV_MISSING/路由定义/API权限、服务问题检查健康状态/端口占用/进程冲突、明确区分表面症状和实际根因",
    "解决方案执行监控：记录执行时间和成功状态、验证解决效果(API可访问性/服务健康/环境就绪)、返回overallSuccess综合结果",
    "解决效果验证标准：A类C类验证API是否可访问(非404)、B类验证服务是否正常响应(healthy)、D类验证环境是否就绪(node/npm版本)",
    "自动化问题解决流程：第1步快速根因分析90秒、第2步执行解决方案30秒-3分钟、第3步验证解决效果30秒、总耗时<5分钟",
    "问题解决统计分析：记录totalProblems/solvedProblems/averageTime、计算解决方案成功率、统计问题类型分布、生成效率报告",
    "诊断前四项准备：明确记录问题症状和错误信息、估计问题复杂度和预期时间、选择适当诊断策略(2分钟vs5分钟)、准备并行诊断工具",
    "诊断中四项要求：严格按时间限制执行、优先使用并行检查避免串行、准确区分症状和根本原因、选择最匹配解决方案",
    "执行后四项验证：立即验证解决效果、检查是否引入新问题、记录解决过程和耗时、更新解决方案成功率统计",
    "完成后四项总结：分析根本原因和预防措施、更新解决方案知识库、记录经验教训和改进建议、评估整体解决效率",
    "文档质量五大核心原则：长度硬性控制(强制截断超标文档)、密度强制优化(目标70%信息密度)、重复智能检测(自动去重处理)、模板标准化(统一文档结构)、质量持续改进(趋势监控和优化)",
    "文档膨胀严重案例：cursor_1.md 165KB 5557行(超标5557%)、cursor_5.md 181KB 6804行(超标4536%)、cursor_8.md 63KB 2084行(超标4068%)、平均信息密度1.2%(98.8%冗余)、平均重复率300-500%",
    "重复内容模式统计：健康检查结果重复12次、任务完成确认重复20+次、命令输出重复记录10次、状态报告重复多次",
    "文档长度硬性标准：status_check最大50行2KB、simple_debug最大100行5KB、medium_task最大200行10KB、complex_system最大500行25KB(绝对上限)",
    "文档长度强制截断：超过行数限制自动截断、保留前N行内容、添加截断标记、记录原始长度和违规信息",
    "任务类型自动识别：status_check关键词(健康检查/状态检查/服务运行)、simple_debug关键词(配置修复/API路径/简单调试)、medium_task关键词(接口调试/权限修复/数据库问题)、complex_system关键词(系统重构/架构调整/大型功能)",
    "重复模式智能检测：healthCheckResults最多1次、taskCompletions最多1次、curlCommands最多2次、statusReports最多1次、超过容忍度自动去重",
    "自动去重处理：检测重复模式、保留前N个匹配、删除其余重复内容、记录删除行数和模式",
    "语义相似度去重：计算段落相似度、80%相似度阈值、删除重复段落、记录删除数量",
    "标准文档模板库：status_simple最大50行包含检查结果/核心数据/总结、debug_simple最大100行包含问题分析/解决方案/验证结果、task_medium最大200行包含任务概述/实现步骤/测试验证",
    "模板验证规则：长度验证不超过标准、必需章节验证(检查结果/问题分析/任务概述)、禁止模式检查(重复描述/重复确认/重复命令)",
    "信息密度标准：最低40%基准线、目标70%良好水平、优秀90%卓越水平、低于10%严重失败",
    "信息密度优化：删除空白和装饰行、合并相似内容、压缩冗余表述、提升密度至目标水平",
    "冗余内容压缩规则：状态确认压缩、时间信息压缩、重复确认压缩、应用压缩规则减少字符数",
    "文档质量评分系统：长度控制30%权重、信息密度40%权重、重复控制20%权重、结构质量10%权重、综合评分计算",
    "质量等级判定：A级≥90分优秀、B级≥80分良好、C级≥70分一般、D级≥60分较差、F级<60分失败",
    "质量改进建议：长度<0.7建议控制文档长度、密度<0.7建议提高信息密度、重复<0.8建议减少重复内容、结构<0.8建议改善文档结构",
    "文档生成自动化流程：检测任务类型→应用标准模板→生成初始内容→执行质量控制→去重处理→最终质量验证→输出文档→生成质量报告",
    "质量趋势监控：记录最近50条质量数据、计算平均质量分数、统计等级分布、生成趋势报告、平均分<70分提供改进建议",
    "生成前四项准备：确定任务类型和复杂度、选择对应标准模板、设定长度和密度目标、准备必要数据和内容",
    "生成中四项要求：严格按照模板结构编写、实时检查信息密度、避免重复内容和描述、保持章节逻辑清晰",
    "生成后四项验证：执行长度限制验证、运行重复内容检测、计算信息密度评分、进行综合质量评估",
    "发布前四项确认：确认质量评分达标>70分、验证模板规范遵守情况、检查关键信息完整性、记录质量数据用于改进",
    "编码Git管理五大核心原则：用户授权优先(禁止未授权Git操作)、编码标准统一(UTF-8无BOM)、Git安全操作(超时和分页器控制)、跨平台兼容(统一编码环境)、自动验证确认(文件操作结果验证)",
    "Git操作强制授权机制：禁止未经授权的git push/commit/merge/rebase等操作前必须明确征得用户同意、执行前说明操作可能的影响范围和潜在风险、严格按照用户明确授权的范围执行git操作、用户拒绝或未明确同意时立即停止操作",
    "Git操作风险等级分类：高风险操作(push/force-push/merge/rebase)强制确认、中风险操作(commit/branch创建/tag创建)建议确认、低风险操作(status/log/diff/show)可直接执行、只读操作(fetch/clone/remote -v)可直接执行",
    "Git分支状态智能分析：并行检查本地和远程状态、评估领先和落后提交数量、仅领先提交可直接推送、仅落后提交执行拉取更新、双向分歧需要合并处理",
    "Git命令安全执行：高风险命令(log/show/diff/blame)使用--no-pager禁用分页器、设置30-60秒超时避免卡死、限制输出行数(log --oneline -10)、使用cat管道确保输出完整",
    "文档编码标准化流程：使用chardet检测当前编码、使用python3脚本检测和清理BOM标记、非UTF-8编码自动转换为UTF-8、验证最终编码格式file -i、确保UTF-8无BOM编码",
    "BOM标记检测清理：使用python3检测文件开头3字节是否为\\xef\\xbb\\xbf、检测到BOM自动清理、转换后验证编码格式、批量处理所有.md文件",
    "中文显示问题修复：设置LANG=zh_CN.UTF-8和LC_ALL=zh_CN.UTF-8环境变量、配置Git中文支持core.quotepath false、验证终端中文显示od -c测试、检查系统locale配置locale -a",
    "Git中文编码配置：git config --global core.quotepath false、git config --global i18n.commitencoding utf-8、git config --global i18n.logoutputencoding utf-8、创建.gitattributes文件(*.md text eol=lf)",
    "文件操作结果验证：操作后等待3秒文件系统同步避免缓存问题、验证文件存在性和实际内容、检查文件行数和大小、验证内容完整性grep预期内容、确认编码格式UTF-8",
    "跨平台编码环境统一：检测操作系统平台(Linux/macOS/Windows)、Unix-like系统验证locale设置、Windows环境使用chcp 65001、统一Git编码配置、创建.gitattributes文件(*.md text eol=lf)",
    "系统工具可用性检查：检查file/hexdump/xxd/chardet工具可用性、建立工具备选方案映射、优先使用file -i检查编码、不可用时使用python3 chardet、设置统一的编码检查函数",
    "Git操作并行优化：并行执行status/remote/log/branch/tag查询、使用后台进程&和wait等待完成、设置30秒超时避免阻塞、汇总结果到临时文件、清理临时文件",
    "Git错误智能处理：分析错误类型(分支分歧/权限问题/网络问题/合并冲突)、提供针对性解决方案、分支分歧使用pull --rebase或--no-rebase、权限问题检查SSH密钥和仓库权限、网络问题重试或使用代理、冲突问题手动编辑解决",
    "Git操作前四项检查：检查操作风险等级和授权要求、并行执行Git状态和远程仓库检查、验证本地编码环境配置、确认文件编码格式一致性",
    "文档操作四项验证：验证文档使用UTF-8无BOM编码、检查中文内容显示是否正常、使用标准化的文件名和路径、操作后验证文件实际内容",
    "Git提交四项确认：检查提交信息的编码格式、验证.gitignore文件完整性、确认临时文件已排除、使用有意义的提交描述",
    "跨平台协作四项标准：统一使用UTF-8编码标准、配置一致的行结束符(LF)、验证不同环境下的编码兼容性、建立编码问题的快速诊断机制",
    "时间处理五大核心原则：北京时间标准化(全系统GMT+8)、格式强制统一(ISO8601+08:00)、时区处理一致(Asia/Shanghai)、ID生成安全(避免冲突)、验证机制完整(参数验证)",
    "时间处理统一标准：全系统统一使用北京时间(Asia/Shanghai/GMT+8)，数据库连接配置timezone: '+08:00'，禁止混用UTC和本地时间，API传输使用ISO8601格式包含+08:00时区信息",
    "时间格式标准化：内部存储使用ISO8601格式(YYYY-MM-DDTHH:mm:ss.sss+08:00)，前端显示使用YYYY-MM-DD HH:mm:ss，中文界面使用YYYY年MM月DD日 HH:mm:ss，禁止使用toUTCString/getTime/toString等不确定时区的方法",
    "时间创建规范：使用new Date().toLocaleString('zh-CN', {timeZone: 'Asia/Shanghai'})创建北京时间，数据库时间字段使用Sequelize的DataTypes.DATE类型，禁止使用NOW()和new Date()混用导致时区不一致",
    "安全ID生成：禁止单独使用Date.now()作为ID避免高并发冲突，使用时间戳+随机数+计数器组合或UUID v4或雪花算法，业务ID必须包含前缀和时间戳(如msg_20251003170511_uuid)",
    "时间计算标准化：使用StandardTimeCalculator工具类处理时间范围查询，避免复杂的手动时间计算，今日/昨日/最近N天等常用查询使用标准方法，时间差计算返回易读格式(X天X小时X分钟)",
    "时间数据验证：API时间参数必须验证格式正确性，支持ISO8601和YYYY-MM-DD HH:mm:ss格式，时间范围必须验证start_time早于end_time，提供清晰的错误信息包含北京时间示例",
    "日志时间戳规范：所有日志必须使用北京时间格式[YYYY-MM-DD HH:mm:ss]，使用StandardLogger统一日志输出，操作日志必须记录北京时间戳，禁止使用toISOString输出UTC时间到日志",
    "时间计算缓存：频繁的时间计算结果使用1分钟缓存(getTodayStart/getTodayEnd/getCurrentWeekStart)，定期清理过期缓存，提升性能减少重复计算",
    "数据库时区配置：数据库会话必须设置SET time_zone = '+08:00'，Sequelize初始化设置dialectOptions: {timezone: '+08:00'}，环境变量TZ='Asia/Shanghai'，确保数据库服务器时区为北京时间",
    "时间处理测试：所有时间处理功能必须有单元测试验证北京时间正确性，测试时间范围计算/格式化/验证/ID生成等功能，确保时区处理一致性",
    "禁用时间处理方式：禁止使用new Date().toLocaleString()无时区参数、toUTCString()、getTime()单独作ID、toString()格式不统一，必须使用带Asia/Shanghai时区的标准方法"
  ]
}
