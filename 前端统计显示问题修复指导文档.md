# å‰ç«¯ç»Ÿè®¡æ˜¾ç¤ºé—®é¢˜ä¿®å¤æŒ‡å¯¼æ–‡æ¡£

## ğŸ“Š é—®é¢˜æè¿°

**ç®¡ç†å‘˜è´¦å· 13612227930 åœ¨ç”¨æˆ·ç•Œé¢"æˆ‘çš„ç»Ÿè®¡"é¡µé¢æ˜¾ç¤ºæ•°æ®å…¨éƒ¨ä¸º0ï¼Œä½†åç«¯æ•°æ®åº“æ•°æ®å®Œå…¨æ­£ç¡®ã€‚**

å®é™…æƒ…å†µå¯¹æ¯”ï¼š
- å‰ç«¯æ˜¾ç¤ºï¼šæŠ½å¥–æ¬¡æ•° 0ã€å®Œæˆæ¬¡æ•° 0ã€ä¸Šä¼ æ¬¡æ•° 0ã€æœ¬æœˆç§¯åˆ† 0
- åç«¯å®é™…ï¼šæŠ½å¥–æ¬¡æ•° 10ã€ä¸Šä¼ æ¬¡æ•° 6ã€è·å¾—ç§¯åˆ† 50010ã€å½“å‰ç§¯åˆ† 45600

## ğŸ” åç«¯æ•°æ®éªŒè¯ç»“æœ

### åç«¯APIæ¥å£çŠ¶æ€ï¼šâœ… å…¨éƒ¨æ­£å¸¸

1. **ç”¨æˆ·ç»Ÿè®¡æ¥å£** `GET /api/user/statistics`
2. **æŠ½å¥–ç»Ÿè®¡æ¥å£** `GET /api/lottery/statistics`  
3. **æ‹ç…§ç»Ÿè®¡æ¥å£** `GET /api/photo/statistics`

### ç®¡ç†å‘˜è´¦å·çœŸå®æ•°æ®

**ç”¨æˆ·åŸºæœ¬ç»Ÿè®¡** (`/api/user/statistics`):
```json
{
  "code": 0,
  "msg": "success", 
  "data": {
    "user_info": {
      "user_id": 31,
      "nickname": "ç”¨æˆ·7911",
      "status": "active",
      "registration_days": 9
    },
    "points_statistics": {
      "current_points": 45600,
      "total_earned": 51000,
      "total_spent": 5400,
      "earn_by_source": {
        "register": 1000,
        "photo_upload": 50000
      },
      "spend_by_source": {
        "lottery": 5400
      }
    },
    "activity_statistics": {
      "today_activities": 10,
      "total_records": 14,
      "earn_records_count": 4,
      "spend_records_count": 10
    }
  }
}
```

**æŠ½å¥–ç»Ÿè®¡** (`/api/lottery/statistics`):
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "total_draws": 10,
    "total_cost": 5400,
    "draw_type_stats": {
      "other": {
        "count": 10,
        "cost": 5400
      }
    }
  }
}
```

**æ‹ç…§ç»Ÿè®¡** (`/api/photo/statistics`):
```json
{
  "code": 0,
  "msg": "success", 
  "data": {
    "total_uploads": 6,
    "approved_uploads": 4,
    "rejected_uploads": 1,
    "pending_uploads": 1,
    "approval_rate": 67,
    "total_points_earned": 50010,
    "total_amount_uploaded": 4,
    "average_points_per_upload": 12503,
    "monthly_stats": {
      "2025-07": {
        "count": 6,
        "approved": 4,
        "points": 50010,
        "amount": 4
      }
    }
  }
}
```

## ğŸ¯ é—®é¢˜æ ¹å› åˆ†æ

### å¯èƒ½çš„å‰ç«¯é—®é¢˜ï¼š

1. **APIè°ƒç”¨é—®é¢˜**
   - å‰ç«¯å¯èƒ½æ²¡æœ‰è°ƒç”¨ä¸Šè¿°ç»Ÿè®¡æ¥å£
   - æˆ–è€…è°ƒç”¨çš„æ¥å£è·¯å¾„ä¸æ­£ç¡®
   - æˆ–è€…æ²¡æœ‰æºå¸¦æ­£ç¡®çš„Authorization token

2. **æ•°æ®è§£æé—®é¢˜**
   - APIè°ƒç”¨æˆåŠŸä½†å‰ç«¯æ²¡æœ‰æ­£ç¡®è§£æè¿”å›çš„JSONæ•°æ®
   - å¯èƒ½è®¿é—®äº†é”™è¯¯çš„æ•°æ®å­—æ®µè·¯å¾„

3. **ç¼“å­˜é—®é¢˜**
   - å‰ç«¯ç¼“å­˜äº†æ—§çš„ç©ºæ•°æ®
   - æ²¡æœ‰å®æ—¶è·å–æœ€æ–°çš„ç»Ÿè®¡æ•°æ®

4. **UIæ¸²æŸ“é—®é¢˜**
   - æ•°æ®è·å–æ­£ç¡®ä½†æ²¡æœ‰æ­£ç¡®ç»‘å®šåˆ°é¡µé¢æ˜¾ç¤º
   - ç»„ä»¶çŠ¶æ€æ›´æ–°é—®é¢˜

## ğŸ”§ å‰ç«¯æ’æŸ¥æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥APIè°ƒç”¨

åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·Networké¢æ¿ä¸­æ£€æŸ¥ï¼š

1. **ç¡®è®¤æ˜¯å¦è°ƒç”¨äº†ç»Ÿè®¡æ¥å£**ï¼š
   ```
   GET /api/user/statistics
   GET /api/lottery/statistics  
   GET /api/photo/statistics
   ```

2. **æ£€æŸ¥è¯·æ±‚å¤´æ˜¯å¦åŒ…å«token**ï¼š
   ```
   Authorization: Bearer [your_token]
   ```

3. **æŸ¥çœ‹å“åº”çŠ¶æ€ç å’Œæ•°æ®**ï¼š
   - çŠ¶æ€ç åº”è¯¥æ˜¯ 200
   - å“åº”æ•°æ®åº”è¯¥åŒ…å«éé›¶çš„ç»Ÿè®¡æ•°æ®

### ç¬¬äºŒæ­¥ï¼šéªŒè¯æ•°æ®è§£æ

åœ¨å‰ç«¯ä»£ç ä¸­æ·»åŠ è°ƒè¯•æ—¥å¿—ï¼š

```javascript
// è°ƒç”¨APIåç«‹å³æ‰“å°è¿”å›æ•°æ®
console.log('ç”¨æˆ·ç»Ÿè®¡APIå“åº”:', userStatsResponse);
console.log('æŠ½å¥–ç»Ÿè®¡APIå“åº”:', lotteryStatsResponse);
console.log('æ‹ç…§ç»Ÿè®¡APIå“åº”:', photoStatsResponse);

// æ£€æŸ¥æ•°æ®å­—æ®µè®¿é—®æ˜¯å¦æ­£ç¡®
console.log('å½“å‰ç§¯åˆ†:', userStatsResponse.data?.points_statistics?.current_points);
console.log('æŠ½å¥–æ¬¡æ•°:', lotteryStatsResponse.data?.total_draws);
console.log('ä¸Šä¼ æ¬¡æ•°:', photoStatsResponse.data?.total_uploads);
```

### ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥æ•°æ®æ˜ å°„

ç¡®è®¤å‰ç«¯é¡µé¢æ˜¾ç¤ºçš„æ•°æ®æ¥æºï¼š

- **æŠ½å¥–æ¬¡æ•°** â†’ `lotteryStats.data.total_draws` (æœŸæœ›å€¼: 10)
- **å®Œæˆæ¬¡æ•°** â†’ `photoStats.data.approved_uploads` (æœŸæœ›å€¼: 4)  
- **ä¸Šä¼ æ¬¡æ•°** â†’ `photoStats.data.total_uploads` (æœŸæœ›å€¼: 6)
- **æœ¬æœˆç§¯åˆ†** â†’ `userStats.data.points_statistics.current_points` (æœŸæœ›å€¼: 45600)

### ç¬¬å››æ­¥ï¼šæ¸…é™¤ç¼“å­˜æµ‹è¯•

1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. æ¸…é™¤å‰ç«¯åº”ç”¨ç¼“å­˜ï¼ˆå¦‚localStorageã€sessionStorageï¼‰
3. å¼ºåˆ¶åˆ·æ–°é¡µé¢æµ‹è¯•

## ğŸ› ï¸ ä¿®å¤å»ºè®®

### å»ºè®®1ï¼šAPIè°ƒç”¨æ£€æŸ¥
```javascript
// ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„APIè·¯å¾„å’Œtoken
const token = localStorage.getItem('access_token');
const headers = {
  'Authorization': `Bearer ${token}`,
  'Content-Type': 'application/json'
};

// è°ƒç”¨ç»Ÿè®¡æ¥å£
const userStats = await fetch('/api/user/statistics', { headers });
const lotteryStats = await fetch('/api/lottery/statistics', { headers });
const photoStats = await fetch('/api/photo/statistics', { headers });
```

### å»ºè®®2ï¼šé”™è¯¯å¤„ç†åŠ å¼º
```javascript
try {
  const response = await fetch('/api/user/statistics', { headers });
  if (!response.ok) {
    console.error('APIè°ƒç”¨å¤±è´¥:', response.status, response.statusText);
    return;
  }
  
  const data = await response.json();
  if (data.code !== 0) {
    console.error('APIè¿”å›é”™è¯¯:', data.msg);
    return;
  }
  
  // æ•°æ®å¤„ç†...
} catch (error) {
  console.error('ç½‘ç»œè¯·æ±‚å¤±è´¥:', error);
}
```

### å»ºè®®3ï¼šæ•°æ®å­—æ®µæ˜ å°„ç¡®è®¤
```javascript
// ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ•°æ®å­—æ®µè·¯å¾„
const statsData = {
  æŠ½å¥–æ¬¡æ•°: lotteryResponse.data?.total_draws || 0,
  å®Œæˆæ¬¡æ•°: photoResponse.data?.approved_uploads || 0, 
  ä¸Šä¼ æ¬¡æ•°: photoResponse.data?.total_uploads || 0,
  æœ¬æœˆç§¯åˆ†: userResponse.data?.points_statistics?.current_points || 0
};
```

## ğŸ“ åç«¯æ”¯æŒä¿¡æ¯

### æµ‹è¯•Tokenï¼ˆå¼€å‘ç¯å¢ƒï¼‰
```
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozMSwibW9iaWxlIjoiMTM2MTIyMjc5MzAiLCJpc19hZG1pbiI6dHJ1ZSwiaWF0IjoxNzUyNjA5MTU0LCJleHAiOjE3NTI2MTYzNTQsImlzcyI6InJlc3RhdXJhbnQtcG9pbnRzLXN5c3RlbSJ9.7s48P0usrucAy_ka8sBTOLvnM32fKOO1A5U_pxoynKU
```

### åç«¯æœåŠ¡çŠ¶æ€
- âœ… æœåŠ¡è¿è¡Œæ­£å¸¸
- âœ… æ•°æ®åº“è¿æ¥å¥åº·
- âœ… æ‰€æœ‰APIæ¥å£å¯ç”¨
- âœ… ç®¡ç†å‘˜æ•°æ®å®Œæ•´

### è”ç³»åç«¯
å¦‚æœå‘ç°ç¡®å®æ˜¯åç«¯APIé—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. å…·ä½“çš„é”™è¯¯ä¿¡æ¯
2. è¯·æ±‚å’Œå“åº”çš„å®Œæ•´æ—¥å¿—
3. å¤ç°æ­¥éª¤

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-01-15
**åç«¯é¡¹ç›®çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ
**é—®é¢˜ç±»å‹**: å‰ç«¯æ•°æ®æ˜¾ç¤ºé—®é¢˜ 