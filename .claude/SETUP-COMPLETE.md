# 项目级全局规则配置完成总结

## ✅ 配置完成情况

### 📁 已创建的文件（共7个）

1. **`.claude/README.md`** - 配置说明文档
   - 目录结构说明
   - 核心规则概览（16条规则）
   - 自定义命令使用说明
   - 使用场景示例
   - 工作流程指引

2. **`.claude/project-rules.md`** - 项目核心规则（主规则文档）
   - 规则1-7：代码创建和质量
   - 规则8-9：功能保护和验证
   - 规则10-11：工作方法和沟通
   - 规则12：微信小程序开发规范
   - 规则13-16：执行规范
   - 完整工作流程检查清单

3. **`.claude/QUICK-REFERENCE.md`** - 规则快速参考卡
   - 快速检查清单
   - 超时处理流程图
   - 问题诊断三层检查
   - 文件创建决策树
   - 沟通模板
   - 任务完成清理清单

4. **`.claude/commands/start.md`** - 开始任务声明命令
   - 声明使用的模型
   - 说明工作原则
   - 使用：`/start`

5. **`.claude/commands/check-rules.md`** - 规则检查命令
   - 执行操作前的规则检查
   - 三大检查点：创建文件前、API调用前、代码编写时
   - 使用：`/check-rules`

6. **`.claude/commands/before-script.md`** - 脚本生成前检查命令
   - 五步检查流程
   - 现有功能搜索
   - 必要性评估
   - 使用：`/before-script`

7. **`.claude/commands/after-task.md`** - 任务完成检查命令
   - 七步验证流程
   - 项目运行验证
   - 临时文件清理
   - 无用文件清理
   - 引用清理
   - 使用：`/after-task`

## 🎯 16条核心规则总览

### 代码创建和质量（规则 1-7）
1. ✅ 脚本和文件创建规则 - 不乱生成脚本，检查现有功能
2. ✅ API方法命名和验证规则 - 不推测API，查看实际定义
3. ✅ 代码注释规则 - 详细的中文注释
4. ✅ 时区规则 - 使用北京时间（Asia/Shanghai）
5. ✅ 文档生成规则 - 长文档分步生成
6. ✅ 代码修改流程 - 理解、验证、注释、验证
7. ✅ 质量标准 - 不增加技术债务和复杂度

### 功能保护和验证（规则 8-9）
8. ✅ 代码完整性和功能保护规则 - 不破坏原有功能
9. ✅ 任务完成后的验证规则 - 确保项目可运行

### 工作方法和沟通（规则 10-11）
10. ✅ 深度理解和思考规则 - 透明化思考过程
11. ✅ 临时文件和无用文件清理规则 - 及时清理

### 平台兼容性（规则 12）
12. ✅ 微信小程序开发规范 - API和框架兼容性

### 执行规范（规则 13-16）
13. ✅ 模型使用透明化规则 - 每次说明使用的模型
14. ✅ 问题诊断规则 - 组件/逻辑/环境三层诊断
15. ✅ 命令执行和超时处理规则 - 120秒超时自动重试
16. ✅ 沟通和交流规则 - 始终使用中文

## 🔧 4个自定义命令

1. **`/start`** - 开始任务时使用
2. **`/check-rules`** - 重要操作前检查规则
3. **`/before-script`** - 生成脚本前必须使用
4. **`/after-task`** - 任务完成后验证和清理

## 📋 标准工作流程

```
开始任务 (/start)
    ↓
理解需求（深度理解代码和文档）
    ↓
检查规则 (/check-rules 或 /before-script)
    ↓
搜索现有功能（不重复创建）
    ↓
评估方案（优先扩展现有功能）
    ↓
编写代码（中文注释 + 北京时间）
    ↓
验证质量（不增加技术债务）
    ↓
完成任务 (/after-task)
    ↓
验证项目可运行
    ↓
清理临时文件
    ↓
✅ 任务完成
```

## 🚀 如何使用这些规则

### 方式1：自动遵守
从现在开始，我会自动遵守所有这些规则，无需你提醒。

### 方式2：使用命令提醒
当你需要确保我遵守规则时，可以使用：
- `/start` - 开始新任务
- `/check-rules` - 检查是否遵守规则
- `/before-script` - 生成脚本前检查
- `/after-task` - 完成后验证

### 方式3：查看规则
- 完整规则：查看 `.claude/project-rules.md`
- 快速参考：查看 `.claude/QUICK-REFERENCE.md`
- 使用说明：查看 `.claude/README.md`

## 📊 规则覆盖范围

### ✅ 已覆盖的场景：
- 创建新文件/脚本
- 修改现有代码
- 调用 API
- 编写注释
- 时间处理
- 生成文档
- 任务完成验证
- 文件清理
- 微信小程序开发
- 问题诊断
- 命令超时处理
- 团队协作

### 🎯 规则强制执行点：
1. **创建文件前** → 检查现有功能
2. **调用API前** → 验证实际定义
3. **编写代码时** → 详细中文注释 + 北京时间
4. **修改代码时** → 保护原有功能
5. **任务完成后** → 验证运行 + 清理文件
6. **命令执行时** → 120秒超时处理
7. **每次回答时** → 说明使用的模型

## 📝 给团队的说明

这些配置文件会被提交到Git仓库，团队成员使用 Claude Code 时都会自动遵守这些规则。

### 团队成员可以：
1. 查看 `.claude/README.md` 了解规则
2. 使用自定义命令（`/start`, `/check-rules` 等）
3. 根据项目需要调整规则
4. 添加新的自定义命令

### 修改规则：
- 编辑 `.claude/project-rules.md` 修改核心规则
- 在 `.claude/commands/` 中添加新命令
- 更新 `.claude/README.md` 说明变更

## ✅ 下一步

配置已完成！从现在开始：
1. ✅ 我会自动遵守所有16条规则
2. ✅ 每次任务开始时说明使用的模型
3. ✅ 创建文件前检查现有功能
4. ✅ API调用前验证实际定义
5. ✅ 使用详细中文注释和北京时间
6. ✅ 保护原有功能不被破坏
7. ✅ 任务完成后验证和清理
8. ✅ 透明化思考过程和工具使用

你可以开始交给我任务了！我会严格遵守所有规则来完成你的要求。

---

**配置完成时间**：2025年11月17日（北京时间）
**配置版本**：v1.0
**使用模型**：Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)
