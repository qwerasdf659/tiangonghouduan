# 项目全局规则配置最终总结（31条规则完整版）

**配置完成时间**：2025年11月17日（北京时间）  
**使用模型**：Claude Sonnet 4.5  
**规则总数**：31条（新增10条）

---

## ✅ 配置完成情况

### 📁 已创建/更新文件（共9个）

```
.claude/
├── README.md                      # 配置使用说明（31条规则概览）
├── project-rules.md               # 核心规则详细文档（1111行，31条规则）
├── QUICK-REFERENCE.md             # 快速参考卡（已更新）
├── SETUP-COMPLETE.md              # 初次配置完成总结
├── FINAL-SUMMARY.md               # 原始总结（21条规则）
├── FINAL-SUMMARY-31-RULES.md      # 本文件 - 31条规则完整总结
└── commands/                      # 4个自定义命令
    ├── start.md                   # /start - 开始任务声明
    ├── check-rules.md             # /check-rules - 规则检查
    ├── before-script.md           # /before-script - 脚本生成前检查
    └── after-task.md              # /after-task - 任务完成后验证清理
```

---

## 🎯 31条核心规则完整列表

### 📦 代码创建和质量（规则 1-7）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 1 | 脚本和文件创建规则 | 创建前检查现有功能，不乱生成脚本 |
| 2 | API方法命名和验证规则 | 不推测API，查看utils/api.js实际定义 |
| 3 | 代码注释规则 | 详细的简体中文注释 |
| 4 | 时区规则 | 使用北京时间（Asia/Shanghai）|
| 5 | 文档生成规则 | 长文档分步生成后合并 |
| 6 | 代码修改流程 | 理解→验证→注释→验证 |
| 7 | 质量标准 | 不增加技术债务和系统复杂度 |

### 🛡️ 功能保护和验证（规则 8-9）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 8 | 代码完整性和功能保护规则 | 不乱删除、不破坏原有功能 |
| 9 | 任务完成后的验证规则 | 验证项目可运行，即时修复问题 |

### 💡 工作方法和沟通（规则 10-11）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 10 | 深度理解和思考规则 | 透明化思考过程、问题、工具、方案 |
| 11 | 临时文件和无用文件清理规则 | 任务完成后清理临时/无用文件 |

### 📱 平台兼容性（规则 12）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 12 | 微信小程序开发规范 | 使用wx API，避免DOM操作 |

### ⚙️ 执行规范（规则 13-16）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 13 | 模型使用透明化规则 | 每次说明使用的模型 |
| 14 | 问题诊断规则 | 组件/逻辑/环境三层诊断 |
| 15 | 命令执行和超时处理规则 | 120秒超时自动重试或换方案 |
| 16 | 沟通和交流规则 | 始终使用简体中文 |

### 🔧 服务和环境（规则 17-18）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 17 | 服务重启和环境验证规则 | 代码修改后确认重启并验证环境变量 |
| 18 | 规则文档的目的和作用 | 预防问题+快速解决问题 |

### 🔗 前后端规范（规则 19-21）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 19 | 前后端接口对接规范 | 后端API是权威，前端必须适配 |
| 20 | 前端错误处理和验证规范 | 完善错误分类、参数/网络/认证验证 |
| 21 | 语言规范 | Always respond in Chinese-simplified |

### 🆕 代码清理和测试（规则 22-23）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 22 | 代码修改后的清理规则 | 删除旧代码功能，避免重复 |
| 23 | 测试和数据管理核心规则 | 统一配置、强制数据存在性检查 |

### 🆕 文档和任务管理（规则 24-25）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 24 | 长文档分步创建规则 | 分步创建后合并，不可简化 |
| 25 | 任务清单管理规则 | 列出清单、标注完成状态、不可敷衍 |

### 🆕 Git和完整性（规则 26-27）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 26 | Git操作限制规则 | 没有明确指示不自动上传 |
| 27 | 内容完整性保证规则 | 分批添加时保证完整性 |

### 🆕 规则体系和文档（规则 28-29）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 28 | Memory Rules说明 | 三层规则体系（Memory > Project > Global）|
| 29 | 文档生成分析规则 | 不任意生成.md文件，优先写入现有文档 |

### 🆕 异常和思考（规则 30-31）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 30 | 异常处理和提示规则 | 禁止模拟结果，明确提示问题来源 |
| 31 | 深度思考和Meta反思规则 | 主动思考、分享洞察、系统性分析 |

---

## 🔧 4个自定义命令

| 命令 | 用途 | 使用时机 |
|------|------|----------|
| `/start` | 开始任务声明 | 开始处理新任务时 |
| `/check-rules` | 规则检查 | 执行重要操作前 |
| `/before-script` | 脚本生成前检查 | 生成任何脚本前 |
| `/after-task` | 任务完成后验证 | 任务完成后 |

---

## 📋 标准工作流程（11步 - 31条规则版）

```
1. /start 声明模型（简体中文）+ 列出任务清单
    ↓
2. Meta思考和深层分析
    ↓
3. 理解用户需求（深度理解代码和文档）
    ↓
4. /check-rules 或 /before-script 检查规则
    ↓
5. 搜索现有功能（不重复创建）
    ↓
6. 优先扩展现有功能
    ↓
7. 接口对接（后端API为准，前端适配）
    ↓
8. 编写代码（简体中文注释 + 北京时间 + 统一测试数据）
    ↓
9. 完善错误处理和验证（不生成模拟结果）
    ↓
10. 删除旧代码功能 + 确认服务重启并验证环境变量
    ↓
11. /after-task 验证和清理 + 任务反思总结
    ↓
✅ 所有任务已完成
```

---

## ✨ 核心原则总结（10大原则）

### 原有五大核心原则（规则 1-21）

1. **不乱生成** - 创建前必查，优先扩展
2. **不推测** - API/数据格式必查实际定义
3. **简体中文** - 代码、文档、注释、回复统一简体中文
4. **完善验证** - 错误处理、参数验证、网络检查、认证验证
5. **权威原则** - 后端API是数据权威，前端必须适配

### 新增五大核心原则（规则 22-31）

6. **清理旧代码** - 修改后删除旧功能，避免重复
7. **统一测试** - 统一数据管理，强制存在性检查
8. **任务清单** - 列出清单，标注完成，不敷衍
9. **禁止模拟** - 不生成模拟结果，明确提示问题来源
10. **深度思考** - Meta反思，系统性分析，主动洞察

---

## 📊 规则分类占比（31条）

- 代码质量和创建：7条（23%）
- 功能保护和验证：2条（6%）
- 工作方法和沟通：2条（6%）
- 平台兼容性：1条（3%）
- 执行规范：4条（13%）
- 服务和环境：2条（6%）
- 前后端规范：3条（10%）
- **代码清理和测试：2条（6%）** ⭐新增
- **文档和任务管理：2条（6%）** ⭐新增
- **Git和完整性：2条（6%）** ⭐新增
- **规则体系和文档：2条（6%）** ⭐新增
- **异常和思考：2条（6%）** ⭐新增

---

## 🚀 从现在开始

### ✅ 我会自动遵守的规则（31条完整版）

#### 每次回答时：
- ✅ 使用简体中文回答（Always respond in Chinese-simplified）
- ✅ 说明使用的模型（Claude Sonnet 4.5）
- ✅ 列出任务完成清单
- ✅ 透明化思考过程和工具使用
- ✅ 进行Meta思考和深层分析

#### 创建文件前：
- ✅ 搜索现有功能（/scripts/, /routes/, /services/, /utils/）
- ✅ 优先扩展现有功能
- ✅ 评估是否真的需要新文件
- ✅ 不任意生成.md文件

#### API调用前：
- ✅ 查看 utils/api.js 实际定义
- ✅ 不推测方法名和参数

#### 接口对接时：
- ✅ 后端API是数据权威
- ✅ 前端必须适配后端
- ✅ 不要求修改后端格式

#### 编写代码时：
- ✅ 详细的简体中文注释
- ✅ 使用北京时间
- ✅ 完善错误处理（分类、用户友好提示）
- ✅ 完整验证（参数、网络、认证）
- ✅ 统一测试数据管理
- ✅ 强制数据存在性检查
- ✅ 不生成模拟结果（明确提示问题来源）
- ✅ 保护原有功能不被破坏

#### 任务完成后：
- ✅ 删除旧代码功能（避免重复）
- ✅ 确认是否需要重启服务
- ✅ 验证环境变量正确加载
- ✅ 验证项目可正常运行
- ✅ 清理临时文件和无用文件
- ✅ 移除无效引用
- ✅ 更新任务清单完成状态
- ✅ 进行任务反思和总结
- ✅ 分享深层洞察

#### Git操作：
- ✅ 没有用户明确指示，不自动上传

---

## 📖 查看规则文档

| 文档 | 用途 | 推荐阅读 | 规则数 |
|------|------|----------|--------|
| [project-rules.md](./project-rules.md) | 31条规则详细说明（1111行）| ⭐⭐⭐⭐⭐ 必读 | 31条 |
| [README.md](./README.md) | 配置使用说明和概览 | ⭐⭐⭐⭐ 推荐 | 概览 |
| [QUICK-REFERENCE.md](./QUICK-REFERENCE.md) | 快速参考卡 | ⭐⭐⭐ 日常参考 | 快速查阅 |
| 本文件 | 31条规则完整总结 | ⭐⭐ 了解全貌 | 31条 |

---

## 🎓 给团队的说明

### 如何使用这些配置

1. **新成员入职**
   - 阅读 README.md 了解规则概览
   - 阅读 project-rules.md 了解详细规则（31条）
   - 使用 QUICK-REFERENCE.md 日常查阅

2. **日常开发**
   - 使用 `/start` 开始任务（列出清单）
   - 使用 `/before-script` 生成脚本前检查
   - 使用 `/after-task` 完成任务后验证
   - 查阅 QUICK-REFERENCE.md 快速检查

3. **遇到问题**
   - 参考 project-rules.md 的问题诊断清单
   - 按照规则文档的解决方案处理
   - 进行Meta思考和深层分析
   - 更新规则文档记录新发现

### 修改规则

- 编辑 `.claude/project-rules.md` 修改规则
- 更新 `.claude/README.md` 同步概览
- 更新 `.claude/QUICK-REFERENCE.md` 同步参考卡
- 提交到 Git 让团队成员同步

---

## 🎉 配置完成

**状态**：✅ 完成  
**规则数量**：31条（新增10条）  
**文档文件**：9个  
**自定义命令**：4个  
**文档总行数**：1111行（project-rules.md）

### 新增规则亮点：

1. **规则22-23**：代码清理和测试管理
   - 删除旧代码避免重复
   - 统一测试数据管理
   - 强制数据存在性检查

2. **规则24-25**：文档和任务管理
   - 长文档分步创建不简化
   - 任务清单管理不敷衍

3. **规则26-27**：Git和完整性
   - 禁止自动上传Git
   - 分批添加保证完整性

4. **规则28-29**：规则体系和文档
   - 三层规则体系说明
   - 文档生成分析规则

5. **规则30-31**：异常和思考
   - 禁止模拟结果，明确提示
   - 深度思考和Meta反思

---

## 💡 深度反思：为什么需要这些新规则？

### 问题根源分析：

1. **代码质量问题**（规则22）
   - 旧代码不清理导致重复和混乱
   - 影响项目可维护性
   - 增加技术债务

2. **测试可靠性问题**（规则23）
   - 测试数据不统一
   - 数据存在性未验证
   - 测试结果不可靠

3. **工作效率问题**（规则24-25）
   - 没有任务清单容易遗漏
   - 为了快速完成而简化内容
   - 缺少系统性管理

4. **协作规范问题**（规则26-27）
   - 自动上传Git造成困扰
   - 分批添加时遗漏内容
   - 缺少明确的操作规范

5. **沟通深度问题**（规则28-31）
   - 只解决表面问题
   - 缺少深层思考
   - 没有系统性分析

### 系统性影响：

这些新规则不仅是技术规范，更是：
- **工作方法论**：从"快速完成"到"高质量完成"
- **思维模式**：从"执行者"到"思考者"
- **团队文化**：从"个人效率"到"团队协作"

---

从现在开始，我会严格遵守所有31条规则来完成你的任务！🎉

---

**最后更新**：2025年11月17日（北京时间）
**配置版本**：v2.0（31条规则完整版）
**使用模型**：Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)
