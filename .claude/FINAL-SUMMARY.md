# 项目全局规则配置最终总结

**配置完成时间**：2025年11月17日（北京时间）  
**使用模型**：Claude Sonnet 4.5  
**规则总数**：21条

---

## ✅ 配置完成情况

### 📁 已创建文件（共8个）

```
.claude/
├── README.md              # 配置使用说明（21条规则概览）
├── project-rules.md       # 核心规则详细文档（703行）
├── QUICK-REFERENCE.md     # 快速参考卡
├── SETUP-COMPLETE.md      # 初次配置完成总结
├── FINAL-SUMMARY.md       # 本文件 - 最终总结
└── commands/              # 4个自定义命令
    ├── start.md           # /start - 开始任务声明
    ├── check-rules.md     # /check-rules - 规则检查
    ├── before-script.md   # /before-script - 脚本生成前检查
    └── after-task.md      # /after-task - 任务完成后验证清理
```

---

## 🎯 21条核心规则完整列表

### 📦 代码创建和质量（规则 1-7）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 1 | 脚本和文件创建规则 | 创建前检查现有功能，不乱生成脚本 |
| 2 | API方法命名和验证规则 | 不推测API，查看utils/api.js实际定义 |
| 3 | 代码注释规则 | 详细的简体中文注释 |
| 4 | 时区规则 | 使用北京时间（Asia/Shanghai）|
| 5 | 文档生成规则 | 长文档分步生成后合并 |
| 6 | 代码修改流程 | 理解→验证→注释→验证 |
| 7 | 质量标准 | 不增加技术债务和系统复杂度 |

### 🛡️ 功能保护和验证（规则 8-9）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 8 | 代码完整性和功能保护规则 | 不乱删除、不破坏原有功能 |
| 9 | 任务完成后的验证规则 | 验证项目可运行，即时修复问题 |

### 💡 工作方法和沟通（规则 10-11）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 10 | 深度理解和思考规则 | 透明化思考过程、问题、工具、方案 |
| 11 | 临时文件和无用文件清理规则 | 任务完成后清理临时/无用文件 |

### 📱 平台兼容性（规则 12）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 12 | 微信小程序开发规范 | 使用wx API，避免DOM操作 |

### ⚙️ 执行规范（规则 13-16）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 13 | 模型使用透明化规则 | 每次说明使用的模型 |
| 14 | 问题诊断规则 | 组件/逻辑/环境三层诊断 |
| 15 | 命令执行和超时处理规则 | 120秒超时自动重试或换方案 |
| 16 | 沟通和交流规则 | 始终使用简体中文 |

### 🔧 服务和环境（规则 17-18）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 17 | 服务重启和环境验证规则 | 代码修改后确认重启并验证环境变量 |
| 18 | 规则文档的目的和作用 | 预防问题+快速解决问题 |

### 🔗 前后端规范（规则 19-21）
| 编号 | 规则名称 | 核心要点 |
|------|----------|----------|
| 19 | 前后端接口对接规范 | 后端API是权威，前端必须适配 |
| 20 | 前端错误处理和验证规范 | 完善错误分类、参数/网络/认证验证 |
| 21 | 语言规范 | Always respond in Chinese-simplified |

---

## 🔧 4个自定义命令

| 命令 | 用途 | 使用时机 |
|------|------|----------|
| `/start` | 开始任务声明 | 开始处理新任务时 |
| `/check-rules` | 规则检查 | 执行重要操作前 |
| `/before-script` | 脚本生成前检查 | 生成任何脚本前 |
| `/after-task` | 任务完成后验证 | 任务完成后 |

---

## 📋 标准工作流程（11步）

```
1. /start 声明模型（简体中文）
    ↓
2. 理解用户需求
    ↓
3. /check-rules 或 /before-script 检查规则
    ↓
4. 搜索现有功能（不重复创建）
    ↓
5. 优先扩展现有功能
    ↓
6. 接口对接（后端API为准，前端适配）
    ↓
7. 编写代码（简体中文注释 + 北京时间）
    ↓
8. 完善错误处理和验证
    ↓
9. 验证质量（不增加技术债务）
    ↓
10. 确认服务重启并验证环境变量
    ↓
11. /after-task 验证和清理
```

---

## ✨ 核心原则总结

### 🎯 五大核心原则

1. **不乱生成** - 创建前必查，优先扩展
2. **不推测** - API/数据格式必查实际定义
3. **简体中文** - 代码、文档、注释、回复统一简体中文
4. **完善验证** - 错误处理、参数验证、网络检查、认证验证
5. **权威原则** - 后端API是数据权威，前端必须适配

### 📊 规则分类占比

- 代码质量和创建：7条（33%）
- 功能保护和验证：2条（10%）
- 工作方法和沟通：2条（10%）
- 平台兼容性：1条（5%）
- 执行规范：4条（19%）
- 服务和环境：2条（10%）
- 前后端规范：3条（14%）

---

## 🚀 从现在开始

### ✅ 我会自动遵守的规则

每次回答时：
- ✅ 使用简体中文回答（Always respond in Chinese-simplified）
- ✅ 说明使用的模型（Claude Sonnet 4.5）
- ✅ 透明化思考过程和工具使用

创建文件前：
- ✅ 搜索现有功能（/scripts/, /routes/, /services/, /utils/）
- ✅ 优先扩展现有功能
- ✅ 评估是否真的需要新文件

API调用前：
- ✅ 查看 utils/api.js 实际定义
- ✅ 不推测方法名和参数

接口对接时：
- ✅ 后端API是数据权威
- ✅ 前端必须适配后端
- ✅ 不要求修改后端格式

编写代码时：
- ✅ 详细的简体中文注释
- ✅ 使用北京时间
- ✅ 完善错误处理（分类、用户友好提示）
- ✅ 完整验证（参数、网络、认证）
- ✅ 保护原有功能不被破坏

任务完成后：
- ✅ 确认是否需要重启服务
- ✅ 验证环境变量正确加载
- ✅ 验证项目可正常运行
- ✅ 清理临时文件和无用文件
- ✅ 移除无效引用

---

## 📖 查看规则文档

| 文档 | 用途 | 推荐阅读 |
|------|------|----------|
| [project-rules.md](./project-rules.md) | 21条规则详细说明（703行）| ⭐⭐⭐⭐⭐ 必读 |
| [README.md](./README.md) | 配置使用说明和概览 | ⭐⭐⭐⭐ 推荐 |
| [QUICK-REFERENCE.md](./QUICK-REFERENCE.md) | 快速参考卡 | ⭐⭐⭐ 日常参考 |
| 本文件 | 最终配置总结 | ⭐⭐ 了解全貌 |

---

## 🎓 给团队的说明

### 如何使用这些配置

1. **新成员入职**
   - 阅读 README.md 了解规则概览
   - 阅读 project-rules.md 了解详细规则
   - 使用 QUICK-REFERENCE.md 日常查阅

2. **日常开发**
   - 使用 `/start` 开始任务
   - 使用 `/before-script` 生成脚本前检查
   - 使用 `/after-task` 完成任务后验证
   - 查阅 QUICK-REFERENCE.md 快速检查

3. **遇到问题**
   - 参考 project-rules.md 的问题诊断清单
   - 按照规则文档的解决方案处理
   - 更新规则文档记录新发现

### 修改规则

- 编辑 `.claude/project-rules.md` 修改规则
- 更新 `.claude/README.md` 同步概览
- 更新 `.claude/QUICK-REFERENCE.md` 同步参考卡
- 提交到 Git 让团队成员同步

---

## 🎉 配置完成

**状态**：✅ 完成  
**规则数量**：21条  
**文档文件**：8个  
**自定义命令**：4个

从现在开始，我会严格遵守所有21条规则来完成你的任务！

---

**最后更新**：2025年11月17日（北京时间）
