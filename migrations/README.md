# æ•°æ®åº“è¿ç§»ç®¡ç† V1.0.0

## ğŸ“Œ åŸºå‡†ç‰ˆæœ¬

- **ç‰ˆæœ¬**: V1.0.0-clean-start
- **åˆ›å»ºæ—¶é—´**: 2025å¹´10æœˆ13æ—¥
- **åŸºå‡†è¿ç§»**: `20251013100000-baseline-v1-clean-start.js`
- **è¡¨æ•°é‡**: 21ä¸ªä¸šåŠ¡è¡¨ï¼ˆ7ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åˆ›å»ºæ–°è¿ç§»
```bash
npm run migration:create
```

### æ‰§è¡Œè¿ç§»
```bash
npm run migration:up
```

### å›æ»šè¿ç§»
```bash
npm run migration:down
```

### æŸ¥çœ‹çŠ¶æ€
```bash
npm run migration:status
```

### éªŒè¯è§„èŒƒ
```bash
npm run migration:verify
```

---

## ğŸ“‹ è¿ç§»è§„èŒƒ

### æ–‡ä»¶å‘½åæ ¼å¼
```
{YYYYMMDD}{HHMMSS}-{action}-{target}.js

ç¤ºä¾‹:
âœ… 20251013120530-create-table-promotions.js
âœ… 20251014153245-add-column-users-vip-level.js
âœ… 20251015094512-alter-index-lottery-draws-status.js
```

### å…è®¸çš„Actionç±»å‹ï¼ˆ15ç§ï¼‰

**è¡¨æ“ä½œ**:
- `create-table` - åˆ›å»ºæ–°è¡¨
- `alter-table` - ä¿®æ”¹è¡¨ç»“æ„
- `drop-table` - åˆ é™¤è¡¨
- `rename-table` - é‡å‘½åè¡¨

**åˆ—æ“ä½œ**:
- `add-column` - æ·»åŠ åˆ—
- `alter-column` - ä¿®æ”¹åˆ—
- `drop-column` - åˆ é™¤åˆ—
- `rename-column` - é‡å‘½ååˆ—

**ç´¢å¼•æ“ä½œ**:
- `create-index` - åˆ›å»ºç´¢å¼•
- `alter-index` - ä¿®æ”¹ç´¢å¼•
- `drop-index` - åˆ é™¤ç´¢å¼•

**çº¦æŸæ“ä½œ**:
- `add-constraint` - æ·»åŠ çº¦æŸ
- `drop-constraint` - åˆ é™¤çº¦æŸ

**æ•°æ®æ“ä½œ**:
- `migrate-data` - æ•°æ®è¿ç§»
- `seed-data` - åˆå§‹æ•°æ®

### âŒ ç¦æ­¢ä½¿ç”¨
- `fix` - ä¸åº”è¯¥æœ‰ä¿®å¤è¿ç§»ï¼ˆè®¾è®¡åº”è¯¥é¿å…ï¼‰
- `temp` - ä¸åº”è¯¥æœ‰ä¸´æ—¶è¿ç§»
- `test` - ä¸åº”è¯¥æäº¤æµ‹è¯•è¿ç§»
- `update/change/modify` - å¤ªæ¨¡ç³Šï¼Œä½¿ç”¨æ˜ç¡®çš„action

### âš ï¸ å¦‚æœé‡åˆ°éœ€è¦"ä¿®å¤"çš„æƒ…å†µï¼Ÿ

**ä¸è¦ç”¨ `fix`ï¼Œè€Œè¦ç”¨æ˜ç¡®çš„actionæè¿°å…·ä½“æ“ä½œ**:

```javascript
// âŒ é”™è¯¯: fix-foreign-key.js
// âœ… æ­£ç¡®: add-constraint-user-roles-user-fk.js

// âŒ é”™è¯¯: fix-field-type.js  
// âœ… æ­£ç¡®: alter-column-chat-messages-session-id.js

// âŒ é”™è¯¯: fix-missing-index.js
// âœ… æ­£ç¡®: create-index-users-mobile-status.js
```

**è¯¦ç»†æŒ‡å—**: å‚è§ `../docs/ä¿®å¤æ€§è¿ç§»å¤„ç†æŒ‡å—.md`

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

### å·¥å…·ä½¿ç”¨æŒ‡å—
å‚è§: `../scripts/database/README.md`

### å®Œæ•´æ–¹æ¡ˆæ–‡æ¡£
å‚è§: `../docs/æ•°æ®åº“è¿ç§»å†å²é‡å»ºå®Œæ•´æ–¹æ¡ˆ_V1.0.md`

### ç‰ˆæœ¬ç®¡ç†
å‚è§: `VERSION.js`

---

## ğŸ—ï¸ ç›®å½•ç»“æ„

```
migrations/
â”œâ”€â”€ README.md                                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ VERSION.js                                   # ç‰ˆæœ¬ç®¡ç†é…ç½®
â””â”€â”€ 20251013100000-baseline-v1-clean-start.js   # åŸºå‡†è¿ç§»ï¼ˆ21ä¸ªè¡¨ï¼‰
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•
1. å§‹ç»ˆä½¿ç”¨ `npm run migration:create` åˆ›å»ºè¿ç§»
2. å…ˆåœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•
3. ç¼–å†™å®Œæ•´çš„upå’Œdownæ–¹æ³•
4. æ·»åŠ æ¸…æ™°çš„æ³¨é‡Šè¯´æ˜
5. æ‰§è¡Œå‰å¤‡ä»½æ•°æ®

### âŒ é¿å…åšæ³•
1. ä¸è¦æ‰‹åŠ¨åˆ›å»ºè¿ç§»æ–‡ä»¶
2. ä¸è¦ä¿®æ”¹å·²æ‰§è¡Œçš„è¿ç§»
3. ä¸è¦è·³è¿‡éªŒè¯æ­¥éª¤
4. ä¸è¦ä½¿ç”¨fix/temp/testå‘½å
5. ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒç›´æ¥æµ‹è¯•

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ·»åŠ åˆ—çš„è¿ç§»ï¼Ÿ
```bash
npm run migration:create
# é€‰æ‹©: 5. add-column
# è¾“å…¥ç›®æ ‡: users-vip-level
# è¾“å…¥åŸå› : æ·»åŠ ç”¨æˆ·VIPç­‰çº§å­—æ®µ
```

### Q2: éªŒè¯å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä½¿ç”¨ `npm run migration:verify` æŸ¥çœ‹è¯¦ç»†é”™è¯¯ã€‚

### Q3: å¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¿ç§»æ–‡ä»¶å—ï¼Ÿ
ä¸æ¨èã€‚åº”è¯¥ä½¿ç”¨ `npm run migration:create` ç¡®ä¿è§„èŒƒæ€§ã€‚

### Q4: è¿ç§»æ‰§è¡Œå¤±è´¥å¦‚ä½•å›æ»šï¼Ÿ
```bash
npm run migration:down
```

---

**ç‰ˆæœ¬**: V1.0.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ13æ—¥  
**ç»´æŠ¤è€…**: Database Team

