# æ•°æ®åº“å®Œæ•´å¤‡ä»½éªŒè¯æŠ¥å‘Š

**å¤‡ä»½æ—¥æœŸ**: 2026å¹´01æœˆ04æ—¥  
**å¤‡ä»½æ—¶é—´**: åŒ—äº¬æ—¶é—´ 06:05:40  
**éªŒè¯æ—¶é—´**: åŒ—äº¬æ—¶é—´ 06:06:15  
**æ•°æ®åº“å**: restaurant_points_dev

---

## âœ… å¤‡ä»½å®Œæ•´æ€§éªŒè¯

### 1. åŸºæœ¬ä¿¡æ¯éªŒè¯

| éªŒè¯é¡¹       | ç»“æœ       | è¯¦æƒ…                                                                            |
| ------------ | ---------- | ------------------------------------------------------------------------------- |
| æ•°æ®åº“è¿æ¥   | âœ… é€šè¿‡    | æˆåŠŸè¿æ¥åˆ° restaurant_points_dev                                                |
| è¡¨æ€»æ•°       | âœ… 45ä¸ª    | æ‰€æœ‰è¡¨å·²å®Œæ•´å¤‡ä»½                                                                |
| SQLæ–‡ä»¶å¤§å°  | âœ… 3.99 MB | æ–‡ä»¶å®Œæ•´                                                                        |
| JSONæ–‡ä»¶å¤§å° | âœ… 5.89 MB | æ–‡ä»¶å®Œæ•´                                                                        |
| MD5æ ¡éªŒ      | âœ… é€šè¿‡    | SQL: 7fd2a73155c445e153ce725e475f4cab<br>JSON: 0a169a8137076fac5d0058e5349b0d2b |

### 2. æ•°æ®ç»Ÿè®¡éªŒè¯

- **æ€»æ•°æ®è¡Œæ•°**: 7,911 è¡Œ
- **æœ‰æ•°æ®çš„è¡¨**: 34 ä¸ª
- **ç©ºè¡¨**: 11 ä¸ªï¼ˆç©ºè¡¨ä¹Ÿå·²å®Œæ•´å¤‡ä»½ç»“æ„ï¼‰

### 3. å…³é”®è¡¨æ•°æ®éªŒè¯

| è¡¨å                   | è¡Œæ•°  | åˆ—æ•° | å¤–é”®æ•° | éªŒè¯çŠ¶æ€ |
| ---------------------- | ----- | ---- | ------ | -------- |
| users                  | 22    | 11   | 0      | âœ… å®Œæ•´  |
| accounts               | 14    | 7    | 1      | âœ… å®Œæ•´  |
| account_asset_balances | 11    | 8    | 1      | âœ… å®Œæ•´  |
| asset_transactions     | 216   | 11   | 1      | âœ… å®Œæ•´  |
| lottery_draws          | 2,841 | 29   | 3      | âœ… å®Œæ•´  |
| products               | 52    | 30   | 0      | âœ… å®Œæ•´  |
| consumption_records    | 184   | 16   | 3      | âœ… å®Œæ•´  |
| item_instances         | 1,211 | 9    | 1      | âœ… å®Œæ•´  |
| lottery_prizes         | 9     | 23   | 1      | âœ… å®Œæ•´  |
| redemption_orders      | 397   | 9    | 2      | âœ… å®Œæ•´  |

### 4. æ‰€æœ‰è¡¨å®Œæ•´åˆ—è¡¨ï¼ˆ45ä¸ªï¼‰

<details>
<summary>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æ‰€æœ‰è¡¨</summary>

1. account_asset_balances (11 rows)
2. accounts (14 rows)
3. admin_operation_logs (1006 rows)
4. api_idempotency_requests (69 rows)
5. asset_transactions (216 rows)
6. audit_records (0 rows - ç©ºè¡¨)
7. authentication_sessions (0 rows - ç©ºè¡¨)
8. chat_messages (0 rows - ç©ºè¡¨)
9. consumption_records (184 rows)
10. content_review_records (184 rows)
11. customer_service_sessions (1 rows)
12. exchange_items (24 rows)
13. exchange_records (0 rows - ç©ºè¡¨)
14. feedbacks (26 rows)
15. image_resources (3 rows)
16. item_instance_events (306 rows)
17. item_instances (1211 rows)
18. item_template_aliases (0 rows - ç©ºè¡¨)
19. lottery_campaigns (1 rows)
20. lottery_draw_quota_rules (1 rows)
21. lottery_draws (2841 rows)
22. lottery_management_settings (343 rows)
23. lottery_presets (2 rows)
24. lottery_prizes (9 rows)
25. lottery_user_daily_draw_quota (6 rows)
26. market_listings (1 rows)
27. material_asset_types (3 rows)
28. material_conversion_rules (1 rows)
29. merchant_points_reviews (0 rows - ç©ºè¡¨)
30. popup_banners (0 rows - ç©ºè¡¨)
31. products (52 rows)
32. redemption_orders (397 rows)
33. role_change_logs (0 rows - ç©ºè¡¨)
34. roles (6 rows)
35. sequelizemeta (197 rows)
36. stores (0 rows - ç©ºè¡¨)
37. system_announcements (5 rows)
38. system_settings (18 rows)
39. trade_orders (0 rows - ç©ºè¡¨)
40. trade_records (2 rows)
41. user_hierarchy (0 rows - ç©ºè¡¨)
42. user_premium_status (1 rows)
43. user_roles (13 rows)
44. users (22 rows)
45. websocket_startup_logs (735 rows)

</details>

### 5. å¤‡ä»½å†…å®¹å®Œæ•´æ€§ç¡®è®¤

- âœ… **è¡¨ç»“æ„**: æ‰€æœ‰è¡¨çš„ CREATE TABLE è¯­å¥å·²å®Œæ•´å¤‡ä»½
- âœ… **è¡¨æ•°æ®**: æ‰€æœ‰è¡¨çš„æ•°æ®å·²å®Œæ•´å¤‡ä»½ï¼ˆåŒ…æ‹¬ç©ºè¡¨ï¼‰
- âœ… **ç´¢å¼•å®šä¹‰**: æ‰€æœ‰ç´¢å¼•ï¼ˆPRIMARY KEY, UNIQUE, INDEXï¼‰å·²å¤‡ä»½
- âœ… **å¤–é”®çº¦æŸ**: æ‰€æœ‰ FOREIGN KEY çº¦æŸå·²å¤‡ä»½
- âœ… **åˆ—ä¿¡æ¯**: æ‰€æœ‰åˆ—çš„ç±»å‹ã€é»˜è®¤å€¼ã€çº¦æŸç­‰å·²å¤‡ä»½
- âœ… **å­—ç¬¦é›†**: utf8mb4 å­—ç¬¦é›†å·²æ­£ç¡®è®¾ç½®
- âœ… **æ—¶åŒºè®¾ç½®**: åŒ—äº¬æ—¶é—´ï¼ˆAsia/Shanghai, +08:00ï¼‰å·²æ­£ç¡®è®¾ç½®

### 6. SQLæ–‡ä»¶æ ¼å¼éªŒè¯

```sql
-- å®Œæ•´æ•°æ®åº“å¤‡ä»½
-- å¤‡ä»½æ—¶é—´: 2026/01/04 06:05:40
-- æ•°æ®åº“: restaurant_points_dev
-- è¡¨æ•°é‡: 45

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;
SET SQL_MODE = 'NO_AUTO_VALUE_ON_ZERO';
SET time_zone = '+08:00';
```

âœ… SQLæ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„SETè¯­å¥

### 7. JSONå¤‡ä»½ç»“æ„éªŒè¯

```json
{
  "backup_info": {
    "backup_date": "2026-01-04",
    "backup_time": "2026/01/04 06:05:40",
    "database": "restaurant_points_dev",
    "host": "dbconn.sealosbja.site",
    "port": "42569",
    "table_count": 45,
    "version": "1.0.0"
  },
  "tables": {
    "table_name": {
      "create_table": "...",
      "row_count": "...",
      "columns": [...],
      "indexes": [...],
      "foreign_keys": [...],
      "data": [...]
    }
  }
}
```

âœ… JSONç»“æ„å®Œæ•´ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯

---

## ğŸ“Š ä¸å½“å‰æ•°æ®åº“çŠ¶æ€å¯¹æ¯”

### å¯¹æ¯”éªŒè¯ç»“æœ

| å¯¹æ¯”é¡¹   | å¤‡ä»½                  | å½“å‰æ•°æ®åº“            | çŠ¶æ€    |
| -------- | --------------------- | --------------------- | ------- |
| è¡¨æ•°é‡   | 45                    | 45                    | âœ… ä¸€è‡´ |
| æ€»æ•°æ®è¡Œ | 7,911                 | 7,911                 | âœ… ä¸€è‡´ |
| æ•°æ®åº“å | restaurant_points_dev | restaurant_points_dev | âœ… ä¸€è‡´ |
| å­—ç¬¦é›†   | utf8mb4               | utf8mb4               | âœ… ä¸€è‡´ |
| æ—¶åŒºè®¾ç½® | +08:00                | +08:00                | âœ… ä¸€è‡´ |

### ç‰ˆæœ¬å…¼å®¹æ€§éªŒè¯

- âœ… æ•°æ®åº“å¼•æ“: InnoDB
- âœ… MySQLç‰ˆæœ¬: å…¼å®¹ 5.7+ å’Œ 8.0+
- âœ… å­—ç¬¦é›†æ’åº: utf8mb4_unicode_ci
- âœ… SQL_MODE: NO_AUTO_VALUE_ON_ZERO
- âœ… å¤–é”®çº¦æŸ: å®Œæ•´ä¿ç•™

---

## ğŸ” å®‰å…¨æ€§å’Œå®Œæ•´æ€§ä¿è¯

### MD5æ ¡éªŒå€¼

- **SQLæ–‡ä»¶**: `7fd2a73155c445e153ce725e475f4cab`
- **JSONæ–‡ä»¶**: `0a169a8137076fac5d0058e5349b0d2b`

### æ–‡ä»¶å®Œæ•´æ€§éªŒè¯

```bash
# éªŒè¯å‘½ä»¤
cd /home/devbox/project/backups/backup_2026-01-04_complete
md5sum complete_backup_2026-01-04_2026-01-04_06-05-40.sql
md5sum complete_backup_2026-01-04_2026-01-04_06-05-40.json
```

âœ… æ‰€æœ‰MD5å€¼ä¸å¤‡ä»½æ—¶è®°å½•çš„å€¼å®Œå…¨ä¸€è‡´ï¼Œæ–‡ä»¶å®Œæ•´æ— æŸ

---

## ğŸ”„ æ¢å¤æµ‹è¯•å»ºè®®

### æ¢å¤æ–¹æ³•1: å®Œæ•´SQLæ¢å¤ï¼ˆæ¨èï¼‰

```bash
mysql -h${DB_HOST} -P${DB_PORT} -u${DB_USER} -p${DB_PASSWORD} ${DB_NAME} < complete_backup_2026-01-04_2026-01-04_06-05-40.sql
```

### æ¢å¤æ–¹æ³•2: ä½¿ç”¨Node.jsè„šæœ¬æ¢å¤

```bash
cd /home/devbox/project
node scripts/restore_backup.js backups/backup_2026-01-04_complete/complete_backup_2026-01-04_2026-01-04_06-05-40.sql
```

### æ¢å¤åéªŒè¯æ­¥éª¤

1. éªŒè¯è¡¨æ•°é‡: `SHOW TABLES;` - åº”è¯¥æœ‰45ä¸ªè¡¨
2. éªŒè¯æ•°æ®è¡Œæ•°: `SELECT COUNT(*) FROM users;` - åº”è¯¥æœ‰22è¡Œ
3. éªŒè¯å¤–é”®çº¦æŸ: `SHOW CREATE TABLE account_asset_balances;`
4. éªŒè¯ç´¢å¼•: `SHOW INDEX FROM lottery_draws;`

---

## âœ… æœ€ç»ˆç¡®è®¤

### å¤‡ä»½è´¨é‡è¯„ä¼°

- **å®Œæ•´æ€§**: â­â­â­â­â­ (5/5) - æ‰€æœ‰è¡¨ã€æ•°æ®ã€ç»“æ„ã€çº¦æŸå®Œæ•´å¤‡ä»½
- **å‡†ç¡®æ€§**: â­â­â­â­â­ (5/5) - ä¸å½“å‰æ•°æ®åº“å®Œå…¨ä¸€è‡´
- **å¯æ¢å¤æ€§**: â­â­â­â­â­ (5/5) - SQLå’ŒJSONä¸¤ç§æ ¼å¼å‡å¯æ¢å¤
- **å®‰å…¨æ€§**: â­â­â­â­â­ (5/5) - MD5æ ¡éªŒå®Œæ•´ï¼Œæ–‡ä»¶å®Œæ•´æ— æŸ

### å¤‡ä»½æ–‡ä»¶æ¸…å•

1. âœ… `complete_backup_2026-01-04_2026-01-04_06-05-40.sql` (3.99 MB)
2. âœ… `complete_backup_2026-01-04_2026-01-04_06-05-40.json` (5.89 MB)
3. âœ… `BACKUP_MD5.txt` - MD5æ ¡éªŒæ–‡ä»¶
4. âœ… `BACKUP_SUMMARY.txt` - å¤‡ä»½æ‘˜è¦
5. âœ… `README.md` - ä½¿ç”¨è¯´æ˜
6. âœ… `BACKUP_VERIFICATION_REPORT.md` - æœ¬éªŒè¯æŠ¥å‘Š

---

## ğŸ‰ éªŒè¯ç»“è®º

**âœ… 2026å¹´1æœˆ4æ—¥æ•°æ®åº“å¤‡ä»½å·²å®Œæˆå¹¶é€šè¿‡æ‰€æœ‰éªŒè¯æ£€æŸ¥ï¼**

- å¤‡ä»½å†…å®¹å®Œæ•´ã€å‡†ç¡®ã€å¯æ¢å¤
- ä¸å½“å‰æ•°æ®åº“çŠ¶æ€å®Œå…¨ä¸€è‡´
- æ‰€æœ‰è¡¨ç»“æ„ã€æ•°æ®ã€ç´¢å¼•ã€å¤–é”®çº¦æŸå‡å·²æ­£ç¡®å¤‡ä»½
- ç©ºè¡¨ä¹Ÿå·²å®Œæ•´å¤‡ä»½ç»“æ„ä¿¡æ¯
- MD5æ ¡éªŒé€šè¿‡ï¼Œæ–‡ä»¶å®Œæ•´æ€§å¾—åˆ°ä¿è¯
- æ”¯æŒSQLå’ŒJSONä¸¤ç§æ ¼å¼æ¢å¤

**å¤‡ä»½å¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼**

---

**éªŒè¯äºº**: System Auto Verification  
**éªŒè¯æ—¶é—´**: 2026å¹´01æœˆ04æ—¥ 06:06:15 (åŒ—äº¬æ—¶é—´)  
**éªŒè¯è„šæœ¬**: scripts/create_complete_backup_20260104.js  
**å¤‡ä»½ç›®å½•**: /home/devbox/project/backups/backup_2026-01-04_complete
