# æ•°æ®åº“å®Œæ•´å¤‡ä»½ - 2025å¹´12æœˆ31æ—¥

## ğŸ“‹ å¤‡ä»½æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**æœ€æ–°çš„ã€å®Œæ•´çš„ã€æ­£ç¡®çš„**æ•°æ®åº“å¤‡ä»½ï¼Œä¸å½“å‰å®é™…æ•°æ®åº“**å®Œå…¨ä¸€è‡´**ã€‚

**å¤‡ä»½æ—¶é—´**: 2026/01/02 23:24:05 (åŒ—äº¬æ—¶é—´)  
**æ•°æ®åº“å**: restaurant_lottery  
**å¤‡ä»½ç±»å‹**: å®Œæ•´å¤‡ä»½ï¼ˆç»“æ„ + æ•°æ® + ç´¢å¼• + å¤–é”®çº¦æŸï¼‰

---

## âœ… å¤‡ä»½å®Œæ•´æ€§ç¡®è®¤

### æ•°æ®åº“ç»Ÿè®¡

- **æ€»è¡¨æ•°**: 45 ä¸ª
- **æœ‰æ•°æ®çš„è¡¨**: 35 ä¸ª
- **ç©ºè¡¨**: 10 ä¸ªï¼ˆå·²å®Œæ•´å¤‡ä»½ç»“æ„ï¼‰
- **æ€»æ•°æ®è¡Œæ•°**: 7,686 è¡Œ

### å¤‡ä»½æ–‡ä»¶

- **SQLæ ¼å¼**: `full_backup_2025-12-31_2026-01-02T15-24-05.sql`
- **JSONæ ¼å¼**: `full_backup_2025-12-31_2026-01-02T15-24-05.json`

---

## ğŸ“Š è¡¨æ•°æ®ç»Ÿè®¡

### æœ‰æ•°æ®çš„è¡¨ (35ä¸ª)

1. **account_asset_balances**: 11 è¡Œ
2. **accounts**: 13 è¡Œ
3. **admin_operation_logs**: 1,002 è¡Œ
4. **api_idempotency_requests**: 57 è¡Œ
5. **asset_transactions**: 175 è¡Œ
6. **chat_messages**: 20 è¡Œ
7. **consumption_records**: 184 è¡Œ
8. **content_review_records**: 184 è¡Œ
9. **customer_service_sessions**: 3 è¡Œ
10. **exchange_items**: 24 è¡Œ
11. **feedbacks**: 26 è¡Œ
12. **image_resources**: 3 è¡Œ
13. **item_instance_events**: 249 è¡Œ
14. **item_instances**: 1,150 è¡Œ
15. **lottery_campaigns**: 1 è¡Œ
16. **lottery_draw_quota_rules**: 1 è¡Œ
17. **lottery_draws**: 2,840 è¡Œ
18. **lottery_management_settings**: 306 è¡Œ
19. **lottery_presets**: 2 è¡Œ
20. **lottery_prizes**: 9 è¡Œ
21. **lottery_user_daily_draw_quota**: 5 è¡Œ
22. **market_listings**: 1 è¡Œ
23. **material_asset_types**: 3 è¡Œ
24. **material_conversion_rules**: 1 è¡Œ
25. **products**: 52 è¡Œ
26. **redemption_orders**: 373 è¡Œ
27. **roles**: 6 è¡Œ
28. **sequelizemeta**: 193 è¡Œ
29. **system_announcements**: 5 è¡Œ
30. **system_settings**: 18 è¡Œ
31. **trade_records**: 2 è¡Œ
32. **user_premium_status**: 1 è¡Œ
33. **user_roles**: 13 è¡Œ
34. **users**: 22 è¡Œ
35. **websocket_startup_logs**: 731 è¡Œ

### ç©ºè¡¨ (10ä¸ª)

1. audit_records (å·²å¤‡ä»½è¡¨ç»“æ„)
2. authentication_sessions (å·²å¤‡ä»½è¡¨ç»“æ„)
3. exchange_records (å·²å¤‡ä»½è¡¨ç»“æ„)
4. item_template_aliases (å·²å¤‡ä»½è¡¨ç»“æ„)
5. merchant_points_reviews (å·²å¤‡ä»½è¡¨ç»“æ„)
6. popup_banners (å·²å¤‡ä»½è¡¨ç»“æ„)
7. role_change_logs (å·²å¤‡ä»½è¡¨ç»“æ„)
8. stores (å·²å¤‡ä»½è¡¨ç»“æ„)
9. trade_orders (å·²å¤‡ä»½è¡¨ç»“æ„)
10. user_hierarchy (å·²å¤‡ä»½è¡¨ç»“æ„)

---

## ğŸ”§ å¤‡ä»½å†…å®¹

### âœ… è¡¨ç»“æ„

- æ‰€æœ‰è¡¨çš„ CREATE TABLE è¯­å¥
- å­—æ®µå®šä¹‰ã€æ•°æ®ç±»å‹ã€é»˜è®¤å€¼
- å­—ç¬¦é›†å’Œæ’åºè§„åˆ™

### âœ… è¡¨æ•°æ®

- æ‰€æœ‰è¡¨çš„å®Œæ•´æ•°æ®
- INSERT è¯­å¥æ ¼å¼
- ç‰¹æ®Šå­—ç¬¦å·²è½¬ä¹‰

### âœ… ç´¢å¼•

- ä¸»é”®ç´¢å¼• (PRIMARY KEY)
- å”¯ä¸€ç´¢å¼• (UNIQUE)
- æ™®é€šç´¢å¼• (INDEX)
- å…¨æ–‡ç´¢å¼• (FULLTEXT)

### âœ… å¤–é”®çº¦æŸ

- å¤–é”®å®šä¹‰
- å¼•ç”¨å…³ç³»
- çº§è”è§„åˆ™

---

## ğŸ“¦ å¦‚ä½•ä½¿ç”¨å¤‡ä»½

### æ¢å¤SQLå¤‡ä»½

```bash
# æ–¹å¼1ï¼šä½¿ç”¨mysqlå‘½ä»¤
mysql -u root -p restaurant_lottery < full_backup_2025-12-31_2026-01-02T15-24-05.sql

# æ–¹å¼2ï¼šä½¿ç”¨sourceå‘½ä»¤
mysql -u root -p
USE restaurant_lottery;
SOURCE full_backup_2025-12-31_2026-01-02T15-24-05.sql;
```

### æ¢å¤JSONå¤‡ä»½

```bash
# ä½¿ç”¨å¤‡ä»½å·¥å…·
node scripts/database/backup-toolkit.js --action=restore --file=full_backup_2025-12-31_2026-01-02T15-24-05.json
```

---

## âœ… å¤‡ä»½éªŒè¯

æœ¬å¤‡ä»½å·²é€šè¿‡ä»¥ä¸‹éªŒè¯ï¼š

- [x] è¡¨æ•°é‡ä¸å®é™…æ•°æ®åº“ä¸€è‡´
- [x] è¡¨ç»“æ„å®Œæ•´ï¼ˆåŒ…æ‹¬å­—æ®µã€ç´¢å¼•ã€å¤–é”®ï¼‰
- [x] æ•°æ®å®Œæ•´ï¼ˆæ‰€æœ‰è¡Œéƒ½å·²å¤‡ä»½ï¼‰
- [x] ç©ºè¡¨ç»“æ„å·²å¤‡ä»½
- [x] SQLæ–‡ä»¶å¯æ­£å¸¸å¯¼å…¥
- [x] JSONæ–‡ä»¶æ ¼å¼æ­£ç¡®

---

## ğŸ“ å¤‡ä»½è¯´æ˜

1. **å®Œæ•´æ€§**: åŒ…å«æ‰€æœ‰è¡¨çš„ç»“æ„å’Œæ•°æ®ï¼Œå³ä½¿æ˜¯ç©ºè¡¨ä¹Ÿå®Œæ•´å¤‡ä»½
2. **ä¸€è‡´æ€§**: å¤‡ä»½æ—¶åˆ»çš„æ•°æ®åº“å¿«ç…§ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§
3. **å¯æ¢å¤æ€§**: SQLå’ŒJSONåŒæ ¼å¼ï¼Œæ”¯æŒå¤šç§æ¢å¤æ–¹å¼
4. **ç‰ˆæœ¬å…¼å®¹**: ä½¿ç”¨æ ‡å‡†SQLè¯­æ³•ï¼Œå…¼å®¹MySQL 5.7+

---

**ç”Ÿæˆæ—¶é—´**: 2026/01/02 23:24:05  
**å¤‡ä»½å·¥å…·**: backup-2025-12-31.js  
**å¤‡ä»½çŠ¶æ€**: âœ… å®Œæˆ
