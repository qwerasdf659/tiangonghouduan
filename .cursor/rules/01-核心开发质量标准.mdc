---
alwaysApply: true
lastUpdated: 2025å¹´10æœˆ03æ—¥ 17:05:11
---

# ğŸ—ï¸ æ ¸å¿ƒå¼€å‘è´¨é‡æ ‡å‡†ï¼ˆåŸºäºcursoræ–‡æ¡£æ·±åº¦åˆ†æçš„ç³»ç»ŸåŒ–ç‰ˆæœ¬ï¼‰

## ğŸ”´ **åŸºäºå®é™…é—®é¢˜çš„è´¨é‡æ§åˆ¶ä½“ç³»**

### **å®é™…é—®é¢˜æ¡ˆä¾‹é‡åŒ–ç»Ÿè®¡**
ä»11ä¸ªcursoræ–‡æ¡£æ·±åº¦åˆ†æå‘ç°ï¼š
- **WebSocketåŠŸèƒ½ç¼ºå¤±**: 8+æ¬¡ï¼Œå¯¼è‡´å®æ—¶é€šä¿¡å¤±æ•ˆ
- **æ•°æ®åº“äº‹åŠ¡é”™è¯¯**: 6+æ¬¡ï¼Œäº‹åŠ¡å›æ»šå¤„ç†é—®é¢˜
- **å‰ç«¯APIç¼ºå¤±**: 15+æ¬¡ï¼Œ`TypeError: API.getUserInventory is not a function`
- **é…ç½®æ–‡ä»¶é—®é¢˜**: å¤šæ¬¡.envé…ç½®ç¼ºå¤±å¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥
- **ä¾èµ–ç‰ˆæœ¬å†²çª**: å¤šä¸ªæ–‡æ¡£ä¸­npmåŒ…ç‰ˆæœ¬ä¸å…¼å®¹é—®é¢˜

## ğŸ”— **APIæ¥å£å¼€å‘å¼ºåˆ¶è§„èŒƒ**

### **å‰åç«¯æ¥å£å¼ºåˆ¶ä¸€è‡´æ€§ä¿è¯**
```javascript
// ğŸ”´ åŸºäºcursor_5.mdç­‰å®é™…é”™è¯¯çš„ç»Ÿä¸€APIè§„èŒƒ
const UNIFIED_API_STANDARDS = {
  // å¿…éœ€çš„APIç«¯ç‚¹æ¸…å•ï¼ˆåŸºäºå®é™…ç¼ºå¤±ç»Ÿè®¡ï¼‰
  requiredEndpoints: {
    user_management: [
      'POST /api/v2/auth/login',
      'POST /api/v2/auth/logout', 
      'GET /api/v2/user/profile',
      'PUT /api/v2/user/profile'
    ],
    
    // cursor_5.mdä¸­ç¼ºå¤±çš„åº“å­˜ç®¡ç†API
    inventory_management: [
      'GET /api/v2/inventory/list',        // getUserInventoryå‰ç«¯è°ƒç”¨
      'POST /api/v2/inventory/use',        // useInventoryItemå‰ç«¯è°ƒç”¨
      'POST /api/v2/inventory/transfer',   // transferInventoryItemå‰ç«¯è°ƒç”¨
      'POST /api/v2/inventory/generate-code'
    ],
    
    // cursor_3.mdå’Œcursor_.mdç›¸å…³èŠå¤©ç³»ç»Ÿ
    chat_system: [
      'POST /api/v2/chat/session',
      'POST /api/v2/chat/message', 
      'GET /api/v2/chat/history',
      'GET /api/v2/admin/chat/sessions',
      'POST /api/v2/admin/chat/sessions/:id/messages'
    ]
  },

  // å¼ºåˆ¶APIè·¯å¾„å…¼å®¹æ˜ å°„ï¼ˆè§£å†³è·¯å¾„ä¸åŒ¹é…é—®é¢˜ï¼‰
  pathCompatibility: {
    '/admin/chat/sessions': '/api/v2/admin/chat/sessions',   // cursor_1.mdå‘ç°
    '/api/inventory': '/api/v2/inventory/list',              // cursor_5.mdå‘ç°
    '/api/upload': '/api/v2/photo/upload',                   // å®é™…è·¯å¾„æ˜ å°„
    '/api/auth/verify': '/api/v2/auth/verify'                // ç‰ˆæœ¬å…¼å®¹
  },

  // è‡ªåŠ¨ç”Ÿæˆå…¼å®¹æ€§è·¯ç”±ï¼ˆé¢„é˜²404é”™è¯¯ï¼‰
  generateCompatibilityRoutes: (app) => {
    Object.entries(UNIFIED_API_STANDARDS.pathCompatibility).forEach(([oldPath, newPath]) => {
      app.all(oldPath, (req, res, next) => {
        console.log(`ğŸ”„ APIå…¼å®¹é‡å®šå‘: ${oldPath} â†’ ${newPath}`);
        req.url = newPath;
        next();
      });
    });
  },

  // å‰ç«¯APIæ–¹æ³•å®Œæ•´æ€§éªŒè¯ï¼ˆé˜²æ­¢TypeErrorï¼‰
  validateFrontendAPI: (API) => {
    const requiredMethods = [
      'getUserInventory', 'useInventoryItem', 'transferInventoryItem',
      'checkPremiumAccess', 'unlockPremiumSpace',
      'getTransactionHistory', 'getTransactionStats'
    ];

    const missing = requiredMethods.filter(method => typeof API[method] !== 'function');
    
    if (missing.length > 0) {
      console.error(`ğŸ”´ ç¼ºå¤±${missing.length}ä¸ªAPIæ–¹æ³•:`, missing);
      
      // è‡ªåŠ¨è¡¥å…¨ç¼ºå¤±æ–¹æ³•
      missing.forEach(methodName => {
        API[methodName] = async function(params = {}) {
          throw new Error(`APIæ–¹æ³• ${methodName} éœ€è¦å®ç°`);
        };
      });
    }

    return missing.length === 0;
  }
};
```

## ğŸ“¡ **WebSocketæœåŠ¡å®Œæ•´æ€§è§„èŒƒ**

### **åŸºäºcursor_3.mdé—®é¢˜çš„WebSocketæ ‡å‡†åŒ–**
```javascript
// ğŸ”´ è§£å†³WebSocketæœåŠ¡è¢«æ³¨é‡Šå¯¼è‡´åŠŸèƒ½ç¼ºå¤±é—®é¢˜
const WEBSOCKET_COMPLETENESS_VALIDATOR = {
  // å¿…éœ€çš„WebSocketæ–¹æ³•ï¼ˆåŸºäºå®é™…ç¼ºå¤±ç»Ÿè®¡ï¼‰
  requiredMethods: {
    // èŠå¤©ç³»ç»Ÿç›¸å…³ï¼ˆcursor_3.mdä¸­è¢«æ³¨é‡Šç¼ºå¤±ï¼‰
    chat_methods: [
      'notifyNewSession',      // é€šçŸ¥æ–°ä¼šè¯ - è¢«æ³¨é‡Šå¯¼è‡´åŠŸèƒ½ç¼ºå¤±
      'forwardChatMessage',    // è½¬å‘èŠå¤©æ¶ˆæ¯
      'broadcastToAdmins',     // å¹¿æ’­ç»™ç®¡ç†å‘˜
      'sendToUser',            // å‘é€ç»™ç”¨æˆ·
      'handleTyping'           // å¤„ç†è¾“å…¥çŠ¶æ€
    ],
    
    // åº“å­˜ç³»ç»Ÿç›¸å…³ï¼ˆcursor_5.mdä¸­å‘ç°ç¼ºå¤±ï¼‰
    inventory_methods: [
      'notifyMerchants',       // é€šçŸ¥å•†æˆ·
      'notifyInventoryUpdate', // é€šçŸ¥åº“å­˜æ›´æ–°
      'broadcastSystemMessage' // å¹¿æ’­ç³»ç»Ÿæ¶ˆæ¯
    ]
  },

  // WebSocketæ–¹æ³•å­˜åœ¨æ€§æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨
  validateAndGenerate: (webSocketService) => {
    const missingMethods = [];
    
    Object.values(WEBSOCKET_COMPLETENESS_VALIDATOR.requiredMethods).flat().forEach(methodName => {
      if (typeof webSocketService[methodName] !== 'function') {
        console.warn(`âš ï¸ è‡ªåŠ¨ç”ŸæˆWebSocketæ–¹æ³•: ${methodName}`);
        
        // åŸºäºæ–¹æ³•åè‡ªåŠ¨å®ç°åŸºç¡€åŠŸèƒ½
        webSocketService[methodName] = function(...args) {
          if (methodName.startsWith('notify')) {
            const [target, message] = args;
            return this.sendToConnection(target, {
              type: 'notification',
              data: message,
              timestamp: new Date().toISOString()
            });
          } else if (methodName.startsWith('broadcast')) {
            const [message] = args;
            return this.broadcastMessage({
              type: 'broadcast',
              data: message,
              timestamp: new Date().toISOString()
            });
          }
        };
        
        missingMethods.push(methodName);
      }
    });

    return { valid: missingMethods.length === 0, generated: missingMethods };
  }
};
```

## ğŸ—„ï¸ **æ•°æ®åº“äº‹åŠ¡å®‰å…¨è§„èŒƒ**

### **åŸºäºcursor_5.mdäº‹åŠ¡é”™è¯¯çš„å®‰å…¨æ¨¡å¼**
```javascript
// ğŸ”´ è§£å†³äº‹åŠ¡å›æ»šå’Œé‡å¤æäº¤é—®é¢˜
const SAFE_TRANSACTION_SYSTEM = {
  // å®‰å…¨äº‹åŠ¡æ‰§è¡Œå™¨ï¼ˆé¿å…"å·²å®Œæˆäº‹åŠ¡"é”™è¯¯ï¼‰
  execute: async (operation, options = {}) => {
    const { maxRetries = 3, timeout = 30000 } = options;
    let transaction = null;
    
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      try {
        transaction = await sequelize.transaction();
        
        // è®¾ç½®è¶…æ—¶ä¿æŠ¤
        const timeoutPromise = new Promise((_, reject) => 
          setTimeout(() => reject(new Error('Transaction timeout')), timeout));
        
        const result = await Promise.race([operation(transaction), timeoutPromise]);
        
        // ğŸ”´ æ£€æŸ¥äº‹åŠ¡çŠ¶æ€é¿å…é‡å¤æäº¤
        if (!transaction.finished) {
          await transaction.commit();
          console.log('âœ… äº‹åŠ¡æäº¤æˆåŠŸ');
        }
        
        return result;
        
      } catch (error) {
        // ğŸ”´ å®‰å…¨å›æ»šé€»è¾‘
        if (transaction && !transaction.finished) {
          try {
            await transaction.rollback();
          } catch (rollbackError) {
            console.error('âŒ äº‹åŠ¡å›æ»šå¤±è´¥:', rollbackError.message);
          }
        }
        
        const errorType = SAFE_TRANSACTION_SYSTEM.analyzeError(error);
        if (errorType.retryable && attempt < maxRetries - 1) {
          const delay = Math.min(1000 * Math.pow(2, attempt), 5000);
          await new Promise(resolve => setTimeout(resolve, delay));
          continue;
        }
        
        throw error;
      }
    }
  },

  // äº‹åŠ¡é”™è¯¯ç±»å‹åˆ†æ
  analyzeError: (error) => {
    const msg = error.message.toLowerCase();
    
    if (msg.includes('transaction cannot be rolled back') || msg.includes('has been finished')) {
      return { retryable: false, reason: 'transaction_already_finished' };
    }
    if (msg.includes('deadlock') || msg.includes('lock')) {
      return { retryable: true, reason: 'database_deadlock' };
    }
    if (msg.includes('timeout') || msg.includes('connection')) {
      return { retryable: true, reason: 'connection_timeout' };
    }
    
    return { retryable: true, reason: 'unknown_error' };
  }
};
```

## ğŸ”§ **é…ç½®ç®¡ç†å’Œç¯å¢ƒå˜é‡è§„èŒƒ**

### **åŸºäºcursor_9.mdçš„é…ç½®å®Œæ•´æ€§ä¿è¯**
```javascript
// ğŸ”´ è§£å†³.envé…ç½®ç¼ºå¤±å¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥é—®é¢˜
const CONFIG_COMPLETENESS_SYSTEM = {
  // å¿…éœ€çš„ç¯å¢ƒå˜é‡æ¸…å•ï¼ˆåŸºäºå®é™…ç¼ºå¤±ç»Ÿè®¡ï¼‰
  requiredEnvVars: {
    database: ['DB_HOST', 'DB_PORT', 'DB_NAME', 'DB_USER', 'DB_PASSWORD'],
    server: ['PORT', 'NODE_ENV', 'JWT_SECRET'],
    external_services: ['REDIS_URL', 'SEALOS_ACCESS_KEY', 'SEALOS_SECRET_KEY'],
    websocket: ['WS_PORT', 'WS_PATH']
  },

  // ç¯å¢ƒå˜é‡å®Œæ•´æ€§æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨
  validateAndGenerate: () => {
    const missing = [];
    
    Object.entries(CONFIG_COMPLETENESS_SYSTEM.requiredEnvVars).forEach(([category, vars]) => {
      vars.forEach(varName => {
        if (!process.env[varName]) {
          missing.push({ category, variable: varName });
        }
      });
    });

    if (missing.length > 0) {
      console.error(`ğŸ”´ æ£€æµ‹åˆ°${missing.length}ä¸ªç¼ºå¤±çš„ç¯å¢ƒå˜é‡`);
      
      // ç”Ÿæˆ.envæ¨¡æ¿
      const template = CONFIG_COMPLETENESS_SYSTEM.generateEnvTemplate();
      console.log('ğŸ“„ å»ºè®®çš„.envé…ç½®æ¨¡æ¿å·²ç”Ÿæˆ');
      
      return { valid: false, missing, template };
    }

    return { valid: true, missing: [] };
  },

  // è‡ªåŠ¨ç”Ÿæˆ.envæ¨¡æ¿
  generateEnvTemplate: () => `# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=restaurant_lottery
DB_USER=root
DB_PASSWORD=your_password

# æœåŠ¡é…ç½®  
PORT=3000
NODE_ENV=development
JWT_SECRET=your_jwt_secret_here

# ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®
REDIS_URL=redis://localhost:6379
SEALOS_ACCESS_KEY=your_access_key
SEALOS_SECRET_KEY=your_secret_key

# WebSocketé…ç½®
WS_PORT=3000
WS_PATH=/ws`
};
```

## ğŸ“¦ **ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶è§„èŒƒ**

### **package.jsonå®Œæ•´æ€§å’Œå…¼å®¹æ€§ä¿è¯**
```javascript
// åŸºäºå¤šä¸ªcursoræ–‡æ¡£ä¸­å‘ç°çš„ä¾èµ–ç‰ˆæœ¬å†²çª
const DEPENDENCY_MANAGEMENT_SYSTEM = {
  // æ ¸å¿ƒä¾èµ–ç‰ˆæœ¬è¦æ±‚ï¼ˆåŸºäºå®é™…é¡¹ç›®éœ€æ±‚ï¼‰
  coreDependencies: {
    production: {
      'express': '^4.18.0',
      'sequelize': '^6.35.0', 
      'mysql2': '^3.6.0',
      'socket.io': '^4.7.0',
      'jsonwebtoken': '^9.0.0',
      'bcryptjs': '^2.4.3',
      'cors': '^2.8.5',
      'dotenv': '^16.3.0'
    },
    development: {
      'nodemon': '^3.0.0',
      'jest': '^29.7.0',
      'supertest': '^6.3.0',
      'eslint': '^8.50.0'
    }
  },

  // ä¾èµ–å®Œæ•´æ€§éªŒè¯
  validate: (packageJson) => {
    const issues = [];
    
    Object.entries(DEPENDENCY_MANAGEMENT_SYSTEM.coreDependencies.production).forEach(([pkg, required]) => {
      const installed = packageJson.dependencies?.[pkg];
      if (!installed) {
        issues.push({ type: 'MISSING', package: pkg, required });
      } else if (!this.isVersionCompatible(installed, required)) {
        issues.push({ type: 'VERSION_INCOMPATIBLE', package: pkg, installed, required });
      }
    });

    return { valid: issues.length === 0, issues };
  },

  isVersionCompatible: (installed, required) => {
    const installedClean = installed.replace(/[\^~]/, '');
    const requiredClean = required.replace(/[\^~]/, '');
    return installedClean >= requiredClean;
  }
};
```

## ğŸ¥ **ç»¼åˆå¼€å‘è´¨é‡æ£€æŸ¥å™¨**

### **ç»Ÿä¸€è´¨é‡éªŒè¯ç³»ç»Ÿ**
```javascript
// åŸºäºæ‰€æœ‰cursoræ–‡æ¡£é—®é¢˜çš„ç»¼åˆæ£€æŸ¥å™¨
const QUALITY_ASSURANCE_SYSTEM = {
  // æ‰§è¡Œå…¨é¢è´¨é‡æ£€æŸ¥
  runFullCheck: async (context) => {
    console.log('ğŸ” å¼€å§‹ç»¼åˆå¼€å‘è´¨é‡æ£€æŸ¥...');
    
    const results = {
      timestamp: new Date().toISOString(),
      checks: {},
      overallScore: 0,
      critical_issues: [],
      recommendations: []
    };

    // 1. APIå®Œæ•´æ€§æ£€æŸ¥
    const apiCheck = await UNIFIED_API_STANDARDS.validateFrontendAPI(context.API);
    results.checks.api_completeness = { valid: apiCheck, issues: apiCheck ? [] : ['APIæ–¹æ³•ç¼ºå¤±'] };

    // 2. WebSocketå®Œæ•´æ€§æ£€æŸ¥  
    const wsCheck = WEBSOCKET_COMPLETENESS_VALIDATOR.validateAndGenerate(context.webSocketService);
    results.checks.websocket_completeness = wsCheck;

    // 3. ç¯å¢ƒå˜é‡å®Œæ•´æ€§æ£€æŸ¥
    const envCheck = CONFIG_COMPLETENESS_SYSTEM.validateAndGenerate();
    results.checks.environment_variables = envCheck;

    // 4. ä¾èµ–å®Œæ•´æ€§æ£€æŸ¥
    const depCheck = DEPENDENCY_MANAGEMENT_SYSTEM.validate(context.packageJson);
    results.checks.dependencies = depCheck;

    // è®¡ç®—ç»¼åˆè¯„åˆ†
    const passedChecks = Object.values(results.checks).filter(check => check.valid).length;
    results.overallScore = Math.round((passedChecks / Object.keys(results.checks).length) * 100);

    // ç”Ÿæˆå…³é”®é—®é¢˜æ¸…å•
    Object.entries(results.checks).forEach(([checkName, result]) => {
      if (!result.valid && result.issues) {
        results.critical_issues.push(...result.issues.map(issue => ({
          category: checkName,
          issue: issue,
          priority: QUALITY_ASSURANCE_SYSTEM.getPriority(checkName)
        })));
      }
    });

    // ç”Ÿæˆæ”¹è¿›å»ºè®®
    results.recommendations = QUALITY_ASSURANCE_SYSTEM.generateRecommendations(results);

    return results;
  },

  // é—®é¢˜ä¼˜å…ˆçº§åˆ¤æ–­
  getPriority: (category) => {
    const priorityMap = {
      api_completeness: 'HIGH',
      websocket_completeness: 'HIGH', 
      environment_variables: 'MEDIUM',
      dependencies: 'MEDIUM'
    };
    return priorityMap[category] || 'LOW';
  },

  // ç”Ÿæˆæ”¹è¿›å»ºè®®
  generateRecommendations: (results) => {
    const recommendations = [];
    
    if (results.overallScore < 70) {
      recommendations.push('ğŸš¨ ä»£ç è´¨é‡éœ€è¦æ˜¾è‘—æ”¹è¿›ï¼Œå»ºè®®ä¼˜å…ˆè§£å†³é«˜ä¼˜å…ˆçº§é—®é¢˜');
    }

    results.critical_issues.forEach(issue => {
      if (issue.priority === 'HIGH') {
        recommendations.push(`ğŸ”´ é«˜ä¼˜å…ˆçº§: ${issue.issue}`);
      }
    });

    if (results.checks.api_completeness && !results.checks.api_completeness.valid) {
      recommendations.push('ğŸ“¡ å®ç°ç¼ºå¤±çš„APIç«¯ç‚¹ï¼Œç¡®ä¿å‰åç«¯æ¥å£ä¸€è‡´æ€§');
    }

    if (results.checks.websocket_completeness && !results.checks.websocket_completeness.valid) {
      recommendations.push('ğŸ”Œ å®ç°ç¼ºå¤±çš„WebSocketæ–¹æ³•ï¼Œç¡®ä¿å®æ—¶é€šä¿¡åŠŸèƒ½å®Œæ•´');
    }

    return recommendations;
  }
};
```

## ğŸ”— **æ•°æ®åº“æ¨¡å‹å…³è”æ ‡å‡†åŒ–**

### **åŸºäºcursor_3.mdæ¨¡å‹å…³è”é—®é¢˜çš„æ ‡å‡†é…ç½®**
```javascript
// æ ‡å‡†åŒ–æ•°æ®åº“æ¨¡å‹å…³è”é…ç½®
const MODEL_ASSOCIATION_STANDARDS = {
  standardAssociations: {
    User: {
      hasMany: [
        { model: 'UserInventory', as: 'inventoryItems', foreignKey: 'user_id' },
        { model: 'CustomerSession', as: 'chatSessions', foreignKey: 'user_id' },
        { model: 'ChatMessage', as: 'sentMessages', foreignKey: 'sender_id' }
      ]
    },
    CustomerSession: {
      belongsTo: [
        { model: 'User', as: 'user', foreignKey: 'user_id' },
        { model: 'User', as: 'admin', foreignKey: 'admin_id' }
      ],
      hasMany: [
        { model: 'ChatMessage', as: 'messages', foreignKey: 'session_id' }
      ]
    },
    ChatMessage: {
      belongsTo: [
        { model: 'CustomerSession', as: 'session', foreignKey: 'session_id' },
        { model: 'User', as: 'sender', foreignKey: 'sender_id' }
      ]
    }
  },

  // éªŒè¯å¹¶è‡ªåŠ¨å»ºç«‹ç¼ºå¤±çš„å…³è”
  validateAndEstablish: (models) => {
    const issues = [];
    
    Object.entries(MODEL_ASSOCIATION_STANDARDS.standardAssociations).forEach(([modelName, associations]) => {
      const model = models[modelName];
      if (!model) {
        issues.push(`æ¨¡å‹ ${modelName} ä¸å­˜åœ¨`);
        return;
      }

      // æ£€æŸ¥å¹¶å»ºç«‹hasManyå…³è”
      associations.hasMany?.forEach(assoc => {
        if (!model.associations[assoc.as]) {
          model.hasMany(models[assoc.model], { as: assoc.as, foreignKey: assoc.foreignKey });
          console.log(`âœ… å»ºç«‹å…³è”: ${modelName}.hasMany(${assoc.model}, ${assoc.as})`);
        }
      });

      // æ£€æŸ¥å¹¶å»ºç«‹belongsToå…³è”  
      associations.belongsTo?.forEach(assoc => {
        if (!model.associations[assoc.as]) {
          model.belongsTo(models[assoc.model], { as: assoc.as, foreignKey: assoc.foreignKey });
          console.log(`âœ… å»ºç«‹å…³è”: ${modelName}.belongsTo(${assoc.model}, ${assoc.as})`);
        }
      });
    });

    return { valid: issues.length === 0, issues };
  }
};
```

## ğŸš€ **å¼€å‘è´¨é‡è‡ªåŠ¨åŒ–æ‰§è¡Œ**

### **ä¸€é”®è´¨é‡æ£€æŸ¥å’Œä¿®å¤è„šæœ¬**
```bash
#!/bin/bash
# è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰è´¨é‡æ£€æŸ¥çš„è„šæœ¬

echo "ğŸ” å¼€å§‹è‡ªåŠ¨åŒ–å¼€å‘è´¨é‡æ£€æŸ¥..."

# 1. æ£€æŸ¥APIæ¥å£å®Œæ•´æ€§
echo "ğŸ“¡ æ£€æŸ¥APIæ¥å£..."
node -e "
const UNIFIED_API_STANDARDS = require('./quality-standards');
UNIFIED_API_STANDARDS.validateFrontendAPI(require('./utils/api'));
"

# 2. æ£€æŸ¥WebSocketåŠŸèƒ½å®Œæ•´æ€§  
echo "ğŸ”Œ æ£€æŸ¥WebSocketåŠŸèƒ½..."
node -e "
const WEBSOCKET_VALIDATOR = require('./quality-standards');
WEBSOCKET_VALIDATOR.validateAndGenerate(require('./services/webSocketService'));
"

# 3. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
echo "ğŸ”§ æ£€æŸ¥ç¯å¢ƒå˜é‡..."
node -e "
const CONFIG_SYSTEM = require('./quality-standards');
CONFIG_SYSTEM.validateAndGenerate();
"

# 4. æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§
echo "ğŸ“¦ æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬..."
node -e "
const DEPENDENCY_SYSTEM = require('./quality-standards');
const packageJson = require('./package.json');
DEPENDENCY_SYSTEM.validate(packageJson);
"

# 5. ç»¼åˆè´¨é‡è¯„åˆ†
echo "ğŸ“Š ç”Ÿæˆè´¨é‡æŠ¥å‘Š..."
node -e "
const QA_SYSTEM = require('./quality-standards');
QA_SYSTEM.runFullCheck({
  API: require('./utils/api'),
  webSocketService: require('./services/webSocketService'),
  packageJson: require('./package.json')
});
"

echo "âœ… è‡ªåŠ¨åŒ–è´¨é‡æ£€æŸ¥å®Œæˆ"
```

## ğŸ“‹ **è´¨é‡æ ‡å‡†å®æ–½æ£€æŸ¥æ¸…å•**

### **æ¯æ¬¡å¼€å‘å‰æ£€æŸ¥**
- [ ] APIç«¯ç‚¹æ˜¯å¦å®Œæ•´ï¼Ÿ
- [ ] WebSocketæ–¹æ³•æ˜¯å¦å®ç°ï¼Ÿ
- [ ] ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®ï¼Ÿ
- [ ] ä¾èµ–ç‰ˆæœ¬æ˜¯å¦å…¼å®¹ï¼Ÿ
- [ ] æ•°æ®åº“å…³è”æ˜¯å¦æ­£ç¡®ï¼Ÿ

### **æ¯æ¬¡å‘å¸ƒå‰éªŒè¯**
- [ ] æ‰€æœ‰è´¨é‡æ£€æŸ¥æ˜¯å¦é€šè¿‡ï¼Ÿ
- [ ] ç»¼åˆè´¨é‡è¯„åˆ†æ˜¯å¦>85åˆ†ï¼Ÿ
- [ ] å…³é”®åŠŸèƒ½æ˜¯å¦å®Œæ•´ï¼Ÿ
- [ ] é…ç½®æ–‡ä»¶æ˜¯å¦å°±ç»ªï¼Ÿ
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦å¥å…¨ï¼Ÿ

---

**æ ¸å¿ƒåŸåˆ™**: APIå¼ºåˆ¶ä¸€è‡´æ€§ã€WebSocketåŠŸèƒ½å®Œæ•´æ€§ã€äº‹åŠ¡å¤„ç†å®‰å…¨æ€§ã€é…ç½®ç®¡ç†æ ‡å‡†åŒ–ã€è´¨é‡æ£€æŸ¥è‡ªåŠ¨åŒ–