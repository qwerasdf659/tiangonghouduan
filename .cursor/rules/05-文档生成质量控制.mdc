---
alwaysApply: true
lastUpdated: 2025å¹´10æœˆ03æ—¥ 17:05:11
---

# ğŸ“ æ–‡æ¡£ç”Ÿæˆè´¨é‡æ§åˆ¶ï¼ˆåŸºäºcursoræ–‡æ¡£è†¨èƒ€é—®é¢˜çš„ç³»ç»ŸåŒ–è§£å†³æ–¹æ¡ˆï¼‰

## ğŸ”´ **åŸºäºå®é™…æ–‡æ¡£è†¨èƒ€çš„è´¨é‡æ§åˆ¶ä½“ç³»**

### **ä¸¥é‡æ–‡æ¡£è†¨èƒ€é—®é¢˜é‡åŒ–åˆ†æ**
åŸºäº11ä¸ªcursoræ–‡æ¡£æ·±åº¦ç»Ÿè®¡å‘ç°ï¼š
- **cursor_1.md**: 165KB, 5,557è¡Œï¼ˆè¶…æ ‡5557%ï¼Œé¢„æœŸ100è¡Œï¼‰
- **cursor_5.md**: 181KB, 6,804è¡Œï¼ˆè¶…æ ‡4536%ï¼Œé¢„æœŸ150è¡Œï¼‰
- **cursor_8.md**: 63KB, 2,084è¡Œï¼ˆè¶…æ ‡4068%ï¼Œé¢„æœŸ50è¡Œï¼‰
- **å¹³å‡ä¿¡æ¯å¯†åº¦**: 1.2%ï¼ˆ98.8%ä¸ºå†—ä½™ä¿¡æ¯ï¼‰
- **å¹³å‡é‡å¤ç‡**: 300-500%ï¼ˆæå…¶ä¸¥é‡ï¼‰

### **å®é™…é‡å¤å†…å®¹æ¨¡å¼ç»Ÿè®¡**
```javascript
// åŸºäºå®é™…cursoræ–‡æ¡£çš„é‡å¤æ¨¡å¼åˆ†æ
const DOCUMENT_REDUNDANCY_ANALYSIS = {
  // å®é™…å‘ç°çš„é‡å¤å†…å®¹æ¨¡å¼
  detectedPatterns: {
    healthCheck: {
      content: 'âœ… æœåŠ¡ï¼šè¿è¡Œä¸­ï¼ˆè¿›ç¨‹40469ï¼‰',
      occurrences: 12,  // cursor_8.mdä¸­é‡å¤12æ¬¡
      wasteLevel: 'SEVERE'
    },
    statusConfirm: {
      content: '**ä»»åŠ¡å®Œæˆ** - åç«¯æœåŠ¡å®Œå…¨æ­£å¸¸è¿è¡Œ',
      occurrences: 20,  // å„æ–‡æ¡£ä¸­é‡å¤20+æ¬¡
      wasteLevel: 'CRITICAL'
    },
    commandOutput: {
      content: 'curl http://localhost:3000/health',
      occurrences: 10,  // ç›¸åŒå‘½ä»¤è¾“å‡ºé‡å¤è®°å½•
      wasteLevel: 'SEVERE'
    }
  },

  // ä¿¡æ¯å¯†åº¦åˆ†æï¼ˆåŸºäºcursor_5.mdç­‰å®é™…æ•°æ®ï¼‰
  calculateDensity: (content) => {
    const totalLines = content.split('\n').length;
    const meaningfulLines = content.split('\n').filter(line => 
      line.trim() && 
      !DOCUMENT_REDUNDANCY_ANALYSIS.isMeaningless(line)
    ).length;
    
    return {
      totalLines,
      meaningfulLines,
      density: meaningfulLines / totalLines,
      redundancy: 1 - (meaningfulLines / totalLines)
    };
  },

  // æ— æ„ä¹‰å†…å®¹è¯†åˆ«
  isMeaningless: (line) => {
    const meaninglessPatterns = [
      /^#{1,6}\s*$/,                    // ç©ºæ ‡é¢˜
      /^-{3,}$/,                        // åˆ†å‰²çº¿
      /^âœ….*æ­£å¸¸.*$/,                   // é‡å¤çŠ¶æ€ç¡®è®¤
      /^.*ä»»åŠ¡å®Œæˆ.*$/,                 // é‡å¤å®Œæˆç¡®è®¤
      /^\s*```\s*$/,                    // ç©ºä»£ç å—
      /^.*å·²å®Œæˆ.*$/                    // é‡å¤å®Œæˆæ ‡è®°
    ];
    
    return meaninglessPatterns.some(pattern => pattern.test(line.trim()));
  }
};
```

## ğŸ“ **æ–‡æ¡£é•¿åº¦ç¡¬æ€§æ§åˆ¶ç³»ç»Ÿ**

### **åŸºäºå®é™…è¶…æ ‡æ¡ˆä¾‹çš„å¼ºåˆ¶é™åˆ¶**
```javascript
// ğŸ”´ åŸºäºcursorå®é™…è¶…æ ‡æ¡ˆä¾‹åˆ¶å®šçš„ç¡¬æ€§æ§åˆ¶ç³»ç»Ÿ
const DOCUMENT_LENGTH_CONTROLLER = {
  // ä»»åŠ¡å¤æ‚åº¦é•¿åº¦æ ‡å‡†ï¼ˆåŸºäºå®é™…éœ€æ±‚åˆ†æï¼‰
  lengthStandards: {
    status_check: {
      maxLines: 50,           // cursor_8.mdåº”æ§åˆ¶åœ¨50è¡Œå†…ï¼Œä¸æ˜¯2,084è¡Œ
      maxSize: 2048,          // 2KBé™åˆ¶
      penalty: 'CRITICAL',
      template: 'status_simple'
    },
    simple_debug: {
      maxLines: 100,          // ç®€å•è°ƒè¯•é—®é¢˜
      maxSize: 5120,          // 5KBé™åˆ¶
      penalty: 'SEVERE',
      template: 'debug_simple'
    },
    medium_task: {
      maxLines: 200,          // ä¸­ç­‰å¤æ‚ä»»åŠ¡
      maxSize: 10240,         // 10KBé™åˆ¶
      penalty: 'MODERATE',
      template: 'task_medium'
    },
    complex_system: {
      maxLines: 500,          // ç³»ç»Ÿçº§å¤æ‚ä»»åŠ¡ï¼ˆç»å¯¹ä¸Šé™ï¼‰
      maxSize: 25600,         // 25KBé™åˆ¶ï¼ˆç»å¯¹ä¸Šé™ï¼‰
      penalty: 'WARNING',
      template: 'system_complex'
    }
  },

  // æ–‡æ¡£é•¿åº¦éªŒè¯å’Œå¼ºåˆ¶æˆªæ–­
  validateAndControl: (content, taskType) => {
    const lines = content.split('\n');
    const size = Buffer.byteLength(content, 'utf8');
    const standard = DOCUMENT_LENGTH_CONTROLLER.lengthStandards[taskType];
    
    if (!standard) {
      console.warn(`âš ï¸ æœªçŸ¥ä»»åŠ¡ç±»å‹: ${taskType}ï¼Œä½¿ç”¨é»˜è®¤é™åˆ¶`);
      standard = DOCUMENT_LENGTH_CONTROLLER.lengthStandards.medium_task;
    }

    const violations = [];
    
    // æ£€æŸ¥è¡Œæ•°é™åˆ¶
    if (lines.length > standard.maxLines) {
      violations.push({
        type: 'LINE_LIMIT_EXCEEDED',
        current: lines.length,
        limit: standard.maxLines,
        excess: lines.length - standard.maxLines
      });
    }

    // æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶
    if (size > standard.maxSize) {
      violations.push({
        type: 'SIZE_LIMIT_EXCEEDED', 
        current: size,
        limit: standard.maxSize,
        excess: size - standard.maxSize
      });
    }

    if (violations.length > 0) {
      console.error(`ğŸš« æ–‡æ¡£é•¿åº¦è¿è§„ (${standard.penalty}çº§åˆ«):`);
      violations.forEach(v => {
        console.error(`   âŒ ${v.type}: ${v.current} > ${v.limit} (è¶…å‡º${v.excess})`);
      });

      // è‡ªåŠ¨æˆªæ–­å¤„ç†
      if (violations.some(v => v.type === 'LINE_LIMIT_EXCEEDED')) {
        const truncated = lines.slice(0, standard.maxLines);
        truncated.push('', '--- ğŸš« æ–‡æ¡£å·²è‡ªåŠ¨æˆªæ–­ï¼Œè¶…å‡ºé•¿åº¦é™åˆ¶ ---');
        
        return {
          content: truncated.join('\n'),
          truncated: true,
          originalLength: lines.length,
          newLength: standard.maxLines,
          violations
        };
      }
    }

    console.log(`âœ… æ–‡æ¡£é•¿åº¦ç¬¦åˆ${taskType}æ ‡å‡† (${lines.length}è¡Œ/${standard.maxLines}è¡Œ)`);
    return { content, truncated: false, violations: [] };
  },

  // è‡ªåŠ¨ä»»åŠ¡ç±»å‹è¯†åˆ«
  detectTaskType: (content) => {
    const keywords = {
      status_check: ['å¥åº·æ£€æŸ¥', 'çŠ¶æ€æ£€æŸ¥', 'æœåŠ¡è¿è¡Œ', 'ç«¯å£ç›‘å¬'],
      simple_debug: ['é…ç½®ä¿®å¤', 'APIè·¯å¾„', 'ç®€å•è°ƒè¯•', 'è·¯ç”±æ·»åŠ '],
      medium_task: ['æ¥å£è°ƒè¯•', 'æƒé™ä¿®å¤', 'æ•°æ®åº“é—®é¢˜', 'åŠŸèƒ½å®ç°'],
      complex_system: ['ç³»ç»Ÿé‡æ„', 'æ¶æ„è°ƒæ•´', 'å¤§å‹åŠŸèƒ½', 'ç»¼åˆä¼˜åŒ–']
    };

    for (const [type, typeKeywords] of Object.entries(keywords)) {
      const matchCount = typeKeywords.filter(keyword => content.includes(keyword)).length;
      if (matchCount >= 2) {
        console.log(`ğŸ¯ è¯†åˆ«ä»»åŠ¡ç±»å‹: ${type} (åŒ¹é…${matchCount}ä¸ªå…³é”®è¯)`);
        return type;
      }
    }

    console.log('ğŸ¯ é»˜è®¤ä»»åŠ¡ç±»å‹: medium_task');
    return 'medium_task';
  }
};
```

## ğŸ§¹ **æ™ºèƒ½é‡å¤å†…å®¹æ£€æµ‹å’Œæ¸…ç†ç³»ç»Ÿ**

### **åŸºäºå®é™…é‡å¤æ¨¡å¼çš„è‡ªåŠ¨å»é‡**
```javascript
// ğŸ”´ åŸºäºcursoræ–‡æ¡£å®é™…é‡å¤æ¨¡å¼çš„æ™ºèƒ½å»é‡ç³»ç»Ÿ
const INTELLIGENT_DEDUPLICATION_SYSTEM = {
  // é‡å¤æ¨¡å¼æ£€æµ‹åº“ï¼ˆåŸºäºå®é™…å‘ç°çš„æ¨¡å¼ï¼‰
  repetitionPatterns: {
    healthCheckResults: {
      pattern: /âœ…\s*æœåŠ¡[ï¼š:]\s*è¿è¡Œä¸­.*è¿›ç¨‹\s*\d+/,
      tolerance: 1,  // æœ€å¤šå…è®¸1æ¬¡å‡ºç°
      description: 'å¥åº·æ£€æŸ¥ç»“æœé‡å¤'
    },
    taskCompletions: {
      pattern: /\*\*ä»»åŠ¡å®Œæˆ\*\*.*åç«¯æœåŠ¡.*æ­£å¸¸/,
      tolerance: 1,
      description: 'ä»»åŠ¡å®Œæˆç¡®è®¤é‡å¤'
    },
    curlCommands: {
      pattern: /curl.*localhost:3000\/health/,
      tolerance: 2,  // æœ€å¤šå…è®¸2æ¬¡ï¼ˆåŸå§‹+éªŒè¯ï¼‰
      description: 'å‘½ä»¤æ‰§è¡Œé‡å¤è®°å½•'
    },
    statusReports: {
      pattern: /ğŸ“Š.*æ€»ä½“çŠ¶æ€.*âœ….*HEALTHY/,
      tolerance: 1,
      description: 'çŠ¶æ€æŠ¥å‘Šé‡å¤'
    }
  },

  // æ™ºèƒ½é‡å¤æ£€æµ‹
  detectDuplicates: (content) => {
    const lines = content.split('\n');
    const duplicateGroups = new Map();
    
    Object.entries(INTELLIGENT_DEDUPLICATION_SYSTEM.repetitionPatterns).forEach(([patternName, config]) => {
      const matches = [];
      
      lines.forEach((line, index) => {
        if (config.pattern.test(line)) {
          matches.push({ lineNumber: index + 1, content: line.trim() });
        }
      });

      if (matches.length > config.tolerance) {
        duplicateGroups.set(patternName, {
          ...config,
          matches: matches,
          excessCount: matches.length - config.tolerance
        });
      }
    });

    return duplicateGroups;
  },

  // è‡ªåŠ¨å»é‡å¤„ç†
  performDeduplication: (content) => {
    const duplicates = INTELLIGENT_DEDUPLICATION_SYSTEM.detectDuplicates(content);
    let cleanedContent = content;
    let removedCount = 0;

    duplicates.forEach((duplicate, patternName) => {
      console.log(`ğŸ§¹ æ¸…ç†é‡å¤å†…å®¹: ${duplicate.description} (${duplicate.matches.length}æ¬¡ â†’ ${duplicate.tolerance}æ¬¡)`);
      
      // ä¿ç•™å‰Nä¸ªåŒ¹é…ï¼Œåˆ é™¤å…¶ä½™
      const matchesToRemove = duplicate.matches.slice(duplicate.tolerance);
      
      matchesToRemove.reverse().forEach(match => { // ä»åå¾€å‰åˆ é™¤é¿å…ç´¢å¼•å˜åŒ–
        const lines = cleanedContent.split('\n');
        lines.splice(match.lineNumber - 1, 1);
        cleanedContent = lines.join('\n');
        removedCount++;
      });
    });

    if (removedCount > 0) {
      console.log(`âœ… å»é‡å®Œæˆ: åˆ é™¤${removedCount}è¡Œé‡å¤å†…å®¹`);
    }

    return {
      content: cleanedContent,
      removedLines: removedCount,
      duplicatePatterns: Array.from(duplicates.keys())
    };
  },

  // é«˜çº§å»é‡ï¼šåŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦
  performAdvancedDeduplication: (content) => {
    const paragraphs = content.split('\n\n').filter(p => p.trim());
    const duplicates = [];
    
    for (let i = 0; i < paragraphs.length; i++) {
      for (let j = i + 1; j < paragraphs.length; j++) {
        const similarity = INTELLIGENT_DEDUPLICATION_SYSTEM.calculateSimilarity(paragraphs[i], paragraphs[j]);
        
        if (similarity > 0.8) {  // 80%ç›¸ä¼¼åº¦é˜ˆå€¼
          duplicates.push({
            index: j,
            similarity: similarity,
            original: i,
            content: paragraphs[j].substring(0, 50) + '...'
          });
        }
      }
    }

    // åˆ é™¤é‡å¤æ®µè½
    duplicates.sort((a, b) => b.index - a.index); // ä»åå¾€å‰åˆ é™¤
    duplicates.forEach(dup => {
      paragraphs.splice(dup.index, 1);
      console.log(`ğŸ—‘ï¸ åˆ é™¤ç›¸ä¼¼æ®µè½ (ç›¸ä¼¼åº¦: ${(dup.similarity*100).toFixed(1)}%): ${dup.content}`);
    });

    return {
      content: paragraphs.join('\n\n'),
      removedParagraphs: duplicates.length
    };
  },

  // æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  calculateSimilarity: (text1, text2) => {
    const words1 = new Set(text1.toLowerCase().split(/\s+/));
    const words2 = new Set(text2.toLowerCase().split(/\s+/));
    
    const intersection = new Set([...words1].filter(word => words2.has(word)));
    const union = new Set([...words1, ...words2]);
    
    return intersection.size / union.size;
  }
};
```

## ğŸ“‹ **æ ‡å‡†æ–‡æ¡£æ¨¡æ¿å¼ºåˆ¶ç³»ç»Ÿ**

### **é˜²æ­¢è†¨èƒ€çš„æ ‡å‡†åŒ–æ¨¡æ¿åº“**
```javascript
// ğŸ”´ åŸºäºcursorå®é™…è¶…æ ‡æ¡ˆä¾‹çš„å¼ºåˆ¶æ¨¡æ¿ç³»ç»Ÿ
const STANDARD_TEMPLATE_SYSTEM = {
  // æ ‡å‡†åŒ–æ–‡æ¡£æ¨¡æ¿åº“
  templates: {
    // çŠ¶æ€æ£€æŸ¥æ¨¡æ¿ï¼ˆæœ€å¤§50è¡Œï¼‰
    status_simple: `# æœåŠ¡çŠ¶æ€æ£€æŸ¥

## æ£€æŸ¥ç»“æœï¼ˆå¹¶è¡Œ5ç§’æ£€æŸ¥ï¼‰
âœ… æœåŠ¡çŠ¶æ€ï¼šè¿è¡Œä¸­ (PID: {pid})
âœ… ç«¯å£ç›‘å¬ï¼š3000ç«¯å£æ­£å¸¸
âœ… æ•°æ®åº“è¿æ¥ï¼šhealthy
âœ… å¥åº·æ£€æŸ¥ï¼šæ­£å¸¸å“åº”

## æ ¸å¿ƒæ•°æ®
- ç”¨æˆ·ï¼š{userCount}ä¸ª | å¥–å“ï¼š{prizeCount}ä¸ª | å•†å“ï¼š{productCount}ä¸ª
- å†…å­˜ï¼š{memoryUsage}MB | å“åº”æ—¶é—´ï¼š{responseTime}ms

## æ€»ç»“
{conclusion}

**ä»»åŠ¡å®Œæˆ**`,

    // ç®€å•è°ƒè¯•æ¨¡æ¿ï¼ˆæœ€å¤§100è¡Œï¼‰
    debug_simple: `# é—®é¢˜ï¼š{problemTitle}

## é—®é¢˜åˆ†æ
- ç—‡çŠ¶ï¼š{symptom}
- æ ¹å› ï¼š{rootCause}
- å½±å“ï¼š{impact}

## è§£å†³æ–¹æ¡ˆ
1. {step1}
2. {step2}
3. {step3}

## éªŒè¯ç»“æœ
{verificationResult}

## é¢„é˜²æªæ–½
{preventionMeasures}

**é—®é¢˜å·²è§£å†³**`,

    // ä¸­ç­‰ä»»åŠ¡æ¨¡æ¿ï¼ˆæœ€å¤§200è¡Œï¼‰
    task_medium: `# ä»»åŠ¡ï¼š{taskTitle}

## ä»»åŠ¡æ¦‚è¿°
- ç›®æ ‡ï¼š{objective}
- å¤æ‚åº¦ï¼š{complexity}
- é¢„æœŸæ—¶é—´ï¼š{estimatedTime}

## å®ç°æ­¥éª¤
{implementationSteps}

## æµ‹è¯•éªŒè¯
{testingAndValidation}

## éƒ¨ç½²è¯´æ˜
{deploymentInstructions}

## åç»­ä¼˜åŒ–å»ºè®®
{optimizationSuggestions}

**ä»»åŠ¡å®Œæˆ**`
  },

  // æ¨¡æ¿åº”ç”¨å’ŒéªŒè¯
  applyTemplate: (taskType, data) => {
    const template = STANDARD_TEMPLATE_SYSTEM.templates[taskType];
    if (!template) {
      console.warn(`âš ï¸ æœªæ‰¾åˆ°æ¨¡æ¿: ${taskType}ï¼Œä½¿ç”¨é»˜è®¤æ¨¡æ¿`);
      return STANDARD_TEMPLATE_SYSTEM.generateDefaultTemplate(data);
    }

    // æ›¿æ¢æ¨¡æ¿å˜é‡
    let content = template;
    Object.entries(data).forEach(([key, value]) => {
      const placeholder = `{${key}}`;
      content = content.replace(new RegExp(placeholder, 'g'), value || `[${key}]`);
    });

    // éªŒè¯æ¨¡æ¿åˆè§„æ€§
    const validation = STANDARD_TEMPLATE_SYSTEM.validateTemplate(content, taskType);
    
    if (!validation.valid) {
      console.error(`ğŸš« æ¨¡æ¿éªŒè¯å¤±è´¥: ${validation.errors.join(', ')}`);
      throw new Error(`æ¨¡æ¿ä¸ç¬¦åˆ${taskType}è§„èŒƒ`);
    }

    return content;
  },

  // æ¨¡æ¿éªŒè¯è§„åˆ™
  validateTemplate: (content, taskType) => {
    const lines = content.split('\n');
    const standard = DOCUMENT_LENGTH_CONTROLLER.lengthStandards[taskType];
    const errors = [];

    // é•¿åº¦éªŒè¯
    if (lines.length > standard?.maxLines) {
      errors.push(`è¡Œæ•°è¶…é™: ${lines.length} > ${standard.maxLines}`);
    }

    // å¿…éœ€ç« èŠ‚éªŒè¯
    const requiredSections = {
      status_simple: ['æ£€æŸ¥ç»“æœ', 'æ€»ç»“'],
      debug_simple: ['é—®é¢˜åˆ†æ', 'è§£å†³æ–¹æ¡ˆ', 'éªŒè¯ç»“æœ'],
      task_medium: ['ä»»åŠ¡æ¦‚è¿°', 'å®ç°æ­¥éª¤', 'æµ‹è¯•éªŒè¯']
    };

    const required = requiredSections[taskType] || [];
    required.forEach(section => {
      if (!content.includes(section)) {
        errors.push(`ç¼ºå°‘å¿…éœ€ç« èŠ‚: ${section}`);
      }
    });

    // ç¦æ­¢æ¨¡å¼æ£€æŸ¥
    const forbiddenPatterns = [
      /é‡å¤.*æ£€æŸ¥.*é‡å¤/,           // ç¦æ­¢é‡å¤æè¿°
      /.*å·²å®Œæˆ.*å·²å®Œæˆ/,          // ç¦æ­¢é‡å¤å®Œæˆç¡®è®¤
      /curl.*curl.*curl/          // ç¦æ­¢é‡å¤å‘½ä»¤è®°å½•
    ];

    forbiddenPatterns.forEach((pattern, index) => {
      if (pattern.test(content)) {
        errors.push(`åŒ…å«ç¦æ­¢æ¨¡å¼: æ¨¡å¼${index + 1}`);
      }
    });

    return { valid: errors.length === 0, errors };
  }
};
```

## ğŸ¯ **ä¿¡æ¯å¯†åº¦å¼ºåˆ¶ä¼˜åŒ–ç³»ç»Ÿ**

### **è§£å†³1.2%ä¿¡æ¯å¯†åº¦ä¸¥é‡ä¸è¶³é—®é¢˜**
```javascript
// ğŸ”´ åŸºäºcursor_5.mdç­‰1.2%å¯†åº¦é—®é¢˜çš„ä¼˜åŒ–ç³»ç»Ÿ
const INFORMATION_DENSITY_OPTIMIZER = {
  // ä¿¡æ¯å¯†åº¦æ ‡å‡†ï¼ˆåŸºäºå®é™…åˆ†æåˆ¶å®šï¼‰
  densityStandards: {
    minimum: 0.4,       // æœ€ä½40%ä¿¡æ¯å¯†åº¦ï¼ˆåŸºå‡†çº¿ï¼‰
    target: 0.7,        // ç›®æ ‡70%ä¿¡æ¯å¯†åº¦ï¼ˆè‰¯å¥½æ°´å¹³ï¼‰
    excellent: 0.9,     // ä¼˜ç§€90%ä¿¡æ¯å¯†åº¦ï¼ˆå“è¶Šæ°´å¹³ï¼‰
    failure: 0.1        // ä½äº10%è§†ä¸ºä¸¥é‡å¤±è´¥
  },

  // ä¿¡æ¯å¯†åº¦è®¡ç®—å’Œä¼˜åŒ–
  optimizeDensity: (content) => {
    const analysis = DOCUMENT_REDUNDANCY_ANALYSIS.calculateDensity(content);
    
    console.log(`ğŸ“Š å½“å‰ä¿¡æ¯å¯†åº¦: ${(analysis.density * 100).toFixed(1)}%`);
    console.log(`ğŸ“‹ æ€»è¡Œæ•°: ${analysis.totalLines}, æœ‰æ•ˆè¡Œæ•°: ${analysis.meaningfulLines}`);
    
    // å¯†åº¦ä¸è¶³æ—¶è¿›è¡Œä¼˜åŒ–
    if (analysis.density < INFORMATION_DENSITY_OPTIMIZER.densityStandards.minimum) {
      console.warn(`âš ï¸ ä¿¡æ¯å¯†åº¦ä¸¥é‡ä¸è¶³: ${(analysis.density*100).toFixed(1)}% < 40%`);
      
      // æ‰§è¡Œå¯†åº¦ä¼˜åŒ–
      const optimized = INFORMATION_DENSITY_OPTIMIZER.performDensityOptimization(content);
      return optimized;
    }

    if (analysis.density < INFORMATION_DENSITY_OPTIMIZER.densityStandards.target) {
      console.warn(`âš ï¸ ä¿¡æ¯å¯†åº¦åä½: ${(analysis.density*100).toFixed(1)}% < 70%`);
    } else {
      console.log(`âœ… ä¿¡æ¯å¯†åº¦è‰¯å¥½: ${(analysis.density*100).toFixed(1)}%`);
    }

    return { content, optimized: false, densityImprovement: 0 };
  },

  // å¯†åº¦ä¼˜åŒ–å¤„ç†
  performDensityOptimization: (content) => {
    let optimizedContent = content;
    let removedLines = 0;

    // 1. åˆ é™¤ç©ºç™½å’Œè£…é¥°è¡Œ
    const lines = content.split('\n');
    const filteredLines = lines.filter(line => {
      const trimmed = line.trim();
      
      // ä¿ç•™æœ‰æ„ä¹‰çš„å†…å®¹
      if (!trimmed) return false;  // ç©ºè¡Œ
      if (/^-{3,}$/.test(trimmed)) return false;  // åˆ†å‰²çº¿
      if (/^#{1,6}\s*$/.test(trimmed)) return false;  // ç©ºæ ‡é¢˜
      if (/^\s*```\s*$/.test(trimmed)) return false;  // ç©ºä»£ç å—
      
      return true;
    });

    removedLines = lines.length - filteredLines.length;
    optimizedContent = filteredLines.join('\n');

    // 2. åˆå¹¶ç›¸ä¼¼å†…å®¹
    const deduplicated = INTELLIGENT_DEDUPLICATION_SYSTEM.performDeduplication(optimizedContent);
    optimizedContent = deduplicated.content;
    removedLines += deduplicated.removedLines;

    // 3. å‹ç¼©å†—ä½™è¡¨è¿°
    optimizedContent = INFORMATION_DENSITY_OPTIMIZER.compressRedundantContent(optimizedContent);

    // è®¡ç®—ä¼˜åŒ–åçš„å¯†åº¦
    const newAnalysis = DOCUMENT_REDUNDANCY_ANALYSIS.calculateDensity(optimizedContent);
    const improvement = newAnalysis.density - DOCUMENT_REDUNDANCY_ANALYSIS.calculateDensity(content).density;

    console.log(`ğŸ¯ å¯†åº¦ä¼˜åŒ–å®Œæˆ:`);
    console.log(`   åˆ é™¤è¡Œæ•°: ${removedLines}è¡Œ`);
    console.log(`   å¯†åº¦æå‡: ${(improvement * 100).toFixed(1)}%`);
    console.log(`   ä¼˜åŒ–åå¯†åº¦: ${(newAnalysis.density * 100).toFixed(1)}%`);

    return {
      content: optimizedContent,
      optimized: true,
      removedLines: removedLines,
      densityImprovement: improvement,
      newDensity: newAnalysis.density
    };
  },

  // å‹ç¼©å†—ä½™è¡¨è¿°
  compressRedundantContent: (content) => {
    // å‹ç¼©è§„åˆ™æ˜ å°„
    const compressionRules = [
      // çŠ¶æ€ç¡®è®¤å‹ç¼©
      {
        pattern: /âœ…\s*(æœåŠ¡|ç«¯å£|æ•°æ®åº“|å¥åº·æ£€æŸ¥)[ï¼š:]\s*(.+?)[ï¼Œã€‚]/g,
        replacement: 'âœ… $1: $2'
      },
      // æ—¶é—´ä¿¡æ¯å‹ç¼©
      {
        pattern: /(\d{4}å¹´\d{1,2}æœˆ\d{1,2}æ—¥)\s+(\d{1,2}:\d{1,2}:\d{1,2})/g,
        replacement: '$1 $2'
      },
      // é‡å¤ç¡®è®¤å‹ç¼©
      {
        pattern: /(ä»»åŠ¡å®Œæˆ|å·²å®Œæˆ|å®Œæˆ).*(ä»»åŠ¡å®Œæˆ|å·²å®Œæˆ|å®Œæˆ)/g,
        replacement: 'ä»»åŠ¡å®Œæˆ'
      }
    ];

    let compressedContent = content;
    let compressionCount = 0;

    compressionRules.forEach(rule => {
      const originalLength = compressedContent.length;
      compressedContent = compressedContent.replace(rule.pattern, rule.replacement);
      
      if (compressedContent.length < originalLength) {
        compressionCount++;
      }
    });

    if (compressionCount > 0) {
      console.log(`ğŸ—œï¸ å†…å®¹å‹ç¼©: åº”ç”¨${compressionCount}æ¡å‹ç¼©è§„åˆ™`);
    }

    return compressedContent;
  }
};
```

## ğŸ“Š **æ–‡æ¡£è´¨é‡è¯„åˆ†ç³»ç»Ÿ**

### **å®æ—¶è´¨é‡ç›‘æ§å’Œè¯„ä¼°**
```javascript
// åŸºäºå®é™…æ–‡æ¡£è´¨é‡é—®é¢˜çš„è¯„åˆ†ç³»ç»Ÿ
const DOCUMENT_QUALITY_ASSESSMENT = {
  // è´¨é‡è¯„ä¼°æŒ‡æ ‡
  assessmentCriteria: {
    length: { weight: 0.3, description: 'é•¿åº¦æ§åˆ¶' },
    density: { weight: 0.4, description: 'ä¿¡æ¯å¯†åº¦' },
    repetition: { weight: 0.2, description: 'é‡å¤æ§åˆ¶' },
    structure: { weight: 0.1, description: 'ç»“æ„è´¨é‡' }
  },

  // ç»¼åˆè´¨é‡è¯„åˆ†
  calculateScore: (content, taskType) => {
    const metrics = {};
    
    // 1. é•¿åº¦è¯„åˆ†
    const lengthCheck = DOCUMENT_LENGTH_CONTROLLER.validateAndControl(content, taskType);
    metrics.length = lengthCheck.violations.length === 0 ? 1.0 : 
                    Math.max(0, 1 - (lengthCheck.violations.length * 0.3));

    // 2. å¯†åº¦è¯„åˆ†  
    const densityAnalysis = DOCUMENT_REDUNDANCY_ANALYSIS.calculateDensity(content);
    metrics.density = Math.min(1.0, densityAnalysis.density / 0.7); // ä»¥70%ä¸ºæ»¡åˆ†

    // 3. é‡å¤è¯„åˆ†
    const duplicates = INTELLIGENT_DEDUPLICATION_SYSTEM.detectDuplicates(content);
    const repeatPenalty = Math.min(0.5, duplicates.size * 0.1);
    metrics.repetition = Math.max(0, 1 - repeatPenalty);

    // 4. ç»“æ„è¯„åˆ†
    metrics.structure = DOCUMENT_QUALITY_ASSESSMENT.assessStructure(content);

    // è®¡ç®—åŠ æƒæ€»åˆ†
    let totalScore = 0;
    Object.entries(DOCUMENT_QUALITY_ASSESSMENT.assessmentCriteria).forEach(([criterion, config]) => {
      totalScore += metrics[criterion] * config.weight;
    });

    // ç”Ÿæˆè´¨é‡ç­‰çº§
    const grade = DOCUMENT_QUALITY_ASSESSMENT.getGrade(totalScore);
    
    return {
      totalScore: totalScore,
      grade: grade,
      metrics: metrics,
      suggestions: DOCUMENT_QUALITY_ASSESSMENT.generateSuggestions(metrics)
    };
  },

  // ç»“æ„è´¨é‡è¯„ä¼°
  assessStructure: (content) => {
    let score = 1.0;
    
    // æ£€æŸ¥æ˜¯å¦æœ‰æ˜ç¡®çš„ç« èŠ‚ç»“æ„
    const hasHeaders = (content.match(/^#+\s/gm) || []).length;
    if (hasHeaders < 3) score -= 0.3;

    // æ£€æŸ¥æ˜¯å¦æœ‰ä»£ç å—
    const hasCodeBlocks = (content.match(/```/g) || []).length >= 2;
    if (!hasCodeBlocks) score -= 0.2;

    // æ£€æŸ¥æ˜¯å¦æœ‰æ¸…æ™°çš„ç»“è®º
    if (!content.includes('ä»»åŠ¡å®Œæˆ') && !content.includes('æ€»ç»“')) score -= 0.2;

    return Math.max(0, score);
  },

  // è´¨é‡ç­‰çº§åˆ¤å®š
  getGrade: (score) => {
    if (score >= 0.9) return { letter: 'A', description: 'ä¼˜ç§€', color: 'ğŸŸ¢' };
    if (score >= 0.8) return { letter: 'B', description: 'è‰¯å¥½', color: 'ğŸŸ¡' };
    if (score >= 0.7) return { letter: 'C', description: 'ä¸€èˆ¬', color: 'ğŸŸ ' };
    if (score >= 0.6) return { letter: 'D', description: 'è¾ƒå·®', color: 'ğŸ”´' };
    return { letter: 'F', description: 'å¤±è´¥', color: 'âš«' }; // cursor_5.mdçº§åˆ«
  },

  // è´¨é‡æ”¹è¿›å»ºè®®ç”Ÿæˆ
  generateSuggestions: (metrics) => {
    const suggestions = [];
    
    if (metrics.length < 0.7) {
      suggestions.push('ğŸ“ æ§åˆ¶æ–‡æ¡£é•¿åº¦ï¼šåˆ é™¤ä¸å¿…è¦çš„è¯¦ç»†æè¿°');
    }
    if (metrics.density < 0.7) {
      suggestions.push('ğŸ“Š æé«˜ä¿¡æ¯å¯†åº¦ï¼šåˆ é™¤é‡å¤å’Œæ— æ„ä¹‰å†…å®¹');
    }
    if (metrics.repetition < 0.8) {
      suggestions.push('ğŸ”„ å‡å°‘é‡å¤å†…å®¹ï¼šåˆå¹¶ç›¸ä¼¼æè¿°å’Œæ£€æŸ¥ç»“æœ');
    }
    if (metrics.structure < 0.8) {
      suggestions.push('ğŸ—ï¸ æ”¹å–„æ–‡æ¡£ç»“æ„ï¼šå¢åŠ æ¸…æ™°çš„ç« èŠ‚å’Œä»£ç ç¤ºä¾‹');
    }

    return suggestions;
  }
};
```

## ğŸ¤– **æ–‡æ¡£ç”Ÿæˆè‡ªåŠ¨åŒ–ç³»ç»Ÿ**

### **æ™ºèƒ½æ–‡æ¡£ç”Ÿæˆå’Œè´¨é‡ä¿è¯**
```bash
#!/bin/bash
# æ–‡æ¡£è´¨é‡æ§åˆ¶è‡ªåŠ¨åŒ–è„šæœ¬

generate_quality_document() {
  local task_type="$1"
  local task_data="$2"
  local output_file="$3"
  
  echo "ğŸ“ å¯åŠ¨æ™ºèƒ½æ–‡æ¡£ç”Ÿæˆ..."
  
  # 1. æ£€æµ‹ä»»åŠ¡ç±»å‹ï¼ˆå¦‚æœªæŒ‡å®šï¼‰
  if [ -z "$task_type" ]; then
    echo "ğŸ¯ è‡ªåŠ¨æ£€æµ‹ä»»åŠ¡ç±»å‹..."
    # è¿™é‡Œå¯ä»¥è°ƒç”¨Node.jsè„šæœ¬è¿›è¡Œç±»å‹æ£€æµ‹
    task_type="medium_task"
    echo "ğŸ“ æ£€æµ‹ç»“æœ: $task_type"
  fi
  
  # 2. åº”ç”¨æ ‡å‡†æ¨¡æ¿
  echo "ğŸ“‹ åº”ç”¨æ ‡å‡†æ¨¡æ¿: $task_type"
  
  # 3. ç”Ÿæˆåˆå§‹å†…å®¹ï¼ˆè°ƒç”¨Node.jsæ¨¡æ¿ç³»ç»Ÿï¼‰
  node -e "
  const templateSystem = require('./.cursor/scripts/document-generator');
  const content = templateSystem.generate('$task_type', $task_data);
  console.log(content);
  " > "$output_file.tmp"
  
  # 4. æ‰§è¡Œè´¨é‡æ§åˆ¶æ£€æŸ¥
  echo "ğŸ” æ‰§è¡Œè´¨é‡æ§åˆ¶..."
  
  # é•¿åº¦æ£€æŸ¥
  local line_count=$(wc -l < "$output_file.tmp")
  local max_lines
  
  case $task_type in
    "status_simple") max_lines=50 ;;
    "debug_simple") max_lines=100 ;;
    "task_medium") max_lines=200 ;;
    "system_complex") max_lines=500 ;;
    *) max_lines=200 ;;
  esac
  
  if [ $line_count -gt $max_lines ]; then
    echo "ğŸš« æ–‡æ¡£è¶…é•¿: ${line_count}è¡Œ > ${max_lines}è¡Œï¼Œè‡ªåŠ¨æˆªæ–­"
    head -n $max_lines "$output_file.tmp" > "$output_file.truncated"
    echo "" >> "$output_file.truncated"
    echo "--- ğŸš« æ–‡æ¡£å·²æˆªæ–­ï¼Œè¶…å‡ºé•¿åº¦é™åˆ¶ ---" >> "$output_file.truncated"
    mv "$output_file.truncated" "$output_file.tmp"
  fi
  
  # 5. å»é‡å¤„ç†
  echo "ğŸ§¹ æ‰§è¡Œå†…å®¹å»é‡..."
  node -e "
  const deduplicationSystem = require('./.cursor/scripts/document-generator');
  const content = require('fs').readFileSync('$output_file.tmp', 'utf8');
  const deduplicated = deduplicationSystem.performDeduplication(content);
  require('fs').writeFileSync('$output_file.tmp', deduplicated.content);
  console.log('å»é‡å®Œæˆï¼šåˆ é™¤' + deduplicated.removedLines + 'è¡Œ');
  "
  
  # 6. æœ€ç»ˆè´¨é‡éªŒè¯
  echo "âœ… æ‰§è¡Œæœ€ç»ˆè´¨é‡éªŒè¯..."
  node -e "
  const qualitySystem = require('./.cursor/scripts/document-generator');
  const content = require('fs').readFileSync('$output_file.tmp', 'utf8');
  const assessment = qualitySystem.assessQuality(content, '$task_type');
  console.log('è´¨é‡è¯„åˆ†:', assessment.grade.letter, assessment.grade.description);
  console.log('æ€»åˆ†:', (assessment.totalScore * 100).toFixed(1) + '/100');
  "
  
  # 7. è¾“å‡ºæœ€ç»ˆæ–‡æ¡£
  mv "$output_file.tmp" "$output_file"
  echo "ğŸ“„ æ–‡æ¡£ç”Ÿæˆå®Œæˆ: $output_file"
  
  # 8. ç”Ÿæˆè´¨é‡æŠ¥å‘Š
  echo ""
  echo "ğŸ“Š === æ–‡æ¡£è´¨é‡æŠ¥å‘Š ==="
  echo "ğŸ“ æœ€ç»ˆè¡Œæ•°: $(wc -l < "$output_file")"
  echo "ğŸ“Š æ–‡ä»¶å¤§å°: $(du -h "$output_file" | cut -f1)"
  echo "ğŸ¯ ä»»åŠ¡ç±»å‹: $task_type"
  echo "âœ… è´¨é‡æ§åˆ¶: å·²é€šè¿‡æ‰€æœ‰æ£€æŸ¥"
}
```

## ğŸ“ˆ **æ–‡æ¡£è´¨é‡æŒç»­æ”¹è¿›ç³»ç»Ÿ**

### **è´¨é‡è¶‹åŠ¿ç›‘æ§å’Œä¼˜åŒ–å»ºè®®**
```javascript
const QUALITY_IMPROVEMENT_TRACKER = {
  // è´¨é‡å†å²æ•°æ®
  qualityHistory: [],

  // è®°å½•æ–‡æ¡£è´¨é‡æ•°æ®
  recordQuality: (documentPath, assessment) => {
    const record = {
      timestamp: new Date().toISOString(),
      document: documentPath,
      score: assessment.totalScore,
      grade: assessment.grade.letter,
      metrics: assessment.metrics,
      suggestions: assessment.suggestions
    };

    QUALITY_IMPROVEMENT_TRACKER.qualityHistory.push(record);

    // ä¿æŒæœ€è¿‘50æ¡è®°å½•
    if (QUALITY_IMPROVEMENT_TRACKER.qualityHistory.length > 50) {
      QUALITY_IMPROVEMENT_TRACKER.qualityHistory.shift();
    }
  },

  // ç”Ÿæˆè´¨é‡è¶‹åŠ¿æŠ¥å‘Š
  generateTrendReport: () => {
    const history = QUALITY_IMPROVEMENT_TRACKER.qualityHistory;
    if (history.length < 3) return;

    const recentScores = history.slice(-10).map(record => record.score);
    const averageScore = recentScores.reduce((sum, score) => sum + score, 0) / recentScores.length;
    
    const gradeDistribution = history.slice(-20).reduce((dist, record) => {
      dist[record.grade] = (dist[record.grade] || 0) + 1;
      return dist;
    }, {});

    console.log('\nğŸ“ˆ æ–‡æ¡£è´¨é‡è¶‹åŠ¿æŠ¥å‘Š');
    console.log('='.repeat(40));
    console.log(`ğŸ“Š å¹³å‡è´¨é‡åˆ†æ•°: ${(averageScore * 100).toFixed(1)}/100`);
    console.log(`ğŸ“‹ æœ€è¿‘20ç¯‡æ–‡æ¡£ç­‰çº§åˆ†å¸ƒ:`);
    
    Object.entries(gradeDistribution).forEach(([grade, count]) => {
      console.log(`   ${grade}: ${count}ç¯‡`);
    });

    // æ”¹è¿›å»ºè®®
    if (averageScore < 0.7) {
      console.log('\nğŸ’¡ æ”¹è¿›å»ºè®®:');
      console.log('   1. åŠ å¼ºä¿¡æ¯å¯†åº¦æ§åˆ¶');
      console.log('   2. ä½¿ç”¨æ ‡å‡†æ¨¡æ¿');
      console.log('   3. æ‰§è¡Œè‡ªåŠ¨å»é‡æµç¨‹');
    }
    
    console.log('='.repeat(40));
  }
};
```

## ğŸ“‹ **æ–‡æ¡£è´¨é‡æ§åˆ¶å®æ–½æ£€æŸ¥æ¸…å•**

### **æ¯æ¬¡æ–‡æ¡£ç”Ÿæˆå‰**
- [ ] ç¡®å®šä»»åŠ¡ç±»å‹å’Œå¤æ‚åº¦
- [ ] é€‰æ‹©å¯¹åº”çš„æ ‡å‡†æ¨¡æ¿
- [ ] è®¾å®šé•¿åº¦å’Œå¯†åº¦ç›®æ ‡
- [ ] å‡†å¤‡å¿…è¦çš„æ•°æ®å’Œå†…å®¹

### **æ–‡æ¡£ç”Ÿæˆè¿‡ç¨‹ä¸­**
- [ ] ä¸¥æ ¼æŒ‰ç…§æ¨¡æ¿ç»“æ„ç¼–å†™
- [ ] å®æ—¶æ£€æŸ¥ä¿¡æ¯å¯†åº¦
- [ ] é¿å…é‡å¤å†…å®¹å’Œæè¿°
- [ ] ä¿æŒç« èŠ‚é€»è¾‘æ¸…æ™°

### **æ–‡æ¡£ç”Ÿæˆå®Œæˆå**
- [ ] æ‰§è¡Œé•¿åº¦é™åˆ¶éªŒè¯
- [ ] è¿è¡Œé‡å¤å†…å®¹æ£€æµ‹
- [ ] è®¡ç®—ä¿¡æ¯å¯†åº¦è¯„åˆ†
- [ ] è¿›è¡Œç»¼åˆè´¨é‡è¯„ä¼°

### **æ–‡æ¡£å‘å¸ƒå‰**
- [ ] ç¡®è®¤è´¨é‡è¯„åˆ†è¾¾æ ‡ï¼ˆ>70åˆ†ï¼‰
- [ ] éªŒè¯æ¨¡æ¿è§„èŒƒéµå®ˆæƒ…å†µ
- [ ] æ£€æŸ¥å…³é”®ä¿¡æ¯å®Œæ•´æ€§
- [ ] è®°å½•è´¨é‡æ•°æ®ç”¨äºæ”¹è¿›

---

**æ ¸å¿ƒåŸåˆ™**: é•¿åº¦ç¡¬æ€§æ§åˆ¶ã€å¯†åº¦å¼ºåˆ¶ä¼˜åŒ–ã€é‡å¤æ™ºèƒ½æ£€æµ‹ã€æ¨¡æ¿æ ‡å‡†åŒ–ã€è´¨é‡æŒç»­æ”¹è¿›