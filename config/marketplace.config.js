/**
 * 餐厅积分抽奖系统 - 交易市场配置
 *
 * @description 集中管理市场交易的业务规则，配置即文档
 * @version 1.0.1
 * @created 2025-12-05
 * @updated 2025-12-30 配置管理三层分离方案
 *
 * 核心原则：
 * 1. 实用主义：仅限制上架数量，不限制仓库持有
 * 2. 零技术债务：独立配置，不动现有代码
 * 3. 易于调整：修改配置即可调整业务规则
 * 4. 代码即文档：配置文件就是业务规则说明书
 *
 * @配置来源 max_active_listings 已迁移到 DB system_settings
 * @优先级 DB > Code（此处值仅作为兜底默认值）
 * @参考文档 docs/配置管理三层分离与校验统一方案.md
 */

module.exports = {
  // ====================================
  // 📦 上架限制配置
  // ====================================

  /**
   * 普通用户最多同时在售商品数量
   *
   * @description 限制用户同时上架的商品数量，防止刷屏和垄断
   * @业务规则
   * - 基于转转（30件）和梦幻西游（20件）的行业经验
   * - 18个用户规模，10件足够使用
   * - 预防刷屏，引导精选
   *
   * @配置来源 已迁移到 DB system_settings（marketplace/max_active_listings）
   * @优先级 DB > Code（此处值仅作为兜底默认值）
   * @业务决策 2025-12-30：max_active_listings 保留在 DB，运营可调（范围 1-50）
   *
   * @调整建议
   * - 通过管理后台调整 DB 配置即可生效
   * - 无需修改代码或重新部署
   */
  max_active_listings: 10, // 🔴 兜底值：实际值从 DB marketplace/max_active_listings 读取

  // ====================================
  // 💰 价格验证配置
  // ====================================

  /**
   * 价格合理性验证配置
   *
   * @description 防止恶意定价或洗积分
   * @业务规则
   * - 最低价：物品价值的50%（防止恶意低价转移积分）
   * - 最高价：物品价值的200%（防止欺诈高价）
   * - 基于ItemInstance.meta.value或MarketListing.price_amount字段验证
   *
   * @示例
   * - 物品价值500积分
   * - 允许售价范围：250-1000积分
   */
  price_validation: {
    min_ratio: 0.5, // 最低50%原值
    max_ratio: 2.0, // 最高200%原值
    enabled: true // 是否启用价格验证
  },

  // ====================================
  // 👑 VIP特权配置（当前不启用）
  // ====================================

  /**
   * VIP特权配置（可选，当前不启用）
   *
   * @description 未来如需VIP特权，可启用此配置
   * @业务规则 当前不建议启用，避免过度设计
   * @调整建议 等用户规模达到1000+再考虑VIP功能
   */
  vip_features: {
    enabled: false, // 是否启用VIP特权
    vip_listings: 20, // VIP用户上架限制
    svip_listings: 50 // SVIP用户上架限制
  }
}
