{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Admin Dashboard API Contract",
  "description": "管理员仪表板API契约定义 - 验证后端返回数据格式",
  "version": "4.0.0",
  "createdAt": "2025-12-23",
  "endpoint": {
    "method": "GET",
    "path": "/api/v4/admin/system/dashboard",
    "auth": "Bearer Token (Admin Required)"
  },
  "responseSchema": {
    "type": "object",
    "required": ["success", "code", "message", "data", "timestamp"],
    "properties": {
      "success": {
        "type": "boolean",
        "description": "请求是否成功",
        "const": true
      },
      "code": {
        "type": "string",
        "description": "业务状态码"
      },
      "message": {
        "type": "string",
        "description": "用户友好的响应消息"
      },
      "data": {
        "type": "object",
        "required": ["overview", "today", "customer_service"],
        "description": "仪表板数据主体",
        "properties": {
          "overview": {
            "type": "object",
            "required": ["total_users", "active_users", "total_lotteries", "win_rate"],
            "description": "概览统计数据",
            "properties": {
              "total_users": {
                "type": "integer",
                "minimum": 0,
                "description": "总用户数"
              },
              "active_users": {
                "type": "integer",
                "minimum": 0,
                "description": "活跃用户数"
              },
              "total_lotteries": {
                "type": "integer",
                "minimum": 0,
                "description": "总抽奖次数"
              },
              "win_rate": {
                "type": "string",
                "pattern": "^\\d+\\.\\d{2}$",
                "description": "总中奖率（百分比格式，如：12.34）"
              }
            }
          },
          "today": {
            "type": "object",
            "required": ["new_users", "lottery_draws", "wins", "win_rate", "points_consumed"],
            "description": "今日统计数据",
            "properties": {
              "new_users": {
                "type": "integer",
                "minimum": 0,
                "description": "今日新增用户数"
              },
              "lottery_draws": {
                "type": "integer",
                "minimum": 0,
                "description": "今日抽奖次数"
              },
              "wins": {
                "type": "integer",
                "minimum": 0,
                "description": "今日中奖次数"
              },
              "win_rate": {
                "type": "string",
                "pattern": "^\\d+\\.\\d{2}$",
                "description": "今日中奖率（百分比格式）"
              },
              "points_consumed": {
                "type": "number",
                "minimum": 0,
                "description": "今日积分消耗总数"
              }
            }
          },
          "customer_service": {
            "type": "object",
            "required": ["today_sessions", "today_messages"],
            "description": "客服统计数据",
            "properties": {
              "today_sessions": {
                "type": "integer",
                "minimum": 0,
                "description": "今日客服会话数"
              },
              "today_messages": {
                "type": "integer",
                "minimum": 0,
                "description": "今日消息数"
              }
            }
          },
          "engine_stats": {
            "type": "object",
            "description": "抽奖引擎性能统计（可选）"
          },
          "server_time": {
            "type": "string",
            "description": "服务器时间（北京时间格式）"
          }
        }
      },
      "timestamp": {
        "type": "string",
        "description": "响应时间戳（ISO 8601格式）"
      },
      "version": {
        "type": "string",
        "description": "API版本号"
      },
      "request_id": {
        "type": "string",
        "description": "请求追踪ID"
      }
    }
  }
}
