# æŠ€æœ¯å€ºåŠ¡ï¼šgetDrawPricing å®šä»·é€»è¾‘è¿ç§»æ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼š2.3.0  
> **åˆ›å»ºæ—¥æœŸ**ï¼š2026-01-20  
> **æ›´æ–°æ—¥æœŸ**ï¼š2026-01-21  
> **é—®é¢˜çŠ¶æ€**ï¼šå¾…ä¿®å¤ â†’ å‡†å¤‡å®æ–½  
> **ä¼˜å…ˆçº§**ï¼šP1ï¼ˆå½±å“ç§¯åˆ†æ‰£é™¤å‡†ç¡®æ€§ï¼‰  
> **å†³ç­–æ–¹æ¡ˆ**ï¼šâœ… æ–¹æ¡ˆCï¼ˆæŠ½å–å…¬å…±å®šä»·æœåŠ¡ï¼‰  
> **å®æ–½æ—¶æœº**ï¼šâœ… ç«‹å³å®æ–½ï¼ˆæ‰€æœ‰å†³ç­–å·²æ‹æ¿ï¼‰

---

## 1. é—®é¢˜èƒŒæ™¯

### 1.1 é—®é¢˜å‘ç°

åœ¨æŠ€æœ¯å€ºåŠ¡å½»åº•æ¸…ç†ï¼ˆ2026-01-20ï¼‰è¿‡ç¨‹ä¸­å‘ç°ï¼š`UnifiedLotteryEngine.getDrawPricing()` æ–¹æ³•ä¸ `PricingStage._getDrawPricing()` æ–¹æ³•å­˜åœ¨**æ•°æ®æºä¸ä¸€è‡´**é—®é¢˜ã€‚

### 1.2 ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | æ–¹æ³• | è¡Œå· | è¯´æ˜ |
|------|------|------|------|
| `services/UnifiedLotteryEngine/UnifiedLotteryEngine.js` | `getDrawPricing()` | 954-1029 | æ—§å®šä»·æ–¹æ³•ï¼ˆè¢« execute_draw è°ƒç”¨ï¼‰ |
| `services/UnifiedLotteryEngine/UnifiedLotteryEngine.js` | `execute_draw()` | 1052-1450 | æŠ½å¥–æ‰§è¡Œå…¥å£ï¼ˆè°ƒç”¨ getDrawPricingï¼‰ |
| `services/UnifiedLotteryEngine/pipeline/stages/PricingStage.js` | `_getDrawPricing()` | 185-280 | æ–°å®šä»·æ–¹æ³•ï¼ˆPipeline ä¸­ä½¿ç”¨ï¼‰ |

---

## 2. é—®é¢˜åˆ†æ

### 2.1 ä¸¤å¥—å®šä»·é€»è¾‘å¯¹æ¯”

| ç»´åº¦ | `getDrawPricing`ï¼ˆæ—§ï¼‰ | `PricingStage._getDrawPricing`ï¼ˆæ–°ï¼‰ |
|------|------------------------|-------------------------------------|
| **è°ƒç”¨ä½ç½®** | `execute_draw` ç¬¬1146è¡Œ | Pipeline ä¸­ `PricingStage.execute()` |
| **æ•°æ®æº** | `prize_distribution_config.draw_pricing` (JSONå­—æ®µ) | `lottery_campaign_pricing_config` è¡¨ |
| **å½“å‰çŠ¶æ€** | âš ï¸ JSONå­—æ®µå·²è¢«æ¸…ç©ºï¼ˆè¿ç§»æ¸…ç†ï¼‰ | âœ… æ–°è¡¨æœ‰é…ç½® |
| **æŠ˜æ‰£é€»è¾‘** | ç¡¬ç¼–ç é»˜è®¤å€¼ï¼ˆç¬¬998-1003è¡Œï¼‰ | ä»é…ç½®è¡¨åŠ¨æ€è¯»å– |
| **æ ‡è®°** | `@deprecated`ï¼ˆç¬¬999è¡Œæ³¨é‡Šï¼‰ | å½“å‰æ ‡å‡† |

### 2.2 ä»£ç æµç¨‹åˆ†æ

**å½“å‰ `execute_draw` è°ƒç”¨é“¾ï¼š**

```
routes/v4/lottery/draw.js
  â””â”€â”€ lottery_engine.execute_draw(user_id, campaign_id, draw_count)
        â”‚
        â”œâ”€â”€ [ç¬¬1146è¡Œ] this.getDrawPricing(draw_count, campaign)
        â”‚     â””â”€â”€ ä» prize_distribution_config.draw_pricing è¯»å–ï¼ˆå·²æ¸…ç©ºï¼‰
        â”‚     â””â”€â”€ ä½¿ç”¨ç¡¬ç¼–ç é»˜è®¤æŠ˜æ‰£ï¼š{ 1: 1.0, 3: 1.0, 5: 1.0, 10: 0.9 }
        â”‚
        â”œâ”€â”€ [ç¬¬1245è¡Œ] AssetService.changeBalance() æ‰£ç§¯åˆ†
        â”‚     â””â”€â”€ ä½¿ç”¨ pricing.total_costï¼ˆåŸºäºç¡¬ç¼–ç æŠ˜æ‰£è®¡ç®—ï¼‰
        â”‚
        â””â”€â”€ [ç¬¬1350è¡Œ] this.executeLottery(context, transaction)
              â””â”€â”€ DrawOrchestrator.execute()
                    â””â”€â”€ PricingStage.execute()
                          â””â”€â”€ _getDrawPricing() ä»æ–°è¡¨è¯»å–ï¼ˆä½†æ­¤æ—¶ç§¯åˆ†å·²æ‰£ï¼‰
```

### 2.3 é—®é¢˜æ ¹æº

```javascript
// UnifiedLotteryEngine.js ç¬¬954-956è¡Œ
async getDrawPricing(draw_count, campaign) {
  // ğŸ”´ é—®é¢˜ï¼šä»ç„¶ä»æ—§çš„ JSON å­—æ®µè¯»å–
  const pricingConfig = campaign.prize_distribution_config?.draw_pricing || {}
  // ç”±äºæŠ€æœ¯å€ºåŠ¡æ¸…ç†å·²æ¸…ç©ºæ­¤å­—æ®µï¼ŒpricingConfig = {}
  // ...
}

// ç¬¬998-1003è¡Œ - ç¡¬ç¼–ç é»˜è®¤æŠ˜æ‰£
const defaultDiscounts = {
  1: { discount: 1.0, label: 'å•æŠ½' },
  3: { discount: 1.0, label: '3è¿æŠ½' },
  5: { discount: 1.0, label: '5è¿æŠ½' },
  10: { discount: 0.9, label: '10è¿æŠ½(ä¹æŠ˜)' }  // ğŸ”´ ç¡¬ç¼–ç æŠ˜æ‰£
}
```

### 2.4 å½±å“èŒƒå›´

| å½±å“é¡¹ | è¯´æ˜ |
|--------|------|
| **API æ¥å£** | `/api/v4/lottery/draw` |
| **ä¸šåŠ¡å½±å“** | ç§¯åˆ†æ‰£é™¤ä½¿ç”¨ç¡¬ç¼–ç æŠ˜æ‰£ï¼Œè€Œé `lottery_campaign_pricing_config` è¡¨é…ç½®çš„æŠ˜æ‰£ |
| **æ•°æ®ä¸€è‡´æ€§** | `execute_draw` æ‰£ç§¯åˆ†ä¸ `PricingStage` è®¡ç®—çš„å®šä»·å¯èƒ½ä¸ä¸€è‡´ |
| **è¿è¥é…ç½®** | è¿è¥åœ¨åå°é…ç½®çš„æŠ˜æ‰£è§„åˆ™ä¸ç”Ÿæ•ˆ |

---

## 3. è§£å†³æ–¹æ¡ˆ

### 3.1 æ–¹æ¡ˆAï¼šé‡æ„ getDrawPricing ä½¿ç”¨æ–°è¡¨ âŒ æœªé€‰

**æ”¹åŠ¨èŒƒå›´**ï¼šä»…ä¿®æ”¹ `getDrawPricing` æ–¹æ³•

**å®ç°æ€è·¯**ï¼š
```javascript
async getDrawPricing(draw_count, campaign) {
  // æ­¥éª¤1ï¼šä» lottery_campaign_pricing_config è¡¨è·å–é…ç½®
  const LotteryCampaignPricingConfig = require('../../models').LotteryCampaignPricingConfig
  const pricingConfig = await LotteryCampaignPricingConfig.getActivePricingConfig(
    campaign.campaign_id
  )
  
  // æ­¥éª¤2ï¼šä»æ•°æ®åº“è¯»å–å•æŠ½ç§¯åˆ†æ¶ˆè€—é…ç½®
  const AdminSystemService = require('../AdminSystemService')
  const defaultPerDraw = await AdminSystemService.getSettingValue(
    'points', 'lottery_cost_points', null, { strict: true }
  )
  
  // æ­¥éª¤3ï¼šè®¡ç®—å®šä»·ï¼ˆä¸ PricingStage é€»è¾‘ä¸€è‡´ï¼‰
  const drawConfig = pricingConfig?.pricing_config?.[draw_count] || {}
  const discount = drawConfig.discount || 1.0
  
  return {
    total_cost: Math.floor(draw_count * defaultPerDraw * discount),
    per_draw: Math.floor(defaultPerDraw * discount),
    discount: discount,
    count: draw_count,
    label: drawConfig.label || `${draw_count}è¿æŠ½`
  }
}
```

**ä¼˜ç‚¹**ï¼š
- æ”¹åŠ¨èŒƒå›´æœ€å°
- ä¿æŒ `execute_draw` ç»“æ„ä¸å˜
- å•ä¸€æ•°æ®æºï¼Œé…ç½®ä¸€è‡´

**ç¼ºç‚¹**ï¼š
- `getDrawPricing` ä¸ `PricingStage._getDrawPricing` å­˜åœ¨ä»£ç é‡å¤

---

### 3.2 æ–¹æ¡ˆBï¼šåˆ é™¤ getDrawPricingï¼Œç›´æ¥è°ƒç”¨ PricingStage âŒ æœªé€‰

**æ”¹åŠ¨èŒƒå›´**ï¼šä¿®æ”¹ `execute_draw` æ–¹æ³•ç»“æ„

**å®ç°æ€è·¯**ï¼š
```javascript
async execute_draw(user_id, campaign_id, draw_count, options) {
  // ...
  
  // å®ä¾‹åŒ– PricingStage è·å–å®šä»·
  const PricingStage = require('./pipeline/stages/PricingStage')
  const pricingStage = new PricingStage()
  const pricing = await pricingStage._getDrawPricing(draw_count, campaign)
  
  // ä½¿ç”¨ pricing.total_cost æ‰£ç§¯åˆ†
  // ...
}
```

**ä¼˜ç‚¹**ï¼š
- å½»åº•æ¶ˆé™¤é‡å¤ä»£ç 
- å®šä»·é€»è¾‘ç»Ÿä¸€åœ¨ PricingStage

**ç¼ºç‚¹**ï¼š
- éœ€è¦å°† `_getDrawPricing` æ”¹ä¸ºå…¬å¼€æ–¹æ³•
- `execute_draw` å¯¹ Pipeline ç»„ä»¶äº§ç”Ÿç›´æ¥ä¾èµ–

---

### 3.3 æ–¹æ¡ˆCï¼šæŠ½å–å…¬å…±å®šä»·æœåŠ¡ âœ… å·²é€‰

**æ”¹åŠ¨èŒƒå›´**ï¼šæ–°å»ºæœåŠ¡ç±»ï¼Œä¿®æ”¹ä¸¤å¤„è°ƒç”¨

**æ¶æ„è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ–¹æ¡ˆC æ¶æ„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚   â”‚  LotteryPricingService â”‚  â—€â”€â”€ ä¸“é—¨è´Ÿè´£å®šä»·è®¡ç®—               â”‚
â”‚   â”‚  â€¢ getDrawPricing()    â”‚                                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚               â”‚                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚       â–¼               â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚execute_ â”‚    â”‚ PricingStageâ”‚  â—€â”€â”€ ä¸“é—¨è´Ÿè´£æµç¨‹ç¼–æ’            â”‚
â”‚  â”‚draw()   â”‚    â”‚ .execute()  â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–‡ä»¶ç»“æ„**ï¼š
```
services/lottery/
â”œâ”€â”€ LotteryQuotaService.js     âœ… å·²æœ‰ï¼ˆé…é¢æœåŠ¡ï¼‰
â”œâ”€â”€ LotteryPricingService.js   âœ… æ–°å¢ï¼ˆå®šä»·æœåŠ¡ï¼‰â† æ–¹æ¡ˆC
â””â”€â”€ ...
```

**å®ç°æ€è·¯**ï¼š
```javascript
// services/lottery/LotteryPricingService.js
class LotteryPricingService {
  /**
   * è·å–æŠ½å¥–å®šä»·é…ç½®
   * 
   * @param {number} draw_count - æŠ½å¥–æ¬¡æ•°ï¼ˆ1/3/5/10ï¼‰
   * @param {number} campaign_id - æ´»åŠ¨ID
   * @returns {Promise<Object>} å®šä»·é…ç½®
   */
  static async getDrawPricing(draw_count, campaign_id) {
    // æ­¥éª¤1ï¼šä» lottery_campaign_pricing_config è¡¨è·å–é…ç½®
    const pricingConfig = await LotteryCampaignPricingConfig.getActivePricingConfig(campaign_id)
    
    // æ­¥éª¤2ï¼šä»æ•°æ®åº“è¯»å–å•æŠ½ç§¯åˆ†æ¶ˆè€—é…ç½®
    const defaultPerDraw = await AdminSystemService.getSettingValue(
      'points', 'lottery_cost_points', null, { strict: true }
    )
    
    // æ­¥éª¤3ï¼šè®¡ç®—å®šä»·
    const drawConfig = pricingConfig?.pricing_config?.[draw_count] || {}
    const discount = drawConfig.discount || 1.0
    
    return {
      total_cost: Math.floor(draw_count * defaultPerDraw * discount),
      per_draw: Math.floor(defaultPerDraw * discount),
      discount: discount,
      count: draw_count,
      label: drawConfig.label || `${draw_count}è¿æŠ½`,
      source: 'pricing_config_table'
    }
  }
}
```

**ä¼˜ç‚¹**ï¼š
- èŒè´£å•ä¸€ï¼Œå®šä»·é€»è¾‘ç‹¬ç«‹æˆæœåŠ¡
- ç¬¦åˆ DRY åŸåˆ™ï¼Œåªç»´æŠ¤ä¸€å¤„
- è¯­ä¹‰æ¸…æ™°ï¼Œè°ƒç”¨æ–¹å¼ç›´è§‚
- ç¬¦åˆé¡¹ç›®ç°æœ‰æ¶æ„é£æ ¼
- å¯æµ‹è¯•æ€§å¥½ï¼Œç‹¬ç«‹æœåŠ¡æ˜“äºå•å…ƒæµ‹è¯•
- å¯æ‰©å±•æ€§å¼ºï¼Œæœªæ¥å®šä»·è§„åˆ™å˜å¤æ‚æ—¶æ˜“äºæ‰©å±•

**ç¼ºç‚¹**ï¼š
- æ–°å»º 1 ä¸ªæ–‡ä»¶
- éœ€è¦åŒæ—¶ä¿®æ”¹ 2 å¤„è°ƒç”¨ï¼ˆå¯æ¥å—ï¼‰

---

## 4. æœ€ç»ˆå†³ç­–

**å·²æ‹æ¿æ–¹æ¡ˆ**ï¼š**æ–¹æ¡ˆCï¼ˆæŠ½å–å…¬å…±å®šä»·æœåŠ¡ï¼‰** âœ…

**å†³ç­–æ—¥æœŸ**ï¼š2026-01-20

**å†³ç­–ç†ç”±**ï¼š

1. **ç¬¦åˆé¡¹ç›®ç°æœ‰æ¶æ„é£æ ¼**ï¼šé¡¹ç›®å·²æœ‰ `services/lottery/LotteryQuotaService.js`ï¼ˆé…é¢æœåŠ¡ï¼‰ï¼Œæ–°å¢ `LotteryPricingService.js`ï¼ˆå®šä»·æœåŠ¡ï¼‰æ˜¯é¡ºç†æˆç« çš„
2. **èŒè´£å•ä¸€åŸåˆ™**ï¼š
   - `LotteryPricingService`ï¼šä¸“é—¨è´Ÿè´£å®šä»·è®¡ç®—ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
   - `PricingStage`ï¼šä¸“é—¨è´Ÿè´£æ‰§è¡Œå®šä»·é˜¶æ®µï¼ˆæµç¨‹ç¼–æ’ï¼‰
   - èŒè´£åˆ†ç¦»æ›´æ¸…æ™°
3. **è¯­ä¹‰æ¸…æ™°**ï¼š`LotteryPricingService.getDrawPricing()` æ¯” `PricingStage.getDrawPricing()` æ›´åˆç†
4. **DRY åŸåˆ™**ï¼šå®šä»·é€»è¾‘åªåœ¨ä¸€å¤„ç»´æŠ¤ï¼Œé¿å…ä»£ç é‡å¤
5. **å¯æµ‹è¯•æ€§**ï¼šç‹¬ç«‹æœåŠ¡æ›´å®¹æ˜“ç¼–å†™å•å…ƒæµ‹è¯•
6. **å¯æ‰©å±•æ€§**ï¼šæœªæ¥å®šä»·è§„åˆ™å˜å¤æ‚æ—¶ï¼ˆå¦‚ä¼šå‘˜æŠ˜æ‰£ã€é™æ—¶ä¼˜æƒ ï¼‰ï¼Œç‹¬ç«‹æœåŠ¡æ›´æ˜“æ‰©å±•

**æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“**ï¼š

| æ–¹æ¡ˆ | DRY | èŒè´£æ¸…æ™° | è¯­ä¹‰æ¸…æ™° | ç¬¦åˆé¡¹ç›®é£æ ¼ | å†³ç­– |
|------|-----|---------|---------|-------------|------|
| Aï¼ˆä¿®æ”¹æ–¹æ³•ï¼‰ | âŒ | âŒ | âœ… | âœ… | âŒ ä¸é€‰ |
| Bï¼ˆè°ƒç”¨ Stageï¼‰ | âœ… | âš ï¸ | âš ï¸ | âš ï¸ | âŒ ä¸é€‰ |
| Cï¼ˆç‹¬ç«‹æœåŠ¡ï¼‰ | âœ… | âœ… | âœ… | âœ… | âœ… **å·²é€‰** |

---

## 5. å®ç°ç»†èŠ‚å†³ç­–

> ä»¥ä¸‹å†³ç­–åŸºäºé¡¹ç›®å®é™…æ•°æ®åº“ç»“æ„å’Œä»£ç çŠ¶æ€ï¼ˆ2026-01-20 æŸ¥éªŒï¼‰

### 5.1 é—®é¢˜2ï¸âƒ£ï¼šæŠ˜æ‰£é…ç½®çš„ key æ ¼å¼

**ç»“è®ºï¼šæ— éœ€é€‰æ‹©â€”â€”é¡¹ç›®å·²é‡‡ç”¨ã€Œæ•°ç»„ + count å­—æ®µã€æ ¼å¼**

| é€‰é¡¹ | æ ¼å¼ | çŠ¶æ€ |
|-----|------|-----|
| A. æ•°å­— key | `{ 1: {...}, 10: {...} }` | âŒ ä¸é€‚ç”¨ |
| B. å­—ç¬¦ä¸² key | `{ "single": {...}, "ten": {...} }` | âŒ ä¸é€‚ç”¨ |
| **C. æ•°ç»„ + count å­—æ®µ** | `[{ count: 1, ... }, { count: 10, ... }]` | âœ… **å·²é‡‡ç”¨** |

**æ•°æ®åº“å®é™…å­˜å‚¨æ ¼å¼**ï¼ˆæŸ¥è¯¢ `lottery_campaign_pricing_config.pricing_config`ï¼‰ï¼š
```json
{
  "draw_buttons": [
    { "count": 1, "label": "å•æŠ½", "discount": 1.0, "enabled": true, "sort_order": 1 },
    { "count": 3, "label": "3è¿æŠ½", "discount": 1.0, "enabled": true, "sort_order": 3 },
    { "count": 10, "label": "10è¿æŠ½(ä¹æŠ˜)", "discount": 0.9, "enabled": true, "sort_order": 10 }
  ]
}
```

**PricingStage ç°æœ‰ä»£ç **ï¼ˆç¬¬364-366è¡Œï¼‰å·²æ­£ç¡®å¤„ç†æ­¤æ ¼å¼ï¼š
```javascript
const draw_buttons = draw_pricing_config.draw_buttons || []
return draw_buttons.filter(btn => btn.enabled !== false).map(btn => btn.count)
```

**æ•°ç»„æ ¼å¼çš„ä¼˜åŠ¿**ï¼š
- å¯æºå¸¦æ›´å¤šå…ƒæ•°æ®ï¼ˆ`label`ã€`enabled`ã€`sort_order`ï¼‰
- æ”¯æŒåŠ¨æ€å¯ç”¨/ç¦ç”¨æŸä¸ªæ¡£ä½
- å‰ç«¯å±•ç¤ºå¯ç›´æ¥ä½¿ç”¨ `sort_order` æ’åº
- ä»£ç æŸ¥æ‰¾æ–¹å¼æ¸…æ™°ï¼š`buttons.find(b => b.count === draw_count)`

---

### 5.2 é—®é¢˜3ï¸âƒ£ï¼šæ˜¯å¦éœ€è¦ç¼“å­˜

**å·²é€‰æ–¹æ¡ˆï¼šB. çŸ­ç¼“å­˜ï¼ˆ60ç§’ï¼‰+ å†™åç²¾å‡†å¤±æ•ˆ** âœ…

| æ–¹æ¡ˆ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| A. æ¯æ¬¡æŸ¥åº“ | å®æ—¶è¯»å–æœ€æ–°é…ç½® | âŒ ä¸é€‰ |
| **B. çŸ­ç¼“å­˜ï¼ˆ60sï¼‰** | ç¼“å­˜ 60 ç§’ï¼Œå†™åä¸»åŠ¨å¤±æ•ˆ | âœ… **å·²é€‰** |
| C. é•¿ç¼“å­˜+æ‰‹åŠ¨åˆ·æ–° | ç¼“å­˜ 1 å°æ—¶ï¼Œåå°æä¾›åˆ·æ–°æŒ‰é’® | âŒ ä¸é€‰ |

**é¡¹ç›®ç°æœ‰ç¼“å­˜åŸºç¡€è®¾æ–½**ï¼š
- Redis âœ… è¿è¡Œä¸­ï¼ˆ`PONG` å“åº”æ­£å¸¸ï¼‰
- `BusinessCacheHelper` âœ… å·²å®ç°ç»Ÿä¸€ç¼“å­˜ç®¡ç†å™¨
- æ´»åŠ¨é…ç½®ç¼“å­˜ TTLï¼š`DEFAULT_TTL.LOTTERY_CONFIG = 60` ç§’

**å†³ç­–ç†ç”±**ï¼š

| ç†ç”± | è¯´æ˜ |
|------|------|
| **1. ä¸ç°æœ‰ç­–ç•¥ä¸€è‡´** | é¡¹ç›®å·²å®šä¹‰ `DEFAULT_TTL.LOTTERY_CONFIG = 60`ï¼Œå®šä»·é…ç½®å±äºæ´»åŠ¨é…ç½® |
| **2. å¤ç”¨å·²æœ‰åŸºç¡€è®¾æ–½** | ç›´æ¥ä½¿ç”¨ `BusinessCacheHelper`ï¼Œæ— éœ€æ–°å»ºç¼“å­˜æ¨¡å— |
| **3. 60ç§’å»¶è¿Ÿå¯æ¥å—** | å®šä»·é…ç½®ä¸æ˜¯ç§’çº§æ•æ„Ÿæ•°æ®ï¼Œè¿è¥è°ƒä»·å 1 åˆ†é’Ÿå†…ç”Ÿæ•ˆè¶³å¤Ÿ |
| **4. ç²¾å‡†å¤±æ•ˆä¿åº•** | è¿è¥ä¿®æ”¹é…ç½®æ—¶ä¸»åŠ¨æ¸…ç¼“å­˜ï¼Œä¸ä¾èµ– TTL è¿‡æœŸ |

**ç¼“å­˜æ¶æ„**ï¼š
```
ç”¨æˆ·æŠ½å¥–è¯·æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LotteryPricingService   â”‚
â”‚  .getDrawPricing()      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ç¼“å­˜å‘½ä¸­     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BusinessCacheHelper     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ è¿”å›ç¼“å­˜å®šä»·é…ç½®   â”‚
â”‚  .getPricingConfig()    â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ ç¼“å­˜æœªå‘½ä¸­
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LotteryCampaign         â”‚
â”‚ PricingConfigService    â”‚ â”€â”€â–¶ æŸ¥ DB â”€â”€â–¶ å†™å…¥ç¼“å­˜ï¼ˆTTL=60sï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


è¿è¥åå°ä¿®æ”¹å®šä»·
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LotteryCampaign         â”‚
â”‚ PricingConfigService    â”‚
â”‚  .updateConfig()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BusinessCacheHelper     â”‚ â”€â”€â–¶ ä¸»åŠ¨æ¸…é™¤ç¼“å­˜ â”€â”€â–¶ ä¸‹æ¬¡æŸ¥è¯¢é‡æ–°åŠ è½½
â”‚  .invalidateConfig()    â”‚    ï¼ˆç²¾å‡†å¤±æ•ˆï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¼“å­˜ Key è®¾è®¡**ï¼ˆå¤ç”¨ç°æœ‰è§„èŒƒï¼‰ï¼š
```javascript
// éµå¾ª BusinessCacheHelper ç°æœ‰ Key è§„èŒƒ
const CACHE_KEY = `app:v4:${env}:api:lottery:pricing:${campaign_id}`
```

---

### 5.3 é—®é¢˜1ï¸âƒ£ï¼šé…ç½®ç¼ºå¤±æ—¶çš„å¤„ç†ç­–ç•¥

**å·²é€‰æ–¹æ¡ˆï¼šA. ä¸¥æ ¼æ¨¡å¼ï¼ˆæŠ¥é”™é˜»æ–­ï¼‰** âœ…

| æ–¹æ¡ˆ | è¡Œä¸º | çŠ¶æ€ |
|------|------|------|
| **A. ä¸¥æ ¼æ¨¡å¼** | æŠ¥é”™é˜»æ–­ï¼Œä¸å…è®¸æŠ½å¥– | âœ… **å·²é€‰** |
| B. å…œåº•æ¨¡å¼ | ä½¿ç”¨é»˜è®¤æŠ˜æ‰£ï¼ˆå…¨ä»·ï¼Œæ— æŠ˜æ‰£ï¼‰ | âŒ ä¸é€‰ |

**å†³ç­–ç†ç”±**ï¼š

| ç†ç”± | è¯´æ˜ |
|------|------|
| **1. ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶è¿è¥é…ç½®** | å®šä»·æ˜¯å…³é”®ä¸šåŠ¡æ•°æ®ï¼Œå¿…é¡»ç”±è¿è¥æ˜ç¡®é…ç½® |
| **2. é¿å…éšæ€§é”™è¯¯** | å…œåº•æ¨¡å¼å¯èƒ½å¯¼è‡´ç”¨æˆ·è¢«å¤šæ‰£ç§¯åˆ†å´æ— æ„ŸçŸ¥ |
| **3. å¿«é€Ÿå‘ç°é—®é¢˜** | ä¸¥æ ¼æ¨¡å¼èƒ½ç¬¬ä¸€æ—¶é—´æš´éœ²é…ç½®é—æ¼ |
| **4. è¿è¥å¯æ§** | è¿è¥å¿…é¡»ä¸ºæ¯ä¸ªæ´»åŠ¨é…ç½®å®šä»·ï¼Œä¸šåŠ¡è¡Œä¸ºå¯é¢„æœŸ |

**å®ç°é€»è¾‘**ï¼š
```javascript
async getDrawPricing(draw_count, campaign_id) {
  const pricingConfig = await LotteryCampaignPricingConfig.getActivePricingConfig(campaign_id)
  
  // ğŸ”´ ä¸¥æ ¼æ¨¡å¼ï¼šé…ç½®ç¼ºå¤±æ—¶æŠ¥é”™é˜»æ–­
  if (!pricingConfig) {
    throw new Error(`æ´»åŠ¨ ${campaign_id} å®šä»·é…ç½®ç¼ºå¤±ï¼Œè¯·è¿è¥é…ç½®åé‡è¯•`)
  }
  
  const button = pricingConfig.pricing_config?.draw_buttons?.find(
    b => b.count === draw_count && b.enabled !== false
  )
  
  // ğŸ”´ ä¸¥æ ¼æ¨¡å¼ï¼šæ¡£ä½æœªå¯ç”¨æ—¶æŠ¥é”™é˜»æ–­
  if (!button) {
    throw new Error(`æ´»åŠ¨ ${campaign_id} æœªå¯ç”¨ ${draw_count} è¿æŠ½æ¡£ä½`)
  }
  
  // ...è®¡ç®—å®šä»·
}
```

---

### 5.4 é—®é¢˜4ï¸âƒ£ï¼šé»˜è®¤å•æŠ½æˆæœ¬çš„è¯»å–æ–¹å¼

**å·²é€‰æ–¹æ¡ˆï¼šB. æ´»åŠ¨å¯è¦†ç›–ï¼ˆæ´»åŠ¨é…ç½® > å…¨å±€é…ç½®ï¼‰** âœ…

| æ–¹æ¡ˆ | æ¥æº | çŠ¶æ€ |
|------|------|------|
| A. ä»…å…¨å±€é…ç½® | `system_settings.lottery_cost_points` | âŒ ä¸é€‰ |
| **B. æ´»åŠ¨å¯è¦†ç›–** | æ´»åŠ¨é…ç½® > å…¨å±€é…ç½® | âœ… **å·²é€‰** |

**å†³ç­–ç†ç”±**ï¼š

| ç†ç”± | è¯´æ˜ |
|------|------|
| **1. ä¸šåŠ¡çµæ´»æ€§** | ä¸åŒæ´»åŠ¨å¯è®¾ä¸åŒæˆæœ¬ï¼ˆå¦‚ï¼šæ–°äººæ´»åŠ¨ 50 ç§¯åˆ†/æŠ½ï¼Œå¸¸è§„æ´»åŠ¨ 100 ç§¯åˆ†/æŠ½ï¼‰ |
| **2. è¿è¥å¯æ§** | è¿è¥å¯é’ˆå¯¹ç‰¹å®šæ´»åŠ¨è°ƒæ•´å®šä»·ç­–ç•¥ |
| **3. å‘åå…¼å®¹** | æ´»åŠ¨æœªé…ç½®æ—¶å›è½å…¨å±€é…ç½®ï¼Œä¸å½±å“ç°æœ‰æ´»åŠ¨ |

**é…ç½®ä¼˜å…ˆçº§**ï¼š
```
æ´»åŠ¨çº§é…ç½®ï¼ˆlottery_campaign_pricing_config.pricing_config.base_costï¼‰
    â†“ æœªé…ç½®æ—¶
å…¨å±€é…ç½®ï¼ˆsystem_settings.lottery_cost_pointsï¼‰
    â†“ æœªé…ç½®æ—¶
ğŸ”´ ä¸¥æ ¼æ¨¡å¼æŠ¥é”™ï¼ˆä¸ä½¿ç”¨ç¡¬ç¼–ç é»˜è®¤å€¼ï¼‰
```

**å®ç°é€»è¾‘**ï¼š
```javascript
async getDrawPricing(draw_count, campaign_id) {
  const pricingConfig = await LotteryCampaignPricingConfig.getActivePricingConfig(campaign_id)
  
  // æ­¥éª¤1ï¼šä¼˜å…ˆä»æ´»åŠ¨é…ç½®è¯»å–å•æŠ½æˆæœ¬
  let base_cost = pricingConfig?.pricing_config?.base_cost
  
  // æ­¥éª¤2ï¼šæ´»åŠ¨æœªé…ç½®æ—¶ï¼Œå›è½å…¨å±€é…ç½®
  if (!base_cost) {
    base_cost = await AdminSystemService.getSettingValue(
      'points', 'lottery_cost_points', null, { strict: true }  // strict: æœªé…ç½®æŠ¥é”™
    )
  }
  
  // æ­¥éª¤3ï¼šè®¡ç®—æ€»æˆæœ¬
  const discount = button.discount || 1.0
  const total_cost = Math.floor(draw_count * base_cost * discount)
  
  return {
    total_cost,
    base_cost,           // å•æŠ½æˆæœ¬ï¼ˆæ´»åŠ¨çº§æˆ–å…¨å±€ï¼‰
    discount,
    count: draw_count,
    cost_source: pricingConfig?.pricing_config?.base_cost ? 'campaign' : 'global'
  }
}
```

**æ•°æ®åº“å­—æ®µæ‰©å±•**ï¼ˆ`lottery_campaign_pricing_config.pricing_config`ï¼‰ï¼š
```json
{
  "base_cost": 80,  // æ´»åŠ¨çº§å•æŠ½æˆæœ¬ï¼ˆå¯é€‰ï¼Œä¸é…ç½®åˆ™ç”¨å…¨å±€ï¼‰
  "draw_buttons": [
    { "count": 1, "label": "å•æŠ½", "discount": 1.0, "enabled": true },
    { "count": 10, "label": "10è¿æŠ½(ä¹æŠ˜)", "discount": 0.9, "enabled": true }
  ]
}
```

---

### 5.5 é—®é¢˜5ï¸âƒ£ï¼šå®æ–½æ—¶æœºå’Œæ•°æ®ä¸€è‡´æ€§ä¿æŠ¤

**å·²é€‰æ–¹æ¡ˆï¼šA. ç«‹å³å®æ–½** âœ…

| æ–¹æ¡ˆ | è¡Œä¸º | çŠ¶æ€ |
|------|------|------|
| **A. ç«‹å³å®æ–½** | é©¬ä¸Šå¼€å‘ `LotteryPricingService`ï¼Œç»Ÿä¸€ä¸¤å¤„è°ƒç”¨ | âœ… **å·²é€‰** |
| B. é”å®šé…ç½® + å»¶è¿Ÿå®æ–½ | å…ˆé€šçŸ¥è¿è¥å†»ç»“æ–°è¡¨ä¿®æ”¹ï¼Œæ’æœŸåå†å®æ–½ | âŒ ä¸é€‰ |
| C. ç›‘æ§ + å¿«é€Ÿå“åº” | å…ˆéƒ¨ç½²ç›‘æ§è„šæœ¬æ£€æµ‹ä¸¤å¤„è®¡ç®—å·®å¼‚ï¼Œå‘ç°ä¸ä¸€è‡´å†ç´§æ€¥ä¿®å¤ | âŒ ä¸é€‰ |

**çœŸå®æ•°æ®åº“éªŒè¯ç»“æœ**ï¼ˆ2026-01-21 æŸ¥è¯¢ï¼‰ï¼š

| æ•°æ®é¡¹ | çŠ¶æ€ | å€¼ |
|--------|------|-----|
| `lottery_campaign_pricing_config` è¡¨ | âœ… æœ‰æ•°æ® | campaign_id=1 æœ‰ 4 ä¸ªç‰ˆæœ¬ï¼Œversion=3 ç”Ÿæ•ˆä¸­ |
| ç”Ÿæ•ˆé…ç½® draw_buttons | âœ… å·²é…ç½® | `[{count:1, discount:1}, {count:3, discount:1}, {count:5, discount:1}, {count:10, discount:0.9}]` |
| æ—§å­—æ®µ `prize_distribution_config.draw_pricing` | âœ… å·²æ¸…ç©º | NULL |
| å…¨å±€å•æŠ½æˆæœ¬ `lottery_cost_points` | âœ… å·²é…ç½® | 100 ç§¯åˆ† |

**å½“å‰ä¸¤å¥—é€»è¾‘è®¡ç®—ç»“æœå¯¹æ¯”**ï¼š

| æŠ½å¥–æ¬¡æ•° | getDrawPricingï¼ˆç¡¬ç¼–ç ï¼‰ | _getDrawPricingï¼ˆæ–°è¡¨ï¼‰ | ä¸€è‡´ï¼Ÿ |
|---------|-------------------------|------------------------|--------|
| 1 | 100Ã—1.0 = 100 | 100Ã—1 = 100 | âœ… |
| 3 | 300Ã—1.0 = 300 | 300Ã—1 = 300 | âœ… |
| 5 | 500Ã—1.0 = 500 | 500Ã—1 = 500 | âœ… |
| 10 | 1000Ã—0.9 = 900 | 1000Ã—0.9 = 900 | âœ… |

**å†³ç­–ç†ç”±**ï¼š

| ç†ç”± | è¯´æ˜ |
|------|------|
| **1. çª—å£æœŸ** | å½“å‰ä¸¤å¤„é€»è¾‘è®¡ç®—ç»“æœ**æ°å¥½ä¸€è‡´**ï¼ˆç¡¬ç¼–ç æŠ˜æ‰£ = æ–°è¡¨é…ç½®ï¼‰ï¼Œæ˜¯ä¿®å¤çš„æœ€ä½³çª—å£ |
| **2. æ½œåœ¨é£é™©** | ä¸€æ—¦è¿è¥ä¿®æ”¹æ–°è¡¨é…ç½®ï¼ˆå¦‚ 10è¿æ”¹ä¸º 0.85ï¼‰ï¼Œä¸¤å¤„å®šä»·ç«‹å³ä¸ä¸€è‡´ |
| **3. ç”¨æˆ·ä½“éªŒ** | å»¶è¿Ÿå®æ–½æœŸé—´ï¼Œè¿è¥æ— æ³•çµæ´»è°ƒæ•´å®šä»·ï¼Œä¸šåŠ¡å—é™ |
| **4. æŠ€æœ¯å€ºåŠ¡** | è¶Šæ—©ä¿®å¤ï¼Œä»£ç ç»´æŠ¤æˆæœ¬è¶Šä½ |

**é£é™©è¯„ä¼°**ï¼š

| é£é™©é¡¹ | ç­‰çº§ | ç¼“è§£æªæ–½ |
|--------|------|----------|
| ä¿®æ”¹ `execute_draw` æ ¸å¿ƒé€»è¾‘ | ä¸­ | å……åˆ†çš„å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯• |
| å›å½’æµ‹è¯•è¦†ç›–ä¸å…¨ | ä½ | ç°æœ‰æµ‹è¯•ç”¨ä¾‹ + æ–°å¢å®šä»·æµ‹è¯• |
| ä¸Šçº¿åå‘ç°é—®é¢˜ | ä½ | å¯å¿«é€Ÿå›æ»šï¼ˆæ”¹åŠ¨èŒƒå›´æ˜ç¡®ï¼‰ |

---

## 6. å®æ–½æ£€æŸ¥æ¸…å•ï¼ˆæ–¹æ¡ˆCï¼‰

### 6.1 ä¿®å¤å‰éªŒè¯
- [ ] ç¡®è®¤ `lottery_campaign_pricing_config` è¡¨æœ‰æ´»è·ƒé…ç½®
- [ ] ç¡®è®¤ `system_settings.lottery_cost_points` é…ç½®å­˜åœ¨
- [ ] å¤‡ä»½å½“å‰ `getDrawPricing` æ–¹æ³•ä»£ç 
- [ ] ç¡®è®¤ `services/lottery/` ç›®å½•ç»“æ„

### 6.2 æ–°å»ºå®šä»·æœåŠ¡
- [ ] æ–°å»º `services/lottery/LotteryPricingService.js`
- [ ] å®ç° `getDrawPricing(draw_count, campaign_id)` æ–¹æ³•
- [ ] ä» `lottery_campaign_pricing_config` è¡¨è¯»å–é…ç½®
- [ ] ä» `system_settings.lottery_cost_points` è¯»å–å•æŠ½æˆæœ¬
- [ ] æ·»åŠ å®Œæ•´çš„ JSDoc æ³¨é‡Š
- [ ] åœ¨ `services/index.js` æ³¨å†ŒæœåŠ¡

### 6.3 ä¿®æ”¹è°ƒç”¨æ–¹
- [ ] `UnifiedLotteryEngine.execute_draw()`ï¼šè°ƒç”¨ `LotteryPricingService.getDrawPricing()`
- [ ] `PricingStage.execute()`ï¼šè°ƒç”¨ `LotteryPricingService.getDrawPricing()`
- [ ] åˆ é™¤ `UnifiedLotteryEngine.getDrawPricing()` æ—§æ–¹æ³•
- [ ] åˆ é™¤ `PricingStage._getDrawPricing()` ç§æœ‰æ–¹æ³•ï¼ˆé€»è¾‘å·²è¿ç§»åˆ°æœåŠ¡ï¼‰

### 6.4 å®ç°ç¼“å­˜åŠŸèƒ½
- [ ] åœ¨ `BusinessCacheHelper` æ·»åŠ å®šä»·é…ç½®ç¼“å­˜æ–¹æ³•
  - [ ] `getPricingConfig(campaign_id)` è¯»å–ç¼“å­˜
  - [ ] `setPricingConfig(campaign_id, config)` å†™å…¥ç¼“å­˜ï¼ˆTTL=60sï¼‰
  - [ ] `invalidatePricingConfig(campaign_id)` æ¸…é™¤ç¼“å­˜
- [ ] ç¼“å­˜ Key æ ¼å¼ï¼š`app:v4:${env}:api:lottery:pricing:${campaign_id}`
- [ ] åœ¨ `LotteryCampaignPricingConfigService.updateConfig()` å†™åè°ƒç”¨å¤±æ•ˆ

### 6.5 ä¿®å¤åéªŒè¯
- [ ] å•å…ƒæµ‹è¯•ï¼š`LotteryPricingService.getDrawPricing()` å®šä»·è®¡ç®—æ­£ç¡®æ€§
- [ ] é›†æˆæµ‹è¯•ï¼š`/api/v4/lottery/draw` æ¥å£ç§¯åˆ†æ‰£é™¤æ­£ç¡®
- [ ] ä¸€è‡´æ€§æµ‹è¯•ï¼š`execute_draw` ä¸ `PricingStage` ä½¿ç”¨åŒä¸€æœåŠ¡ï¼Œå®šä»·å¿…ç„¶ä¸€è‡´
- [ ] æ—¥å¿—æ£€æŸ¥ï¼šç¡®è®¤å®šä»·æ¥æºä¸º `pricing_config_table`
- [ ] è¿è¥éªŒè¯ï¼šåå°ä¿®æ”¹æŠ˜æ‰£é…ç½®åï¼ŒæŠ½å¥–ç§¯åˆ†æ‰£é™¤ç«‹å³ç”Ÿæ•ˆ

---

## 

## 8. å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|----------|
| 1.0.0 | 2026-01-20 | - | åˆå§‹ç‰ˆæœ¬ï¼Œé—®é¢˜å‘ç°å’Œæ–¹æ¡ˆè®¾è®¡ |
| 2.0.0 | 2026-01-20 | - | **å†³ç­–æ‹æ¿**ï¼šé€‰æ‹©æ–¹æ¡ˆCï¼ˆæŠ½å–å…¬å…±å®šä»·æœåŠ¡ï¼‰ï¼Œæ›´æ–°å®æ–½æ£€æŸ¥æ¸…å• |
| 2.1.0 | 2026-01-21 | - | æ–°å¢å®ç°ç»†èŠ‚å†³ç­–ï¼šé—®é¢˜2ï¼ˆæ•°ç»„æ ¼å¼å·²é‡‡ç”¨ï¼‰ã€é—®é¢˜3ï¼ˆçŸ­ç¼“å­˜60s + å†™åå¤±æ•ˆï¼‰ |
| 2.2.0 | 2026-01-21 | - | è¡¥å……å†³ç­–ï¼šé—®é¢˜1ï¼ˆA.ä¸¥æ ¼æ¨¡å¼æŠ¥é”™é˜»æ–­ï¼‰ã€é—®é¢˜4ï¼ˆB.æ´»åŠ¨å¯è¦†ç›–å…¨å±€é…ç½®ï¼‰ |
| 2.3.0 | 2026-01-21 | - | **æ‰€æœ‰å†³ç­–å·²æ‹æ¿**ï¼šé—®é¢˜5ï¼ˆA.ç«‹å³å®æ–½ï¼‰ï¼Œæ–°å¢çœŸå®æ•°æ®åº“éªŒè¯ç»“æœï¼ŒçŠ¶æ€æ›´æ–°ä¸ºã€Œå‡†å¤‡å®æ–½ã€ |

