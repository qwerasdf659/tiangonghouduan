# Web ç«¯ç®¡ç†åå°å‰ç«¯æ¶æ„æ–¹æ¡ˆ - æŠ€æœ¯å†³ç­–æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**: 3.0.0  
> **åˆ›å»ºæ—¥æœŸ**: 2026-01-23  
> **æ›´æ–°æ—¥æœŸ**: 2026-01-23  
> **é˜¶æ®µå››çŠ¶æ€**: âœ… EJS æ¨¡æ¿è¿ç§»å·²å®Œæˆ  
> **ç›®å½•æ¶æ„**: æ–¹æ¡ˆ C-Liteï¼ˆå‰ç«¯ç»Ÿä¸€ç›®å½•ï¼‰  
> **å†³ç­–äºº**: é¡¹ç›®è´Ÿè´£äºº  
> **å†³ç­–çŠ¶æ€**: âœ… å·²æ‹æ¿ç¡®è®¤
> **æ„å»ºå·¥å…·**: Vite  
> **Mixin æ–¹æ¡ˆ**: Vite æ¨¡å—æ‰“åŒ…  
> **CSS æ¡†æ¶**: Tailwind CSSï¼ˆåŸ Bootstrapï¼Œå·²æ›´æ–°ï¼‰
> **Modal æ–¹æ¡ˆ**: x-ref + Mixin å°è£…ï¼ˆç»Ÿä¸€è§„èŒƒï¼‰
> **æ¨¡æ¿æ–¹æ¡ˆ**: Vite æ„å»ºæ—¶æ¨¡æ¿ï¼ˆvite-plugin-ejsï¼‰

---

## ğŸ“‹ å†³ç­–æ€»è§ˆ

| å†³ç­–é¡¹ | é€‰æ‹© | çŠ¶æ€ |
|--------|------|------|
| 1ï¸âƒ£ å‰ç«¯è„šæœ¬æ¶æ„ | **B - å¼•å…¥ Vite æ„å»ºå·¥å…·** | âœ… å·²ç¡®è®¤ |
| 2ï¸âƒ£ HTML æ¨¡æ¿ç»Ÿä¸€åŒ– | **B - Vite æ„å»ºæ—¶æ¨¡æ¿ï¼ˆvite-plugin-ejsï¼‰** | âœ… å·²ç¡®è®¤ |
| 3ï¸âƒ£ é¡µé¢ JS ç»„ç»‡æ–¹å¼ | **B - æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡** | âœ… å·²ç¡®è®¤ |
| 4ï¸âƒ£ API è°ƒç”¨å±‚ | **B - é›†ä¸­ API å±‚ç®¡ç†** | âœ… å·²ç¡®è®¤ |
| 5ï¸âƒ£ CSS ç®¡ç†æ–¹å¼ | **B - CSS å˜é‡ + ç»„ä»¶åŒ–** | âœ… å·²ç¡®è®¤ |
| 6ï¸âƒ£ Mixin åŠ è½½æ–¹æ¡ˆ | **B - Vite æ¨¡å—æ‰“åŒ…** | âœ… å·²ç¡®è®¤ |
| 7ï¸âƒ£ CSS æ¡†æ¶é€‰æ‹© | **B - Tailwind CSS** | âœ… å·²ç¡®è®¤ |
| 8ï¸âƒ£ Modal ç®¡ç†è§„èŒƒ | **B - x-ref + Mixin å°è£…** | âœ… å·²ç¡®è®¤ |

---

## ğŸ¯ å†³ç­–èƒŒæ™¯

### é¡¹ç›®ç°çŠ¶åˆ†æ

| ç»´åº¦ | å½“å‰çŠ¶æ€ | é—®é¢˜ |
|------|----------|------|
| HTML æ–‡ä»¶ | 61 ä¸ªç‹¬ç«‹æ–‡ä»¶ | ä¿®æ”¹å…¬å…±éƒ¨åˆ†éœ€æ”¹ 61 å¤„ |
| é¡µé¢ JS | 57 ä¸ª `pages/*.js` | åˆ†æ•£ï¼Œéš¾ä»¥å¤ç”¨ |
| API è°ƒç”¨ | 151 æ¬¡åˆ†æ•£è°ƒç”¨ | åˆ†å¸ƒåœ¨ 38 ä¸ªæ–‡ä»¶ï¼Œæ”¹æ¥å£è¦æ”¹å¤šå¤„ |
| CSS | 2 ä¸ªæ–‡ä»¶ | æ— ä¸»é¢˜å˜é‡ï¼Œéš¾ä»¥ç»Ÿä¸€è°ƒæ•´ |
| æ„å»ºå·¥å…· | æ—  | æ— æ³•ä½¿ç”¨ ES Moduleï¼ŒHTTP è¯·æ±‚å¤šï¼Œæ— çƒ­æ›´æ–° |

### å†³ç­–åŸåˆ™

- âœ… **é¡¹ç›®æœªä¸Šçº¿**ï¼šå¯ä»¥å¤§è§„æ¨¡é‡æ„
- âœ… **æ„¿æ„ä¸€æ¬¡æ€§æŠ•å…¥**ï¼šè¿½æ±‚é•¿æœŸä½ç»´æŠ¤æˆæœ¬
- âœ… **ä¸å…¼å®¹æ—§æ¥å£**ï¼šä»é›¶è®¾è®¡æœ€ä¼˜æ¶æ„
- âœ… **é™ä½æŠ€æœ¯å€ºåŠ¡**ï¼šå‚è€ƒä¸šç•Œæœ€ä½³å®è·µ

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¶æ„å†³ç­–è¯¦æƒ…

## 1ï¸âƒ£ å‰ç«¯è„šæœ¬æ¶æ„æ–¹æ¡ˆ

### å†³ç­–ï¼šé€‰æ‹© B - å¼•å…¥ Vite æ„å»ºå·¥å…·

> **ä¸ºä»€ä¹ˆé€‰ Vite è€Œä¸æ˜¯ esbuildï¼Ÿ**
> - Vite åº•å±‚å°±æ˜¯ esbuildï¼ˆå¼€å‘é˜¶æ®µï¼‰ï¼Œé€Ÿåº¦ä¸€æ ·å¿«
> - Vite å†…ç½®å¼€å‘æœåŠ¡å™¨ + çƒ­æ›´æ–°ï¼ˆHMRï¼‰ï¼Œå¼€å‘æ•ˆç‡æå‡ 50%+
> - Vite åŸç”Ÿæ”¯æŒå¤šé¡µåº”ç”¨ï¼Œé€‚åˆ 61 ä¸ª HTML é¡µé¢çš„é¡¹ç›®
> - Vite æ–‡æ¡£å®Œå–„ã€ç¤¾åŒºæ´»è·ƒï¼Œé‡åˆ°é—®é¢˜å®¹æ˜“è§£å†³

| å¯¹æ¯”é¡¹ | Aï¼ˆå½“å‰æ¨¡å¼ï¼‰ | Bï¼ˆViteï¼‰âœ… |
|--------|--------------|-------------|
| æ„å»ºæµç¨‹ | æ—  | æœ‰ï¼ˆç§’çº§æ„å»ºï¼‰ |
| HTTP è¯·æ±‚ | å¤šï¼ˆ10+ ä¸ª JSï¼‰ | å°‘ï¼ˆ1-2 ä¸ª JSï¼‰ |
| ä»£ç è¯­æ³• | ä¼ ç»Ÿå…¨å±€å˜é‡ | ES Module |
| ä»£ç å‹ç¼© | æ—  | æœ‰ï¼ˆä½“ç§¯å‡å°‘ 50%+ï¼‰ |
| å¼€å‘ä½“éªŒ | æ‰‹åŠ¨åˆ·æ–° | âœ… çƒ­æ›´æ–°ï¼ˆHMRï¼‰ |
| å¼€å‘æœåŠ¡å™¨ | æ—  | âœ… å†…ç½® |
| å¤šé¡µåº”ç”¨ | æ‰‹åŠ¨ç®¡ç† | âœ… åŸç”Ÿæ”¯æŒ |

### ç›®æ ‡æ¶æ„

```
project/
â”œâ”€â”€ src/admin/                 # ğŸ†• å‰ç«¯æºç ç›®å½•
â”‚   â”œâ”€â”€ alpine/                # Alpine ç›¸å…³
â”‚   â”œâ”€â”€ api/                   # API å±‚
â”‚   â”œâ”€â”€ modules/               # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ styles/                # CSS æ ·å¼
â”‚   â””â”€â”€ main.js                # å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ public/admin/
â”‚   â””â”€â”€ images/                # é™æ€èµ„æº
â”‚
â”œâ”€â”€ dist/admin/                # ğŸ†• æ„å»ºè¾“å‡ºç›®å½•ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ admin-[hash].js    # æ‰“åŒ…åçš„ä¸»æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ admin-[hash].css   # æ‰“åŒ…åçš„ CSS
â”‚   â””â”€â”€ *.html                 # æ„å»ºåçš„ HTML
â”‚
â””â”€â”€ vite.config.js             # ğŸ†• Vite é…ç½®æ–‡ä»¶
```

### vite.config.js ç¤ºä¾‹

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import { resolve } from 'path'
import { glob } from 'glob'

// è‡ªåŠ¨æ”¶é›†æ‰€æœ‰ HTML å…¥å£
const htmlFiles = glob.sync('views/admin/pages/*.html')
const input = {
  main: resolve(__dirname, 'index.html'),
  ...Object.fromEntries(
    htmlFiles.map(file => [
      file.replace('views/admin/pages/', '').replace('.html', ''),
      resolve(__dirname, file)
    ])
  )
}

export default defineConfig({
  root: './',
  base: '/admin/',
  
  build: {
    outDir: 'dist/admin',
    rollupOptions: {
      input
    }
  },
  
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src/admin')
    }
  },
  
  server: {
    port: 5173,
    proxy: {
      '/api': 'http://localhost:3000'  // ä»£ç†åˆ°åç«¯
    }
  }
})
```

---

## 2ï¸âƒ£ HTML æ¨¡æ¿ç»Ÿä¸€åŒ–

### å†³ç­–ï¼šé€‰æ‹© B - Vite æ„å»ºæ—¶æ¨¡æ¿ï¼ˆvite-plugin-ejsï¼‰â­ æ¨è

> **ä¸ºä»€ä¹ˆé€‰æ‹© Vite æ„å»ºæ—¶æ¨¡æ¿è€Œä¸æ˜¯ EJS + Expressï¼Ÿ**
> - **åç«¯é›¶æ”¹åŠ¨**ï¼šæ¨¡æ¿åœ¨æ„å»ºæ—¶å¤„ç†ï¼Œè¾“å‡ºçº¯é™æ€ HTMLï¼Œæ— éœ€åç«¯é…ç½®
> - **ä¸ Vite æ·±åº¦é›†æˆ**ï¼šåˆ©ç”¨ Vite çš„ HMRã€æ„å»ºä¼˜åŒ–ã€èµ„æºå¤„ç†
> - **éƒ¨ç½²ç®€å•**ï¼šè¾“å‡ºé™æ€æ–‡ä»¶ï¼Œå¯éƒ¨ç½²åˆ° CDN/Nginxï¼Œæ— éœ€ Node.js æœåŠ¡
> - **å¼€å‘ä½“éªŒæ›´å¥½**ï¼šä¿®æ”¹æ¨¡æ¿åè‡ªåŠ¨çƒ­æ›´æ–°ï¼Œæ— éœ€é‡å¯åç«¯

### æ–¹æ¡ˆå¯¹æ¯”

| å¯¹æ¯”é¡¹ | Aï¼ˆç‹¬ç«‹ HTMLï¼‰ | Bï¼ˆVite æ„å»ºæ—¶æ¨¡æ¿ï¼‰âœ… | Dï¼ˆEJS + Expressï¼‰ |
|--------|---------------|----------------------|-------------------|
| æ–‡ä»¶æ•°é‡ | 61 ä¸ªå®Œæ•´ HTML | 61 ä¸ªé¡µé¢ + 1 ä¸ªåŸºç¡€æ¨¡æ¿ | 61 ä¸ªé¡µé¢ + 1 ä¸ªåŸºç¡€æ¨¡æ¿ |
| æ”¹å¯¼èˆªæ  | æ”¹ 61 å¤„ | **æ”¹ 1 å¤„** | æ”¹ 1 å¤„ |
| åç«¯æ”¹åŠ¨ | æ—  | **æ— ï¼ˆé›¶æ”¹åŠ¨ï¼‰** | éœ€é…ç½® Express + EJS |
| è¾“å‡ºæ–‡ä»¶ | é™æ€ HTML | **é™æ€ HTML** | åŠ¨æ€æ¸²æŸ“ï¼ˆè¿è¡Œæ—¶ï¼‰ |
| æ¨¡æ¿å¤„ç†æ—¶æœº | æ—  | **æ„å»ºæ—¶ï¼ˆnpm run buildï¼‰** | è¿è¡Œæ—¶ï¼ˆæ¯æ¬¡è¯·æ±‚ï¼‰ |
| æœåŠ¡å™¨è´Ÿè½½ | ä½ | **ä½** | è¾ƒé«˜ï¼ˆéœ€æ¸²æŸ“ï¼‰ |
| é€‚ç”¨åœºæ™¯ | ç®€å•é¡¹ç›® | **å¤§å¤šæ•°ç®¡ç†åå°** | éœ€è¦åŠ¨æ€æ•°æ®æ³¨å…¥ |

### ç›®æ ‡æ¶æ„

```
admin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ templates/                 # ğŸ†• EJS æ¨¡æ¿æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â””â”€â”€ base.ejs           # åŸºç¡€æ¨¡æ¿ï¼ˆå¯¼èˆªã€è„šæœ¬ã€æ ·å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ partials/
â”‚   â”‚   â”‚   â”œâ”€â”€ navbar.ejs         # å¯¼èˆªæ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.ejs        # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ footer.ejs         # é¡µè„šç»„ä»¶
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚       â”œâ”€â”€ dashboard.ejs      # ä»ªè¡¨ç›˜é¡µé¢
â”‚   â”‚       â”œâ”€â”€ user-management.ejs
â”‚   â”‚       â””â”€â”€ ...                # å…¶ä»– 61 ä¸ªé¡µé¢
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ dist/                          # æ„å»ºè¾“å‡ºï¼ˆçº¯é™æ€ HTMLï¼‰
    â”œâ”€â”€ dashboard.html             # â† æ„å»ºæ—¶ç”Ÿæˆ
    â”œâ”€â”€ user-management.html
    â””â”€â”€ ...
```

### Vite é…ç½®ï¼ˆvite-plugin-ejsï¼‰

```javascript
// admin/vite.config.js
import { defineConfig } from 'vite'
import { resolve } from 'path'
import ejs from 'vite-plugin-ejs'
import { glob } from 'glob'

// è‡ªåŠ¨æ”¶é›†æ‰€æœ‰ EJS é¡µé¢
const ejsPages = glob.sync('src/templates/pages/*.ejs')
const input = Object.fromEntries(
  ejsPages.map(file => {
    const name = file.replace('src/templates/pages/', '').replace('.ejs', '')
    return [name, resolve(__dirname, file)]
  })
)

export default defineConfig({
  plugins: [
    ejs({
      // EJS å…¨å±€å˜é‡
      data: {
        siteName: 'ç®¡ç†åå°',
        version: '1.0.0'
      }
    })
  ],
  
  build: {
    rollupOptions: {
      input
    }
  }
})
```

### base.ejs æ¨¡æ¿ç¤ºä¾‹

```html
<!-- admin/src/templates/layouts/base.ejs -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= pageTitle %> - <%= siteName %></title>
  
  <!-- Tailwind CSSï¼ˆVite è‡ªåŠ¨æ³¨å…¥ï¼‰ -->
  <link href="/admin/assets/main.css" rel="stylesheet">
</head>
<body class="bg-gray-50 dark:bg-gray-900">
  <%- include('../partials/sidebar', { currentPage: pageName }) %>
  
  <main class="ml-64 p-6">
    <%- include('../partials/navbar') %>
    
    <div class="container-fluid">
      <%- body %>
    </div>
  </main>
  
  <!-- Alpine.js + ä¸šåŠ¡é€»è¾‘ï¼ˆVite æ‰“åŒ…ï¼‰ -->
  <script type="module" src="/admin/assets/main.js"></script>
</body>
</html>
```

### é¡µé¢æ¨¡æ¿ç¤ºä¾‹

```html
<!-- admin/src/templates/pages/user-management.ejs -->
<% 
  const pageTitle = 'ç”¨æˆ·ç®¡ç†'
  const pageName = 'user-management'
%>

<%- include('../layouts/base', { pageTitle, pageName, body: `
  <div x-data="userManagementPage()">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="mb-6">
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white">ç”¨æˆ·ç®¡ç†</h1>
    </div>
    
    <!-- æ•°æ®è¡¨æ ¼ -->
    <div class="card">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>ç”¨æˆ·å</th>
            <th>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="user in users" :key="user.id">
            <tr>
              <td x-text="user.id"></td>
              <td x-text="user.username"></td>
              <td>
                <button @click="editUser(user)">ç¼–è¾‘</button>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </div>
    
    <!-- Modal ç»„ä»¶ -->
    <div x-ref="editUserModal" class="modal">
      <!-- Modal å†…å®¹ -->
    </div>
  </div>
` }) %>
```

### æ„å»ºæµç¨‹

```bash
# å¼€å‘æ¨¡å¼ï¼ˆHMR çƒ­æ›´æ–°ï¼‰
cd admin && npm run dev
# â†’ ä¿®æ”¹ EJS æ¨¡æ¿ â†’ è‡ªåŠ¨åˆ·æ–°

# ç”Ÿäº§æ„å»º
cd admin && npm run build
# â†’ è¾“å‡º dist/dashboard.html, dist/user-management.html, ...
# â†’ çº¯é™æ€æ–‡ä»¶ï¼Œå¯ç›´æ¥éƒ¨ç½²åˆ° Nginx/CDN
```

### ä¸ EJS + Express çš„æ ¸å¿ƒåŒºåˆ«

| é˜¶æ®µ | Vite æ„å»ºæ—¶æ¨¡æ¿ âœ… | EJS + Express |
|------|-------------------|---------------|
| **æ¨¡æ¿å¤„ç†** | æ„å»ºæ—¶ï¼ˆ`npm run build`ï¼‰ | è¿è¡Œæ—¶ï¼ˆæ¯æ¬¡è¯·æ±‚ï¼‰ |
| **è¾“å‡º** | é™æ€ `.html` æ–‡ä»¶ | åŠ¨æ€æ¸²æŸ“ HTML |
| **åç«¯** | æ— éœ€ Node.js æœåŠ¡ | å¿…é¡» Express æœåŠ¡ |
| **éƒ¨ç½²** | Nginx/CDN é™æ€æ‰˜ç®¡ | Node.js æœåŠ¡å™¨ |
| **æ€§èƒ½** | æé«˜ï¼ˆæ— æ¸²æŸ“å¼€é”€ï¼‰ | è¾ƒä½ï¼ˆéœ€æ¸²æŸ“ï¼‰ |

### æœ¬é¡¹ç›®å®é™…éƒ¨ç½²æ¶æ„

> **é‡è¦è¯´æ˜**ï¼šæœ¬é¡¹ç›®å·²æœ‰ Node.js + Express åç«¯åœ¨è¿è¡Œï¼Œå‰ç«¯é™æ€æ–‡ä»¶ç”± Express æ‰˜ç®¡ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Express åç«¯ (app.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   /admin/*  â”€â”€â†’  express.static('admin/dist/')              â”‚
â”‚                  è¿”å›é™æ€ HTML/CSS/JS æ–‡ä»¶                   â”‚
â”‚                                                             â”‚
â”‚   /api/*    â”€â”€â†’  API è·¯ç”±å¤„ç†                                â”‚
â”‚                  è¿”å› JSON æ•°æ®                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…·ä½“é…ç½®**ï¼ˆapp.jsï¼‰ï¼š

```javascript
// é™æ€æ–‡ä»¶æ‰˜ç®¡ - è¿”å› Vite æ„å»ºè¾“å‡ºçš„é™æ€ HTML
app.use('/admin', express.static(path.join(__dirname, 'admin/dist')))

// API è·¯ç”± - å¤„ç†ä¸šåŠ¡é€»è¾‘
app.use('/api/v4', require('./routes/api'))
```

**è¯·æ±‚æµç¨‹ç¤ºä¾‹**ï¼š

| ç”¨æˆ·è¯·æ±‚ | Express å¤„ç† | è¿”å›å†…å®¹ |
|----------|-------------|----------|
| `GET /admin/user-management.html` | `express.static()` | é™æ€ HTML æ–‡ä»¶ |
| `GET /admin/assets/main.js` | `express.static()` | é™æ€ JS æ–‡ä»¶ |
| `GET /api/v4/users` | API è·¯ç”± | JSON æ•°æ® |

**ä¸ºä»€ä¹ˆä¸éœ€è¦ Nginx/CDNï¼Ÿ**

- æœ¬é¡¹ç›®æ˜¯**å†…éƒ¨ç®¡ç†åå°**ï¼Œç”¨æˆ·é‡ä¸å¤§
- Express çš„ `express.static()` è¶³å¤Ÿå¤„ç†é™æ€æ–‡ä»¶
- å¦‚éœ€ä¼˜åŒ–ï¼Œå¯åœ¨ Express å‰åŠ  Nginx åå‘ä»£ç†

### ä»€ä¹ˆæ—¶å€™éœ€è¦ EJS + Expressï¼ˆæ–¹æ¡ˆ Dï¼‰ï¼Ÿ

åªæœ‰ä»¥ä¸‹åœºæ™¯æ‰éœ€è¦è¿è¡Œæ—¶æ¨¡æ¿ï¼š

1. **æœåŠ¡ç«¯æ•°æ®æ³¨å…¥**ï¼šéœ€è¦åœ¨ HTML ä¸­æ³¨å…¥æœåŠ¡ç«¯æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€æƒé™é…ç½®ï¼‰
2. **SEO åŠ¨æ€å†…å®¹**ï¼šéœ€è¦æœç´¢å¼•æ“æŠ“å–åŠ¨æ€ç”Ÿæˆçš„å†…å®¹
3. **å¤šç§Ÿæˆ·å·®å¼‚åŒ–**ï¼šä¸åŒç§Ÿæˆ·éœ€è¦ä¸åŒçš„é¡µé¢å¸ƒå±€

**æœ¬é¡¹ç›®ä¸éœ€è¦**ï¼šç®¡ç†åå°æ˜¯ SPA æ¨¡å¼ï¼Œæ•°æ®é€šè¿‡ API è·å–ï¼Œä¸éœ€è¦æœåŠ¡ç«¯æ³¨å…¥æ•°æ®

---

## 3ï¸âƒ£ é¡µé¢ JS ç»„ç»‡æ–¹å¼

### å†³ç­–ï¼šé€‰æ‹© B - æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡

| å¯¹æ¯”é¡¹ | Aï¼ˆæŒ‰é¡µé¢ï¼‰ | Bï¼ˆæŒ‰æ¨¡å—ï¼‰âœ… |
|--------|------------|--------------|
| æ–‡ä»¶ç»„ç»‡ | 57 ä¸ªæ‰å¹³æ–‡ä»¶ | æŒ‰ä¸šåŠ¡åˆ†ç»„ |
| ä»£ç å¤ç”¨ | å¤åˆ¶ç²˜è´´ | æ¨¡å—å†…å…±äº« |
| ç»´æŠ¤å®šä½ | æŒ‰é¡µé¢åæ‰¾ | æŒ‰åŠŸèƒ½åŸŸæ‰¾ |
| å¾®å‰ç«¯è¿ç§» | å›°éš¾ | å®¹æ˜“ |

### ç›®æ ‡æ¶æ„

```
src/modules/
â”œâ”€â”€ user/                      # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ index.js               # æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ api.js                 # ç”¨æˆ·ç›¸å…³ API
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ user-management.js
â”‚   â”‚   â”œâ”€â”€ user-hierarchy.js
â”‚   â”‚   â””â”€â”€ roles.js
â”‚   â””â”€â”€ components/            # æ¨¡å—å†…ç»„ä»¶
â”‚
â”œâ”€â”€ lottery/                   # æŠ½å¥–æ¨¡å—
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ api.js
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ lottery-management.js
â”‚   â”‚   â”œâ”€â”€ lottery-strategy.js
â”‚   â”‚   â”œâ”€â”€ lottery-quota.js
â”‚   â”‚   â””â”€â”€ prizes.js
â”‚   â””â”€â”€ components/
â”‚
â”œâ”€â”€ asset/                     # èµ„äº§æ¨¡å—
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ api.js
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ asset-management.js
â”‚   â”‚   â”œâ”€â”€ material-asset-types.js
â”‚   â”‚   â””â”€â”€ diamond-accounts.js
â”‚   â””â”€â”€ components/
â”‚
â”œâ”€â”€ market/                    # å¸‚åœºäº¤æ˜“æ¨¡å—
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ api.js
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ market-management.js
â”‚   â”‚   â”œâ”€â”€ exchange-market-items.js
â”‚   â”‚   â””â”€â”€ trade-orders.js
â”‚   â””â”€â”€ components/
â”‚
â”œâ”€â”€ store/                     # é—¨åº—æ¨¡å—
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ api.js
â”‚   â””â”€â”€ pages/
â”‚
â”œâ”€â”€ content/                   # å†…å®¹ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ api.js
â”‚   â””â”€â”€ pages/
â”‚
â”œâ”€â”€ system/                    # ç³»ç»Ÿç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ api.js
â”‚   â””â”€â”€ pages/
â”‚
â””â”€â”€ analytics/                 # æ•°æ®åˆ†ææ¨¡å—
    â”œâ”€â”€ index.js
    â”œâ”€â”€ api.js
    â””â”€â”€ pages/
```

---

## 4ï¸âƒ£ API è°ƒç”¨å±‚ç»Ÿä¸€

### å†³ç­–ï¼šé€‰æ‹© B - é›†ä¸­ API å±‚ç®¡ç†

| å¯¹æ¯”é¡¹ | Aï¼ˆåˆ†æ•£è°ƒç”¨ï¼‰ | Bï¼ˆé›†ä¸­ç®¡ç†ï¼‰âœ… |
|--------|--------------|----------------|
| API è·¯å¾„ | åˆ†æ•£åœ¨ 38 ä¸ªæ–‡ä»¶ | é›†ä¸­åœ¨ api/*.js |
| æ”¹æ¥å£è·¯å¾„ | æ”¹ N å¤„ | æ”¹ 1 å¤„ |
| ç±»å‹æç¤º | æ—  | æœ‰ï¼ˆJSDoc/TSï¼‰ |
| å¤ç”¨æ€§ | å¤åˆ¶ç²˜è´´ | import å¼•ç”¨ |

### ç›®æ ‡æ¶æ„ï¼ˆåˆ†æ•£å¼ï¼‰

> **å†³ç­–å˜æ›´**ï¼šä»é›†ä¸­å¼æ”¹ä¸º**åˆ†æ•£å¼**ï¼ˆæŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†ï¼‰
> 
> **å˜æ›´åŸå› **ï¼š
> - å½“å‰ `index.js` å·²æœ‰ 716 è¡Œï¼Œéšé¡¹ç›®å¢é•¿å°†éš¾ä»¥ç»´æŠ¤
> - å¤šäººåä½œæ—¶å‡å°‘ Git å†²çª
> - æ¨¡å—è¾¹ç•Œæ¸…æ™°ï¼Œä¸åç«¯å¾®æœåŠ¡å¯¹åº”
> - Tree Shaking æ•ˆæœæ›´å¥½
> 
> **è¡Œä¸šå‚è€ƒ**ï¼šå¤§å‚ï¼ˆé˜¿é‡Œ/è…¾è®¯/ç¾å›¢ï¼‰ã€æ¸¸æˆå…¬å¸ã€è™šæ‹Ÿç‰©å“äº¤æ˜“å¹³å°å‡é‡‡ç”¨åˆ†æ•£å¼

```
admin/src/api/
â”œâ”€â”€ index.js                   # ç»Ÿä¸€å¯¼å‡ºï¼ˆre-export æ‰€æœ‰æ¨¡å—ï¼‰
â”œâ”€â”€ base.js                    # åŸºç¡€è¯·æ±‚å°è£…ï¼ˆrequest/http/token ç®¡ç†ï¼‰
â”œâ”€â”€ endpoints.js               # ç«¯ç‚¹å¸¸é‡å®šä¹‰ï¼ˆå¯é€‰ï¼Œé›†ä¸­ç®¡ç†è·¯å¾„ï¼‰
â”œâ”€â”€ auth.js                    # è®¤è¯ç›¸å…³ API
â”œâ”€â”€ user.js                    # ç”¨æˆ·ç®¡ç† API
â”œâ”€â”€ lottery.js                 # æŠ½å¥–ç³»ç»Ÿ APIï¼ˆæ´»åŠ¨/ç­–ç•¥/é…é¢/ç›‘æ§ï¼‰
â”œâ”€â”€ asset.js                   # èµ„äº§ç®¡ç† APIï¼ˆææ–™/é’»çŸ³/ç‰©å“ï¼‰
â”œâ”€â”€ market.js                  # å¸‚åœºäº¤æ˜“ API
â”œâ”€â”€ store.js                   # é—¨åº—ç®¡ç† API
â”œâ”€â”€ system.js                  # ç³»ç»Ÿé…ç½® API
â”œâ”€â”€ analytics.js               # æ•°æ®åˆ†æ API
â””â”€â”€ legacy.js                  # æ—§ç‰ˆå…¼å®¹ï¼ˆè¿‡æ¸¡æœŸä¿ç•™ï¼‰
```

### API æ¨¡å—ç¤ºä¾‹ï¼ˆåˆ†æ•£å¼å®ç°ï¼‰

#### 1. åŸºç¡€è¯·æ±‚å°è£…

```javascript
// admin/src/api/base.js - åŸºç¡€è¯·æ±‚å°è£…
const API_BASE = '/api/v4'

/**
 * é€šç”¨è¯·æ±‚æ–¹æ³•
 */
export async function request(url, options = {}) {
  const { method = 'GET', data = null, params = {} } = options
  
  // æ„å»ºå®Œæ•´ URL
  let fullUrl = url.startsWith('/api') ? url : `${API_BASE}${url}`
  if (Object.keys(params).length > 0) {
    fullUrl += '?' + new URLSearchParams(params).toString()
  }
  
  // è¯·æ±‚é…ç½®
  const config = {
    method,
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${getToken()}`
    }
  }
  if (data) config.body = JSON.stringify(data)
  
  // å‘é€è¯·æ±‚
  const response = await fetch(fullUrl, config)
  const result = await response.json()
  
  // ç»Ÿä¸€é”™è¯¯å¤„ç†
  if (!result.success) {
    handleApiError(result)
  }
  
  return result
}

export const http = {
  get: (url, params) => request(url, { method: 'GET', params }),
  post: (url, data) => request(url, { method: 'POST', data }),
  put: (url, data) => request(url, { method: 'PUT', data }),
  delete: (url) => request(url, { method: 'DELETE' })
}
```

#### 2. ä¸šåŠ¡æ¨¡å— API

```javascript
// admin/src/api/user.js - ç”¨æˆ·ç®¡ç† API
import { http } from './base.js'

const BASE = '/console/user-management'

export const UserAPI = {
  // ç”¨æˆ·åˆ—è¡¨
  list: (params = {}) => http.get(`${BASE}/users`, params),
  
  // ç”¨æˆ·è¯¦æƒ…
  detail: (userId) => http.get(`${BASE}/users/${userId}`),
  
  // æ›´æ–°è§’è‰²
  updateRole: (userId, roleData) => http.put(`${BASE}/users/${userId}/role`, roleData),
  
  // æ›´æ–°çŠ¶æ€
  updateStatus: (userId, status) => http.put(`${BASE}/users/${userId}/status`, { status }),
  
  // åˆ é™¤ç”¨æˆ·
  delete: (userId) => http.delete(`${BASE}/users/${userId}`)
}
```

```javascript
// admin/src/api/lottery.js - æŠ½å¥–ç³»ç»Ÿ API
import { http } from './base.js'

export const LotteryAPI = {
  // æ‰§è¡ŒæŠ½å¥–
  execute: (data) => http.post('/lottery/execute', data),
  
  // æŠ½å¥–å†å²
  history: (params) => http.get('/lottery/history', params),
  
  // ç­–ç•¥ç®¡ç†
  strategies: {
    list: (params) => http.get('/lottery/strategies', params),
    create: (data) => http.post('/lottery/strategies', data),
    update: (id, data) => http.put(`/lottery/strategies/${id}`, data),
    delete: (id) => http.delete(`/lottery/strategies/${id}`)
  },
  
  // é…é¢ç®¡ç†
  quotas: {
    list: (params) => http.get('/lottery/quotas', params),
    adjust: (id, data) => http.put(`/lottery/quotas/${id}`, data)
  }
}
```

```javascript
// admin/src/api/asset.js - èµ„äº§ç®¡ç† API
import { http } from './base.js'

export const AssetAPI = {
  // ææ–™èµ„äº§
  materials: {
    types: () => http.get('/assets/material-types'),
    balances: (userId) => http.get(`/assets/materials/${userId}`)
  },
  
  // é’»çŸ³è´¦æˆ·
  diamond: {
    list: (params) => http.get('/assets/diamond-accounts', params),
    detail: (userId) => http.get(`/assets/diamond-accounts/${userId}`)
  },
  
  // ç‰©å“å®ä¾‹
  items: {
    list: (params) => http.get('/assets/item-instances', params),
    detail: (id) => http.get(`/assets/item-instances/${id}`)
  }
}
```

#### 3. ç»Ÿä¸€å¯¼å‡º

```javascript
// admin/src/api/index.js - ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰æ¨¡å—
export { http, request } from './base.js'
export { UserAPI } from './user.js'
export { LotteryAPI } from './lottery.js'
export { AssetAPI } from './asset.js'
export { MarketAPI } from './market.js'
export { StoreAPI } from './store.js'
export { SystemAPI } from './system.js'
export { AnalyticsAPI } from './analytics.js'
```

### é¡µé¢ä¸­ä½¿ç”¨

```javascript
// admin/src/modules/user/pages/user-management.js
import { UserAPI } from '@/api/user.js'
// æˆ–ç»Ÿä¸€å¯¼å…¥ï¼šimport { UserAPI } from '@/api/index.js'

function userManagementPage() {
  return {
    users: [],
    
    async loadData() {
      const params = this.buildPaginationParams()
      const result = await UserAPI.list(params)
      
      if (result.success) {
        this.users = result.data.list
        this.updatePagination(result.data)
      }
    },
    
    async deleteUser(id) {
      const result = await UserAPI.delete(id)
      if (result.success) {
        this.showSuccess('åˆ é™¤æˆåŠŸ')
        this.loadData()
      }
    }
  }
}
```

```javascript
// admin/src/modules/lottery/pages/lottery-management.js
import { LotteryAPI } from '@/api/lottery.js'

function lotteryManagementPage() {
  return {
    strategies: [],
    
    async loadStrategies() {
      const result = await LotteryAPI.strategies.list({ page: 1, page_size: 20 })
      if (result.success) {
        this.strategies = result.data.list
      }
    },
    
    async createStrategy(data) {
      const result = await LotteryAPI.strategies.create(data)
      if (result.success) {
        this.showSuccess('ç­–ç•¥åˆ›å»ºæˆåŠŸ')
        this.loadStrategies()
      }
    }
  }
}
```

---

## 5ï¸âƒ£ CSS ç®¡ç†æ–¹å¼

### å†³ç­–ï¼šé€‰æ‹© B - CSS å˜é‡ + ç»„ä»¶åŒ–

| å¯¹æ¯”é¡¹ | Aï¼ˆå•æ–‡ä»¶ï¼‰ | Bï¼ˆç»„ä»¶åŒ–ï¼‰âœ… |
|--------|------------|--------------|
| ä¸»é¢˜åˆ‡æ¢ | å›°éš¾ | æ”¹å˜é‡å³å¯ |
| ä»£ç ç»„ç»‡ | ä¸€ä¸ªå¤§æ–‡ä»¶ | æŒ‰ç»„ä»¶/åŠŸèƒ½åˆ†ç¦» |
| æ ·å¼å†²çª | å¯èƒ½ | å‡å°‘ï¼ˆå‘½åè§„èŒƒï¼‰ |
| å¤ç”¨æ€§ | ä½ | é«˜ï¼ˆç»„ä»¶æ ·å¼ï¼‰ |

---

## 7ï¸âƒ£ CSS æ¡†æ¶é€‰æ‹©

### å†³ç­–ï¼šé€‰æ‹© B - Tailwind CSS

> **ä¸ºä»€ä¹ˆä» Bootstrap æ¢æˆ Tailwindï¼Ÿ**
> - Tailwind + Alpine.js æ˜¯ä¸šç•Œå…¬è®¤çš„æœ€ä½³æ­æ¡£
> - åŸå­åŒ– CSS å¼€å‘æ•ˆç‡æ›´é«˜
> - æŒ‰éœ€ç”Ÿæˆï¼Œæ‰“åŒ…ä½“ç§¯æ›´å°ï¼ˆ~10KB vs Bootstrap ~200KBï¼‰
> - ä¸ Vite å®Œç¾é›†æˆ

### æ–¹æ¡ˆå¯¹æ¯”

| å¯¹æ¯”é¡¹ | A - Bootstrap | B - Tailwind CSS âœ… |
|--------|---------------|---------------------|
| è®¾è®¡ç†å¿µ | ç»„ä»¶ä¼˜å…ˆï¼ˆé¢„åˆ¶ç»„ä»¶ï¼‰ | åŸå­ä¼˜å…ˆï¼ˆutility-firstï¼‰ |
| æ‰“åŒ…ä½“ç§¯ | ~200KBï¼ˆå…¨é‡ï¼‰ | **~10KB**ï¼ˆæŒ‰éœ€ï¼‰ |
| å®šåˆ¶çµæ´»æ€§ | â­â­â­ ä¸­ç­‰ | â­â­â­â­â­ æé«˜ |
| ä¸ Alpine é…åˆ | â­â­â­ è‰¯å¥½ | â­â­â­â­â­ **æœ€ä½³æ­æ¡£** |
| ä¸ Vite é›†æˆ | â­â­â­ è‰¯å¥½ | â­â­â­â­â­ **åŸç”Ÿæ”¯æŒ** |
| å“åº”å¼æ”¯æŒ | âœ… å†…ç½® | âœ… æ›´çµæ´»ï¼ˆ`md:`, `lg:`ï¼‰ |
| æš—è‰²ä¸»é¢˜ | éœ€é¢å¤–é…ç½® | âœ… **åŸç”Ÿæ”¯æŒ**ï¼ˆ`dark:`ï¼‰ |
| å­¦ä¹ æ›²çº¿ | â­â­ ä½ | â­â­â­ ä¸­ï¼ˆ3-5å¤©ï¼‰ |

### è¿ç§»æˆæœ¬è¯„ä¼°

| å·¥ä½œé¡¹ | å·¥ä½œé‡ | è¯´æ˜ |
|--------|--------|------|
| å®‰è£…é…ç½® Tailwind | 0.5 å¤© | Vite æ’ä»¶ä¸€é”®é…ç½® |
| é‡å†™ 61 ä¸ªé¡µé¢æ ·å¼ | 2 å‘¨ | éœ€é€é¡µè¿ç§» |
| ç»„ä»¶æ ·å¼é‡æ„ | 3-5 å¤© | è¡¨æ ¼ã€è¡¨å•ã€å¼¹çª—ç­‰ |
| **æ€»è®¡** | **2-3 å‘¨** | ä¸æ¨¡å—åŒ–é‡æ„å¹¶è¡Œ |

### ç›®æ ‡æ¶æ„

```
src/styles/
â”œâ”€â”€ index.css                  # Tailwind å…¥å£
â”œâ”€â”€ tailwind.config.js         # ğŸ†• Tailwind é…ç½®
â”œâ”€â”€ base/
â”‚   â””â”€â”€ custom-base.css        # è‡ªå®šä¹‰åŸºç¡€æ ·å¼
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ buttons.css            # @apply å°è£…çš„æŒ‰é’®
â”‚   â”œâ”€â”€ cards.css              # @apply å°è£…çš„å¡ç‰‡
â”‚   â”œâ”€â”€ tables.css             # @apply å°è£…çš„è¡¨æ ¼
â”‚   â””â”€â”€ forms.css              # @apply å°è£…çš„è¡¨å•
â””â”€â”€ utilities/
    â””â”€â”€ custom-utilities.css   # è‡ªå®šä¹‰å·¥å…·ç±»
```

### Tailwind é…ç½®ç¤ºä¾‹

```javascript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    './views/**/*.ejs',
    './src/**/*.{js,ts,jsx,tsx}',
  ],
  darkMode: 'class',  // æ”¯æŒæš—è‰²ä¸»é¢˜
  theme: {
    extend: {
      colors: {
        // è‡ªå®šä¹‰ä¸»é¢˜è‰²
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
        },
        // ç®¡ç†åå°ä¸“ç”¨è‰²
        admin: {
          sidebar: '#1e293b',
          header: '#0f172a',
        }
      },
      fontFamily: {
        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
      },
      spacing: {
        'sidebar': '250px',
        'header': '60px',
      }
    },
  },
  plugins: [
    require('@tailwindcss/forms'),      // è¡¨å•æ ·å¼
    require('@tailwindcss/typography'), // æ’ç‰ˆæ ·å¼
  ],
}
```

### index.css å…¥å£æ–‡ä»¶

```css
/* src/styles/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* è‡ªå®šä¹‰åŸºç¡€æ ·å¼ */
@layer base {
  html {
    @apply antialiased;
  }
  body {
    @apply bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100;
  }
}

/* è‡ªå®šä¹‰ç»„ä»¶æ ·å¼ï¼ˆä½¿ç”¨ @applyï¼‰ */
@layer components {
  /* æŒ‰é’® */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-colors duration-200;
  }
  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700;
  }
  .btn-secondary {
    @apply btn bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200;
  }
  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700;
  }
  
  /* å¡ç‰‡ */
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 dark:bg-gray-800 dark:border-gray-700;
  }
  .card-header {
    @apply px-6 py-4 border-b border-gray-200 dark:border-gray-700;
  }
  .card-body {
    @apply p-6;
  }
  
  /* è¡¨æ ¼ */
  .table {
    @apply w-full text-sm text-left;
  }
  .table th {
    @apply px-4 py-3 bg-gray-50 font-medium text-gray-600 dark:bg-gray-800 dark:text-gray-300;
  }
  .table td {
    @apply px-4 py-3 border-b border-gray-200 dark:border-gray-700;
  }
  .table tr:hover {
    @apply bg-gray-50 dark:bg-gray-800/50;
  }
  
  /* è¡¨å• */
  .form-input {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600;
  }
  .form-label {
    @apply block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300;
  }
  
  /* ä¾§è¾¹æ  */
  .sidebar {
    @apply fixed left-0 top-0 h-full w-sidebar bg-admin-sidebar text-white;
  }
  .sidebar-item {
    @apply flex items-center px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white transition-colors;
  }
  .sidebar-item.active {
    @apply bg-primary-600 text-white;
  }
}

/* è‡ªå®šä¹‰å·¥å…·ç±» */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}
```

### é¡µé¢ç¤ºä¾‹ï¼ˆTailwind ç‰ˆæœ¬ï¼‰

```html
<!-- views/admin/pages/user-management.ejs -->
<div class="p-6">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">ç”¨æˆ·ç®¡ç†</h1>
    <p class="mt-1 text-sm text-gray-500">ç®¡ç†ç³»ç»Ÿç”¨æˆ·å’Œæƒé™</p>
  </div>
  
  <!-- æœç´¢æ  -->
  <div class="card mb-6">
    <div class="card-body">
      <div class="flex gap-4">
        <input type="text" class="form-input flex-1" placeholder="æœç´¢ç”¨æˆ·...">
        <button class="btn-primary">
          <i class="bi bi-search mr-2"></i>æœç´¢
        </button>
      </div>
    </div>
  </div>
  
  <!-- æ•°æ®è¡¨æ ¼ -->
  <div class="card">
    <div class="card-header flex justify-between items-center">
      <h2 class="font-semibold">ç”¨æˆ·åˆ—è¡¨</h2>
      <button class="btn-primary">
        <i class="bi bi-plus mr-2"></i>æ–°å¢ç”¨æˆ·
      </button>
    </div>
    <div class="overflow-x-auto">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>ç”¨æˆ·å</th>
            <th>æ‰‹æœºå·</th>
            <th>çŠ¶æ€</th>
            <th>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="user in users" :key="user.id">
            <tr>
              <td x-text="user.id"></td>
              <td x-text="user.username"></td>
              <td x-text="user.phone"></td>
              <td>
                <span class="px-2 py-1 text-xs rounded-full"
                      :class="user.status === 'active' 
                        ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' 
                        : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'"
                      x-text="user.status === 'active' ? 'æ­£å¸¸' : 'ç¦ç”¨'">
                </span>
              </td>
              <td>
                <button class="text-primary-600 hover:text-primary-800 mr-3">ç¼–è¾‘</button>
                <button class="text-red-600 hover:text-red-800">åˆ é™¤</button>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </div>
  </div>
</div>
```

### Vite + Tailwind é…ç½®

```javascript
// vite.config.jsï¼ˆæ–°å¢ Tailwind é…ç½®ï¼‰
import { defineConfig } from 'vite';
import tailwindcss from '@tailwindcss/vite';

export default defineConfig({
  plugins: [
    tailwindcss(),
  ],
  // ... å…¶ä»–é…ç½®
});
```

```json
// package.jsonï¼ˆæ–°å¢ä¾èµ–ï¼‰
{
  "devDependencies": {
    "tailwindcss": "^4.0.0",
    "@tailwindcss/vite": "^4.0.0",
    "@tailwindcss/forms": "^0.5.0",
    "@tailwindcss/typography": "^0.5.0"
  }
}
```

---

## 8ï¸âƒ£ Modal ç®¡ç†è§„èŒƒ

### å†³ç­–ï¼šé€‰æ‹© B - x-ref + Mixin å°è£…

> **ä¸ºä»€ä¹ˆé€‰æ‹© x-ref è€Œä¸æ˜¯ idï¼Ÿ**
> - `x-ref` æ˜¯ Alpine.js åŸç”Ÿ APIï¼Œä¸æ¡†æ¶æ·±åº¦é›†æˆ
> - é¿å…å…¨å±€ ID å‘½åå†²çªï¼Œç»„ä»¶å°è£…æ€§æ›´å¼º
> - æ”¯æŒåŒä¸€ Modal ç»„ä»¶å¤šå®ä¾‹å¤ç”¨
> - é…åˆ Mixin å°è£…ï¼Œå®ç°ç»Ÿä¸€çš„ Modal ç”Ÿå‘½å‘¨æœŸç®¡ç†

### æ–¹æ¡ˆå¯¹æ¯”

| å¯¹æ¯”é¡¹ | A - `id` + Bootstrap Modal | B - `x-ref` + Mixin å°è£… âœ… |
|--------|---------------------------|----------------------------|
| **å¼•ç”¨æ–¹å¼** | `document.getElementById()` æˆ– Bootstrap API | `this.$refs.modalName` |
| **å‘½åç©ºé—´** | å…¨å±€ï¼ˆæ˜“å†²çªï¼‰ | **ç»„ä»¶å†…ï¼ˆéš”ç¦»ï¼‰** |
| **å¤šå®ä¾‹æ”¯æŒ** | âŒ éœ€æ‰‹åŠ¨æ·»åŠ åç¼€ | âœ… **å¤©ç„¶æ”¯æŒ** |
| **æ¡†æ¶é›†æˆ** | éœ€ä¾èµ– Bootstrap JS | âœ… **Alpine åŸç”Ÿ** |
| **çŠ¶æ€ç®¡ç†** | åˆ†æ•£åœ¨å„å¤„ | âœ… **Mixin ç»Ÿä¸€ç®¡ç†** |
| **ä»£ç å¤ç”¨** | æ¯ä¸ª Modal å•ç‹¬å†™é€»è¾‘ | âœ… **Mixin å¤ç”¨** |
| **å¯æµ‹è¯•æ€§** | ä¾èµ– DOM æŸ¥è¯¢ | âœ… **çº¯ JS å¼•ç”¨** |
| **æ‰“åŒ…ä½“ç§¯** | éœ€è¦ Bootstrap JS (~80KB) | âœ… **é›¶é¢å¤–ä¾èµ–** |

### è¡Œä¸šå®è·µå¯¹æ¯”

| å…¬å¸ç±»å‹ | å…¸å‹æ–¹æ¡ˆ | ç†ç”± |
|----------|----------|------|
| **å¤§å‚ï¼ˆé˜¿é‡Œ/è…¾è®¯ï¼‰** | ç»„ä»¶åº“å°è£…ï¼ˆAnt Design/Elementï¼‰ | æœ‰ä¸“é—¨çš„ç»„ä»¶åº“å›¢é˜Ÿç»´æŠ¤ï¼ŒModal æ˜¯ç»„ä»¶åº“ä¸€éƒ¨åˆ† |
| **æ¸¸æˆå…¬å¸åå°** | **x-ref + è‡ªå®šä¹‰å°è£…** âœ… | è¿½æ±‚è½»é‡ã€çµæ´»ï¼Œä¸ä¾èµ–é‡å‹ç»„ä»¶åº“ |
| **æ´»åŠ¨ç­–åˆ’å…¬å¸** | Bootstrap Modalï¼ˆid æ–¹å¼ï¼‰ | å¿«é€Ÿå¼€å‘ï¼Œæ¨¡æ¿ä»£ç å¤šï¼Œä¸è¿½æ±‚å¤ç”¨ |
| **è™šæ‹Ÿç‰©å“äº¤æ˜“å¹³å°** | **Alpine + Tailwind + x-ref** âœ… | ä¸æœ¬é¡¹ç›®æŠ€æœ¯æ ˆå®Œå…¨åŒ¹é… |
| **ä¸­å°å‹ SaaS** | Headless UI / Radix UI | æ— æ ·å¼ç»„ä»¶åº“ï¼Œé«˜åº¦å¯å®šåˆ¶ |

> **æœ¬é¡¹ç›®å®šä½**ï¼šæ¸¸æˆè™šæ‹Ÿç‰©å“äº¤æ˜“ / å°ä¼—äºŒæ‰‹å¹³å°
> **æœ€ä½³é€‰æ‹©**ï¼š`x-ref` + Mixin å°è£…ï¼ˆä¸ Alpine + Tailwind æŠ€æœ¯æ ˆå®Œç¾å¥‘åˆï¼‰

### ä¸¤ç§æ–¹æ¡ˆçš„æœ¬è´¨åŒºåˆ«

#### æ–¹æ¡ˆ Aï¼š`id` + ä¼ ç»Ÿ DOM æ“ä½œ

```html
<!-- HTML -->
<div class="modal fade" id="editUserModal">...</div>

<!-- JS -->
<script>
  const modal = new bootstrap.Modal(document.getElementById('editUserModal'))
  modal.show()
</script>
```

**é—®é¢˜**ï¼š
1. ä¾èµ–å…¨å±€ IDï¼Œç»„ä»¶å¤ç”¨æ—¶éœ€æ”¹ ID
2. ä¾èµ– Bootstrap JSï¼Œå¢åŠ æ‰“åŒ…ä½“ç§¯
3. Modal çŠ¶æ€åˆ†æ•£ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†

#### æ–¹æ¡ˆ Bï¼š`x-ref` + Mixin å°è£…

```html
<!-- HTML -->
<div x-ref="editUserModal" class="modal">...</div>

<!-- JS (Alpine Component) -->
<script>
function userManagement() {
  return {
    ...modalMixin(),  // å¤ç”¨ Mixin
    
    editUser(user) {
      this.showModal('editUserModal')  // ç»Ÿä¸€ API
    }
  }
}
</script>
```

**ä¼˜åŠ¿**ï¼š
1. ç»„ä»¶å†…å¼•ç”¨ï¼Œæ— å‘½åå†²çª
2. Mixin ç»Ÿä¸€ç®¡ç† `showModal/hideModal/toggleModal`
3. ä¸ Alpine.js å“åº”å¼ç³»ç»Ÿæ·±åº¦é›†æˆ

### modalMixin æ ‡å‡†å®ç°

```javascript
// src/admin/alpine/mixins/modal.js

/**
 * Modal ç®¡ç† Mixin
 * æä¾›ç»Ÿä¸€çš„ Modal æ˜¾ç¤º/éšè—/åˆ‡æ¢ API
 */
export function modalMixin() {
  return {
    // å½“å‰æ‰“å¼€çš„ Modal åˆ—è¡¨ï¼ˆæ”¯æŒå¤š Modal åŒæ—¶æ‰“å¼€ï¼‰
    _openModals: [],
    
    /**
     * æ˜¾ç¤º Modal
     * @param {string} refName - x-ref åç§°
     * @param {Object} options - é…ç½®é€‰é¡¹
     */
    showModal(refName, options = {}) {
      const modalEl = this.$refs[refName]
      if (!modalEl) {
        console.warn(`Modal not found: ${refName}`)
        return
      }
      
      // æ·»åŠ æ˜¾ç¤ºç±»
      modalEl.classList.add('show')
      modalEl.style.display = 'block'
      document.body.classList.add('modal-open')
      
      // åˆ›å»ºé®ç½©å±‚
      if (options.backdrop !== false) {
        this._createBackdrop(refName)
      }
      
      // è®°å½•æ‰“å¼€çŠ¶æ€
      this._openModals.push(refName)
      
      // è§¦å‘äº‹ä»¶
      this.$dispatch('modal-shown', { name: refName })
    },
    
    /**
     * éšè— Modal
     * @param {string} refName - x-ref åç§°
     */
    hideModal(refName) {
      const modalEl = this.$refs[refName]
      if (!modalEl) return
      
      // ç§»é™¤æ˜¾ç¤ºç±»
      modalEl.classList.remove('show')
      modalEl.style.display = 'none'
      
      // ç§»é™¤é®ç½©å±‚
      this._removeBackdrop(refName)
      
      // æ›´æ–°æ‰“å¼€çŠ¶æ€
      this._openModals = this._openModals.filter(name => name !== refName)
      
      // å¦‚æœæ²¡æœ‰å…¶ä»– Modal æ‰“å¼€ï¼Œç§»é™¤ body ç±»
      if (this._openModals.length === 0) {
        document.body.classList.remove('modal-open')
      }
      
      // è§¦å‘äº‹ä»¶
      this.$dispatch('modal-hidden', { name: refName })
    },
    
    /**
     * åˆ‡æ¢ Modal
     * @param {string} refName - x-ref åç§°
     */
    toggleModal(refName) {
      if (this._openModals.includes(refName)) {
        this.hideModal(refName)
      } else {
        this.showModal(refName)
      }
    },
    
    /**
     * åˆ›å»ºé®ç½©å±‚
     * @private
     */
    _createBackdrop(refName) {
      const backdrop = document.createElement('div')
      backdrop.className = 'modal-backdrop fade show'
      backdrop.dataset.modalRef = refName
      backdrop.addEventListener('click', () => this.hideModal(refName))
      document.body.appendChild(backdrop)
    },
    
    /**
     * ç§»é™¤é®ç½©å±‚
     * @private
     */
    _removeBackdrop(refName) {
      const backdrop = document.querySelector(`.modal-backdrop[data-modal-ref="${refName}"]`)
      if (backdrop) {
        backdrop.remove()
      }
    }
  }
}
```

### é¡µé¢ä½¿ç”¨ç¤ºä¾‹

```javascript
// src/admin/modules/user/pages/user-management.js
import { createPageMixin, modalMixin } from '@/alpine/mixins/index.js'
import { UserAPI } from '@/api/user.js'

export function userManagementPage() {
  return {
    ...createPageMixin({ pageSize: 20 }),
    ...modalMixin(),  // å¼•å…¥ Modal Mixin
    
    // ç¼–è¾‘è¡¨å•æ•°æ®
    editForm: {},
    
    // ç¼–è¾‘ç”¨æˆ·
    editUser(user) {
      this.editForm = { ...user }
      this.showModal('editUserModal')  // ä½¿ç”¨ç»Ÿä¸€ API
    },
    
    // ä¿å­˜ç”¨æˆ·
    async saveUser() {
      const result = await UserAPI.update(this.editForm.id, this.editForm)
      if (result.success) {
        this.showSuccess('ä¿å­˜æˆåŠŸ')
        this.hideModal('editUserModal')  // ä½¿ç”¨ç»Ÿä¸€ API
        this.loadData()
      }
    },
    
    // åˆ é™¤ç¡®è®¤
    confirmDelete(user) {
      this.pendingDeleteUser = user
      this.showModal('deleteConfirmModal')
    }
  }
}
```

```html
<!-- views/admin/pages/user-management.ejs -->
<div x-data="userManagementPage()">
  <!-- ç”¨æˆ·åˆ—è¡¨ -->
  <table>
    <tr x-for="user in users">
      <td x-text="user.name"></td>
      <td>
        <button @click="editUser(user)">ç¼–è¾‘</button>
        <button @click="confirmDelete(user)">åˆ é™¤</button>
      </td>
    </tr>
  </table>
  
  <!-- ç¼–è¾‘ Modalï¼ˆä½¿ç”¨ x-refï¼‰ -->
  <div x-ref="editUserModal" class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5>ç¼–è¾‘ç”¨æˆ·</h5>
          <button @click="hideModal('editUserModal')">Ã—</button>
        </div>
        <div class="modal-body">
          <input x-model="editForm.name" placeholder="ç”¨æˆ·å">
        </div>
        <div class="modal-footer">
          <button @click="hideModal('editUserModal')">å–æ¶ˆ</button>
          <button @click="saveUser()">ä¿å­˜</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- åˆ é™¤ç¡®è®¤ Modal -->
  <div x-ref="deleteConfirmModal" class="modal">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body">
          ç¡®å®šè¦åˆ é™¤ç”¨æˆ· <strong x-text="pendingDeleteUser?.name"></strong> å—ï¼Ÿ
        </div>
        <div class="modal-footer">
          <button @click="hideModal('deleteConfirmModal')">å–æ¶ˆ</button>
          <button @click="executeDelete()">ç¡®å®šåˆ é™¤</button>
        </div>
      </div>
    </div>
  </div>
</div>
```

### Tailwind CSS Modal æ ·å¼

```css
/* src/styles/components/modals.css */
@layer components {
  /* Modal å®¹å™¨ */
  .modal {
    @apply fixed inset-0 z-50 hidden overflow-y-auto;
  }
  .modal.show {
    @apply block;
  }
  
  /* Modal å¯¹è¯æ¡† */
  .modal-dialog {
    @apply relative mx-auto my-8 max-w-lg;
  }
  .modal-dialog.modal-sm {
    @apply max-w-sm;
  }
  .modal-dialog.modal-lg {
    @apply max-w-2xl;
  }
  .modal-dialog.modal-xl {
    @apply max-w-4xl;
  }
  
  /* Modal å†…å®¹ */
  .modal-content {
    @apply relative bg-white rounded-lg shadow-xl dark:bg-gray-800;
  }
  
  /* Modal å¤´éƒ¨ */
  .modal-header {
    @apply flex items-center justify-between p-4 border-b dark:border-gray-700;
  }
  .modal-header h5 {
    @apply text-lg font-semibold text-gray-900 dark:text-white;
  }
  
  /* Modal ä¸»ä½“ */
  .modal-body {
    @apply p-4;
  }
  
  /* Modal åº•éƒ¨ */
  .modal-footer {
    @apply flex justify-end gap-2 p-4 border-t dark:border-gray-700;
  }
  
  /* é®ç½©å±‚ */
  .modal-backdrop {
    @apply fixed inset-0 z-40 bg-black/50;
  }
}
```

### è¿ç§»æŒ‡å—ï¼šä» `id` è¿ç§»åˆ° `x-ref`

#### æ­¥éª¤ 1ï¼šä¿®æ”¹ HTML

```html
<!-- æ—§ï¼šä½¿ç”¨ id -->
<div class="modal" id="editUserModal">...</div>

<!-- æ–°ï¼šä½¿ç”¨ x-ref -->
<div class="modal" x-ref="editUserModal">...</div>
```

#### æ­¥éª¤ 2ï¼šä¿®æ”¹ JS è°ƒç”¨

```javascript
// æ—§ï¼šBootstrap Modal API
const modal = new bootstrap.Modal(document.getElementById('editUserModal'))
modal.show()
modal.hide()

// æ–°ï¼šMixin ç»Ÿä¸€ API
this.showModal('editUserModal')
this.hideModal('editUserModal')
```

#### æ­¥éª¤ 3ï¼šæ·»åŠ  Mixin

```javascript
// åœ¨é¡µé¢ç»„ä»¶ä¸­å¼•å…¥ modalMixin
export function userManagementPage() {
  return {
    ...modalMixin(),  // æ·»åŠ è¿™ä¸€è¡Œ
    // ... å…¶ä»–ä»£ç 
  }
}
```

### ç»´æŠ¤æ£€æŸ¥æ¸…å•

#### æ–°å¢ Modal æ—¶

- [ ] ä½¿ç”¨ `x-ref="modalName"` å®šä¹‰ Modal
- [ ] Modal åç§°é‡‡ç”¨é©¼å³°å‘½åï¼Œå¦‚ `editUserModal`ã€`deleteConfirmModal`
- [ ] é¡µé¢ç»„ä»¶å·²å¼•å…¥ `modalMixin()`
- [ ] ä½¿ç”¨ `showModal/hideModal` ç»Ÿä¸€ API

#### ä»£ç å®¡æŸ¥æ—¶

- [ ] ä¸å­˜åœ¨ `id="xxxModal"` çš„æ—§å†™æ³•
- [ ] ä¸å­˜åœ¨ `new bootstrap.Modal()` è°ƒç”¨
- [ ] ä¸å­˜åœ¨ `document.getElementById()` è·å– Modal

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šMixin åŠ è½½æ–¹æ¡ˆ

## 6ï¸âƒ£ Mixin åŠ è½½æ–¹æ¡ˆ

### å†³ç­–ï¼šé€‰æ‹© B - Vite æ¨¡å—æ‰“åŒ…

> **ä¸å†³ç­– 1 çš„å…³ç³»**ï¼šæ—¢ç„¶å·²é€‰æ‹© Vite ä½œä¸ºæ„å»ºå·¥å…·ï¼ŒMixin åŠ è½½è‡ªç„¶åº”è¯¥ä½¿ç”¨ Vite çš„æ¨¡å—æ‰“åŒ…èƒ½åŠ›ï¼Œè€Œä¸æ˜¯æ‰‹å†™ `alpine-bundle.js` åŠ è½½å™¨ã€‚

### æ–¹æ¡ˆå¯¹æ¯”

| å¯¹æ¯”é¡¹ | Aï¼ˆalpine-bundle.jsï¼‰| Bï¼ˆVite æ‰“åŒ…ï¼‰âœ… |
|--------|---------------------|------------------|
| åŠ è½½æ–¹å¼ | document.write åŒæ­¥æ³¨å…¥ | ES Module import |
| HTTP è¯·æ±‚ | 9 ä¸ªï¼ˆæ¯ä¸ª Mixin ä¸€ä¸ªï¼‰ | **1 ä¸ª**ï¼ˆæ‰“åŒ…åï¼‰ |
| ä»£ç è¯­æ³• | å…¨å±€å˜é‡ `window.xxxMixin` | ES Module `export/import` |
| ä¾èµ–ç®¡ç† | æ‰‹åŠ¨ç»´æŠ¤åŠ è½½é¡ºåº | **Vite è‡ªåŠ¨åˆ†æ** |
| å¼€å‘ä½“éªŒ | æ‰‹åŠ¨åˆ·æ–° | **çƒ­æ›´æ–°ï¼ˆHMRï¼‰** |
| ä»£ç å‹ç¼© | æ—  | **æœ‰ï¼ˆä½“ç§¯å‡å°‘ 50%+ï¼‰** |
| Tree Shaking | æ—  | **æœ‰ï¼ˆç§»é™¤æœªä½¿ç”¨ä»£ç ï¼‰** |
| ä¸å†³ç­– 1 ä¸€è‡´æ€§ | âŒ ç‹¬ç«‹æ–¹æ¡ˆ | âœ… **ç»Ÿä¸€ä½¿ç”¨ Vite** |

### ä¸ºä»€ä¹ˆæ”¹é€‰ B

1. **æ¶æ„ä¸€è‡´æ€§**ï¼šå†³ç­– 1 å·²é€‰æ‹© Viteï¼ŒMixin åº”ç»Ÿä¸€ä½¿ç”¨ Vite æ‰“åŒ…
2. **æ›´å°‘ HTTP è¯·æ±‚**ï¼š9 ä¸ªæ–‡ä»¶ â†’ 1 ä¸ªæ‰“åŒ…æ–‡ä»¶
3. **ç°ä»£è¯­æ³•**ï¼šä½¿ç”¨ ES Moduleï¼Œä»£ç æ›´æ¸…æ™°
4. **è‡ªåŠ¨ä¾èµ–ç®¡ç†**ï¼šVite è‡ªåŠ¨åˆ†æ import é¡ºåºï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤
5. **å¼€å‘æ•ˆç‡**ï¼šä¿®æ”¹ Mixin åè‡ªåŠ¨çƒ­æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°é¡µé¢

### ç›®æ ‡æ¶æ„

```
src/admin/alpine/
â”œâ”€â”€ index.js                    # ğŸ†• Alpine ç»Ÿä¸€å…¥å£ï¼ˆVite æ‰“åŒ…ï¼‰
â”œâ”€â”€ init.js                     # Storeã€Magicã€Directive æ³¨å†Œ
â”œâ”€â”€ mixins/
â”‚   â”œâ”€â”€ index.js                # Mixin ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ auth-guard.js           # ES Module æ ¼å¼
â”‚   â”œâ”€â”€ pagination.js
â”‚   â”œâ”€â”€ async-data.js
â”‚   â”œâ”€â”€ modal.js
â”‚   â”œâ”€â”€ table-selection.js
â”‚   â””â”€â”€ form-validation.js
â””â”€â”€ stores/
    â””â”€â”€ ...
```

---

## Mixin ä»£ç è¿ç§»æŒ‡å—

### è¿ç§»å‰ï¼ˆå…¨å±€å˜é‡æ¨¡å¼ï¼‰

```javascript
// public/admin/js/alpine/mixins/pagination.jsï¼ˆæ—§ï¼‰
function paginationMixin(options = {}) {
  return {
    currentPage: 1,
    pageSize: options.pageSize || 20,
    // ...
  };
}

// å¯¼å‡ºåˆ°å…¨å±€
window.paginationMixin = paginationMixin;
```

### è¿ç§»åï¼ˆES Module æ¨¡å¼ï¼‰

```javascript
// src/admin/alpine/mixins/pagination.jsï¼ˆæ–°ï¼‰
/**
 * åˆ†é¡µé€»è¾‘ Mixin
 * @param {Object} options - é…ç½®é€‰é¡¹
 * @param {number} options.pageSize - æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤ 20
 */
export function paginationMixin(options = {}) {
  return {
    currentPage: 1,
    pageSize: options.pageSize || 20,
    totalPages: 0,
    totalCount: 0,
    
    // åˆ†é¡µæ–¹æ³•
    goToPage(page) {
      if (page >= 1 && page <= this.totalPages) {
        this.currentPage = page;
        this.loadData();
      }
    },
    
    updatePagination(data) {
      this.totalCount = data.total || 0;
      this.totalPages = Math.ceil(this.totalCount / this.pageSize);
    },
    
    buildPaginationParams() {
      return {
        page: this.currentPage,
        page_size: this.pageSize
      };
    }
  };
}
```

### Mixin ç»Ÿä¸€å¯¼å‡º

```javascript
// src/admin/alpine/mixins/index.js
export { authGuardMixin } from './auth-guard.js';
export { paginationMixin } from './pagination.js';
export { asyncDataMixin } from './async-data.js';
export { modalMixin } from './modal.js';
export { tableSelectionMixin } from './table-selection.js';
export { formValidationMixin } from './form-validation.js';
  
  /**
 * åˆ›å»ºé¡µé¢ Mixin ç»„åˆ
 * @param {Object} options - é…ç½®é€‰é¡¹
 */
export function createPageMixin(options = {}) {
  return {
    ...authGuardMixin(),
    ...paginationMixin(options),
    ...asyncDataMixin(),
    ...(options.enableModal ? modalMixin() : {}),
    ...(options.enableSelection ? tableSelectionMixin() : {}),
  };
}
```

### Alpine ç»Ÿä¸€å…¥å£

```javascript
// src/admin/alpine/index.js
import Alpine from 'alpinejs';

// å¯¼å…¥æ‰€æœ‰ Mixin
import * as Mixins from './mixins/index.js';

// å¯¼å…¥åˆå§‹åŒ–é€»è¾‘
import { registerStores } from './init.js';

// æ³¨å†Œ Store
registerStores(Alpine);

// æ³¨å†Œå…¨å±€ Magic å±æ€§
Alpine.magic('mixins', () => Mixins);

// å¯åŠ¨ Alpine
Alpine.start();

console.log('âœ… Alpine.js åˆå§‹åŒ–å®Œæˆï¼ˆVite æ¨¡å¼ï¼‰');
```

---

## é¡µé¢ä½¿ç”¨æ–¹å¼

### å¼€å‘ç¯å¢ƒï¼ˆVite å¼€å‘æœåŠ¡å™¨ï¼‰

```html
<!-- views/admin/layouts/base.ejs -->
<head>
  <title><%= pageTitle %> - ç®¡ç†åå°</title>
  
  <!-- CSS -->
  <link href="/admin/dist/admin-app.css" rel="stylesheet">
</head>
<body>
  <%- body %>
  
  <!-- Vite å¼€å‘æ¨¡å¼è‡ªåŠ¨æ³¨å…¥ HMR -->
  <script type="module" src="/src/admin/main.js"></script>
</body>
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆVite æ„å»ºåï¼‰

```html
<!-- dist/admin/layouts/base.html -->
<head>
  <title>ç”¨æˆ·ç®¡ç† - ç®¡ç†åå°</title>
  
  <!-- æ‰“åŒ…åçš„ CSS -->
  <link href="/admin/assets/admin-app-[hash].css" rel="stylesheet">
</head>
<body>
  <!-- é¡µé¢å†…å®¹ -->
  
  <!-- æ‰“åŒ…åçš„ JSï¼ˆåŒ…å« Alpine + æ‰€æœ‰ Mixinï¼‰ -->
  <script type="module" src="/admin/assets/admin-app-[hash].js"></script>
</body>
```

### é¡µé¢ JS ä¸­ä½¿ç”¨ Mixin

```javascript
// src/admin/modules/user/pages/user-management.js
import { createPageMixin } from '@/alpine/mixins/index.js';
import { UserAPI } from '@/api/user.js';

export function userManagementPage() {
  return {
    // ä½¿ç”¨ç»„åˆ Mixin
    ...createPageMixin({
      pageSize: 20,
      enableSelection: true
    }),
    
    // é¡µé¢æ•°æ®
    users: [],
    
    // åˆå§‹åŒ–
    async init() {
      if (!this.checkAuth()) return;
      await this.loadData();
    },
    
    // åŠ è½½æ•°æ®
    async loadData() {
      const params = this.buildPaginationParams();
      const result = await UserAPI.list(params);
      
      if (result.success) {
        this.users = result.data.list;
        this.updatePagination(result.data);
      }
    }
  };
}
```

---

## æ–°å¢ Mixin æ“ä½œæµç¨‹ï¼ˆVite æ¨¡å¼ï¼‰

### æ­¥éª¤ 1ï¼šåˆ›å»ºæ–° Mixin æ–‡ä»¶

**ç¤ºä¾‹**: åˆ›å»º `search-filter.js`

```javascript
// src/admin/alpine/mixins/search-filter.js

/**
 * æœç´¢ç­›é€‰ Mixin
 * @param {Object} options - é…ç½®é€‰é¡¹
 */
export function searchFilterMixin(options = {}) {
  return {
    searchKeyword: '',
    filters: {},
    
    // æœç´¢æ–¹æ³•
    search() {
      this.currentPage = 1;
      this.loadData();
    },
    
    // é‡ç½®ç­›é€‰
    resetFilters() {
      this.searchKeyword = '';
      this.filters = {};
      this.search();
    },
    
    // æ„å»ºæœç´¢å‚æ•°
    buildSearchParams() {
      return {
        keyword: this.searchKeyword,
        ...this.filters
      };
    }
  };
}
```

### æ­¥éª¤ 2ï¼šåœ¨ mixins/index.js ä¸­å¯¼å‡º

```javascript
// src/admin/alpine/mixins/index.js

export { authGuardMixin } from './auth-guard.js';
export { paginationMixin } from './pagination.js';
export { asyncDataMixin } from './async-data.js';
export { modalMixin } from './modal.js';
export { tableSelectionMixin } from './table-selection.js';
export { formValidationMixin } from './form-validation.js';
export { searchFilterMixin } from './search-filter.js';  // ğŸ†• æ–°å¢
```

### æ­¥éª¤ 3ï¼šåœ¨é¡µé¢ä¸­ä½¿ç”¨

```javascript
// src/admin/modules/user/pages/user-management.js
import { createPageMixin, searchFilterMixin } from '@/alpine/mixins/index.js';

export function userManagementPage() {
  return {
    ...createPageMixin({ pageSize: 20 }),
    ...searchFilterMixin(),  // ğŸ†• ä½¿ç”¨æ–° Mixin
    
    users: [],
    
    async loadData() {
      const params = {
        ...this.buildPaginationParams(),
        ...this.buildSearchParams()  // ğŸ†• åŒ…å«æœç´¢å‚æ•°
      };
      // ...
    }
  };
}
```

### å¯¹æ¯”ï¼šæ–°å¢ Mixin æµç¨‹å˜åŒ–

| æ­¥éª¤ | æ—§æ–¹æ¡ˆï¼ˆalpine-bundle.jsï¼‰ | æ–°æ–¹æ¡ˆï¼ˆViteï¼‰âœ… |
|------|---------------------------|------------------|
| 1 | åˆ›å»ºæ–‡ä»¶ + `window.xxx = xxx` | åˆ›å»ºæ–‡ä»¶ + `export` |
| 2 | ä¿®æ”¹ `alpine-bundle.js` SCRIPTS æ•°ç»„ | åœ¨ `index.js` ä¸­ `export` |
| 3 | ï¼ˆå¯é€‰ï¼‰ä¿®æ”¹ `mixins/index.js` | åœ¨é¡µé¢ä¸­ `import` |
| **ç»´æŠ¤ç‚¹** | **2-3 å¤„** | **2 å¤„** |
| **è‡ªåŠ¨ä¾èµ–** | âŒ æ‰‹åŠ¨ç»´æŠ¤é¡ºåº | âœ… Vite è‡ªåŠ¨åˆ†æ |

---

## Vite é…ç½®è¯¦è§£

### vite.config.js å®Œæ•´é…ç½®

```javascript
// vite.config.js
import { defineConfig } from 'vite';
import { resolve } from 'path';
import { glob } from 'glob';

// è‡ªåŠ¨æ”¶é›†æ‰€æœ‰ HTML å…¥å£ï¼ˆæ”¯æŒ 61 ä¸ªé¡µé¢ï¼‰
const htmlFiles = glob.sync('views/admin/pages/*.ejs');
const input = {
  main: resolve(__dirname, 'views/admin/pages/dashboard.ejs'),
  ...Object.fromEntries(
    htmlFiles.map(file => [
      file.replace('views/admin/pages/', '').replace('.ejs', ''),
      resolve(__dirname, file)
    ])
  )
};

export default defineConfig({
  root: './',
  base: '/admin/',
  
  build: {
    outDir: 'dist/admin',
    rollupOptions: {
      input,
      output: {
        // JS æ–‡ä»¶å‘½å
        entryFileNames: 'assets/[name]-[hash].js',
        chunkFileNames: 'assets/[name]-[hash].js',
        assetFileNames: 'assets/[name]-[hash].[ext]',
        
        // ä»£ç åˆ†å‰²ç­–ç•¥
        manualChunks: {
          // Alpine.js å•ç‹¬æ‰“åŒ…
          'alpine': ['alpinejs'],
          // Mixins å•ç‹¬æ‰“åŒ…
          'mixins': [
            './src/admin/alpine/mixins/index.js'
          ],
          // å…¬å…±å·¥å…·å•ç‹¬æ‰“åŒ…
          'vendor': ['lodash-es', 'dayjs']
        }
      }
    },
    // å‹ç¼©é…ç½®
    minify: 'esbuild',
    sourcemap: true
  },
  
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src/admin')
      }
  },
  
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true
      }
    }
  },
  
  // å¼€å‘æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
  preview: {
    port: 4173
  }
});
```

### package.json è„šæœ¬é…ç½®

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "build:watch": "vite build --watch"
  },
  "devDependencies": {
    "vite": "^5.0.0",
    "glob": "^10.0.0"
  },
  "dependencies": {
    "alpinejs": "^3.13.0"
  }
}
```

---

## è°ƒè¯•æŒ‡å—ï¼ˆVite æ¨¡å¼ï¼‰

### å¼€å‘ç¯å¢ƒè°ƒè¯•

```bash
# å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
npm run dev

# æ§åˆ¶å°è¾“å‡º
  VITE v5.0.0  ready in 300 ms

  âœ  Local:   http://localhost:5173/admin/
  âœ  Network: use --host to expose
  âœ  press h to show help
```

### æ£€æŸ¥ Alpine åŠ è½½çŠ¶æ€

```javascript
// æµè§ˆå™¨æ§åˆ¶å°
console.log(Alpine);  // åº”è¾“å‡º Alpine å¯¹è±¡
console.log(Alpine.version);  // åº”è¾“å‡ºç‰ˆæœ¬å·

// æ£€æŸ¥ Store æ˜¯å¦æ³¨å†Œ
console.log(Alpine.store('auth'));
console.log(Alpine.store('ui'));
```

### æ£€æŸ¥ Mixin æ˜¯å¦å¯ç”¨

```javascript
// é€šè¿‡ import éªŒè¯ï¼ˆåœ¨æ¨¡å—ä¸­ï¼‰
import { paginationMixin, createPageMixin } from '@/alpine/mixins/index.js';

console.log(typeof paginationMixin);  // 'function'
console.log(createPageMixin());       // Mixin å¯¹è±¡

// åœ¨ç»„ä»¶ä¸­éªŒè¯
// x-data="testPage()" çš„ testPage å‡½æ•°ä¸­
console.log(this.currentPage);        // æ¥è‡ª paginationMixin
console.log(this.checkAuth);          // æ¥è‡ª authGuardMixin
```

### å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| `import` æŠ¥é”™ | æ–‡ä»¶è·¯å¾„é”™è¯¯ | æ£€æŸ¥ `@` åˆ«åé…ç½®å’Œæ–‡ä»¶è·¯å¾„ |
| HMR ä¸ç”Ÿæ•ˆ | æ–‡ä»¶æœªè¢« Vite ç›‘å¬ | ç¡®ä¿æ–‡ä»¶åœ¨ `src/` ç›®å½•ä¸‹ |
| Alpine æœªå®šä¹‰ | å…¥å£æ–‡ä»¶æœªåŠ è½½ | æ£€æŸ¥ HTML ä¸­ `<script type="module">` |
| æ‰“åŒ…åæŠ¥é”™ | Tree Shaking è¯¯åˆ ä»£ç  | æ£€æŸ¥ export æ˜¯å¦æ­£ç¡® |

### Vite è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹ä¾èµ–åˆ†æ
npx vite-bundle-visualizer

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run build && npm run preview

# æ£€æŸ¥æ„å»ºè¾“å‡º
ls -la dist/admin/assets/
```

---

## ç»´æŠ¤æ£€æŸ¥æ¸…å•ï¼ˆVite æ¨¡å¼ï¼‰

### æ–°å¢ Mixin æ—¶

- [ ] åˆ›å»º `src/admin/alpine/mixins/xxx.js` æ–‡ä»¶
- [ ] ä½¿ç”¨ `export function xxxMixin() { ... }` å¯¼å‡º
- [ ] åœ¨ `mixins/index.js` ä¸­ `export { xxxMixin } from './xxx.js'`
- [ ] åœ¨é¡µé¢ä¸­ `import { xxxMixin } from '@/alpine/mixins/index.js'`
- [ ] æµ‹è¯•ï¼šHMR è‡ªåŠ¨æ›´æ–°ï¼ŒåŠŸèƒ½æ­£å¸¸

### åˆ é™¤ Mixin æ—¶

- [ ] ä» `mixins/index.js` ä¸­ç§»é™¤ export
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰é¡µé¢ import è¯¥ Mixin
- [ ] åˆ é™¤ Mixin æ–‡ä»¶
- [ ] è¿è¡Œ `npm run build` ç¡®è®¤æ— æŠ¥é”™

### å®šæœŸæ£€æŸ¥

- [ ] `npm run dev` æ— è­¦å‘Š
- [ ] `npm run build` æ„å»ºæˆåŠŸ
- [ ] æ‰“åŒ…ä½“ç§¯ç¬¦åˆé¢„æœŸï¼ˆ< 200KBï¼‰
- [ ] æ‰€æœ‰é¡µé¢åŠŸèƒ½æ­£å¸¸

---

# ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®æ–½è·¯çº¿å›¾

## å®æ–½é˜¶æ®µè§„åˆ’

### é˜¶æ®µä¸€ï¼šåŸºç¡€è®¾æ–½ï¼ˆç¬¬ 1 å‘¨ï¼‰âœ… å·²å®Œæˆ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| å®‰è£…é…ç½® Vite | P0 | âœ… å·²å®Œæˆ |
| åˆ›å»º `src/` æºç ç›®å½•ç»“æ„ | P0 | âœ… å·²å®Œæˆ |
| é…ç½® vite.config.js | P0 | âœ… å·²å®Œæˆ |
| è¿ç§» Mixin ä¸º ES Module æ ¼å¼ | P0 | âœ… å·²å®Œæˆ |
| åˆ›å»º Alpine ç»Ÿä¸€å…¥å£ `alpine/index.js` | P0 | âœ… å·²å®Œæˆ |

### é˜¶æ®µäºŒï¼šAPI å±‚é‡æ„ï¼ˆç¬¬ 2 å‘¨ï¼‰âœ… å·²å®Œæˆ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| åˆ›å»º `src/api/base.js` åŸºç¡€è¯·æ±‚å°è£… | P0 | âœ… å·²å®Œæˆ |
| è¿ç§»ç”¨æˆ·æ¨¡å— API | P1 | âœ… å·²å®Œæˆ |
| è¿ç§»æŠ½å¥–æ¨¡å— API | P1 | âœ… å·²å®Œæˆ |
| è¿ç§»èµ„äº§æ¨¡å— API | P1 | âœ… å·²å®Œæˆ |
| è¿ç§»å…¶ä»–æ¨¡å— APIï¼ˆmarket/content/system/analytics/storeï¼‰ | P2 | âœ… å·²å®Œæˆ |

### é˜¶æ®µä¸‰ï¼šæ¨¡å—åŒ–é‡æ„ï¼ˆç¬¬ 3-4 å‘¨ï¼‰âœ… å·²å®Œæˆ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| é‡æ„ç”¨æˆ·æ¨¡å—é¡µé¢ JSï¼ˆuser-management/user-hierarchyï¼‰ | P1 | âœ… å·²å®Œæˆ |
| é‡æ„æŠ½å¥–æ¨¡å—é¡µé¢ JSï¼ˆlottery-management/presetsï¼‰ | P1 | âœ… å·²å®Œæˆ |
| é‡æ„èµ„äº§æ¨¡å—é¡µé¢ JSï¼ˆasset-management/asset-adjustment/assets-portfolioï¼‰ | P1 | âœ… å·²å®Œæˆ |
| é‡æ„å¸‚åœºæ¨¡å—é¡µé¢ JSï¼ˆmarket-management/exchange-market/trade-managementï¼‰ | P2 | âœ… å·²å®Œæˆ |
| é‡æ„å…¶ä»–æ¨¡å—é¡µé¢ JSï¼ˆanalytics/content/store/system å…±28ä¸ªï¼‰ | P2 | âœ… å·²å®Œæˆ |

### é˜¶æ®µå››ï¼šæ¨¡æ¿å¼•æ“æ¥å…¥ï¼ˆç¬¬ 5 å‘¨ï¼‰âœ… å·²å®Œæˆ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| å®‰è£…é…ç½® `vite-plugin-ejs` | P0 | âœ… å·²å®Œæˆ |
| åˆ›å»º `src/templates/layouts/base.ejs` åŸºç¡€æ¨¡æ¿ | P0 | âœ… å·²å®Œæˆ |
| åˆ›å»ºå…¬å…±ç»„ä»¶ `partials/*.ejs`ï¼ˆheadã€navbarã€footerã€modalã€tableã€paginationã€filter-barï¼‰ | P1 | âœ… å·²å®Œæˆ |
| è¿ç§»æ‰€æœ‰ 28 ä¸ªé¡µé¢ä¸º EJS æ¨¡æ¿ï¼ˆä½¿ç”¨ include è¯­æ³•ï¼‰ | P1 | âœ… å·²å®Œæˆ |
| æ›´æ–° `vite.config.js` é…ç½® EJS æ’ä»¶å’Œæ¨¡æ¿è·¯å¾„ | P1 | âœ… å·²å®Œæˆ |
| Tailwind CSS é™çº§åˆ° v3ï¼ˆå…¼å®¹æ€§ä¼˜åŒ–ï¼‰ | P1 | âœ… å·²å®Œæˆ |

> **å®Œæˆè¯´æ˜**:
> - æ‰€æœ‰ 28 ä¸ª HTML é¡µé¢å·²è¿ç§»ä¸ºä½¿ç”¨ EJS include è¯­æ³•
> - åˆ›å»ºäº† 8 ä¸ªå…¬å…± EJS partials ç»„ä»¶
> - æ„å»ºæµ‹è¯•é€šè¿‡ï¼Œæ‰€æœ‰é¡µé¢æ­£å¸¸ç”Ÿæˆ

### é˜¶æ®µäº”ï¼šTailwind CSS è¿ç§»ï¼ˆç¬¬ 6-7 å‘¨ï¼‰âœ… å·²å®Œæˆ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| å®‰è£…é…ç½® Tailwind CSS v3 | P0 | âœ… å·²å®Œæˆ |
| åˆ›å»º `tailwind.config.js` | P0 | âœ… å·²å®Œæˆ |
| åˆ›å»º `src/styles/index.css`ï¼ˆ@layer å°è£… + CSS å˜é‡ï¼‰ | P0 | âœ… å·²å®Œæˆ |
| è¿ç§»å…¬å…±ç»„ä»¶æ ·å¼ï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€è¡¨æ ¼ã€è¡¨å•ã€Modalï¼‰ | P1 | âœ… å·²å®Œæˆ |
| è¿ç§»ä¾§è¾¹æ å’Œå¯¼èˆªæ æ ·å¼ | P1 | âœ… å·²å®Œæˆ |
| è¿ç§»æ‰€æœ‰ 28 ä¸ªé¡µé¢æ ·å¼ | P1 | âœ… å·²å®Œæˆ |
| ç§»é™¤ Bootstrap ä¾èµ–ï¼ˆHTML å·²ä½¿ç”¨ Tailwind ç±»åï¼‰ | P2 | âœ… å·²å®Œæˆ |
| æ·»åŠ æš—è‰²ä¸»é¢˜æ”¯æŒ | P2 | ğŸ”œ å¾…æ‰§è¡Œï¼ˆå¯é€‰ï¼‰ |

---

## æœ€ç»ˆç›®æ ‡æ¶æ„ï¼ˆæ–¹æ¡ˆ C-Liteï¼‰

> **è®¾è®¡åŸåˆ™**ï¼šå‰ç«¯ä»£ç ç»Ÿä¸€æ”¾å…¥ `admin/` ç›®å½•ï¼Œåç«¯ä»£ç ä¿æŒåŸä½ä¸åŠ¨ï¼Œå®ç°å‰åç«¯èŒè´£æ¸…æ™°åˆ†ç¦»ã€‚
> 
> **å½“å‰çŠ¶æ€**ï¼šâœ… é˜¶æ®µä¸€è‡³äº”å…¨éƒ¨å®Œæˆï¼Œå‰ç«¯æ¶æ„é‡æ„å·²å®Œæˆ

```
/home/devbox/project/
â”‚
â”œâ”€â”€ ğŸ“‚ admin/                         # ========== å‰ç«¯ç»Ÿä¸€ç›®å½• ==========
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ package.json               # âœ… å‰ç«¯ç‹¬ç«‹åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ package-lock.json          # âœ… ä¾èµ–é”å®šæ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ vite.config.js             # âœ… Vite é…ç½®ï¼ˆåœ¨ admin/ ç›®å½•ä¸‹ï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ tailwind.config.js         # âœ… Tailwind é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ postcss.config.cjs         # âœ… PostCSS é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ src/                       # âœ… Vite æºç ï¼ˆES Moduleï¼‰
â”‚   â”‚   â”œâ”€â”€ main.js                   # âœ… å…¥å£æ–‡ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ api/                   # âœ… API å±‚ï¼ˆåˆ†æ•£å¼æ¨¡å—åŒ–ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ base.js               # âœ… HTTP è¯·æ±‚å°è£…ï¼ˆrequest/http/token ç®¡ç†ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js              # âœ… ç»Ÿä¸€å¯¼å‡ºï¼ˆre-export æ‰€æœ‰æ¨¡å—ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ user.js               # âœ… ç”¨æˆ·ç®¡ç† API
â”‚   â”‚   â”‚   â”œâ”€â”€ lottery.js            # âœ… æŠ½å¥–ç³»ç»Ÿ API
â”‚   â”‚   â”‚   â”œâ”€â”€ asset.js              # âœ… èµ„äº§ç®¡ç† API
â”‚   â”‚   â”‚   â”œâ”€â”€ market.js             # âœ… å¸‚åœºäº¤æ˜“ API
â”‚   â”‚   â”‚   â”œâ”€â”€ store.js              # âœ… é—¨åº—ç®¡ç† API
â”‚   â”‚   â”‚   â”œâ”€â”€ system.js             # âœ… ç³»ç»Ÿé…ç½® API
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics.js          # âœ… æ•°æ®åˆ†æ API
â”‚   â”‚   â”‚   â””â”€â”€ legacy.js             # ğŸ”œ æ—§ç‰ˆå…¼å®¹ï¼ˆè¿‡æ¸¡æœŸä¿ç•™ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ alpine/                # âœ… Alpine.js ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js              # âœ… Alpine åˆå§‹åŒ–å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ init.js               # âœ… Store/Magic/Directive æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ mixins/            # âœ… Mixin é›†åˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth-guard.js     # âœ… è®¤è¯å®ˆå«
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pagination.js     # âœ… åˆ†é¡µé€»è¾‘
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ async-data.js     # âœ… å¼‚æ­¥æ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ modal.js          # âœ… Modal ç®¡ç†ï¼ˆx-refï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ table-selection.js # âœ… è¡¨æ ¼å¤šé€‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form-validation.js # âœ… è¡¨å•éªŒè¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.js          # âœ… ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ stores/            # âœ… Alpine Store
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/        # âœ… å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ directives/        # âœ… è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ plugins/           # âœ… Alpine æ’ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ modules/               # âœ… åŠŸèƒ½æ¨¡å—ï¼ˆæŒ‰ä¸šåŠ¡åˆ’åˆ†ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ user/              # âœ… ç”¨æˆ·æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ lottery/           # âœ… æŠ½å¥–æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ asset/             # âœ… èµ„äº§æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ market/            # âœ… å¸‚åœºäº¤æ˜“æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ store/             # âœ… é—¨åº—æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ content/           # âœ… å†…å®¹ç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ system/            # âœ… ç³»ç»Ÿç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ analytics/         # âœ… æ•°æ®åˆ†ææ¨¡å—
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ styles/                # âœ… Tailwind CSS æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ index.css             # âœ… Tailwind å…¥å£ï¼ˆ@tailwindï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ base/              # âœ… è‡ªå®šä¹‰åŸºç¡€æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/        # âœ… @apply å°è£…çš„ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ utilities/         # âœ… è‡ªå®šä¹‰å·¥å…·ç±»
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ templates/             # ğŸ”œ Vite æ„å»ºæ—¶æ¨¡æ¿ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ layouts/           # ğŸ”œ åŸºç¡€æ¨¡æ¿
â”‚   â”‚       â”‚   â””â”€â”€ base.ejs          # ğŸ”œ å¯¼èˆªã€è„šæœ¬ã€æ ·å¼
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ partials/          # ğŸ”œ å…¬å…±ç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ navbar.ejs        # ğŸ”œ é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚       â”‚   â”œâ”€â”€ sidebar.ejs       # ğŸ”œ ä¾§è¾¹æ èœå•
â”‚   â”‚       â”‚   â””â”€â”€ footer.ejs        # ğŸ”œ é¡µè„š
â”‚   â”‚       â””â”€â”€ ğŸ“‚ pages/             # ğŸ”œ é¡µé¢æ¨¡æ¿
â”‚   â”‚           â””â”€â”€ ... (å…± 61 ä¸ªé¡µé¢)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ public/                    # âœ… é™æ€èµ„æºï¼ˆä¸ç» Vite å¤„ç†ï¼‰
â”‚   â”‚   â””â”€â”€ ğŸ“‚ images/                # âœ… å›¾ç‰‡èµ„æº
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ dist/                      # âœ… Vite æ„å»ºè¾“å‡ºï¼ˆç”Ÿäº§ç¯å¢ƒï¼Œçº¯é™æ€ï¼‰
â”‚       â”œâ”€â”€ ğŸ“‚ assets/                # âœ… æ‰“åŒ…åçš„ JS/CSS
â”‚       â”‚   â”œâ”€â”€ main-[hash].js
â”‚       â”‚   â””â”€â”€ main-[hash].css
â”‚       â”œâ”€â”€ ğŸ“‚ images/                # âœ… å¤åˆ¶çš„é™æ€å›¾ç‰‡
â”‚       â”œâ”€â”€ dashboard.html            # âœ… æ„å»ºæ—¶ç”Ÿæˆçš„é™æ€ HTML
â”‚       â”œâ”€â”€ user-management.html
â”‚       â””â”€â”€ ... (å…± 61 ä¸ª HTML é¡µé¢)
â”‚
â”‚
â”œâ”€â”€ ğŸ“‚ åç«¯ä»£ç ï¼ˆä¿æŒåŸä½ï¼Œå®Œå…¨ä¸åŠ¨ï¼‰
â”‚   â”œâ”€â”€ app.js                        # Express å…¥å£
â”‚   â”œâ”€â”€ ğŸ“‚ routes/                    # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ admin/                 # ç®¡ç†åå° API
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ api/                   # å…¬å¼€ API
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ ğŸ“‚ services/                  # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ ğŸ“‚ repositories/              # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ ğŸ“‚ models/                    # Sequelize æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“‚ middleware/                # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“‚ jobs/                      # å®šæ—¶ä»»åŠ¡
â”‚   â”œâ”€â”€ ğŸ“‚ callbacks/                 # å›è°ƒå¤„ç†
â”‚   â”œâ”€â”€ ğŸ“‚ constants/                 # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ ğŸ“‚ data/                      # æ•°æ®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“‚ æ•°æ®åº“ç›¸å…³ï¼ˆä¿æŒåŸä½ï¼‰
â”‚   â”œâ”€â”€ ğŸ“‚ migrations/                # è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ ğŸ“‚ seeders/                   # ç§å­æ•°æ®
â”‚
â”œâ”€â”€ ğŸ“‚ è¿ç»´å’Œå·¥å…·ï¼ˆä¿æŒåŸä½ï¼‰
â”‚   â”œâ”€â”€ ğŸ“‚ scripts/                   # è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“‚ tests/                     # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“‚ logs/                      # æ—¥å¿—
â”‚   â”œâ”€â”€ ğŸ“‚ uploads/                   # ä¸Šä¼ æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“‚ backups/                   # å¤‡ä»½æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“‚ public/                        # ä¿ç•™ï¼ˆè¿‡æ¸¡æœŸå¤‡ä»½ï¼‰
â”‚   â”œâ”€â”€ ğŸ“‚ admin/                     # æ—§å‰ç«¯ä»£ç ï¼ˆè¿ç§»å®Œæˆåå¯åˆ é™¤ï¼‰
â”‚   â””â”€â”€ ğŸ“‚ reports/                   # æŠ¥è¡¨æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“‚ node_modules/                  # åç«¯ä¾èµ–åŒ…
â”‚
â”œâ”€â”€ ğŸ“„ åç«¯é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json                  # åç«¯ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ ecosystem.config.js           # PM2 é…ç½®
â”‚   â”œâ”€â”€ jest.config.js                # æµ‹è¯•é…ç½®
â”‚   â””â”€â”€ commitlint.config.js          # æäº¤è§„èŒƒ
â”‚
â””â”€â”€ ğŸ“„ å…¶ä»–æ–‡ä»¶
    â”œâ”€â”€ .env                          # ç¯å¢ƒå˜é‡
    â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥é…ç½®
    â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

### æ–¹æ¡ˆ C-Lite çš„ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|-----|------|
| âœ… å‰ç«¯ä»£ç é›†ä¸­ | æ‰€æœ‰å‰ç«¯æ–‡ä»¶éƒ½åœ¨ `admin/` ç›®å½•ä¸‹ |
| âœ… åç«¯é›¶å½±å“ | åç«¯ä»£ç å®Œå…¨ä¸åŠ¨ï¼Œæ— éœ€ä¿®æ”¹è·¯å¾„ |
| âœ… èŒè´£æ¸…æ™° | ä¸€çœ¼åŒºåˆ†å‰ç«¯ï¼ˆ`admin/`ï¼‰å’Œåç«¯ï¼ˆ`routes/`ã€`services/`ï¼‰ |
| âœ… ç‹¬ç«‹åŒ…ç®¡ç† | `admin/package.json` ç‹¬ç«‹ç®¡ç†å‰ç«¯ä¾èµ– |
| âœ… æ˜“å›æ»š | `public/admin/` ä¿ç•™ä½œä¸ºå¤‡ä»½ |

### å½“å‰é…ç½®æ–‡ä»¶ï¼ˆå·²å®ç°ï¼‰

```javascript
// admin/vite.config.js - é…ç½®åœ¨ admin/ ç›®å½•ä¸‹
import { defineConfig } from 'vite'
import { resolve } from 'path'

export default defineConfig({
  root: resolve(__dirname),           // admin/ ä¸ºæ ¹ç›®å½•
  base: '/admin/',
  build: {
    outDir: resolve(__dirname, 'dist'),
    // ...
  },
  resolve: {
    alias: { '@': resolve(__dirname, 'src') }
  },
  server: {
    port: 5173,
    proxy: {
      '/api': { target: 'http://localhost:3000', changeOrigin: true }
    }
  }
})

// admin/tailwind.config.js - æ‰«æ admin/ ç›®å½•
export default {
  content: [
    './views/**/*.ejs',
    './src/**/*.{js,ts,jsx,tsx}',
  ]
}

// admin/package.json - ç‹¬ç«‹å‰ç«¯ä¾èµ–
{
  "name": "restaurant-lottery-admin",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": { "alpinejs": "^3.15.4" },
  "devDependencies": { "vite": "^6.4.1", "tailwindcss": "^3.4.17" }
}

// åç«¯ app.js - ä»…éœ€é…ç½®é™æ€æ–‡ä»¶ç›®å½•ï¼ˆæ— éœ€æ¨¡æ¿å¼•æ“ï¼‰
// Vite æ„å»ºæ—¶å·²å¤„ç†æ¨¡æ¿ï¼Œè¾“å‡ºçº¯é™æ€ HTML
app.use('/admin', express.static(path.join(__dirname, 'admin/dist')))
```

---

## é¢„æœŸæ”¶ç›Š

| æŒ‡æ ‡ | æ”¹é€ å‰ | æ”¹é€ å | æå‡ |
|------|--------|--------|------|
| HTML å…¬å…±ä¿®æ”¹ | æ”¹ 61 å¤„ | æ”¹ 1 å¤„ | **98%** â¬‡ï¸ |
| API è·¯å¾„ä¿®æ”¹ | æ”¹ 38 å¤„ | æ”¹ 1 å¤„ | **97%** â¬‡ï¸ |
| JS æ–‡ä»¶ HTTP è¯·æ±‚ | 10+ ä¸ª | 1-2 ä¸ª | **80%** â¬‡ï¸ |
| JS æ€»ä½“ç§¯ | ~500KB | ~200KB | **60%** â¬‡ï¸ |
| CSS æ¡†æ¶ä½“ç§¯ | ~200KB (Bootstrap) | **~10KB** (Tailwind) | **95%** â¬‡ï¸ |
| æš—è‰²ä¸»é¢˜æ”¯æŒ | âŒ æ—  | âœ… åŸç”Ÿæ”¯æŒ | ğŸ†• |
| æ–°é¡µé¢å¼€å‘æ—¶é—´ | ~2 å°æ—¶ | ~30 åˆ†é’Ÿ | **75%** â¬‡ï¸ |

---

## å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| 1.0.0 | 2026-01-23 | åˆå§‹ç‰ˆæœ¬ï¼Œåˆ›å»º Mixin ç»Ÿä¸€åŠ è½½å™¨æ–¹æ¡ˆ | - |
| 2.0.0 | 2026-01-23 | **é‡å¤§æ›´æ–°**ï¼šæ–°å¢ 5 é¡¹æ¶æ„å†³ç­–ï¼ˆå…¨é€‰ B æ–¹æ¡ˆï¼‰ | é¡¹ç›®è´Ÿè´£äºº |
| | | - 1ï¸âƒ£ å¼•å…¥æ„å»ºå·¥å…· | |
| | | - 2ï¸âƒ£ HTML æ¨¡æ¿ç»Ÿä¸€åŒ–ï¼ˆæ¨¡æ¿å¼•æ“ï¼‰ | |
| | | - 3ï¸âƒ£ JS æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ | |
| | | - 4ï¸âƒ£ API å±‚é›†ä¸­ç®¡ç† | |
| | | - 5ï¸âƒ£ CSS å˜é‡ + ç»„ä»¶åŒ– | |
| 2.1.0 | 2026-01-23 | æ„å»ºå·¥å…·ä» esbuild æ”¹ä¸º **Vite** | é¡¹ç›®è´Ÿè´£äºº |
| | | - Vite åº•å±‚ç”¨ esbuildï¼Œé€Ÿåº¦ä¸€æ ·å¿« | |
| | | - å†…ç½®çƒ­æ›´æ–°ï¼ˆHMRï¼‰ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ | |
| | | - åŸç”Ÿæ”¯æŒå¤šé¡µåº”ç”¨ï¼Œé€‚åˆ 61 ä¸ª HTML | |
| 2.2.0 | 2026-01-23 | **å†³ç­– 6 æ”¹ä¸º B**ï¼šMixin åŠ è½½ä» alpine-bundle.js æ”¹ä¸º **Vite æ¨¡å—æ‰“åŒ…** | é¡¹ç›®è´Ÿè´£äºº |
| | | - ä¸å†³ç­– 1ï¼ˆViteï¼‰ä¿æŒæ¶æ„ä¸€è‡´æ€§ | |
| | | - ä½¿ç”¨ ES Module æ›¿ä»£å…¨å±€å˜é‡ | |
| | | - HTTP è¯·æ±‚ä» 9 ä¸ªå‡å°‘åˆ° 1 ä¸ª | |
| | | - åºŸå¼ƒ alpine-bundle.js æ–¹æ¡ˆ | |
| 2.3.0 | 2026-01-23 | **æ–°å¢å†³ç­– 7**ï¼šCSS æ¡†æ¶ä» Bootstrap æ”¹ä¸º **Tailwind CSS** | é¡¹ç›®è´Ÿè´£äºº |
| | | - Tailwind + Alpine.js æ˜¯ä¸šç•Œæœ€ä½³æ­æ¡£ | |
| | | - æ‰“åŒ…ä½“ç§¯ä» ~200KB é™è‡³ ~10KB | |
| | | - åŸç”Ÿæ”¯æŒæš—è‰²ä¸»é¢˜ï¼ˆ`dark:` å‰ç¼€ï¼‰ | |
| | | - ä¸ Vite å®Œç¾é›†æˆ | |
| 2.4.0 | 2026-01-23 | **æ–°å¢å†³ç­– 8**ï¼šModal ç®¡ç†ç»Ÿä¸€ä½¿ç”¨ **x-ref + Mixin å°è£…** | é¡¹ç›®è´Ÿè´£äºº |
| | | - è§£å†³é¡¹ç›®ä¸­ `id` ä¸ `x-ref` æ··ç”¨çš„ä¸ä¸€è‡´é—®é¢˜ | |
| | | - `x-ref` æ˜¯ Alpine.js åŸç”Ÿ APIï¼Œç»„ä»¶å°è£…æ€§æ›´å¼º | |
| | | - Mixin æä¾›ç»Ÿä¸€çš„ `showModal/hideModal/toggleModal` API | |
| | | - ä¸ Tailwind + Alpine æŠ€æœ¯æ ˆå®Œç¾å¥‘åˆ | |
| | | - è¡Œä¸šå‚è€ƒï¼šæ¸¸æˆå…¬å¸ã€è™šæ‹Ÿç‰©å“äº¤æ˜“å¹³å°å‡é‡‡ç”¨æ­¤æ–¹æ¡ˆ | |
| 2.5.0 | 2026-01-23 | **ç›®å½•æ¶æ„ä¼˜åŒ–**ï¼šé‡‡ç”¨ **æ–¹æ¡ˆ C-Lite** æ•´ç†å‰ç«¯ç›®å½• | é¡¹ç›®è´Ÿè´£äºº |
| | | - å‰ç«¯ä»£ç ç»Ÿä¸€æ”¾å…¥ `admin/` ç›®å½•ï¼ˆsrc/views/public/distï¼‰ | |
| | | - åç«¯ä»£ç ä¿æŒåŸä½ï¼Œå®Œå…¨ä¸åŠ¨ï¼ˆé›¶é£é™©ï¼‰ | |
| | | - è§£å†³å‰ç«¯åˆ†æ•£åœ¨å¤šä¸ªç›®å½•çš„æ··ä¹±é—®é¢˜ | |
| | | - æ›´æ–°é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆvite/tailwind/app.jsï¼‰ | |
| | | - å®ç°å‰åç«¯èŒè´£æ¸…æ™°åˆ†ç¦»ï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤ | |
| 2.6.0 | 2026-01-23 | **æ–‡æ¡£åŒæ­¥æ›´æ–°**ï¼šæ ¹æ®å®é™…å®ç°æ›´æ–°ç›®æ ‡æ¶æ„ | - |
| | | - é…ç½®æ–‡ä»¶ä½ç½®ï¼š`vite.config.js`ã€`tailwind.config.js` åœ¨ `admin/` ç›®å½•ä¸‹ | |
| | | - æ–°å¢ `admin/package.json` ç‹¬ç«‹å‰ç«¯åŒ…ç®¡ç† | |
| | | - æ–°å¢ `alpine/init.js`ã€`postcss.config.cjs` | |
| | | - æ ‡æ³¨æ¨¡æ¿è¿ç§»çŠ¶æ€ï¼ˆğŸ”œ å¾…æ‰§è¡Œï¼‰ | |
| 2.7.0 | 2026-01-23 | **API æ¶æ„å˜æ›´**ï¼šä»é›†ä¸­å¼æ”¹ä¸º**åˆ†æ•£å¼**ï¼ˆæŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†ï¼‰ | é¡¹ç›®è´Ÿè´£äºº |
| | | - æ¯ä¸ªä¸šåŠ¡æ¨¡å—ç‹¬ç«‹ä¸€ä¸ª API æ–‡ä»¶ï¼ˆuser.jsã€lottery.jsã€asset.js ç­‰ï¼‰ | |
| | | - `index.js` æ”¹ä¸ºç»Ÿä¸€å¯¼å‡ºï¼ˆre-exportï¼‰ï¼Œä¸å†åŒ…å«å…·ä½“å®ç° | |
| | | - å˜æ›´åŸå› ï¼šå½“å‰é›†ä¸­å¼ `index.js` å·²æœ‰ 716 è¡Œï¼Œéš¾ä»¥ç»´æŠ¤ | |
| | | - è¡Œä¸šå‚è€ƒï¼šå¤§å‚ã€æ¸¸æˆå…¬å¸ã€è™šæ‹Ÿç‰©å“äº¤æ˜“å¹³å°å‡é‡‡ç”¨åˆ†æ•£å¼ | |
| | | - ä¼˜åŠ¿ï¼šGit å†²çªå‡å°‘ã€æ¨¡å—è¾¹ç•Œæ¸…æ™°ã€Tree Shaking æ›´å¥½ | |
| 2.8.0 | 2026-01-23 | **å†³ç­– 2 å˜æ›´**ï¼šHTML æ¨¡æ¿ä» **EJS + Express** æ”¹ä¸º **Vite æ„å»ºæ—¶æ¨¡æ¿** | é¡¹ç›®è´Ÿè´£äºº |
| | | - ä½¿ç”¨ `vite-plugin-ejs` åœ¨æ„å»ºæ—¶å¤„ç†æ¨¡æ¿ | |
| | | - **åç«¯é›¶æ”¹åŠ¨**ï¼šæ— éœ€é…ç½® Express æ¸²æŸ“ EJS | |
| | | - è¾“å‡ºçº¯é™æ€ HTMLï¼Œå¯ç›´æ¥éƒ¨ç½²åˆ° Nginx/CDN | |
| | | - ä¸ Vite æ·±åº¦é›†æˆï¼šHMR çƒ­æ›´æ–°ã€èµ„æºå¤„ç†ã€æ„å»ºä¼˜åŒ– | |
| | | - ä¿ç•™ EJS è¯­æ³•ä¼˜åŠ¿ï¼šæ¨¡æ¿ç»§æ‰¿ã€ç»„ä»¶å¤ç”¨ã€å˜é‡æ³¨å…¥ | |
| | | - å˜æ›´åŸå› ï¼šç®¡ç†åå°æ— éœ€æœåŠ¡ç«¯æ•°æ®æ³¨å…¥ï¼Œé™æ€æ–¹æ¡ˆæ›´ç®€å• | |

---

## é™„å½•ï¼šå†³ç­–ä¾æ®å‚è€ƒ

### è¡Œä¸šå®è·µå¯¹æ¯”

| å…¬å¸ç±»å‹ | æ„å»ºå·¥å…· | HTML æ¨¡æ¿ | JS ç»„ç»‡ | API å±‚ | CSS æ¡†æ¶ | Modal æ–¹æ¡ˆ |
|----------|----------|----------|---------|--------|----------|------------|
| å¤§å‚ï¼ˆé˜¿é‡Œ/è…¾è®¯ï¼‰ | Webpack/Vite | SPA | å¾®å‰ç«¯ | **åˆ†æ•£å¼** + è‡ªåŠ¨ç”Ÿæˆ | è‡ªç ”/Tailwind | ç»„ä»¶åº“å°è£… |
| æ¸¸æˆå…¬å¸åå° | Vite | SPA | æŒ‰åŠŸèƒ½æ¨¡å— | **åˆ†æ•£å¼** | Bootstrap/Tailwind | **x-ref + å°è£…** |
| æ´»åŠ¨ç­–åˆ’å…¬å¸ | Vite/æ—  | æ¨¡æ¿å¼•æ“ | æŒ‰é¡¹ç›® | é›†ä¸­/åˆ†æ•£ | Tailwind | Bootstrap id |
| è™šæ‹Ÿç‰©å“äº¤æ˜“å¹³å° | Vite | SPA/å¤šé¡µ | æŒ‰åŠŸèƒ½æ¨¡å— | **åˆ†æ•£å¼** | Tailwind | **x-ref + å°è£…** |
| **æœ¬é¡¹ç›®ï¼ˆç›®æ ‡ï¼‰** | **Vite** âœ… | **Vite æ„å»ºæ—¶æ¨¡æ¿** âœ… | **æŒ‰åŠŸèƒ½æ¨¡å—** | **åˆ†æ•£å¼** âœ… | **Tailwind** âœ… | **x-ref + Mixin** âœ… |

### Tailwind + Alpine.jsï¼šä¸ºä»€ä¹ˆæ˜¯æœ€ä½³æ­æ¡£

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ç›¸åŒè®¾è®¡å“²å­¦** | éƒ½å¼ºè°ƒ"è½»é‡ã€ç›´æ¥ã€æ— æŠ½è±¡" |
| **HTML ä¼˜å…ˆ** | é€»è¾‘å’Œæ ·å¼éƒ½ç›´æ¥å†™åœ¨ HTML ä¸­ |
| **æ— è™šæ‹Ÿ DOM** | æ€§èƒ½å¼€é”€æä½ |
| **ç¤¾åŒºæ¨è** | Alpine å®˜ç½‘é¦–æ¨ Tailwind |
| **çŸ¥åé¡¹ç›®** | Laravel Jetstreamã€FilamentPHP éƒ½ç”¨æ­¤ç»„åˆ |

### ä¸ºä»€ä¹ˆé€‰æ‹© Vite

| å¯¹æ¯”é¡¹ | esbuild | Vite âœ… | Webpack |
|--------|---------|---------|---------|
| æ„å»ºé€Ÿåº¦ | âš¡ï¸ æå¿« | âš¡ï¸ æå¿«ï¼ˆåº•å±‚ç”¨ esbuildï¼‰ | ğŸ¢ æ…¢ |
| çƒ­æ›´æ–°ï¼ˆHMRï¼‰ | âŒ æ—  | âœ… åŸç”Ÿæ”¯æŒ | âœ… éœ€é…ç½® |
| å¼€å‘æœåŠ¡å™¨ | âŒ éœ€è‡ªå·±å†™ | âœ… å†…ç½® | âœ… éœ€é…ç½® |
| å¤šé¡µåº”ç”¨ | âš ï¸ éœ€æ‰‹å†™ | âœ… åŸç”Ÿæ”¯æŒ | âœ… éœ€é…ç½® |
| é…ç½®å¤æ‚åº¦ | â­ æç®€ | â­â­ ç®€å• | â­â­â­â­â­ å¤æ‚ |
| æ’ä»¶ç”Ÿæ€ | âš ï¸ å°‘ | âœ… ä¸°å¯Œ | âœ… æœ€ä¸°å¯Œ |
| å­¦ä¹ æ›²çº¿ | 1 å¤© | 2-3 å¤© | 1-2 å‘¨ |
| **é€‚åˆæœ¬é¡¹ç›®** | âš ï¸ é€‚åˆ | âœ… **æœ€é€‚åˆ** | âŒ è¿‡é‡ |

---

**æ–‡æ¡£ç»“æŸ**

