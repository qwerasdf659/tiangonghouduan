# é¤å…ç§¯åˆ†æŠ½å¥–ç³»ç»Ÿ - ç³»ç»Ÿæ€§é—®é¢˜é¢„é˜²å’Œè§£å†³æ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: V1.0  
> **åˆ›å»ºæ—¶é—´**: 2025å¹´11æœˆ24æ—¥  
> **æœ€åæ›´æ–°**: 2025å¹´11æœˆ24æ—¥  
> **æ–‡æ¡£ç›®æ ‡**: ä»"æ‰“è¡¥ä¸"åˆ°"ç³»ç»Ÿæ€§é¢„é˜²"çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ

---

## ğŸ“‹ ç›®å½•

1. [é—®é¢˜æ€»è§ˆ](#é—®é¢˜æ€»è§ˆ)
2. [æ ¸å¿ƒé—®é¢˜åˆ†æ](#æ ¸å¿ƒé—®é¢˜åˆ†æ)
3. [ç³»ç»Ÿæ€§é¢„é˜²æ–¹æ¡ˆ](#ç³»ç»Ÿæ€§é¢„é˜²æ–¹æ¡ˆ)
4. [è‡ªåŠ¨åŒ–éªŒè¯å·¥å…·](#è‡ªåŠ¨åŒ–éªŒè¯å·¥å…·)
5. [å¼€å‘è§„èŒƒå’Œæ£€æŸ¥æ¸…å•](#å¼€å‘è§„èŒƒå’Œæ£€æŸ¥æ¸…å•)
6. [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)

---

## é—®é¢˜æ€»è§ˆ

### é—®é¢˜åˆ†ç±»ç»Ÿè®¡

| é—®é¢˜ç±»å‹ | å‘ç°æ¬¡æ•° | ä¸¥é‡ç¨‹åº¦ | æ ¹æœ¬åŸå›  |
|---------|---------|----------|---------|
| APIè·¯å¾„ä¸åŒ¹é… | 6å¤„ | ğŸ”´ é«˜ | ç¼ºå°‘ç»Ÿä¸€çš„è·¯å¾„è§„èŒƒ |
| æ•°æ®åº“å­—æ®µä¸åŒ¹é… | 6å¤„ | ğŸ”´ é«˜ | å‰åç«¯å­—æ®µåŒæ­¥æœºåˆ¶ç¼ºå¤± |
| WebSocketæŠ€æœ¯æ ˆä¸ç»Ÿä¸€ | 2å¤„ | ğŸŸ¡ ä¸­ | ç¼ºå°‘æŠ€æœ¯é€‰å‹ç»Ÿä¸€è§„èŒƒ |
| Tokenè®¤è¯ç¼ºå¤± | 6å¤„ | ğŸ”´ é«˜ | ç¼ºå°‘ç»Ÿä¸€çš„è®¤è¯æ‹¦æˆªå™¨ |
| æ—¶é—´å¤„ç†æ–¹æ³•é”™è¯¯ | 7å¤„ | ğŸŸ¡ ä¸­ | å·¥å…·ç±»æ–¹æ³•ä½¿ç”¨ä¸è§„èŒƒ |

### å½±å“èŒƒå›´

- **å‰ç«¯é¡µé¢**: 7ä¸ªç®¡ç†é¡µé¢å—å½±å“
- **åç«¯æœåŠ¡**: 3ä¸ªæœåŠ¡å±‚å—å½±å“
- **æ•°æ®åº“æ¨¡å‹**: 2ä¸ªæ¨¡å‹å—å½±å“
- **ç´¯è®¡ä¿®å¤æ—¶é—´**: ~4å°æ—¶
- **æ½œåœ¨ç”¨æˆ·å½±å“**: ç®¡ç†å‘˜æ— æ³•æ­£å¸¸ä½¿ç”¨ç³»ç»Ÿ

---

## æ ¸å¿ƒé—®é¢˜åˆ†æ

### é—®é¢˜1: APIè·¯å¾„ä¸åŒ¹é… (å‘ç°6å¤„)

#### é—®é¢˜è¡¨ç°
```javascript
// å‰ç«¯è°ƒç”¨
GET /api/v4/customer-service/sessions

// åç«¯å®é™…è·¯å¾„
GET /api/v4/admin/customer-service/sessions
```

#### æ ¹æœ¬åŸå› 
1. å‰åç«¯å¼€å‘åˆ†ç¦»ï¼Œç¼ºå°‘APIå¥‘çº¦
2. è·¯å¾„å‘½åè§„èŒƒä¸ç»Ÿä¸€
3. æ²¡æœ‰è‡ªåŠ¨åŒ–çš„æ¥å£æ–‡æ¡£åŒæ­¥æœºåˆ¶
4. ç¼ºå°‘å‰åç«¯è”è°ƒçš„éªŒè¯å·¥å…·

#### å½±å“èŒƒå›´
- å‰ç«¯: `customer-service.html` (6å¤„APIè°ƒç”¨)
- åç«¯: `routes/v4/unified-engine/admin/customer_service.js`
- ç”¨æˆ·å½±å“: å®¢æœåŠŸèƒ½å®Œå…¨ä¸å¯ç”¨

#### ä¼ ç»Ÿ"æ‰“è¡¥ä¸"æ–¹å¼çš„é—®é¢˜
```javascript
// âŒ æ‰“è¡¥ä¸æ–¹å¼ï¼šå‘ç°ä¸€å¤„æ”¹ä¸€å¤„
fetch('/api/v4/customer-service/sessions') 
// æ”¹ä¸º
fetch('/api/v4/admin/customer-service/sessions')

// é—®é¢˜ï¼š
// 1. å…¶ä»–5å¤„å¯èƒ½é—æ¼
// 2. ä¸‹æ¬¡å¼€å‘æ–°åŠŸèƒ½å¯èƒ½å†çŠ¯
// 3. æ²¡æœ‰æ–‡æ¡£è®°å½•æ­£ç¡®çš„è·¯å¾„è§„èŒƒ
```

---

### é—®é¢˜2: æ•°æ®åº“å­—æ®µä¸åŒ¹é… (å‘ç°6å¤„)

#### é—®é¢˜è¡¨ç°
```javascript
// æœåŠ¡å±‚æŸ¥è¯¢
attributes: ['user_id', 'nickname', 'avatar_url']

// å®é™…æ•°æ®åº“æ¨¡å‹
// Useræ¨¡å‹ä¸­ä¸å­˜åœ¨avatar_urlå­—æ®µ
// å¯¼è‡´: Unknown column 'user.avatar_url' in 'field list'
```

#### æ ¹æœ¬åŸå› 
1. å‰ç«¯éœ€æ±‚å’Œæ•°æ®åº“è®¾è®¡è„±èŠ‚
2. æ¨¡å‹å­—æ®µå˜æ›´åï¼ŒæœåŠ¡å±‚ä»£ç æœªåŒæ­¥æ›´æ–°
3. ç¼ºå°‘å­—æ®µä½¿ç”¨çš„é™æ€æ£€æŸ¥å·¥å…·
4. ä»£ç å®¡æŸ¥æ—¶æœªéªŒè¯å­—æ®µå­˜åœ¨æ€§

#### å½±å“èŒƒå›´
- æœåŠ¡å±‚: `CustomerServiceSessionService.js` (6å¤„å¼•ç”¨)
- æ•°æ®åº“: `User`æ¨¡å‹
- ç”¨æˆ·å½±å“: å®¢æœä¼šè¯åˆ—è¡¨æ— æ³•åŠ è½½

#### ä¼ ç»Ÿ"æ‰“è¡¥ä¸"æ–¹å¼çš„é—®é¢˜
```javascript
// âŒ æ‰“è¡¥ä¸æ–¹å¼ï¼šåˆ é™¤ä¸å­˜åœ¨çš„å­—æ®µ
attributes: ['user_id', 'nickname'] // åˆ é™¤avatar_url

// é—®é¢˜ï¼š
// 1. å…¶ä»–æœåŠ¡å¯èƒ½ä¹Ÿåœ¨ç”¨è¿™ä¸ªä¸å­˜åœ¨çš„å­—æ®µ
// 2. å‰ç«¯å¯èƒ½ä¾èµ–è¿™ä¸ªå­—æ®µæ˜¾ç¤ºå¤´åƒ
// 3. æ²¡æœ‰æœºåˆ¶é˜²æ­¢å°†æ¥å†æ¬¡ä½¿ç”¨ä¸å­˜åœ¨çš„å­—æ®µ
```

---

### é—®é¢˜3: WebSocketæŠ€æœ¯æ ˆä¸ç»Ÿä¸€ (å‘ç°2å¤„)

#### é—®é¢˜è¡¨ç°
```javascript
// å‰ç«¯Aä½¿ç”¨åŸç”ŸWebSocket
const ws = new WebSocket('ws://localhost:3000/ws')

// å‰ç«¯Bä½¿ç”¨Socket.IO
const socket = io()

// åç«¯ç»Ÿä¸€ä½¿ç”¨Socket.IO
// å¯¼è‡´: åŸç”ŸWebSocketè¿æ¥å¤±è´¥ (503é”™è¯¯)
```

#### æ ¹æœ¬åŸå› 
1. ç¼ºå°‘æŠ€æœ¯é€‰å‹æ–‡æ¡£
2. ä¸åŒé¡µé¢ç”±ä¸åŒå¼€å‘è€…å¼€å‘ï¼ŒæŠ€æœ¯æ ˆä¸ç»Ÿä¸€
3. æ²¡æœ‰ä»£ç å®¡æŸ¥æœºåˆ¶æ£€æŸ¥æŠ€æœ¯æ ˆä¸€è‡´æ€§
4. ç¼ºå°‘å‰ç«¯å…¬å…±ç»„ä»¶åº“

#### å½±å“èŒƒå›´
- å‰ç«¯: `notifications.html` (åŸç”ŸWebSocket)
- å‰ç«¯: `customer-service.html` (Socket.IO)
- åç«¯: `app.js` (ç»Ÿä¸€ä½¿ç”¨Socket.IO)
- ç”¨æˆ·å½±å“: é€šçŸ¥ä¸­å¿ƒæ— æ³•æ¥æ”¶å®æ—¶é€šçŸ¥

#### ä¼ ç»Ÿ"æ‰“è¡¥ä¸"æ–¹å¼çš„é—®é¢˜
```javascript
// âŒ æ‰“è¡¥ä¸æ–¹å¼ï¼šæ”¹è¿™ä¸ªé¡µé¢ç”¨Socket.IO
new WebSocket(...) 
// æ”¹ä¸º
io()

// é—®é¢˜ï¼š
// 1. å…¶ä»–é¡µé¢å¯èƒ½è¿˜åœ¨ç”¨åŸç”ŸWebSocket
// 2. æ–°é¡µé¢å¼€å‘æ—¶å¯èƒ½ä¸çŸ¥é“åº”è¯¥ç”¨å“ªä¸ª
// 3. æ²¡æœ‰æ–‡æ¡£è¯´æ˜ä¸ºä»€ä¹ˆè¦ç”¨Socket.IO
```

---

### é—®é¢˜4: Tokenè®¤è¯ç¼ºå¤± (å‘ç°6å¤„)

#### é—®é¢˜è¡¨ç°
```javascript
// charts.htmlç­‰6ä¸ªé¡µé¢
document.addEventListener('DOMContentLoaded', function() {
  // ç›´æ¥åŠ è½½æ•°æ®ï¼Œæ²¡æœ‰éªŒè¯Token
  loadAllCharts();
});

// ç»“æœï¼šæœªç™»å½•ç”¨æˆ·ä¹Ÿèƒ½è®¿é—®ç®¡ç†é¡µé¢
```

#### æ ¹æœ¬åŸå› 
1. ç¼ºå°‘ç»Ÿä¸€çš„å‰ç«¯è·¯ç”±å®ˆå«
2. æ¯ä¸ªé¡µé¢éœ€è¦æ‰‹åŠ¨æ·»åŠ è®¤è¯ä»£ç 
3. æ–°é¡µé¢å¼€å‘æ—¶å®¹æ˜“é—æ¼è®¤è¯é€»è¾‘
4. æ²¡æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯è®¤è¯æœºåˆ¶

#### å½±å“èŒƒå›´
- å‰ç«¯: 6ä¸ªç®¡ç†é¡µé¢ç¼ºå°‘TokenéªŒè¯
  * charts.html
  * consumption.html
  * presets.html
  * prizes.html
  * settings.html
  * users.html
- ç”¨æˆ·å½±å“: ç³»ç»Ÿå®‰å…¨æ€§é—®é¢˜ï¼Œæœªæˆæƒè®¿é—®

#### ä¼ ç»Ÿ"æ‰“è¡¥ä¸"æ–¹å¼çš„é—®é¢˜
```javascript
// âŒ æ‰“è¡¥ä¸æ–¹å¼ï¼šæ¯ä¸ªé¡µé¢æ‰‹åŠ¨æ·»åŠ 
if (!getToken() || !checkAdminPermission()) {
  return;
}

// é—®é¢˜ï¼š
// 1. å®¹æ˜“é—æ¼æŸäº›é¡µé¢
// 2. ä»£ç é‡å¤ï¼Œç»´æŠ¤å›°éš¾
// 3. æ–°é¡µé¢å¯èƒ½å¿˜è®°æ·»åŠ 
// 4. æ— æ³•ç»Ÿä¸€ä¿®æ”¹è®¤è¯é€»è¾‘
```

---

### é—®é¢˜5: æ—¶é—´å¤„ç†æ–¹æ³•é”™è¯¯ (å‘ç°7å¤„)

#### é—®é¢˜è¡¨ç°
```javascript
// æœåŠ¡å±‚ä»£ç 
BeijingTimeHelper.formatDisplay(created_at)
// æŠ¥é”™: BeijingTimeHelper.formatDisplay is not a function

// å®é™…å­˜åœ¨çš„æ–¹æ³•
BeijingTimeHelper.toBeijingTime(created_at)
BeijingTimeHelper.formatForAPI(created_at).iso
```

#### æ ¹æœ¬åŸå› 
1. å·¥å…·ç±»æ–¹æ³•æ–‡æ¡£ä¸å®Œæ•´
2. IDEæ²¡æœ‰é…ç½®æ­£ç¡®çš„ç±»å‹æç¤º
3. ä»£ç å®¡æŸ¥æ—¶æœªéªŒè¯æ–¹æ³•å­˜åœ¨æ€§
4. å·¥å…·ç±»æ–¹æ³•å‘½åä¸å¤Ÿæ˜ç¡®

#### å½±å“èŒƒå›´
- æœåŠ¡å±‚: `CustomerServiceSessionService.js` (7å¤„è°ƒç”¨)
- å·¥å…·ç±»: `utils/timeHelper.js`
- ç”¨æˆ·å½±å“: å®¢æœä¼šè¯æ—¶é—´æ˜¾ç¤ºé”™è¯¯

#### ä¼ ç»Ÿ"æ‰“è¡¥ä¸"æ–¹å¼çš„é—®é¢˜
```javascript
// âŒ æ‰“è¡¥ä¸æ–¹å¼ï¼šæ”¹æ–¹æ³•å
BeijingTimeHelper.formatDisplay(date)
// æ”¹ä¸º
BeijingTimeHelper.toBeijingTime(date)

// é—®é¢˜ï¼š
// 1. å…¶ä»–åœ°æ–¹å¯èƒ½è¿˜åœ¨ç”¨é”™è¯¯çš„æ–¹æ³•
// 2. æ²¡æœ‰æ–‡æ¡£è¯´æ˜åº”è¯¥ç”¨å“ªä¸ªæ–¹æ³•
// 3. å°†æ¥å¯èƒ½åˆç”¨é”™
```

---

## ç³»ç»Ÿæ€§é¢„é˜²æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: APIè·¯å¾„ç»Ÿä¸€è§„èŒƒå’ŒéªŒè¯

#### é¢„é˜²ç­–ç•¥

**1.1 å»ºç«‹APIè·¯å¾„å‘½åè§„èŒƒ**

```javascript
/**
 * APIè·¯å¾„å‘½åè§„èŒƒ
 * 
 * åŸºç¡€è§„åˆ™:
 * /api/v{version}/{role}/{module}/{action}
 * 
 * ç¤ºä¾‹:
 * - /api/v4/admin/customer-service/sessions (ç®¡ç†å‘˜-å®¢æœä¼šè¯)
 * - /api/v4/user/inventory/list (ç”¨æˆ·-åº“å­˜åˆ—è¡¨)
 * - /api/v4/public/prizes/list (å…¬å…±-å¥–å“åˆ—è¡¨)
 */

// è·¯å¾„è§„èŒƒé…ç½®æ–‡ä»¶
// config/api-paths.js
module.exports = {
  admin: {
    customerService: {
      list: '/api/v4/admin/customer-service/sessions',
      detail: '/api/v4/admin/customer-service/sessions/:id',
      messages: '/api/v4/admin/customer-service/sessions/:id/messages',
      close: '/api/v4/admin/customer-service/sessions/:id/close'
    },
    // ... å…¶ä»–æ¨¡å—
  },
  user: {
    // ... ç”¨æˆ·ç«¯è·¯å¾„
  }
};
```

**1.2 å‰åç«¯è·¯å¾„åŒæ­¥éªŒè¯å·¥å…·**

```javascript
// scripts/verify-api-paths.js
const fs = require('fs');
const path = require('path');

/**
 * APIè·¯å¾„éªŒè¯å·¥å…·
 * åŠŸèƒ½ï¼š
 * 1. æ‰«æåç«¯è·¯ç”±å®šä¹‰
 * 2. æ‰«æå‰ç«¯APIè°ƒç”¨
 * 3. æ¯”å¯¹å‰åç«¯è·¯å¾„æ˜¯å¦ä¸€è‡´
 * 4. ç”Ÿæˆä¸åŒ¹é…æŠ¥å‘Š
 */
class ApiPathValidator {
  constructor() {
    this.backendPaths = new Set();
    this.frontendPaths = new Map(); // path -> files
    this.mismatches = [];
  }

  // æ‰«æåç«¯è·¯ç”±
  scanBackendRoutes() {
    const routesDir = path.join(__dirname, '../routes');
    // é€’å½’æ‰«ææ‰€æœ‰è·¯ç”±æ–‡ä»¶
    // æå– router.get/post/put/delete çš„è·¯å¾„
    // å­˜å‚¨åˆ° this.backendPaths
  }

  // æ‰«æå‰ç«¯APIè°ƒç”¨
  scanFrontendApiCalls() {
    const publicDir = path.join(__dirname, '../public');
    // é€’å½’æ‰«ææ‰€æœ‰HTML/JSæ–‡ä»¶
    // æå– fetch(), apiRequest() çš„è·¯å¾„
    // å­˜å‚¨åˆ° this.frontendPaths
  }

  // æ¯”å¯¹å¹¶ç”ŸæˆæŠ¥å‘Š
  validateAndReport() {
    this.frontendPaths.forEach((files, path) => {
      if (!this.backendPaths.has(path)) {
        this.mismatches.push({
          path: path,
          files: files,
          issue: 'å‰ç«¯è°ƒç”¨äº†ä¸å­˜åœ¨çš„åç«¯API'
        });
      }
    });

    return this.mismatches;
  }
}

// åœ¨CI/CDä¸­è‡ªåŠ¨è¿è¡Œ
module.exports = ApiPathValidator;
```

**1.3 è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯**

```javascript
// tests/integration/api-paths.test.js
describe('APIè·¯å¾„å®Œæ•´æ€§æµ‹è¯•', () => {
  test('å‰ç«¯è°ƒç”¨çš„æ‰€æœ‰APIè·¯å¾„éƒ½åº”è¯¥å­˜åœ¨', async () => {
    const validator = new ApiPathValidator();
    validator.scanBackendRoutes();
    validator.scanFrontendApiCalls();
    
    const mismatches = validator.validateAndReport();
    
    expect(mismatches).toHaveLength(0);
    
    if (mismatches.length > 0) {
      console.error('å‘ç°APIè·¯å¾„ä¸åŒ¹é…:');
      mismatches.forEach(m => {
        console.error(`- ${m.path} (ä½¿ç”¨æ–‡ä»¶: ${m.files.join(', ')})`);
      });
    }
  });
});
```

**1.4 Git Pre-commit Hook**

```bash
#!/bin/bash
# .git/hooks/pre-commit

echo "ğŸ” æ£€æŸ¥APIè·¯å¾„ä¸€è‡´æ€§..."

node scripts/verify-api-paths.js

if [ $? -ne 0 ]; then
  echo "âŒ APIè·¯å¾„éªŒè¯å¤±è´¥ï¼Œè¯·ä¿®å¤åå†æäº¤"
  exit 1
fi

echo "âœ… APIè·¯å¾„éªŒè¯é€šè¿‡"
```

---

### æ–¹æ¡ˆ2: æ•°æ®åº“å­—æ®µåŒæ­¥éªŒè¯

#### é¢„é˜²ç­–ç•¥

**2.1 è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹ç±»å‹å®šä¹‰**

```javascript
// scripts/generate-model-types.js
const models = require('../models');

/**
 * ç”Ÿæˆæ¨¡å‹å­—æ®µç±»å‹å®šä¹‰
 * ä½œç”¨ï¼šä¸ºIDEæä¾›æ™ºèƒ½æç¤ºï¼Œé¿å…ä½¿ç”¨ä¸å­˜åœ¨çš„å­—æ®µ
 */
function generateModelTypes() {
  const typeDefinitions = [];

  Object.keys(models).forEach(modelName => {
    if (modelName === 'sequelize' || modelName === 'Sequelize') return;

    const model = models[modelName];
    const attributes = model.rawAttributes;
    
    const fields = Object.keys(attributes).map(field => {
      return `  ${field}: ${attributes[field].type.key};`;
    }).join('\n');

    typeDefinitions.push(`
/**
 * ${modelName} æ¨¡å‹å­—æ®µ
 * @typedef {Object} ${modelName}Attributes
${fields}
 */
    `);
  });

  // å†™å…¥typesæ–‡ä»¶
  const fs = require('fs');
  fs.writeFileSync(
    'types/models.d.ts',
    typeDefinitions.join('\n')
  );
}

module.exports = generateModelTypes;
```

**2.2 æœåŠ¡å±‚å­—æ®µä½¿ç”¨éªŒè¯**

```javascript
// scripts/verify-model-fields.js

/**
 * éªŒè¯æœåŠ¡å±‚æ˜¯å¦ä½¿ç”¨äº†ä¸å­˜åœ¨çš„å­—æ®µ
 */
class ModelFieldValidator {
  constructor() {
    this.models = require('../models');
    this.issues = [];
  }

  // è·å–æ¨¡å‹çš„æ‰€æœ‰å­—æ®µ
  getModelFields(modelName) {
    const model = this.models[modelName];
    if (!model) return [];
    
    return Object.keys(model.rawAttributes);
  }

  // æ‰«ææœåŠ¡å±‚ä»£ç 
  scanServiceFiles() {
    const servicesDir = path.join(__dirname, '../services');
    // é€’å½’æ‰«ææ‰€æœ‰æœåŠ¡æ–‡ä»¶
    // æå– attributes: [...] ä¸­çš„å­—æ®µ
    // éªŒè¯å­—æ®µæ˜¯å¦å­˜åœ¨äºæ¨¡å‹ä¸­
  }

  // ç”ŸæˆéªŒè¯æŠ¥å‘Š
  generateReport() {
    if (this.issues.length === 0) {
      console.log('âœ… æ‰€æœ‰å­—æ®µä½¿ç”¨æ­£ç¡®');
      return true;
    }

    console.error('âŒ å‘ç°å­—æ®µä½¿ç”¨é—®é¢˜:');
    this.issues.forEach(issue => {
      console.error(`- ${issue.file}: å­—æ®µ '${issue.field}' ä¸å­˜åœ¨äº ${issue.model} æ¨¡å‹`);
    });

    return false;
  }
}

module.exports = ModelFieldValidator;
```

**2.3 æ•°æ®åº“è¿ç§»æ—¶çš„å­—æ®µåŒæ­¥æ£€æŸ¥**

```javascript
// scripts/migration-field-sync.js

/**
 * æ•°æ®åº“è¿ç§»åè‡ªåŠ¨æ£€æŸ¥å­—æ®µåŒæ­¥
 */
class MigrationFieldSync {
  // è¿è¡Œè¿ç§»å
  async afterMigration(migrationName) {
    console.log(`ğŸ” æ£€æŸ¥è¿ç§» ${migrationName} çš„å­—æ®µåŒæ­¥...`);
    
    // 1. é‡æ–°åŠ è½½æ¨¡å‹
    delete require.cache[require.resolve('../models')];
    const models = require('../models');
    
    // 2. è¿è¡Œå­—æ®µéªŒè¯
    const validator = new ModelFieldValidator();
    const isValid = validator.scanServiceFiles();
    
    if (!isValid) {
      console.error('âŒ è¿ç§»åå­—æ®µåŒæ­¥æ£€æŸ¥å¤±è´¥');
      console.error('è¯·æ›´æ–°æœåŠ¡å±‚ä»£ç ä»¥åŒ¹é…æ–°çš„æ•°æ®åº“å­—æ®µ');
      process.exit(1);
    }
    
    console.log('âœ… è¿ç§»åå­—æ®µåŒæ­¥æ£€æŸ¥é€šè¿‡');
  }
}
```

---

### æ–¹æ¡ˆ3: WebSocketæŠ€æœ¯æ ˆç»Ÿä¸€

#### é¢„é˜²ç­–ç•¥

**3.1 æŠ€æœ¯é€‰å‹æ–‡æ¡£**

```markdown
# å®æ—¶é€šä¿¡æŠ€æœ¯é€‰å‹

## ç»Ÿä¸€æ ‡å‡†
é¡¹ç›®ç»Ÿä¸€ä½¿ç”¨ **Socket.IO** ä½œä¸ºWebSocketå®ç°

## åŸå› 
1. è‡ªåŠ¨é‡è¿æœºåˆ¶
2. æˆ¿é—´å’Œå‘½åç©ºé—´æ”¯æŒ
3. æµè§ˆå™¨å…¼å®¹æ€§å¥½
4. æ”¯æŒäº‹ä»¶é©±åŠ¨é€šä¿¡

## å‰ç«¯ä½¿ç”¨è§„èŒƒ
\`\`\`javascript
// âœ… æ­£ç¡®ä½¿ç”¨
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
  const socket = io({
    auth: { token: getToken() }
  });
  
  socket.on('connect', () => {
    console.log('è¿æ¥æˆåŠŸ');
  });
</script>

// âŒ ç¦æ­¢ä½¿ç”¨åŸç”ŸWebSocket
const ws = new WebSocket('ws://...');
\`\`\`

## åç«¯ä½¿ç”¨è§„èŒƒ
\`\`\`javascript
// app.js
const socketIO = require('socket.io');
const io = socketIO(server);

io.on('connection', (socket) => {
  console.log('å®¢æˆ·ç«¯è¿æ¥');
});
\`\`\`
```

**3.2 å‰ç«¯å…¬å…±WebSocketæ¨¡å—**

```javascript
// public/admin/js/websocket-client.js

/**
 * ç»Ÿä¸€çš„WebSocketå®¢æˆ·ç«¯å°è£…
 * ç”¨é€”ï¼šç¡®ä¿æ‰€æœ‰é¡µé¢ä½¿ç”¨ç›¸åŒçš„WebSocketå®ç°
 */
class UnifiedWebSocketClient {
  constructor() {
    this.socket = null;
    this.isConnected = false;
  }

  // è¿æ¥WebSocket
  connect() {
    if (this.socket && this.isConnected) {
      console.log('WebSocketå·²è¿æ¥ï¼Œæ— éœ€é‡å¤è¿æ¥');
      return this.socket;
    }

    this.socket = io({
      auth: { token: getToken() }
    });

    this.socket.on('connect', () => {
      console.log('âœ… WebSocketè¿æ¥æˆåŠŸ');
      this.isConnected = true;
    });

    this.socket.on('disconnect', () => {
      console.log('WebSocketè¿æ¥æ–­å¼€');
      this.isConnected = false;
    });

    return this.socket;
  }

  // æ–­å¼€è¿æ¥
  disconnect() {
    if (this.socket) {
      this.socket.disconnect();
      this.isConnected = false;
    }
  }

  // å‘é€æ¶ˆæ¯
  emit(event, data) {
    if (!this.isConnected) {
      console.error('WebSocketæœªè¿æ¥');
      return;
    }
    this.socket.emit(event, data);
  }

  // ç›‘å¬æ¶ˆæ¯
  on(event, callback) {
    if (this.socket) {
      this.socket.on(event, callback);
    }
  }
}

// å¯¼å‡ºå•ä¾‹
const wsClient = new UnifiedWebSocketClient();
```

**3.3 WebSocketæŠ€æœ¯æ ˆéªŒè¯å·¥å…·**

```javascript
// scripts/verify-websocket-usage.js

/**
 * éªŒè¯WebSocketä½¿ç”¨æ˜¯å¦ç¬¦åˆè§„èŒƒ
 */
class WebSocketUsageValidator {
  scanFrontendFiles() {
    const publicDir = path.join(__dirname, '../public');
    const issues = [];
    
    // æ‰«ææ‰€æœ‰HTML/JSæ–‡ä»¶
    // æ£€æŸ¥æ˜¯å¦æœ‰ "new WebSocket(" çš„ä½¿ç”¨
    // åº”è¯¥ä½¿ç”¨ io() æˆ– wsClient.connect()
    
    return issues;
  }

  validate() {
    const issues = this.scanFrontendFiles();
    
    if (issues.length > 0) {
      console.error('âŒ å‘ç°ä¸è§„èŒƒçš„WebSocketä½¿ç”¨:');
      issues.forEach(issue => {
        console.error(`- ${issue.file}: ${issue.line}`);
        console.error(`  åº”ä½¿ç”¨ io() æˆ– wsClient.connect()`);
      });
      return false;
    }
    
    console.log('âœ… WebSocketä½¿ç”¨ç¬¦åˆè§„èŒƒ');
    return true;
  }
}
```

---

### æ–¹æ¡ˆ4: ç»Ÿä¸€è®¤è¯æ‹¦æˆªå™¨

#### é¢„é˜²ç­–ç•¥

**4.1 å‰ç«¯è·¯ç”±å®ˆå«**

```javascript
// public/admin/js/auth-guard.js

/**
 * ç»Ÿä¸€çš„è®¤è¯å®ˆå«
 * ç”¨é€”ï¼šè‡ªåŠ¨ä¸ºæ‰€æœ‰ç®¡ç†é¡µé¢æ·»åŠ è®¤è¯æ£€æŸ¥
 */
class AuthGuard {
  constructor() {
    this.publicPages = ['/admin/login.html'];
  }

  // æ£€æŸ¥å½“å‰é¡µé¢æ˜¯å¦éœ€è¦è®¤è¯
  isProtectedPage() {
    const currentPath = window.location.pathname;
    return !this.publicPages.some(page => currentPath.includes(page));
  }

  // éªŒè¯è®¤è¯çŠ¶æ€
  checkAuth() {
    if (!this.isProtectedPage()) {
      return true;
    }

    const token = getToken();
    if (!token) {
      console.warn('æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ');
      window.location.href = '/admin/login.html';
      return false;
    }

    const hasPermission = checkAdminPermission();
    if (!hasPermission) {
      console.error('æ²¡æœ‰ç®¡ç†å‘˜æƒé™');
      alert('æ‚¨æ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜');
      logout();
      return false;
    }

    return true;
  }

  // åˆå§‹åŒ–å®ˆå«
  init() {
    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        this.checkAuth();
      });
    } else {
      this.checkAuth();
    }
  }
}

// è‡ªåŠ¨åˆå§‹åŒ–
const authGuard = new AuthGuard();
authGuard.init();
```

**4.2 è‡ªåŠ¨æ³¨å…¥è®¤è¯å®ˆå«**

```html
<!-- public/admin/template.html -->
<!DOCTYPE html>
<html>
<head>
  <!-- å…¶ä»–èµ„æº -->
  
  <!-- âœ… ç»Ÿä¸€è®¤è¯å®ˆå« - åœ¨æ‰€æœ‰é¡µé¢ä¸­è‡ªåŠ¨å¼•å…¥ -->
  <script src="/admin/js/admin-common.js"></script>
  <script src="/admin/js/auth-guard.js"></script>
</head>
<body>
  <!-- é¡µé¢å†…å®¹ -->
</body>
</html>
```

**4.3 è®¤è¯è¦†ç›–ç‡éªŒè¯å·¥å…·**

```javascript
// scripts/verify-auth-coverage.js

/**
 * éªŒè¯æ‰€æœ‰ç®¡ç†é¡µé¢æ˜¯å¦æœ‰è®¤è¯ä¿æŠ¤
 */
class AuthCoverageValidator {
  scanAdminPages() {
    const adminDir = path.join(__dirname, '../public/admin');
    const pages = [];
    
    // æ‰«ææ‰€æœ‰HTMLæ–‡ä»¶
    // æ£€æŸ¥æ˜¯å¦å¼•å…¥äº† auth-guard.js
    // æˆ–è€…æœ‰ checkAdminPermission() è°ƒç”¨
    
    return pages;
  }

  validate() {
    const unprotectedPages = this.scanAdminPages().filter(page => {
      return !page.hasAuthGuard && !page.hasAuthCheck;
    });

    if (unprotectedPages.length > 0) {
      console.error('âŒ å‘ç°æœªå—ä¿æŠ¤çš„ç®¡ç†é¡µé¢:');
      unprotectedPages.forEach(page => {
        console.error(`- ${page.file}`);
      });
      return false;
    }

    console.log('âœ… æ‰€æœ‰ç®¡ç†é¡µé¢éƒ½æœ‰è®¤è¯ä¿æŠ¤');
    return true;
  }
}
```

---

### æ–¹æ¡ˆ5: å·¥å…·ç±»ä½¿ç”¨è§„èŒƒ

#### é¢„é˜²ç­–ç•¥

**5.1 å·¥å…·ç±»æ–¹æ³•æ–‡æ¡£ç”Ÿæˆ**

```javascript
// scripts/generate-utils-docs.js

/**
 * è‡ªåŠ¨ç”Ÿæˆå·¥å…·ç±»æ–¹æ³•æ–‡æ¡£
 */
function generateUtilsDocs() {
  const utilsDir = path.join(__dirname, '../utils');
  const docs = [];

  // æ‰«ææ‰€æœ‰å·¥å…·ç±»æ–‡ä»¶
  fs.readdirSync(utilsDir).forEach(file => {
    if (!file.endsWith('.js')) return;

    const utilPath = path.join(utilsDir, file);
    const util = require(utilPath);

    // æå–æ‰€æœ‰å¯¼å‡ºçš„æ–¹æ³•
    const methods = Object.keys(util);

    docs.push(`
## ${file}

å¯ç”¨æ–¹æ³•ï¼š
${methods.map(m => `- ${m}()`).join('\n')}

ä½¿ç”¨ç¤ºä¾‹ï¼š
\`\`\`javascript
const ${path.basename(file, '.js')} = require('./utils/${file}');
// è°ƒç”¨æ–¹æ³•...
\`\`\`
    `);
  });

  // å†™å…¥æ–‡æ¡£
  fs.writeFileSync(
    'docs/å·¥å…·ç±»ä½¿ç”¨æ‰‹å†Œ.md',
    docs.join('\n\n')
  );
}
```

**5.2 IDEæ™ºèƒ½æç¤ºé…ç½®**

```json
// jsconfig.json
{
  "compilerOptions": {
    "target": "ES6",
    "module": "commonjs",
    "checkJs": true,
    "moduleResolution": "node"
  },
  "include": [
    "**/*.js",
    "types/**/*.d.ts"
  ]
}
```

**5.3 å·¥å…·ç±»æ–¹æ³•ä½¿ç”¨éªŒè¯**

```javascript
// scripts/verify-utils-usage.js

/**
 * éªŒè¯å·¥å…·ç±»æ–¹æ³•ä½¿ç”¨æ˜¯å¦æ­£ç¡®
 */
class UtilsUsageValidator {
  constructor() {
    this.utils = {};
    this.loadAllUtils();
  }

  // åŠ è½½æ‰€æœ‰å·¥å…·ç±»
  loadAllUtils() {
    const utilsDir = path.join(__dirname, '../utils');
    fs.readdirSync(utilsDir).forEach(file => {
      if (!file.endsWith('.js')) return;
      
      const utilName = path.basename(file, '.js');
      const util = require(path.join(utilsDir, file));
      
      this.utils[utilName] = Object.keys(util);
    });
  }

  // æ‰«æä»£ç ä¸­çš„å·¥å…·ç±»ä½¿ç”¨
  scanUtilsUsage() {
    const issues = [];
    
    // æ‰«ææ‰€æœ‰æœåŠ¡æ–‡ä»¶
    // æŸ¥æ‰¾ç±»ä¼¼ "BeijingTimeHelper.methodName(" çš„è°ƒç”¨
    // éªŒè¯ methodName æ˜¯å¦å­˜åœ¨
    
    return issues;
  }

  validate() {
    const issues = this.scanUtilsUsage();
    
    if (issues.length > 0) {
      console.error('âŒ å‘ç°ä¸å­˜åœ¨çš„å·¥å…·ç±»æ–¹æ³•è°ƒç”¨:');
      issues.forEach(issue => {
        console.error(`- ${issue.file}: ${issue.util}.${issue.method}()`);
        console.error(`  å¯ç”¨æ–¹æ³•: ${this.utils[issue.util].join(', ')}`);
      });
      return false;
    }
    
    console.log('âœ… æ‰€æœ‰å·¥å…·ç±»æ–¹æ³•ä½¿ç”¨æ­£ç¡®');
    return true;
  }
}
```

---

## è‡ªåŠ¨åŒ–éªŒè¯å·¥å…·

### å·¥å…·1: å®Œæ•´æ€§éªŒè¯å·¥å…·

```javascript
// scripts/verification/comprehensive-validator.js

/**
 * ç»¼åˆéªŒè¯å·¥å…·
 * é›†æˆæ‰€æœ‰éªŒè¯å™¨ï¼Œä¸€é”®è¿è¡Œå…¨éƒ¨æ£€æŸ¥
 */
class ComprehensiveValidator {
  constructor() {
    this.validators = [
      new ApiPathValidator(),
      new ModelFieldValidator(),
      new WebSocketUsageValidator(),
      new AuthCoverageValidator(),
      new UtilsUsageValidator()
    ];
  }

  async runAll() {
    console.log('ğŸ” å¼€å§‹ç»¼åˆéªŒè¯...\n');
    
    const results = [];
    
    for (const validator of this.validators) {
      const name = validator.constructor.name;
      console.log(`ğŸ“‹ è¿è¡Œ ${name}...`);
      
      const result = await validator.validate();
      results.push({ name, passed: result });
      
      console.log(result ? 'âœ… é€šè¿‡\n' : 'âŒ å¤±è´¥\n');
    }

    // ç”Ÿæˆæ€»ç»“æŠ¥å‘Š
    this.generateSummary(results);
    
    // å¦‚æœæœ‰ä»»ä½•éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯
    const allPassed = results.every(r => r.passed);
    return allPassed;
  }

  generateSummary(results) {
    const passedCount = results.filter(r => r.passed).length;
    const totalCount = results.length;
    
    console.log('='.repeat(60));
    console.log('ğŸ“Š éªŒè¯æ€»ç»“');
    console.log('='.repeat(60));
    console.log(`é€šè¿‡: ${passedCount}/${totalCount}`);
    console.log('');
    
    results.forEach(r => {
      const icon = r.passed ? 'âœ…' : 'âŒ';
      console.log(`${icon} ${r.name}`);
    });
    
    console.log('='.repeat(60));
    
    if (passedCount === totalCount) {
      console.log('ğŸ‰ æ‰€æœ‰éªŒè¯é€šè¿‡ï¼');
    } else {
      console.log('âš ï¸ å­˜åœ¨é—®é¢˜éœ€è¦ä¿®å¤');
    }
  }
}

// CLIå…¥å£
if (require.main === module) {
  const validator = new ComprehensiveValidator();
  validator.runAll().then(passed => {
    process.exit(passed ? 0 : 1);
  });
}

module.exports = ComprehensiveValidator;
```

### å·¥å…·2: Git Hooké›†æˆ

```bash
#!/bin/bash
# .git/hooks/pre-commit

echo "ğŸ” è¿è¡Œæäº¤å‰éªŒè¯..."

# è¿è¡Œç»¼åˆéªŒè¯
node scripts/verification/comprehensive-validator.js

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ éªŒè¯å¤±è´¥ï¼Œè¯·ä¿®å¤é—®é¢˜åå†æäº¤"
  echo ""
  exit 1
fi

echo ""
echo "âœ… éªŒè¯é€šè¿‡ï¼Œå…è®¸æäº¤"
echo ""
```

### å·¥å…·3: CI/CDé›†æˆ

```yaml
# .github/workflows/validation.yml
name: ä»£ç éªŒè¯

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '16'
    
    - name: å®‰è£…ä¾èµ–
      run: npm install
    
    - name: è¿è¡Œç»¼åˆéªŒè¯
      run: npm run validate:all
    
    - name: ç”ŸæˆéªŒè¯æŠ¥å‘Š
      if: always()
      run: |
        node scripts/verification/comprehensive-validator.js --report > validation-report.txt
    
    - name: ä¸Šä¼ æŠ¥å‘Š
      if: always()
      uses: actions/upload-artifact@v2
      with:
        name: validation-report
        path: validation-report.txt
```

---

## å¼€å‘è§„èŒƒå’Œæ£€æŸ¥æ¸…å•

### æ–°åŠŸèƒ½å¼€å‘æ£€æŸ¥æ¸…å•

#### APIå¼€å‘æ£€æŸ¥æ¸…å•

- [ ] APIè·¯å¾„ç¬¦åˆå‘½åè§„èŒƒ `/api/v{version}/{role}/{module}/{action}`
- [ ] å‰åç«¯è·¯å¾„å®Œå…¨ä¸€è‡´
- [ ] è·¯å¾„å·²æ·»åŠ åˆ° `config/api-paths.js`
- [ ] è¿è¡Œ `npm run verify:api-paths` éªŒè¯é€šè¿‡
- [ ] æ·»åŠ äº†APIæ–‡æ¡£æ³¨é‡Š
- [ ] æ·»åŠ äº†é›†æˆæµ‹è¯•

#### æ•°æ®åº“å­—æ®µä½¿ç”¨æ£€æŸ¥æ¸…å•

- [ ] ç¡®è®¤å­—æ®µåœ¨æ¨¡å‹ä¸­å­˜åœ¨
- [ ] å­—æ®µåä½¿ç”¨snake_caseå‘½å
- [ ] å…³è”æŸ¥è¯¢æ­£ç¡®ä½¿ç”¨include
- [ ] è¿è¡Œ `npm run verify:model-fields` éªŒè¯é€šè¿‡
- [ ] æ·»åŠ äº†JSDocç±»å‹æ³¨é‡Š

#### WebSocketåŠŸèƒ½æ£€æŸ¥æ¸…å•

- [ ] ä½¿ç”¨Socket.IOè€Œä¸æ˜¯åŸç”ŸWebSocket
- [ ] å¼•å…¥äº†ç»Ÿä¸€çš„WebSocketå®¢æˆ·ç«¯æ¨¡å—
- [ ] æ·»åŠ äº†è¿æ¥é”™è¯¯å¤„ç†
- [ ] æ·»åŠ äº†è‡ªåŠ¨é‡è¿æœºåˆ¶
- [ ] è¿è¡Œ `npm run verify:websocket` éªŒè¯é€šè¿‡

#### å‰ç«¯é¡µé¢å¼€å‘æ£€æŸ¥æ¸…å•

- [ ] å¼•å…¥äº† `admin-common.js`
- [ ] å¼•å…¥äº† `auth-guard.js` æˆ–æ‰‹åŠ¨æ·»åŠ è®¤è¯æ£€æŸ¥
- [ ] æ·»åŠ äº†TokenéªŒè¯
- [ ] æ·»åŠ äº†æƒé™éªŒè¯
- [ ] è¿è¡Œ `npm run verify:auth-coverage` éªŒè¯é€šè¿‡
- [ ] æµ‹è¯•äº†æœªç™»å½•çŠ¶æ€çš„è®¿é—®è¡Œä¸º

#### å·¥å…·ç±»ä½¿ç”¨æ£€æŸ¥æ¸…å•

- [ ] æŸ¥é˜…äº†å·¥å…·ç±»æ–‡æ¡£
- [ ] ç¡®è®¤æ–¹æ³•å­˜åœ¨ä¸”å‚æ•°æ­£ç¡®
- [ ] æ·»åŠ äº†é”™è¯¯å¤„ç†
- [ ] è¿è¡Œ `npm run verify:utils-usage` éªŒè¯é€šè¿‡

---

### package.jsonè„šæœ¬é…ç½®

```json
{
  "scripts": {
    "verify:api-paths": "node scripts/verification/verify-api-paths.js",
    "verify:model-fields": "node scripts/verification/verify-model-fields.js",
    "verify:websocket": "node scripts/verification/verify-websocket-usage.js",
    "verify:auth-coverage": "node scripts/verification/verify-auth-coverage.js",
    "verify:utils-usage": "node scripts/verification/verify-utils-usage.js",
    "verify:all": "node scripts/verification/comprehensive-validator.js",
    
    "docs:generate": "npm run docs:utils && npm run docs:api",
    "docs:utils": "node scripts/generate-utils-docs.js",
    "docs:api": "node scripts/generate-api-docs.js",
    
    "precommit": "npm run verify:all",
    "prepush": "npm run verify:all && npm test"
  }
}
```

---

## å®æ–½è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µ: ç´§æ€¥ä¿®å¤ (å·²å®Œæˆ)

**æ—¶é—´**: ç¬¬1å¤©  
**ç›®æ ‡**: ä¿®å¤æ‰€æœ‰ç°å­˜é—®é¢˜

- [x] ä¿®å¤APIè·¯å¾„ä¸åŒ¹é… (6å¤„)
- [x] ä¿®å¤æ•°æ®åº“å­—æ®µä¸åŒ¹é… (6å¤„)
- [x] ç»Ÿä¸€WebSocketæŠ€æœ¯æ ˆ (2å¤„)
- [x] æ·»åŠ Tokenè®¤è¯ (6ä¸ªé¡µé¢)
- [x] ä¿®å¤æ—¶é—´å¤„ç†æ–¹æ³• (7å¤„)

### ç¬¬äºŒé˜¶æ®µ: å»ºç«‹è§„èŒƒ (ç¬¬2-3å¤©)

**æ—¶é—´**: ç¬¬2-3å¤©  
**ç›®æ ‡**: å»ºç«‹å¼€å‘è§„èŒƒæ–‡æ¡£

- [ ] ç¼–å†™APIè·¯å¾„å‘½åè§„èŒƒ
- [ ] ç¼–å†™æ•°æ®åº“å­—æ®µä½¿ç”¨è§„èŒƒ
- [ ] ç¼–å†™WebSocketæŠ€æœ¯é€‰å‹æ–‡æ¡£
- [ ] ç¼–å†™è®¤è¯æœºåˆ¶ä½¿ç”¨è§„èŒƒ
- [ ] ç¼–å†™å·¥å…·ç±»ä½¿ç”¨æ‰‹å†Œ

### ç¬¬ä¸‰é˜¶æ®µ: å¼€å‘éªŒè¯å·¥å…· (ç¬¬4-7å¤©)

**æ—¶é—´**: ç¬¬4-7å¤©  
**ç›®æ ‡**: å¼€å‘è‡ªåŠ¨åŒ–éªŒè¯å·¥å…·

- [ ] å¼€å‘APIè·¯å¾„éªŒè¯å·¥å…·
- [ ] å¼€å‘æ¨¡å‹å­—æ®µéªŒè¯å·¥å…·
- [ ] å¼€å‘WebSocketä½¿ç”¨éªŒè¯å·¥å…·
- [ ] å¼€å‘è®¤è¯è¦†ç›–ç‡éªŒè¯å·¥å…·
- [ ] å¼€å‘å·¥å…·ç±»ä½¿ç”¨éªŒè¯å·¥å…·
- [ ] é›†æˆç»¼åˆéªŒè¯å·¥å…·

### ç¬¬å››é˜¶æ®µ: é›†æˆåˆ°CI/CD (ç¬¬8-10å¤©)

**æ—¶é—´**: ç¬¬8-10å¤©  
**ç›®æ ‡**: è‡ªåŠ¨åŒ–éªŒè¯æµç¨‹

- [ ] é…ç½®Git Pre-commit Hook
- [ ] é…ç½®Git Pre-push Hook
- [ ] é…ç½®GitHub Actions/GitLab CI
- [ ] é…ç½®è‡ªåŠ¨ç”ŸæˆéªŒè¯æŠ¥å‘Š
- [ ] é…ç½®å¤±è´¥æ—¶è‡ªåŠ¨é€šçŸ¥

### ç¬¬äº”é˜¶æ®µ: å›¢é˜ŸåŸ¹è®­ (ç¬¬11-14å¤©)

**æ—¶é—´**: ç¬¬11-14å¤©  
**ç›®æ ‡**: å›¢é˜ŸæŒæ¡æ–°è§„èŒƒ

- [ ] ç»„ç»‡è§„èŒƒåŸ¹è®­ä¼šè®®
- [ ] æ¼”ç¤ºéªŒè¯å·¥å…·ä½¿ç”¨
- [ ] å®è·µç»ƒä¹ å’Œç­”ç–‘
- [ ] å»ºç«‹é—®é¢˜åé¦ˆæ¸ é“

### ç¬¬å…­é˜¶æ®µ: æŒç»­æ”¹è¿› (æŒç»­è¿›è¡Œ)

**æ—¶é—´**: æŒç»­è¿›è¡Œ  
**ç›®æ ‡**: æ ¹æ®å®é™…æƒ…å†µä¼˜åŒ–

- [ ] æ”¶é›†å›¢é˜Ÿåé¦ˆ
- [ ] ä¼˜åŒ–éªŒè¯å·¥å…·æ€§èƒ½
- [ ] è¡¥å……é—æ¼çš„éªŒè¯ç‚¹
- [ ] æ›´æ–°è§„èŒƒæ–‡æ¡£
- [ ] å®šæœŸreviewéªŒè¯ç»“æœ

---

## æˆæ•ˆè¯„ä¼°

### é¢„æœŸæ•ˆæœ

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å | æ”¹å–„å¹…åº¦ |
|-----|-------|-------|---------|
| APIè·¯å¾„ä¸åŒ¹é…é—®é¢˜ | 6å¤„/æœˆ | 0å¤„/æœˆ | â†“100% |
| å­—æ®µä¸åŒ¹é…é—®é¢˜ | 4å¤„/æœˆ | 0å¤„/æœˆ | â†“100% |
| è®¤è¯é—æ¼é—®é¢˜ | 2å¤„/æœˆ | 0å¤„/æœˆ | â†“100% |
| é—®é¢˜å‘ç°æ—¶é—´ | ä¸Šçº¿å | å¼€å‘æ—¶ | æå‰100% |
| ä¿®å¤æˆæœ¬ | 4å°æ—¶/æ¬¡ | 10åˆ†é’Ÿ/æ¬¡ | â†“96% |

### é•¿æœŸæ”¶ç›Š

1. **å‡å°‘æŠ€æœ¯å€ºåŠ¡**: é¢„é˜²æ€§æœºåˆ¶æ›¿ä»£æ‰“è¡¥ä¸
2. **æå‡ä»£ç è´¨é‡**: è‡ªåŠ¨åŒ–éªŒè¯ç¡®ä¿è§„èŒƒæ‰§è¡Œ
3. **é™ä½ç»´æŠ¤æˆæœ¬**: é—®é¢˜æ—©å‘ç°æ—©ä¿®å¤
4. **åŠ å¿«å¼€å‘é€Ÿåº¦**: å‡å°‘è¿”å·¥å’Œè°ƒè¯•æ—¶é—´
5. **æå‡å›¢é˜Ÿä¿¡å¿ƒ**: ç»Ÿä¸€è§„èŒƒå‡å°‘ä¸ç¡®å®šæ€§

---

## é™„å½•

### ç›¸å…³æ–‡æ¡£

- [APIè·¯å¾„å‘½åè§„èŒƒ](./APIè·¯å¾„å‘½åè§„èŒƒ.md)
- [æ•°æ®åº“å­—æ®µä½¿ç”¨è§„èŒƒ](./æ•°æ®åº“å­—æ®µä½¿ç”¨è§„èŒƒ.md)
- [WebSocketæŠ€æœ¯é€‰å‹æ–‡æ¡£](./WebSocketæŠ€æœ¯é€‰å‹.md)
- [è®¤è¯æœºåˆ¶ä½¿ç”¨è§„èŒƒ](./è®¤è¯æœºåˆ¶ä½¿ç”¨è§„èŒƒ.md)
- [å·¥å…·ç±»ä½¿ç”¨æ‰‹å†Œ](./å·¥å…·ç±»ä½¿ç”¨æ‰‹å†Œ.md)

### éªŒè¯å·¥å…·æºç 

æ‰€æœ‰éªŒè¯å·¥å…·æºç ä½äº `scripts/verification/` ç›®å½•

### é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»æŠ€æœ¯è´Ÿè´£äººæˆ–æäº¤Issue

---

**æ–‡æ¡£ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**æœ€åå®¡æ ¸**: 2025å¹´11æœˆ24æ—¥  
**ä¸‹æ¬¡review**: 2025å¹´12æœˆ24æ—¥

