# å¤§æ–‡ä»¶æ‹†åˆ†æ–¹æ¡ˆï¼ˆä¿æŒå•ä½“æ¶æ„ï¼‰

**åˆ›å»ºæ—¥æœŸ**ï¼š2026å¹´1æœˆ30æ—¥  
**æœ€åæ›´æ–°**ï¼š2026å¹´1æœˆ30æ—¥  
**èƒŒæ™¯**ï¼šé¡¹ç›®ä»£ç è§„æ¨¡åˆ†æå‘ç°å¤šä¸ªæœåŠ¡æ–‡ä»¶è¶…è¿‡2000è¡Œï¼Œå½±å“å¯ç»´æŠ¤æ€§  
**åŸåˆ™**ï¼šä¿æŒå•ä½“æ¶æ„ï¼Œé€šè¿‡æ–‡ä»¶æ‹†åˆ†é™ä½å•æ–‡ä»¶å¤æ‚åº¦

---

## 1. é¡¹ç›®è§„æ¨¡ç°çŠ¶

### 1.1 æ•´ä½“æ•°æ®

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| åç«¯æ€»ä»£ç è¡Œæ•° | 34.7ä¸‡è¡Œ |
| æœåŠ¡æ–‡ä»¶æ•° | 57ä¸ª |
| è·¯ç”±æ–‡ä»¶æ•° | 119ä¸ª |
| æ•°æ®åº“è¿ç§»æ–‡ä»¶ | 94ä¸ª |

### 1.2 å¤§æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | è¡Œæ•° | æ–¹æ³•æ•° | è¯„ä¼° |
|------|------|--------|------|
| LotteryAnalyticsService.js | 4,707 | 70 | âŒ éœ€è¦æ‹†åˆ† |
| AssetService.js | 2,297 | 23 | âš ï¸ å»ºè®®æ‹†åˆ† |
| MarketListingService.js | 2,274 | ~30 | âœ… æš‚å¯æ¥å— |
| ExchangeService.js | 1,873 | ~25 | âœ… æš‚å¯æ¥å— |
| ConsumptionService.js | 1,825 | ~20 | âœ… æš‚å¯æ¥å— |

### 1.3 æ˜¯å¦éœ€è¦å¾®æœåŠ¡æ‹†åˆ†ï¼Ÿ

**ç»“è®ºï¼šä¸éœ€è¦**

| ç»´åº¦ | åˆ†æ |
|------|------|
| å›¢é˜Ÿè§„æ¨¡ | å°å›¢é˜Ÿï¼Œå¾®æœåŠ¡å¢åŠ åä½œæˆæœ¬ |
| éƒ¨ç½²å¤æ‚åº¦ | å•ä½“éƒ¨ç½²æ›´ç®€å• |
| ä»£ç è€¦åˆåº¦ | ä¾èµ–å…³ç³»å¯æ§ï¼ˆæœ€å¤§10ä¸ªä¾èµ–ï¼‰ |
| å½“å‰é—®é¢˜æœ¬è´¨ | æ˜¯ä»£ç è´¨é‡é—®é¢˜ï¼Œä¸æ˜¯æ¶æ„é—®é¢˜ |

---

## 2. æ•°æ®åº“å®é™…æ•°æ®åˆ†æ

> åŸºäº 2026-01-30 å¯¹ç”Ÿäº§æ•°æ®åº“çš„å®æ—¶æŸ¥è¯¢åˆ†æ

### 2.1 æ ¸å¿ƒä¸šåŠ¡æ•°æ®è§„æ¨¡

#### ç”¨æˆ·ä¸è§’è‰²

| è§’è‰² | çº§åˆ« | äººæ•° |
|------|------|------|
| super_admin | 100 | 1 äºº |
| admin | 80 | 0 äºº |
| merchant | 50 | 1 äºº |
| vip_user | 30 | 0 äºº |
| user | 10 | 32 äºº |

**æ€»è®¡**ï¼š34 ä½ç”¨æˆ·

#### æŠ½å¥–ä¸šåŠ¡æ ¸å¿ƒæ•°æ®

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æŠ½å¥–æ´»åŠ¨æ•° | 11 ä¸ª |
| æ€»æŠ½å¥–æ¬¡æ•° | 1,102 æ¬¡ |
| å‚ä¸ç”¨æˆ·æ•° | 7 äºº |
| ä¸­å¥–æ¬¡æ•° | 854 æ¬¡ |
| ä¸­å¥–ç‡ | 77.5% |

#### æ´»åŠ¨é…ç½®ï¼ˆlottery_campaignsï¼‰

| æ´»åŠ¨ID | æ´»åŠ¨åç§° | çŠ¶æ€ | é¢„ç®—æ¨¡å¼ | æ—¥é¢„ç®— | æ± é¢„ç®— |
|--------|----------|------|----------|--------|--------|
| 8 | å…¨å±€æŠ½å¥–æ´»åŠ¨ | active | pool | - | 999999 |
| 11 | å…¨å±€æŠ½å¥– | ended | daily | 50000 | - |

> æ´»åŠ¨é‡‡ç”¨ `budget_mode` åŒºåˆ†ï¼š`pool`ï¼ˆæ€»é¢„ç®—æ± ï¼‰/ `daily`ï¼ˆæ—¥é¢„ç®—åˆ¶ï¼‰

### 2.2 èµ„äº§ç³»ç»Ÿæ•°æ®

#### è´¦æˆ·ä¸ä½™é¢

| æ•°æ®è¡¨ | è®°å½•æ•° | å­—æ®µæ•° | è¯´æ˜ |
|--------|--------|--------|------|
| accounts | 12 | 8 | ç”¨æˆ·è´¦æˆ· |
| account_asset_balances | 10 | 15 | èµ„äº§ä½™é¢ |
| asset_transactions | 1,217 | 19 | äº¤æ˜“æµæ°´ |

#### ç‰©å“ç³»ç»Ÿ

| æ•°æ®è¡¨ | è®°å½•æ•° | å­—æ®µæ•° | è¯´æ˜ |
|--------|--------|--------|------|
| item_instances | 853 | 22 | ç‰©å“å®ä¾‹ |
| item_instance_events | 1,706 | 14 | ç‰©å“äº‹ä»¶ |
| item_templates | 30 | 26 | ç‰©å“æ¨¡æ¿ |

#### ç‰©å“æ¨¡æ¿ç¤ºä¾‹

| æ¨¡æ¿ç¼–ç  | åç§° | åˆ†ç±» | ç¨€æœ‰åº¦ |
|----------|------|------|--------|
| PRIZE_COFFEE_COUPON_10 | 10å…ƒå’–å•¡ä¼˜æƒ åˆ¸ | COUPON | COMMON |
| PRIZE_ENERGY_DRINK | åŠŸèƒ½é¥®æ–™å…‘æ¢åˆ¸ | COUPON | UNCOMMON |
| PRIZE_LOTTERY_TICKET | å†æ¥ä¸€æ¬¡æŠ½å¥–åˆ¸ | TICKET | COMMON |
| PRIZE_MERCHANT_VOUCHER | å•†æˆ·æ»¡å‡åˆ¸ | VOUCHER | RARE |
| PRIZE_POINTS_PACKAGE | ç§¯åˆ†å¥–åŠ±åŒ… | POINTS | COMMON |

#### ç‰©å“å®ä¾‹çŠ¶æ€åˆ†å¸ƒ

| çŠ¶æ€ | æ•°é‡ |
|------|------|
| available | 836 |
| locked | 12 |
| consumed | 5 |

#### èµ„äº§ç±»å‹ï¼ˆmaterial_asset_typesï¼‰

| èµ„äº§ç¼–ç  | åç§° | ç»„ | å½¢æ€ | å±‚çº§ |
|----------|------|-----|------|------|
| PLATFORM_POINTS | å¹³å°ç§¯åˆ† | platform_currency | fungible | platform |
| MERCHANT_POINTS | å•†æˆ·ç§¯åˆ† | merchant_currency | fungible | merchant |
| SYSTEM_CREDITS | ç³»ç»Ÿä¿¡ç”¨é¢åº¦ | system_currency | fungible | system |

### 2.3 äº¤æ˜“å¸‚åœºæ•°æ®

#### æŒ‚ç‰ŒçŠ¶æ€åˆ†å¸ƒ

| çŠ¶æ€ | æ•°é‡ |
|------|------|
| active | 4 ä¸ª |
| completed | 2 ä¸ª |
| cancelled | 2 ä¸ª |

#### è®¢å•çŠ¶æ€åˆ†å¸ƒ

| çŠ¶æ€ | æ•°é‡ |
|------|------|
| completed | 2 ä¸ª |
| cancelled | 1 ä¸ª |

### 2.4 æŠ½å¥–åˆ†æç›¸å…³è¡¨

| æ•°æ®è¡¨ | è®°å½•æ•° | å­—æ®µæ•° | è¯´æ˜ |
|--------|--------|--------|------|
| lottery_hourly_metrics | 149 | 33 | å°æ—¶çº§ç»Ÿè®¡ |
| lottery_daily_metrics | 16 | 33 | æ—¥çº§ç»Ÿè®¡ |
| lottery_user_experience_state | 7 | 31 | ç”¨æˆ·ä½“éªŒçŠ¶æ€ |
| lottery_user_global_state | 7 | 16 | ç”¨æˆ·å…¨å±€çŠ¶æ€ |
| lottery_draw_decisions | 1,102 | 28 | æŠ½å¥–å†³ç­–è®°å½• |
| lottery_campaign_user_quota | 11 | 11 | ç”¨æˆ·æ´»åŠ¨é…é¢ |
| lottery_campaign_quota_grants | 0 | - | é…é¢å‘æ”¾è®°å½• |

---

## 3. é—¨é¢æ¨¡å¼å¿…è¦æ€§åˆ†æ

### 3.1 ä»€ä¹ˆæ˜¯é—¨é¢æ¨¡å¼ï¼Ÿ

é—¨é¢æ¨¡å¼ï¼ˆFacade Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„é«˜å±‚æ¥å£ï¼Œä½¿å­ç³»ç»Ÿæ›´æ˜“ä½¿ç”¨ã€‚

**åœ¨æœ¬é¡¹ç›®çš„åº”ç”¨åœºæ™¯**ï¼š
- æ‹†åˆ†åçš„å­æœåŠ¡ï¼ˆå¦‚ `LotteryRealtimeService`ã€`AssetBalanceService`ï¼‰æ˜¯"å­ç³»ç»Ÿ"
- åŸæœåŠ¡ï¼ˆå¦‚ `LotteryAnalyticsService`ã€`AssetService`ï¼‰ä½œä¸º"é—¨é¢"
- é—¨é¢æŠŠè°ƒç”¨è½¬å‘åˆ°å¯¹åº”çš„å­æœåŠ¡

### 3.2 è°ƒç”¨æ–¹åˆ†æ

#### LotteryAnalyticsService è°ƒç”¨æ–¹ï¼ˆ3å¤„ï¼‰

| æ–‡ä»¶ | è°ƒç”¨æ–¹å¼ | è°ƒç”¨æ–¹æ³• |
|------|----------|----------|
| routes/v4/console/lottery-campaigns.js | ç›´æ¥å¼•ç”¨ | 8ä¸ªæ–¹æ³• |
| routes/v4/console/lottery-analytics.js | ç›´æ¥å¼•ç”¨ | 15ä¸ªæ–¹æ³• |
| services/index.js | å¯¼å‡ºæ±‡æ€» | å…¨éƒ¨å¯¼å‡º |

**åˆ†æç»“è®º**ï¼šä»… 2 ä¸ªè·¯ç”±æ–‡ä»¶ç›´æ¥è°ƒç”¨ï¼Œè°ƒç”¨ç‚¹éå¸¸é›†ä¸­ã€‚

#### AssetService è°ƒç”¨æ–¹ï¼ˆ31å¤„ï¼‰

| ç±»åˆ« | æ–‡ä»¶æ•° | ä¸»è¦è°ƒç”¨æ–¹ |
|------|--------|------------|
| æœåŠ¡å±‚ | 14 | MarketListingService, TradeOrderService, ExchangeService ç­‰ |
| è·¯ç”±å±‚ | 4 | console/accounts.js, assets.js ç­‰ |
| å·¥å…·/ä»»åŠ¡ | 6 | transactionHelpers.js, jobs ç­‰ |
| æµ‹è¯•æ–‡ä»¶ | 7 | AssetService.test.js ç­‰ |

**åˆ†æç»“è®º**ï¼š31å¤„è°ƒç”¨åˆ†å¸ƒå¹¿æ³›ï¼Œä½†éƒ½åœ¨å†…éƒ¨ä»£ç ä¸­ï¼Œå¯æ‰¹é‡æ›¿æ¢ã€‚

### 3.3 é—¨é¢ vs ç›´æ¥æ‹†åˆ†å¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **é—¨é¢æ¨¡å¼** | è°ƒç”¨æ–¹é›¶æ”¹åŠ¨ã€é£é™©ä½ã€æ¸è¿›å¼è¿ç§» | å¤šä¸€å±‚é—´æ¥è°ƒç”¨ã€ä»£ç å†—ä½™ã€é•¿æœŸç»´æŠ¤è´Ÿæ‹… | å¤–éƒ¨ APIã€éœ€è¦é•¿æœŸå…¼å®¹ |
| **ç›´æ¥æ‹†åˆ†** | ä»£ç ç®€æ´ã€æ— å†—ä½™è½¬å‘ã€ä¸€æ¬¡åˆ°ä½ | éœ€è¦æ‰¹é‡ä¿®æ”¹è°ƒç”¨æ–¹ | å†…éƒ¨æœåŠ¡ã€å°å›¢é˜Ÿã€è°ƒç”¨ç‚¹å¯æ§ |

### 3.4 æœ€ç»ˆå†³ç­–

#### LotteryAnalyticsService â†’ **ä¸éœ€è¦é—¨é¢ï¼Œç›´æ¥æ‹†åˆ†**

ç†ç”±ï¼š
- ä»… 2 ä¸ªè·¯ç”±æ–‡ä»¶è°ƒç”¨
- ä¿®æ”¹å·¥ä½œé‡æå°ï¼ˆçº¦ 30 åˆ†é’Ÿï¼‰
- æ— å¤–éƒ¨ä¾èµ–æ–¹

#### AssetService â†’ **ä¸éœ€è¦é—¨é¢ï¼Œæ‰¹é‡æ›¿æ¢**

ç†ç”±ï¼š
- 31 å¤„è°ƒç”¨å…¨éƒ¨æ˜¯å†…éƒ¨ä»£ç 
- ä½¿ç”¨ IDE å…¨å±€æ›¿æ¢åŠŸèƒ½ï¼Œ1 å°æ—¶å†…å¯å®Œæˆ
- ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œæ— è½¬å‘å±‚å¼€é”€

---

## 4. ä¸šç•Œè®¾è®¡æ¨¡å¼å¯¹æ¯”

### 4.1 å¤§å…¬å¸æ¨¡å¼ï¼ˆç¾å›¢ã€è…¾è®¯ã€é˜¿é‡Œï¼‰

**æ¶æ„ç‰¹ç‚¹**ï¼š
- **å¾®æœåŠ¡æ¶æ„**ï¼šæ¯ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æ‰©å±•
- **API Gateway**ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±åˆ°åç«¯æœåŠ¡
- **æœåŠ¡æ³¨å†Œå‘ç°**ï¼šNacosã€Consulã€Eureka
- **åˆ†å¸ƒå¼äº‹åŠ¡**ï¼šSeataã€TCCã€SAGA

**æŠ€æœ¯æ ˆç¤ºä¾‹**ï¼š
```
ç”¨æˆ·è¯·æ±‚ â†’ API Gateway â†’ èµ„äº§æœåŠ¡ï¼ˆç‹¬ç«‹é›†ç¾¤ï¼‰
                        â†’ è®¢å•æœåŠ¡ï¼ˆç‹¬ç«‹é›†ç¾¤ï¼‰
                        â†’ åº“å­˜æœåŠ¡ï¼ˆç‹¬ç«‹é›†ç¾¤ï¼‰
```

**ä¼˜åŠ¿**ï¼š
- å¯ç‹¬ç«‹æ‰©å±•
- æ•…éšœéš”ç¦»
- å›¢é˜Ÿç‹¬ç«‹å¼€å‘

**ä»£ä»·**ï¼š
- è¿ç»´å¤æ‚åº¦é«˜
- éœ€è¦å¤§é‡åŸºç¡€è®¾æ–½
- åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†å›°éš¾
- éœ€è¦ä¸“èŒ DevOps å›¢é˜Ÿ

**é€‚ç”¨åœºæ™¯**ï¼šæ—¥æ´»ç™¾ä¸‡ä»¥ä¸Šã€50+ å¼€å‘äººå‘˜

### 4.2 ä¸­å‹å…¬å¸æ¨¡å¼

**æ¶æ„ç‰¹ç‚¹**ï¼š
- **æ¨¡å—åŒ–å•ä½“** æˆ– **è½»é‡çº§æœåŠ¡æ‹†åˆ†**
- å…³é”®æ¨¡å—ç‹¬ç«‹ï¼ˆå¦‚æ”¯ä»˜ã€è´¦æˆ·ï¼‰
- å…±äº«æ•°æ®åº“æˆ–è¯»å†™åˆ†ç¦»

**æŠ€æœ¯æ ˆç¤ºä¾‹**ï¼š
```
ç”¨æˆ·è¯·æ±‚ â†’ Nginx â†’ ä¸»åº”ç”¨ï¼ˆå¤§éƒ¨åˆ†é€»è¾‘ï¼‰
                  â†’ æ”¯ä»˜æœåŠ¡ï¼ˆæ ¸å¿ƒç‹¬ç«‹ï¼‰
                  â†’ å…±äº« MySQL + Redis
```

**ä¼˜åŠ¿**ï¼š
- éƒ¨ç½²ç›¸å¯¹ç®€å•
- å…³é”®æ¨¡å—å¯ç‹¬ç«‹æ‰©å±•
- å›¢é˜Ÿåä½œæˆæœ¬é€‚ä¸­

**é€‚ç”¨åœºæ™¯**ï¼šæ—¥æ´» 10-100 ä¸‡ã€10-50 å¼€å‘äººå‘˜

### 4.3 å°å…¬å¸ / åˆåˆ›æ¨¡å¼

**æ¶æ„ç‰¹ç‚¹**ï¼š
- **å•ä½“åº”ç”¨**ï¼Œå†…éƒ¨æŒ‰æ¨¡å—ç»„ç»‡
- æœåŠ¡å±‚æ‹†åˆ†æ–‡ä»¶ï¼Œä½†å…±ç”¨è¿›ç¨‹
- å¿«é€Ÿè¿­ä»£ï¼Œçµæ´»è°ƒæ•´

**æŠ€æœ¯æ ˆç¤ºä¾‹**ï¼š
```
ç”¨æˆ·è¯·æ±‚ â†’ Express/Koa â†’ å•è¿›ç¨‹åº”ç”¨
                        â”œâ”€â”€ services/asset/
                        â”œâ”€â”€ services/lottery/
                        â””â”€â”€ services/market/
                        â†’ å•æ•°æ®åº“ + Redis
```

**ä¼˜åŠ¿**ï¼š
- éƒ¨ç½²ç®€å•ï¼ˆå•è¿›ç¨‹ï¼‰
- å¼€å‘è°ƒè¯•æ–¹ä¾¿
- æ— åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜
- å¿«é€Ÿå“åº”ä¸šåŠ¡å˜åŒ–

**é€‚ç”¨åœºæ™¯**ï¼šæ—¥æ´» 1 ä¸‡ä»¥ä¸‹ã€1-10 å¼€å‘äººå‘˜

### 4.4 æ¸¸æˆå…¬å¸æ¨¡å¼

**è™šæ‹Ÿç‰©å“äº¤æ˜“ç³»ç»Ÿç‰¹ç‚¹**ï¼š

| æ¨¡å— | è®¾è®¡è¦ç‚¹ |
|------|----------|
| **èƒŒåŒ…ç³»ç»Ÿ** | ç‰©å“å®ä¾‹åŒ–ã€å †å /éå †å ã€é”å®š/è§£é”çŠ¶æ€ |
| **è´§å¸ç³»ç»Ÿ** | å¤šå¸ç§ï¼ˆé‡‘å¸/é’»çŸ³/ç§¯åˆ†ï¼‰ã€å†»ç»“/è§£å†»æœºåˆ¶ |
| **äº¤æ˜“ç³»ç»Ÿ** | å¹‚ç­‰æ€§ã€äº‹åŠ¡è¾¹ç•Œã€é˜²åˆ·æ§åˆ¶ |
| **æ¦‚ç‡ç³»ç»Ÿ** | ä¿åº•æœºåˆ¶ã€ä½“éªŒè°ƒæ§ã€æ¦‚ç‡å®¡è®¡ |

**æŠ€æœ¯å®ç°**ï¼š
- å¼ºäº‹åŠ¡ä¿è¯ï¼ˆå®å¯å¤±è´¥ä¸å¯è„æ•°æ®ï¼‰
- è¯¦ç»†çš„æ“ä½œæ—¥å¿—ï¼ˆå®¡è®¡è¿½è¸ªï¼‰
- ç‰©å“çŠ¶æ€æœºï¼ˆavailable â†’ locked â†’ consumed/transferredï¼‰

**ä»£ç ç»„ç»‡**ï¼š
```
services/
â”œâ”€â”€ inventory/           # èƒŒåŒ…/åº“å­˜
â”‚   â”œâ”€â”€ InventoryCore.js     # æ ¸å¿ƒå¢åˆ æ”¹
â”‚   â””â”€â”€ InventoryQuery.js    # æŸ¥è¯¢ç»Ÿè®¡
â”œâ”€â”€ currency/            # è´§å¸/ç§¯åˆ†
â”‚   â”œâ”€â”€ CurrencyBalance.js   # ä½™é¢æ“ä½œ
â”‚   â””â”€â”€ CurrencyFrozen.js    # å†»ç»“æ“ä½œ
â””â”€â”€ trading/             # äº¤æ˜“
    â”œâ”€â”€ TradingOrder.js      # è®¢å•ç®¡ç†
    â””â”€â”€ TradingMatch.js      # æ’®åˆé€»è¾‘
```

### 4.5 å°ä¼—äºŒæ‰‹å¹³å°æ¨¡å¼

**å…¸å‹ä»£è¡¨**ï¼šäºŒæ‰‹å•†å“ã€è—å“äº¤æ˜“ã€ç§¯åˆ†å…‘æ¢

**è®¾è®¡ç‰¹ç‚¹**ï¼š
- è½»é‡åŒ–è®¾è®¡ï¼Œå¿«é€Ÿä¸Šçº¿
- å•†å“/ç‰©å“éæ ‡å‡†åŒ–
- äº¤æ˜“æµç¨‹ç›¸å¯¹ç®€å•
- é‡ç‚¹å…³æ³¨æ”¯ä»˜å’Œç‰©æµå¯¹æ¥

**ä»£ç ç»„ç»‡**ï¼š
```
services/
â”œâ”€â”€ ItemService.js        # ç‰©å“ç®¡ç†ï¼ˆä¸Šæ¶/ä¸‹æ¶/ç¼–è¾‘ï¼‰
â”œâ”€â”€ OrderService.js       # è®¢å•æµç¨‹
â”œâ”€â”€ PaymentService.js     # æ”¯ä»˜å¯¹æ¥
â””â”€â”€ NotificationService.js # æ¶ˆæ¯é€šçŸ¥
```

### 4.6 å¯¹æ¯”æ€»ç»“

| ç±»å‹ | æ¶æ„ | æœåŠ¡æ‹†åˆ†ç²’åº¦ | äº‹åŠ¡å¤„ç† | åŸºç¡€è®¾æ–½ | å›¢é˜Ÿè§„æ¨¡ |
|------|------|-------------|----------|----------|----------|
| å¤§å…¬å¸ | å¾®æœåŠ¡ | ç»†ç²’åº¦ | åˆ†å¸ƒå¼äº‹åŠ¡ | å¤æ‚ | 50+ |
| ä¸­å‹å…¬å¸ | æ¨¡å—åŒ– | ä¸­ç­‰ | æœ¬åœ°äº‹åŠ¡ä¸ºä¸» | é€‚ä¸­ | 10-50 |
| å°å…¬å¸ | å•ä½“ | æ–‡ä»¶çº§ | æœ¬åœ°äº‹åŠ¡ | ç®€å• | 1-10 |
| æ¸¸æˆå…¬å¸ | å•ä½“/æ¨¡å— | é¢†åŸŸé©±åŠ¨ | å¼ºä¸€è‡´æ€§ | æŒ‰éœ€ | 5-30 |
| äºŒæ‰‹å¹³å° | è½»é‡å•ä½“ | åŠŸèƒ½çº§ | æœ¬åœ°äº‹åŠ¡ | æœ€ç®€ | 1-5 |

---

## 5. æœ¬é¡¹ç›®æœ€ä½³å®è·µæ–¹æ¡ˆ

### 5.1 é¡¹ç›®å®šä½åˆ†æ

| ç»´åº¦ | ç°çŠ¶ | ç»“è®º |
|------|------|------|
| å›¢é˜Ÿè§„æ¨¡ | å°å›¢é˜Ÿï¼ˆ1-3 äººï¼‰ | ä¸é€‚åˆå¾®æœåŠ¡ |
| ä¸šåŠ¡è§„æ¨¡ | 34 ç”¨æˆ·ã€1102 æ¬¡æŠ½å¥– | æ—©æœŸé˜¶æ®µ |
| ä»£ç è§„æ¨¡ | 34.7 ä¸‡è¡Œã€57 ä¸ªæœåŠ¡ | å·²æœ‰ä¸€å®šå¤æ‚åº¦ |
| æŠ€æœ¯å€ºåŠ¡ | å¤§æ–‡ä»¶éœ€è¦æ‹†åˆ† | éœ€è¦ä¼˜åŒ– |

### 5.2 æ¨èæ–¹æ¡ˆï¼šæ¨¡å—åŒ–å•ä½“ï¼ˆæ–‡ä»¶çº§æ‹†åˆ†ï¼‰

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. **ä¿æŒå•ä½“æ¶æ„**ï¼šå•è¿›ç¨‹éƒ¨ç½²ï¼Œç®€å•å¯é 
2. **æŒ‰èŒè´£æ‹†åˆ†æ–‡ä»¶**ï¼šé™ä½å•æ–‡ä»¶å¤æ‚åº¦
3. **ä¸ä½¿ç”¨é—¨é¢æ¨¡å¼**ï¼šè°ƒç”¨æ–¹ç›´æ¥å¼•ç”¨å­æœåŠ¡
4. **åˆ©ç”¨ IDE é‡æ„å·¥å…·**ï¼šæ‰¹é‡æ›¿æ¢è°ƒç”¨æ–¹

**æ¶æ„å›¾**ï¼š
```
services/
â”œâ”€â”€ lottery/                        # æŠ½å¥–åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ index.js                    # æ¨¡å—å…¥å£ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ LotteryRealtimeService.js   # å®æ—¶ç›‘æ§
â”‚   â”œâ”€â”€ LotteryStatisticsService.js # ç»Ÿè®¡è¶‹åŠ¿
â”‚   â”œâ”€â”€ LotteryReportService.js     # æŠ¥è¡¨ç”Ÿæˆ
â”‚   â”œâ”€â”€ LotteryUserAnalysisService.js    # ç”¨æˆ·åˆ†æ
â”‚   â””â”€â”€ LotteryCampaignAnalysisService.js # æ´»åŠ¨åˆ†æ
â”‚
â”œâ”€â”€ asset/                          # èµ„äº§æ¨¡å—
â”‚   â”œâ”€â”€ index.js                    # æ¨¡å—å…¥å£ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ AssetBalanceService.js      # ä½™é¢æ“ä½œ
â”‚   â”œâ”€â”€ AssetItemService.js         # ç‰©å“æ“ä½œ
â”‚   â””â”€â”€ AssetQueryService.js        # æŸ¥è¯¢ç»Ÿè®¡
â”‚
â”œâ”€â”€ LotteryAnalyticsService.js      # ğŸ—‘ï¸ æ‹†åˆ†ååˆ é™¤
â””â”€â”€ AssetService.js                 # ğŸ—‘ï¸ æ‹†åˆ†ååˆ é™¤
```

### 5.3 ä¸ºä»€ä¹ˆä¸ç”¨é—¨é¢ï¼Ÿ

| å› ç´  | åˆ†æ | ç»“è®º |
|------|------|------|
| å¤–éƒ¨ä¾èµ– | æ— å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨è¿™äº›æœåŠ¡ | æ— éœ€å…¼å®¹ |
| è°ƒç”¨ç‚¹æ•°é‡ | å¯æ§ï¼ˆ3 + 31 å¤„ï¼‰ | å¯æ‰¹é‡æ›¿æ¢ |
| å›¢é˜Ÿåä½œ | å°å›¢é˜Ÿï¼Œæ²Ÿé€šæˆæœ¬ä½ | å¯ä¸€æ¬¡æ€§æ”¹å®Œ |
| ä»£ç è´¨é‡ | é—¨é¢å¢åŠ é—´æ¥å±‚ | ç›´æ¥å¼•ç”¨æ›´æ¸…æ™° |
| ç»´æŠ¤æˆæœ¬ | é—¨é¢éœ€è¦æŒç»­ç»´æŠ¤ | ä¸€æ¬¡æ”¹å®Œæ— è´Ÿæ‹… |

---

## 6. æ‹†åˆ†åŸåˆ™

### 6.1 æ ¸å¿ƒåŸåˆ™

1. **æŒ‰èŒè´£æ‹†åˆ†**ï¼šä¸€ä¸ªæ–‡ä»¶åªåšä¸€ç±»äº‹æƒ…
2. **ç›´æ¥æ›¿æ¢è°ƒç”¨æ–¹**ï¼šä¸ä½¿ç”¨é—¨é¢è½¬å‘
3. **å…±äº«æ¨¡å—æå–**ï¼šå…¬å…±å·¥å…·å‡½æ•°ç‹¬ç«‹
4. **å•æ–‡ä»¶ä¸Šé™**ï¼šæ‹†åˆ†åæ¯ä¸ªæ–‡ä»¶æ§åˆ¶åœ¨ 1000 è¡Œä»¥å†…

### 6.2 ç›®å½•ç»“æ„è§„èŒƒ

```
services/
â”œâ”€â”€ lottery/                    # æŠ½å¥–ç›¸å…³å­æœåŠ¡
â”‚   â”œâ”€â”€ index.js               # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ LotteryRealtimeService.js
â”‚   â”œâ”€â”€ LotteryStatisticsService.js
â”‚   â”œâ”€â”€ LotteryReportService.js
â”‚   â”œâ”€â”€ LotteryUserAnalysisService.js
â”‚   â””â”€â”€ LotteryCampaignAnalysisService.js
â”‚
â”œâ”€â”€ asset/                      # èµ„äº§ç›¸å…³å­æœåŠ¡
â”‚   â”œâ”€â”€ index.js               # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ AssetBalanceService.js
â”‚   â”œâ”€â”€ AssetItemService.js
â”‚   â””â”€â”€ AssetQueryService.js
â”‚
â””â”€â”€ shared/                     # å…±äº«æ¨¡å—
    â””â”€â”€ RedisHelper.js         # Redis å·¥å…·å‡½æ•°
```

---

## 7. LotteryAnalyticsService æ‹†åˆ†æ–¹æ¡ˆ

### 7.1 å½“å‰çŠ¶æ€

- **æ–‡ä»¶**ï¼š`services/LotteryAnalyticsService.js`
- **è¡Œæ•°**ï¼š4,707 è¡Œ
- **æ–¹æ³•æ•°**ï¼š70 ä¸ªå…¬å…±æ–¹æ³• + çº¦ 160 ä¸ªå†…éƒ¨æ–¹æ³•
- **ä¾èµ–**ï¼šsequelize, logger, UnifiedRedisClient, 10+ æ•°æ®æ¨¡å‹
- **é—®é¢˜**ï¼šèŒè´£è¿‡å¤šï¼Œæ¶µç›–å®æ—¶ç›‘æ§ã€ç»Ÿè®¡ã€æŠ¥è¡¨ã€ç”¨æˆ·åˆ†æã€æ´»åŠ¨åˆ†æ

### 7.2 æ–¹æ³•åŠŸèƒ½åˆ†ç±»

ç»è¿‡åˆ†æï¼Œ70ä¸ªæ–¹æ³•å¯åˆ†ä¸º5ä¸ªåŠŸèƒ½åŸŸï¼š

#### å®æ—¶ç›‘æ§ï¼ˆRealtimeï¼‰- 12ä¸ªæ–¹æ³•

```
getRealtimeOverview()
getRealtimeAlerts()
getMonitoringStats()
_checkBudgetAlerts()
_checkEmptyStreakAlerts()
_checkHighFrequencyAlerts()
_checkLowStockPrizes()
_checkStockAlerts()
_checkWinRateAlerts()
_getRedisClient()
```

#### ç»Ÿè®¡è¶‹åŠ¿ï¼ˆStatisticsï¼‰- 15ä¸ªæ–¹æ³•

```
getHourlyTrend()
getDailyTrend()
getHourlyMetrics()
getHourlyMetricById()
getHourlyMetricsSummary()
_getHourlyFromDraws()
_getHourlyFromMetrics()
_getHourStatsFromDraws()
_getTodayStatsFromDraws()
_getDrawStats()
_getHourlyTrend()
_getPrizeDistribution()
_getRecentDraws()
_getPrizeStats()
```

#### æŠ¥è¡¨ç”Ÿæˆï¼ˆReportï¼‰- 10ä¸ªæ–¹æ³•

```
generateDailyReport()
generateCampaignReport()
_getDailyReportStats()
_getDailyReportCampaignsBreakdown()
_getDailyReportHourlyBreakdown()
_getDailyReportTierBreakdown()
_getDailyReportTopPrizes()
_generateDailyReportAlerts()
```

#### ç”¨æˆ·åˆ†æï¼ˆUserAnalysisï¼‰- 12ä¸ªæ–¹æ³•

```
getUserDrawRecords()
getUserProfile()
getUserExperienceStates()
getUserExperienceState()
getUserGlobalStates()
getUserGlobalState()
getUserQuotas()
getUserQuota()
getQuotaGrants()
getQuotaGrantById()
getAbnormalUsers()
getDrawDetails()
```

#### æ´»åŠ¨åˆ†æï¼ˆCampaignï¼‰- 21ä¸ªæ–¹æ³•

```
getCampaignQuotaStats()
getCampaignROI()
getTierDistribution()
getBudgetConsumption()
getExperienceTriggers()
getStrategyEffectiveness()
_getTierDistributionFromDecisions()
_getTierDistributionFromHourly()
_getTierDistributionFromDaily()
_getExperienceTriggersFromDecisions()
_getExperienceTriggersFromHourly()
_getExperienceTriggersFromDaily()
_getBudgetConsumptionFromDraws()
_getBudgetConsumptionFromHourly()
_getBudgetConsumptionFromDaily()
_getBudgetProgress()
_getCampaignDailyDistribution()
_getCampaignExperienceMetrics()
_getCampaignHistoryComparison()
_getCampaignHourlyDistribution()
_getCampaignTierDistribution()
_getCampaignTopPrizes()
_getCampaignUserAnalysis()
_analyzeBxPxMatrix()
_analyzeExperienceMechanisms()
_analyzeTierDowngrade()
```

### 7.3 ç›®æ ‡æ–‡ä»¶ç»“æ„

```
services/
â”œâ”€â”€ lottery/
â”‚   â”œâ”€â”€ index.js                          # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ LotteryRealtimeService.js         # ~800è¡Œ - å®æ—¶ç›‘æ§å’Œå‘Šè­¦
â”‚   â”œâ”€â”€ LotteryStatisticsService.js       # ~900è¡Œ - è¶‹åŠ¿å’Œç»Ÿè®¡
â”‚   â”œâ”€â”€ LotteryReportService.js           # ~700è¡Œ - æŠ¥è¡¨ç”Ÿæˆ
â”‚   â”œâ”€â”€ LotteryUserAnalysisService.js     # ~800è¡Œ - ç”¨æˆ·ç»´åº¦åˆ†æ
â”‚   â””â”€â”€ LotteryCampaignAnalysisService.js # ~1000è¡Œ - æ´»åŠ¨ç»´åº¦åˆ†æ
```

### 7.4 è°ƒç”¨æ–¹ä¿®æ”¹ç¤ºä¾‹

**ä¿®æ”¹å‰**ï¼š
```javascript
const LotteryAnalyticsService = require('../services/LotteryAnalyticsService')
// è°ƒç”¨
await LotteryAnalyticsService.getRealtimeOverview(campaignId)
await LotteryAnalyticsService.getUserProfile(userId)
```

**ä¿®æ”¹å**ï¼š
```javascript
const { 
  LotteryRealtimeService, 
  LotteryUserAnalysisService 
} = require('../services/lottery')
// è°ƒç”¨
await LotteryRealtimeService.getRealtimeOverview(campaignId)
await LotteryUserAnalysisService.getUserProfile(userId)
```

### 7.5 éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| routes/v4/console/lottery-campaigns.js | æ›¿æ¢å¼•ç”¨ï¼ŒæŒ‰æ–¹æ³•å¯¹åº”å­æœåŠ¡ |
| routes/v4/console/lottery-analytics.js | æ›¿æ¢å¼•ç”¨ï¼ŒæŒ‰æ–¹æ³•å¯¹åº”å­æœåŠ¡ |
| services/index.js | æ›´æ–°å¯¼å‡ºï¼ˆå¯é€‰ä¿ç•™åŸåå¯¼å‡ºï¼‰ |

---

## 8. AssetService æ‹†åˆ†æ–¹æ¡ˆ

### 8.1 å½“å‰çŠ¶æ€

- **æ–‡ä»¶**ï¼š`services/AssetService.js`
- **è¡Œæ•°**ï¼š2,297 è¡Œ
- **æ–¹æ³•æ•°**ï¼š23 ä¸ªé™æ€æ–¹æ³•
- **ä¾èµ–**ï¼šAccount, AccountAssetBalance, AssetTransaction, User, sequelize, logger
- **é—®é¢˜**ï¼šä½™é¢æ“ä½œå’Œç‰©å“æ“ä½œæ··åœ¨ä¸€èµ·
- **æ ¸å¿ƒç‰¹æ€§**ï¼š`checkTransactionBoundary()` å¼ºåˆ¶äº‹åŠ¡è¾¹ç•Œæ£€æŸ¥

### 8.2 æ–¹æ³•åŠŸèƒ½åˆ†ç±»

#### ä½™é¢æ“ä½œï¼ˆBalanceï¼‰- 8ä¸ªæ–¹æ³•

```
getOrCreateAccount()
getOrCreateBalance()
changeBalance()
freeze()
unfreeze()
settleFromFrozen()
getBalance()
getAllBalances()
```

#### ç‰©å“æ“ä½œï¼ˆItemï¼‰- 9ä¸ªæ–¹æ³•

```
mintItem()
lockItem()
unlockItem()
transferItem()
consumeItem()
recordItemEvent()
getItemEvents()
getUserItemInstances()
getItemInstanceDetail()
```

#### æŸ¥è¯¢ç»Ÿè®¡ï¼ˆQueryï¼‰- 6ä¸ªæ–¹æ³•

```
getTotalBudgetPoints()
getBudgetPointsByCampaigns()
getTransactions()
getTransactionByIdempotencyKey()
getAssetPortfolio()
getSystemStats()
```

### 8.3 ç›®æ ‡æ–‡ä»¶ç»“æ„

```
services/
â”œâ”€â”€ asset/
â”‚   â”œâ”€â”€ index.js                  # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ AssetBalanceService.js    # ~800è¡Œ - ä½™é¢æ“ä½œ
â”‚   â”œâ”€â”€ AssetItemService.js       # ~700è¡Œ - ç‰©å“æ“ä½œ
â”‚   â”œâ”€â”€ AssetQueryService.js      # ~500è¡Œ - æŸ¥è¯¢ç»Ÿè®¡
â”‚   â””â”€â”€ AssetTransactionHelper.js # ~100è¡Œ - å…±äº«äº‹åŠ¡å·¥å…·
```

### 8.4 å…±äº«æ¨¡å—ï¼šAssetTransactionHelper

```javascript
// services/asset/AssetTransactionHelper.js
const { sequelize } = require('../../config/database')

/**
 * äº‹åŠ¡è¾¹ç•Œæ£€æŸ¥å·¥å…·
 * ä»åŸ AssetService.checkTransactionBoundary æå–
 */
function checkTransactionBoundary(options, operationName) {
  if (!options?.transaction) {
    throw new Error(`TRANSACTION_REQUIRED: ${operationName} å¿…é¡»åœ¨äº‹åŠ¡å†…æ‰§è¡Œ`)
  }
}

module.exports = { checkTransactionBoundary, sequelize }
```

### 8.5 éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ31å¤„ï¼‰

| ç±»åˆ« | æ–‡ä»¶ | ä¿®æ”¹ç­–ç•¥ |
|------|------|----------|
| æœåŠ¡å±‚ | MarketListingService.js | Balance â†’ AssetBalanceService, Item â†’ AssetItemService |
| æœåŠ¡å±‚ | TradeOrderService.js | åŒä¸Š |
| æœåŠ¡å±‚ | OrphanFrozenCleanupService.js | Balance â†’ AssetBalanceService |
| æœåŠ¡å±‚ | PremiumService.js | Balance â†’ AssetBalanceService |
| æœåŠ¡å±‚ | ExchangeService.js | Balance â†’ AssetBalanceService |
| æœåŠ¡å±‚ | BackpackService.js | Item â†’ AssetItemService |
| æœåŠ¡å±‚ | ConsumptionService.js | Item â†’ AssetItemService |
| æœåŠ¡å±‚ | RedemptionService.js | Item â†’ AssetItemService |
| æœåŠ¡å±‚ | MerchantPointsService.js | Balance â†’ AssetBalanceService |
| è·¯ç”±å±‚ | console/accounts.js | æŒ‰è°ƒç”¨æ–¹æ³•åˆ†é… |
| å·¥å…·å±‚ | transactionHelpers.js | æŒ‰è°ƒç”¨æ–¹æ³•åˆ†é… |
| ä»»åŠ¡å±‚ | jobs/*.js | æŒ‰è°ƒç”¨æ–¹æ³•åˆ†é… |
| æµ‹è¯• | *.test.js | æŒ‰æµ‹è¯•ç›®æ ‡åˆ†é… |

### 8.6 æ‰¹é‡æ›¿æ¢å‘½ä»¤ï¼ˆIDE æ“ä½œï¼‰

ä½¿ç”¨ VSCode æˆ– WebStorm çš„å…¨å±€æœç´¢æ›¿æ¢ï¼š

```
æœç´¢: require('.*AssetService')
æ›¿æ¢: require('../asset') æˆ–å…·ä½“å­æœåŠ¡

æœç´¢: AssetService.freeze(
æ›¿æ¢: AssetBalanceService.freeze(

æœç´¢: AssetService.mintItem(
æ›¿æ¢: AssetItemService.mintItem(
```

---

## 9. å®æ–½æ­¥éª¤

### 9.1 Phase 1ï¼šLotteryAnalyticsServiceï¼ˆ2-3å¤©ï¼‰

| æ­¥éª¤ | ä»»åŠ¡ | äº§å‡º | é¢„è®¡æ—¶é—´ |
|------|------|------|----------|
| 1 | åˆ›å»º `services/lottery/` ç›®å½•ç»“æ„ | ç›®å½• + index.js | 15åˆ†é’Ÿ |
| 2 | æå– LotteryRealtimeService | å­æœåŠ¡æ–‡ä»¶ | 2å°æ—¶ |
| 3 | æå– LotteryStatisticsService | å­æœåŠ¡æ–‡ä»¶ | 2å°æ—¶ |
| 4 | æå– LotteryReportService | å­æœåŠ¡æ–‡ä»¶ | 1.5å°æ—¶ |
| 5 | æå– LotteryUserAnalysisService | å­æœåŠ¡æ–‡ä»¶ | 2å°æ—¶ |
| 6 | æå– LotteryCampaignAnalysisService | å­æœåŠ¡æ–‡ä»¶ | 2.5å°æ—¶ |
| 7 | ä¿®æ”¹è°ƒç”¨æ–¹ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰ | å¼•ç”¨æ›´æ–° | 30åˆ†é’Ÿ |
| 8 | åˆ é™¤åŸ LotteryAnalyticsService.js | æ¸…ç† | 5åˆ†é’Ÿ |
| 9 | è¿è¡Œæµ‹è¯•éªŒè¯ | æµ‹è¯•é€šè¿‡ | 1å°æ—¶ |

### 9.2 Phase 2ï¼šAssetServiceï¼ˆ1-2å¤©ï¼‰

| æ­¥éª¤ | ä»»åŠ¡ | äº§å‡º | é¢„è®¡æ—¶é—´ |
|------|------|------|----------|
| 1 | åˆ›å»º `services/asset/` ç›®å½•ç»“æ„ | ç›®å½• + index.js | 15åˆ†é’Ÿ |
| 2 | æå– AssetTransactionHelper | å…±äº«æ¨¡å— | 30åˆ†é’Ÿ |
| 3 | æå– AssetBalanceService | å­æœåŠ¡æ–‡ä»¶ | 2å°æ—¶ |
| 4 | æå– AssetItemService | å­æœåŠ¡æ–‡ä»¶ | 2å°æ—¶ |
| 5 | æå– AssetQueryService | å­æœåŠ¡æ–‡ä»¶ | 1.5å°æ—¶ |
| 6 | æ‰¹é‡ä¿®æ”¹è°ƒç”¨æ–¹ï¼ˆ31å¤„ï¼‰ | å¼•ç”¨æ›´æ–° | 2å°æ—¶ |
| 7 | åˆ é™¤åŸ AssetService.js | æ¸…ç† | 5åˆ†é’Ÿ |
| 8 | è¿è¡Œæµ‹è¯•éªŒè¯ | æµ‹è¯•é€šè¿‡ | 1å°æ—¶ |

### 9.3 æ€»ä½“æ—¶é—´ä¼°ç®—

| é˜¶æ®µ | å·¥ä½œé‡ |
|------|--------|
| LotteryAnalyticsService æ‹†åˆ† | 2-3å¤© |
| AssetService æ‹†åˆ† | 1-2å¤© |
| æµ‹è¯•éªŒè¯ + æ–‡æ¡£æ›´æ–° | 1å¤© |
| **æ€»è®¡** | **4-6å¤©** |

---

## 10. éªŒæ”¶æ ‡å‡†

### 10.1 ä»£ç æ ‡å‡†

- [ ] æ‹†åˆ†åå•æ–‡ä»¶ä¸è¶…è¿‡ 1000 è¡Œ
- [ ] æ‰€æœ‰å­æœåŠ¡æœ‰å®Œæ•´çš„ JSDoc æ³¨é‡Š
- [ ] è°ƒç”¨æ–¹æ­£ç¡®å¼•ç”¨å¯¹åº”å­æœåŠ¡
- [ ] æ— å¾ªç¯ä¾èµ–
- [ ] åŸæœåŠ¡æ–‡ä»¶å·²åˆ é™¤

### 10.2 æµ‹è¯•æ ‡å‡†

- [ ] ç°æœ‰æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] å­æœåŠ¡æœ‰ç‹¬ç«‹çš„å•å…ƒæµ‹è¯•
- [ ] API æ¥å£è¡Œä¸ºæ— å˜åŒ–

### 10.3 æ–‡æ¡£æ ‡å‡†

- [ ] æ›´æ–°æœåŠ¡ä¾èµ–å›¾
- [ ] æ›´æ–°æœ¬æ–‡æ¡£çŠ¶æ€
- [ ] å­æœåŠ¡å…¥å£æ–‡ä»¶ï¼ˆindex.jsï¼‰æœ‰ä½¿ç”¨è¯´æ˜

---

## 11. æ‹†åˆ†æ”¶ç›Š

| æ–¹é¢ | æ‹†åˆ†å‰ | æ‹†åˆ†å |
|------|--------|--------|
| **æœ€å¤§æ–‡ä»¶è¡Œæ•°** | 4,707 | <1,000 |
| **å•æ–‡ä»¶èŒè´£** | 5ç§æ··åˆ | å•ä¸€èŒè´£ |
| **å¯æµ‹è¯•æ€§** | éœ€è¦ mock æ•´ä¸ªæœåŠ¡ | å­æœåŠ¡å¯ç‹¬ç«‹æµ‹è¯• |
| **ä»£ç å®¡æŸ¥** | éš¾ä»¥å¿«é€Ÿç†è§£ | èŒè´£æ¸…æ™°æ˜“å®¡æŸ¥ |
| **å¹¶è¡Œå¼€å‘** | å®¹æ˜“å†²çª | ä¸åŒäººæ”¹ä¸åŒæ–‡ä»¶ |
| **è°ƒç”¨æ¸…æ™°åº¦** | ç»Ÿä¸€å…¥å£ | æŒ‰èŒè´£ç›´æ¥å¼•ç”¨ |
| **ä»£ç å†—ä½™** | - | æ— é—¨é¢è½¬å‘å±‚ |

---

## 12. é£é™©å’Œæ³¨æ„äº‹é¡¹

### 12.1 é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| æ‹†åˆ†è¿‡ç¨‹å¼•å…¥Bug | åŠŸèƒ½å¼‚å¸¸ | å……åˆ†æµ‹è¯•ï¼Œé€æ­¥æäº¤ |
| å¾ªç¯ä¾èµ– | å¯åŠ¨å¤±è´¥ | ä¾èµ–å…³ç³»æå‰è§„åˆ’ï¼Œå…±äº«æ¨¡å—æå– |
| é—æ¼è°ƒç”¨æ–¹ | è¿è¡Œé”™è¯¯ | grep å…¨é¢æœç´¢ï¼Œæµ‹è¯•è¦†ç›– |

### 12.2 æ³¨æ„äº‹é¡¹

1. **ç§æœ‰æ–¹æ³•å¤„ç†**ï¼šä»¥ `_` å¼€å¤´çš„æ–¹æ³•è·Ÿéšå…¶ä¸»æ–¹æ³•ç§»åŠ¨
2. **å…±äº«ä¾èµ–**ï¼š`_getRedisClient()`ã€`checkTransactionBoundary()` æå–åˆ°å…¬å…±æ¨¡å—
3. **äº‹åŠ¡è¾¹ç•Œ**ï¼šç¡®ä¿ `AssetTransactionHelper` åœ¨æ‰€æœ‰å­æœåŠ¡ä¸­æ­£ç¡®å¼•ç”¨
4. **æ—¥å¿—æ ‡è¯†**ï¼šå­æœåŠ¡ä½¿ç”¨ç‹¬ç«‹çš„æ—¥å¿—æ ‡ç­¾ä¾¿äºè¿½è¸ª

---

## 13. åç»­ä¼˜åŒ–

### 13.1 çŸ­æœŸï¼ˆæ‹†åˆ†å®Œæˆåï¼‰

- ä¸ºå­æœåŠ¡è¡¥å……å•å…ƒæµ‹è¯•
- æ·»åŠ æœåŠ¡è°ƒç”¨é“¾è·¯è¿½è¸ª
- æ£€æŸ¥å¹¶ä¼˜åŒ–æœåŠ¡é—´ä¾èµ–

### 13.2 é•¿æœŸ

- å»ºç«‹æœåŠ¡æ‹†åˆ†çš„è‡ªåŠ¨åŒ–æ£€æŸ¥ï¼ˆè¶…è¿‡ 1500 è¡Œå‘Šè­¦ï¼‰
- å®šæœŸ Review æœåŠ¡èŒè´£è¾¹ç•Œ
- è€ƒè™‘æŒ‰é¢†åŸŸè¿›ä¸€æ­¥ç»„ç»‡ä»£ç ï¼ˆDDD é£æ ¼ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0  
**åˆ›å»ºæ—¶é—´**ï¼š2026-01-30  
**æ›´æ–°æ—¶é—´**ï¼š2026-01-30  
**é€‚ç”¨èŒƒå›´**ï¼šåç«¯æœåŠ¡ä»£ç é‡æ„  
**æ ¸å¿ƒå†³ç­–**ï¼šä¸ä½¿ç”¨é—¨é¢æ¨¡å¼ï¼Œç›´æ¥æ‹†åˆ†å¹¶æ‰¹é‡æ›¿æ¢è°ƒç”¨æ–¹
