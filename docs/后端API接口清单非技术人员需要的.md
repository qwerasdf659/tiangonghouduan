# é¤å…ç§¯åˆ†æŠ½å¥–ç³»ç»Ÿ V4.0 - APIæ¥å£æ¸…å•

**ç³»ç»Ÿåç§°**: é¤å…ç§¯åˆ†æŠ½å¥–ç³»ç»Ÿ
**ç³»ç»Ÿç‰ˆæœ¬**: V4.0
**æ—¶åŒºæ ‡å‡†**: æ‰€æœ‰æ—¶é—´å‡é‡‡ç”¨åŒ—äº¬æ—¶é—´(GMT+8/Asia/Shanghai)ï¼Œæ—¶é—´æˆ³æ ¼å¼ä¸ºISO8601+08:00
**ç¼–ç æ ‡å‡†**: UTF-8æ— BOMï¼ˆæ‰€æœ‰æ–‡ä»¶ç»Ÿä¸€ç¼–ç ï¼‰
**è·¯ç”±æ ‡å‡†**: Express Routeræ¨¡å—åŒ–è®¾è®¡ - è·¯ç”±æ–‡ä»¶å†…éƒ¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„å®šä¹‰ï¼ˆå¦‚`router.get('/balance')`ï¼‰ï¼Œåœ¨`app.js`ä¸­é€šè¿‡`app.use('/api/v4/points', require('./routes/v4/unified-engine/points'))`æ³¨å†Œå®Œæ•´è·¯å¾„å‰ç¼€ï¼Œæœ€ç»ˆè®¿é—®è·¯å¾„=å‰ç¼€+ç›¸å¯¹è·¯å¾„


**Express Routerè·¯å¾„ç»„åˆè§„åˆ™ï¼ˆæ ¸å¿ƒè§„èŒƒï¼‰**:
- **æ–‡æ¡£ä¸­çš„è·¯å¾„**: å®Œæ•´è®¿é—®è·¯å¾„ï¼ˆå¦‚`GET /api/v4/points/balance`ï¼‰- è¿™æ˜¯å‰ç«¯è°ƒç”¨æ—¶ä½¿ç”¨çš„å®é™…URL
- **ä»£ç ä¸­çš„è·¯å¾„**: ç›¸å¯¹è·¯å¾„å®šä¹‰ï¼ˆå¦‚`router.get('/balance', ...)`ï¼‰- è¿™æ˜¯è·¯ç”±æ–‡ä»¶ä¸­çš„å®šä¹‰æ–¹å¼
- **è·¯å¾„ç»„åˆå…¬å¼**: å®Œæ•´è®¿é—®è·¯å¾„ = `app.use()`å‰ç¼€ + è·¯ç”±æ–‡ä»¶ä¸­çš„ç›¸å¯¹è·¯å¾„
- **å®é™…ä»£ç ç¤ºä¾‹**: 
  ```javascript
  // âœ… æ­¥éª¤1: app.jsä¸­çš„è·¯ç”±æ³¨å†Œï¼ˆæ³¨å†Œå®Œæ•´å‰ç¼€ï¼‰
  app.use('/api/v4/points', require('./routes/v4/unified-engine/points'))
  // è¯´æ˜ï¼šå°† /api/v4/points å‰ç¼€æ³¨å†Œåˆ° points è·¯ç”±æ¨¡å—
  
  // âœ… æ­¥éª¤2: routes/v4/unified-engine/points.jsä¸­çš„è·¯ç”±å®šä¹‰ï¼ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼‰
  router.get('/balance', authenticateToken, async (req, res) => { 
    // ä¸šåŠ¡é€»è¾‘ï¼šè·å–ç”¨æˆ·ç§¯åˆ†ä½™é¢
    // æƒé™éªŒè¯ï¼šauthenticateTokenä¸­é—´ä»¶éªŒè¯JWT Token
    // è¿”å›æ•°æ®ï¼šç”¨æˆ·å½“å‰å¯ç”¨ç§¯åˆ†ã€å†»ç»“ç§¯åˆ†ã€å†å²ç´¯è®¡ç§¯åˆ†ç­‰
  })
  
  // âœ… æ­¥éª¤3: æœ€ç»ˆè®¿é—®è·¯å¾„ï¼ˆå‰ç«¯è°ƒç”¨ï¼‰
  // GET /api/v4/points/balance
  // å®Œæ•´URL: https://your-domain.com/api/v4/points/balance
  ```

**ä¸ºä»€ä¹ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„è®¾è®¡**:
- âœ… **é¿å…ç¡¬ç¼–ç **: è·¯ç”±æ–‡ä»¶ä¸éœ€è¦é‡å¤å†™å®Œæ•´å‰ç¼€ï¼Œæ˜“äºç»´æŠ¤
- âœ… **æ¨¡å—åŒ–ç®¡ç†**: æ¯ä¸ªä¸šåŠ¡æ¨¡å—ç‹¬ç«‹ç®¡ç†ï¼ŒèŒè´£æ¸…æ™°
- âœ… **æ˜“äºé‡æ„**: ä¿®æ”¹è·¯å¾„å‰ç¼€åªéœ€åœ¨app.jsä¸­ä¿®æ”¹ä¸€å¤„
- âœ… **ç¬¦åˆExpressæœ€ä½³å®è·µ**: è¿™æ˜¯Expresså®˜æ–¹æ¨èçš„è·¯ç”±ç»„ç»‡æ–¹å¼

---

## ğŸ“– HTTPè¯·æ±‚æ–¹æ³•è¯´æ˜ï¼ˆRESTfulè§„èŒƒï¼‰

æœ¬ç³»ç»ŸAPIä½¿ç”¨æ ‡å‡†çš„RESTfulé£æ ¼ï¼Œé€šè¿‡ä¸åŒçš„HTTPæ–¹æ³•è¡¨ç¤ºä¸åŒçš„æ“ä½œç±»å‹ã€‚è¿™æ˜¯Webå¼€å‘çš„å›½é™…æ ‡å‡†ï¼Œç¬¦åˆè…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€ç½‘æ˜“äº‘ã€ç±³å“ˆæ¸¸ç­‰è¡Œä¸šæœ€ä½³å®è·µã€‚

| HTTPæ–¹æ³• | æ“ä½œç±»å‹ | è¯´æ˜ | å¸¸è§ç”¨é€” | æ˜¯å¦å¹‚ç­‰ | ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹ |
|---------|---------|------|---------|---------|------------|
| **GET** | æŸ¥è¯¢/è¯»å– | ä»æœåŠ¡å™¨**è·å–**èµ„æºï¼Œä¸ä¼šä¿®æ”¹æœåŠ¡å™¨æ•°æ® | æŸ¥è¯¢åˆ—è¡¨ã€è·å–è¯¦æƒ…ã€æŸ¥çœ‹çŠ¶æ€ | âœ… æ˜¯ | æŸ¥è¯¢ç”¨æˆ·ç§¯åˆ†ä½™é¢ã€è·å–æŠ½å¥–å†å²ã€æŸ¥çœ‹åº“å­˜åˆ—è¡¨ |
| **POST** | åˆ›å»º/æäº¤ | å‘æœåŠ¡å™¨**æäº¤**æ•°æ®ï¼Œåˆ›å»ºæ–°èµ„æºæˆ–è§¦å‘æ“ä½œ | ç™»å½•ã€æäº¤è¡¨å•ã€æ‰§è¡ŒæŠ½å¥–ã€å‘é€æ¶ˆæ¯ | âŒ å¦ | ç”¨æˆ·ç™»å½•ã€æ‰§è¡ŒæŠ½å¥–ã€æäº¤æ¶ˆè´¹è®°å½•ã€å…‘æ¢å•†å“ |
| **PUT** | æ›´æ–°/ä¿®æ”¹ | **å®Œæ•´æ›´æ–°**æœåŠ¡å™¨ä¸Šçš„èµ„æº | ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ã€æ›´æ–°é…ç½®ã€åˆ†é…æƒé™ | âœ… æ˜¯ | æ›´æ–°ç”¨æˆ·è§’è‰²ã€ä¿®æ”¹ç³»ç»Ÿé…ç½®ã€åˆ†é…ä¼šè¯ |
| **DELETE** | åˆ é™¤ | **åˆ é™¤**æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆæœ¬ç³»ç»Ÿä½¿ç”¨è½¯åˆ é™¤ï¼‰ | åˆ é™¤è®°å½•ï¼ˆå®é™…æ ‡è®°ä¸ºå·²åˆ é™¤ï¼‰ | âœ… æ˜¯ | åˆ é™¤ç§¯åˆ†è®°å½•ã€åˆ é™¤å…‘æ¢è®°å½•ï¼ˆè½¯åˆ é™¤ï¼Œæ•°æ®ä¿ç•™ï¼‰ |

### ğŸ“Œ æ–¹æ³•é€‰æ‹©åŸåˆ™

```
ğŸ” æŸ¥è¯¢æ•°æ® â†’ GET
   ä¾‹å¦‚ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ã€æŸ¥è¯¢è®¢å•åˆ—è¡¨ã€æŸ¥çœ‹ç§¯åˆ†ä½™é¢

â• åˆ›å»ºæ•°æ® â†’ POST
   ä¾‹å¦‚ï¼šç”¨æˆ·ç™»å½•ã€æäº¤åé¦ˆã€æ‰§è¡ŒæŠ½å¥–ã€å…‘æ¢å•†å“

âœï¸ ä¿®æ”¹æ•°æ® â†’ PUT
   ä¾‹å¦‚ï¼šæ›´æ–°ç”¨æˆ·çŠ¶æ€ã€ä¿®æ”¹é…ç½®ã€åˆ†é…ä¼šè¯

ğŸ—‘ï¸ åˆ é™¤æ•°æ® â†’ DELETE
   ä¾‹å¦‚ï¼šåˆ é™¤ç§¯åˆ†è®°å½•ã€åˆ é™¤å…‘æ¢è®°å½•ï¼ˆè½¯åˆ é™¤ï¼‰
```

### âš ï¸ é‡è¦è¯´æ˜ï¼ˆå¼€å‘å¿…è¯»ï¼‰

- **æ•°æ®å®‰å…¨**: 
  - GETæ“ä½œï¼šåªè¯»æŸ¥è¯¢ï¼Œä¸ä¼šæ”¹å˜æ•°æ®ï¼Œå¯ä»¥å®‰å…¨é‡è¯•
  - POSTæ“ä½œï¼šä¼šåˆ›å»ºæ–°æ•°æ®æˆ–è§¦å‘ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦é˜²é‡å¤„ç†
  - PUTæ“ä½œï¼šä¼šæ›´æ–°æ•°æ®ï¼Œå¹‚ç­‰æ“ä½œï¼ˆå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼‰
  - DELETEæ“ä½œï¼šä¼šæ ‡è®°åˆ é™¤æ•°æ®ï¼Œå¹‚ç­‰æ“ä½œ
  
- **è½¯åˆ é™¤æœºåˆ¶**: 
  - æœ¬ç³»ç»Ÿçš„DELETEæ“ä½œä½¿ç”¨è½¯åˆ é™¤æœºåˆ¶ï¼Œæ•°æ®æ ‡è®°ä¸º`is_deleted=1`ä½†ä¸ä¼šç‰©ç†åˆ é™¤
  - å¥½å¤„ï¼šæ•°æ®å¯è¿½æº¯ã€å¯æ¢å¤ã€æ”¯æŒå®¡è®¡
  - æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤æ•°æ®ï¼ˆWHERE is_deleted=0ï¼‰
  - ç®¡ç†å‘˜å¯é€šè¿‡restoreæ¥å£æ¢å¤å·²åˆ é™¤æ•°æ®
  
- **èº«ä»½éªŒè¯**: 
  - å¤§éƒ¨åˆ†APIéœ€è¦ç”¨æˆ·ç™»å½•åæ‰èƒ½ä½¿ç”¨ï¼ˆéœ€è¦JWT Tokenï¼‰
  - è¯·æ±‚å¤´éœ€è¦æºå¸¦ï¼š`Authorization: Bearer <access_token>`
  - Tokenæœ‰æ•ˆæœŸï¼šaccessToken 15åˆ†é’Ÿï¼ŒrefreshToken 7å¤©
  - Tokenè¿‡æœŸåä½¿ç”¨refreshTokenåˆ·æ–°è·å–æ–°Token

---

##

## ğŸ“Š ä¸šåŠ¡æ¨¡å—æ€»è§ˆï¼ˆ2025å¹´11æœˆ26æ—¥éªŒè¯ï¼‰

**ä¸šåŠ¡åŠŸèƒ½**: 175ä¸ªAPIæ¥å£ï¼ˆåŸºäºå®é™…ä»£ç ç»Ÿè®¡ï¼Œå·²100%éªŒè¯ï¼‰
**å®ŒæˆçŠ¶æ€**: ğŸ‰ 100%å·²å®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼ˆæ— è§„åˆ’ä¸­æˆ–æœªå®ç°çš„APIï¼‰
**æ¨¡å—æ•°é‡**: 13ä¸ªæ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼ˆå…¨éƒ¨å·²å®ç°å¹¶æŠ•å…¥ä½¿ç”¨ï¼‰
**è·¯ç”±æ–‡ä»¶æ•°**: 27ä¸ªè·¯ç”±æ–‡ä»¶ï¼ˆroutes/ç›®å½•ä¸‹æ‰€æœ‰.jsæ–‡ä»¶ï¼Œå·²é€ä¸€æ ¸å¯¹ï¼‰
**å®é™…éªŒè¯**: å·²ä¸routesç›®å½•ä¸‹æ‰€æœ‰ä»£ç è¿›è¡Œé€ä¸€æ ¸å¯¹ï¼ˆ2025å¹´11æœˆ26æ—¥ï¼‰
**è·¯ç”±å®šä¹‰æ•°**: 175ä¸ªå®é™…è·¯ç”±å®šä¹‰ï¼ˆä½¿ç”¨`grep "^router\.(get|post|put|delete)" routes/ -r`å‘½ä»¤ç»Ÿè®¡ï¼‰  
**Expressè·¯ç”±è§„èŒƒ**: Express Routeræ¨¡å—åŒ–è®¾è®¡ï¼Œæ‰€æœ‰è·¯ç”±æ–‡ä»¶å†…éƒ¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„å®šä¹‰ï¼ˆå¦‚`router.get('/balance', ...)`ï¼‰ï¼Œåœ¨`app.js`ä¸­é€šè¿‡`app.use('/api/v4/points', require('./routes/v4/unified-engine/points'))`ç»„åˆæˆå®Œæ•´è®¿é—®è·¯å¾„  
**æ¶æ„è®¾è®¡**: RESTfulé£æ ¼APIè®¾è®¡ï¼Œç¬¦åˆè…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€ç½‘æ˜“äº‘ã€ç±³å“ˆæ¸¸ç­‰è¡Œä¸šæ ‡å‡†  
**è®¤è¯æœºåˆ¶**: JWTåŒTokenï¼ˆaccessTokenæœ‰æ•ˆæœŸ15åˆ†é’Ÿ + refreshTokenæœ‰æ•ˆæœŸ7å¤©ï¼‰ç»Ÿä¸€è®¤è¯  
**æƒé™ç³»ç»Ÿ**: åŸºäºUUIDè§’è‰²ç³»ç»Ÿçš„ç»†ç²’åº¦æƒé™æ§åˆ¶ï¼ˆrole_levelçº§åˆ«åˆ¤æ–­ï¼‰  
**æ•°æ®å®‰å…¨**: ä½¿ç”¨Sequelizeäº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œè½¯åˆ é™¤æœºåˆ¶ï¼ˆis_deleted=1ï¼‰ä¿ç•™æ•°æ®å¯è¿½æº¯æ€§  
**æŠ€æœ¯æ ˆ**: Node.js 20+ + Express 4.x + MySQL 8.0+ + Sequelize ORM + Redis + JWT  
**éƒ¨ç½²ç¯å¢ƒ**: Sealosäº‘å¹³å°ï¼ˆæ”¯æŒæ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡ï¼‰

| æ¨¡å— | æ¥å£æ•°é‡ | å®æ–½çŠ¶æ€ | APIè·¯å¾„å‰ç¼€ | å®ç°æ–‡ä»¶è·¯å¾„ | æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ |
|-----|---------|---------|------------|------------|------------|
| 1. ç»Ÿä¸€è®¤è¯å¼•æ“ | 8 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/auth` | `routes/v4/unified-engine/auth.js` | ç”¨æˆ·ç™»å½•æ³¨å†Œã€Tokenç®¡ç†ã€å¾®ä¿¡æˆæƒã€æƒé™éªŒè¯ |
| 2. ç»Ÿä¸€æŠ½å¥–å¼•æ“ | 8 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/lottery` | `routes/v4/unified-engine/lottery.js` | æŠ½å¥–æ‰§è¡Œã€å¥–å“é…ç½®ã€ä¸­å¥–å†å²ã€ä¿åº•æœºåˆ¶ã€è¿è¥å¹²é¢„ |
| 3. æƒé™ç®¡ç† | 8 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/permissions` | `routes/v4/permissions.js` | åŸºäºUUIDè§’è‰²ç³»ç»Ÿçš„æƒé™æŸ¥è¯¢ã€éªŒè¯ã€ç¼“å­˜ç®¡ç† |
| 4. ç§¯åˆ†ç®¡ç† | 12 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/points` | `routes/v4/unified-engine/points.js` | ç§¯åˆ†ä½™é¢æŸ¥è¯¢ã€äº¤æ˜“è®°å½•ã€ç®¡ç†å‘˜è°ƒæ•´ã€è¶‹åŠ¿åˆ†æã€è½¯åˆ é™¤æ¢å¤ |
| 5. ç”¨æˆ·åº“å­˜ç®¡ç† | 18 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/inventory` | `routes/v4/unified-engine/inventory.js` | è™šæ‹Ÿèµ„äº§ç®¡ç†ã€å•†å“å…‘æ¢ã€æ ¸é”€ç ç”ŸæˆéªŒè¯ã€ç‰©å“è½¬è®©ã€å¸‚åœºäº¤æ˜“ |
| 6. æ¶ˆè´¹è®°å½•ç®¡ç† | 11 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/consumption` | `routes/v4/unified-engine/consumption.js` | å•†æˆ·å½•å…¥æ¶ˆè´¹ã€ç®¡ç†å‘˜å®¡æ ¸ã€ç§¯åˆ†å‘æ”¾ã€QRç è®¤è¯ã€è½¯åˆ é™¤ |
| 7. é«˜çº§ç©ºé—´è§£é” | 2 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/premium` | `routes/v4/unified-engine/premium.js` | é«˜çº§ç”¨æˆ·ç‰¹æƒç©ºé—´ä»˜è´¹è§£é”ï¼ˆ100ç§¯åˆ†/24å°æ—¶ï¼‰ |
| 8. æŠ½å¥–ç»“æœé¢„è®¾ç®¡ç† | 5 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/lottery-preset` | `routes/v4/unified-engine/lottery-preset.js` | ç®¡ç†å‘˜è¿è¥å¹²é¢„ã€é¢„è®¾ä¸­å¥–é˜Ÿåˆ—ã€ç”¨æˆ·æ— æ„ŸçŸ¥æ§åˆ¶ |
| 9. ç³»ç»ŸåŠŸèƒ½ | 19 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/system` | `routes/v4/system.js` | ç³»ç»Ÿå…¬å‘Šã€ç”¨æˆ·åé¦ˆã€å®¢æœèŠå¤©WebSocketã€ç³»ç»ŸçŠ¶æ€ç›‘æ§ |
| 10. è°ƒè¯•æ§åˆ¶ç³»ç»Ÿ | **6** | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/debug-control` | `routes/v4/debug-control.js` | ç”Ÿäº§ç¯å¢ƒåŠ¨æ€è°ƒè¯•ã€æ—¥å¿—çº§åˆ«è°ƒæ•´ã€ç”¨æˆ·ä¼šè¯è°ƒè¯•ã€æ—¥å¿—ç®¡ç† |
| 11. ç»Ÿä¸€ç®¡ç†å¼•æ“ | **51** | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/admin` | `routes/v4/unified-engine/admin/*` | åå°ç®¡ç†ã€ç³»ç»Ÿç›‘æ§ã€é…ç½®ç®¡ç†ã€å¥–å“æ± ã€ç”¨æˆ·ç®¡ç†ã€æ•°æ®åˆ†æ (9ä¸ªå­æ¨¡å—) |
| 12. å±‚çº§æƒé™ç®¡ç† | 5 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/hierarchy` | `routes/v4/hierarchy/index.js` | ç»„ç»‡æ¶æ„ç®¡ç†ã€ä¸Šä¸‹çº§å…³ç³»ç»´æŠ¤ã€æ‰¹é‡æƒé™æ“ä½œ |
| 13. å®¡æ ¸ç®¡ç†ç³»ç»Ÿ | 13 | âœ… å…¨éƒ¨å®Œæˆ | `/api/v4/audit-management` | `routes/audit-management.js` | å…‘æ¢è®¢å•æ‰¹é‡å®¡æ ¸ã€è¶…æ—¶å‘Šè­¦ã€ç»Ÿä¸€å®¡æ ¸ã€å®¡è®¡æ—¥å¿— |

**âœ… å·²å®Œæˆ**: 175ä¸ªAPIï¼ˆå…¨éƒ¨å·²å®ç°å¹¶æŠ•å…¥ä½¿ç”¨ï¼Œæ— è§„åˆ’ä¸­æˆ–æœªå®ç°çš„åŠŸèƒ½ï¼‰
**ğŸ“Š ä»£ç éªŒè¯**: é€šè¿‡grepç»Ÿè®¡ï¼Œå®é™…è·¯ç”±å®šä¹‰175ä¸ªï¼ˆæ‰€æœ‰è·¯ç”±å®šä¹‰å‡å·²éªŒè¯ï¼Œ100%å‡†ç¡®ï¼‰
**ğŸ” é‡å¤æ£€æŸ¥**: å·²æ£€æŸ¥æ‰€æœ‰APIè·¯å¾„å’Œä¸šåŠ¡åŠŸèƒ½ï¼Œç¡®è®¤æ— é‡å¤å®ç°ï¼ˆæ¯ä¸ªä¸šåŠ¡åœºæ™¯å”¯ä¸€å¯¹åº”ï¼‰

**ğŸ“ è¯¦ç»†è¯´æ˜ï¼ˆéªŒè¯æ–¹æ³•å’Œæ ‡å‡†ï¼‰**ï¼š

**ä»£ç ç»Ÿè®¡æ–¹æ³•**ï¼š
- ç»Ÿè®¡æ—¶é—´ï¼š2025å¹´11æœˆ26æ—¥ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
- ç»Ÿè®¡å‘½ä»¤ï¼š`grep "^router\.(get|post|put|delete)" routes/ -r | wc -l`
- éªŒè¯æ–¹æ³•ï¼šé€ä¸ªè·¯ç”±æ–‡ä»¶äººå·¥æ ¸å¯¹ï¼Œç¡®ä¿æ¯ä¸ªAPIéƒ½æœ‰è¯¦ç»†æ–‡æ¡£è¯´æ˜
- éªŒè¯å·¥å…·ï¼šgrepå‘½ä»¤ + äººå·¥é€ä¸€æ ¸å¯¹ + app.jsè·¯ç”±æ³¨å†ŒéªŒè¯
- éªŒè¯èŒƒå›´ï¼š27ä¸ªè·¯ç”±æ–‡ä»¶ï¼Œ13ä¸ªè·¯ç”±æ³¨å†Œç‚¹ï¼Œ175ä¸ªè·¯ç”±å®šä¹‰

**æ¨¡å—æ¶æ„è¯´æ˜**ï¼š
- **ç»Ÿä¸€ç®¡ç†å¼•æ“**ï¼ˆæ¨¡å—11ï¼‰ï¼šåŒ…å«9ä¸ªå­æ¨¡å—æ–‡ä»¶ï¼Œé‡‡ç”¨æ¨¡å—åŒ–ç®¡ç†è®¾è®¡
  - `admin/auth.js` - ç®¡ç†å‘˜è®¤è¯ï¼ˆ2ä¸ªAPIï¼‰
  - `admin/system.js` - ç³»ç»Ÿç›‘æ§å’Œé…ç½®ï¼ˆ10ä¸ªAPIï¼‰
  - `admin/config.js` - é…ç½®ç®¡ç†ï¼ˆ2ä¸ªAPIï¼‰
  - `admin/prize_pool.js` - å¥–å“æ± ç®¡ç†ï¼ˆ3ä¸ªAPIï¼‰
  - `admin/user_management.js` - ç”¨æˆ·ç®¡ç†ï¼ˆ5ä¸ªAPIï¼‰
  - `admin/lottery_management.js` - æŠ½å¥–ç®¡ç†ï¼ˆ6ä¸ªAPIï¼‰
  - `admin/analytics.js` - æ•°æ®åˆ†æï¼ˆ4ä¸ªAPIï¼‰
  - `admin/audit.js` - å…‘æ¢å®¡æ ¸ï¼ˆ4ä¸ªAPIï¼‰
  - `admin/index.js` - ç®¡ç†å¼•æ“èšåˆè·¯ç”±ï¼ˆ1ä¸ªAPIï¼‰
  - `admin/shared/` - å…±äº«å·¥å…·æ¨¡å—ï¼ˆä¸­é—´ä»¶ã€å·¥å…·å‡½æ•°ç­‰ï¼‰

- **è°ƒè¯•æ§åˆ¶ç³»ç»Ÿ**ï¼ˆæ¨¡å—10ï¼‰ï¼šåŒ…å«6ä¸ªAPIï¼Œå·²æ’é™¤2ä¸ªä¸­é—´ä»¶ï¼ˆauthenticateTokenã€requireAdminï¼‰

- **æ´»åŠ¨æƒé™ç®¡ç†**ï¼šåŸè®¡åˆ’çš„ç‹¬ç«‹æ¨¡å—å·²åˆå¹¶åˆ°ç°æœ‰æƒé™ç®¡ç†ä½“ç³»ï¼ˆæ¨¡å—3ï¼‰ï¼Œä¸å†å•ç‹¬å®ç°

**Express Routeræ¶æ„è®¾è®¡ï¼ˆæ¨¡å—åŒ–è·¯ç”±æ ‡å‡†ï¼‰**ï¼š

**è®¾è®¡åŸåˆ™**ï¼š
- **æ¨¡å—åŒ–è·¯ç”±è®¾è®¡**ï¼šæ¯ä¸ªä¸šåŠ¡æ¨¡å—ä¸€ä¸ªç‹¬ç«‹è·¯ç”±æ–‡ä»¶ï¼ŒèŒè´£å•ä¸€ã€è¾¹ç•Œæ¸…æ™°
- **ç›¸å¯¹è·¯å¾„å®šä¹‰**ï¼šè·¯ç”±æ–‡ä»¶å†…éƒ¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚`router.get('/balance')`ï¼‰ï¼Œä¸åŒ…å«å‰ç¼€
- **ç»Ÿä¸€å‰ç¼€æ³¨å†Œ**ï¼šåœ¨`app.js`ä¸­é€šè¿‡`app.use('/api/v4/points', pointsRouter)`æ³¨å†Œå®Œæ•´å‰ç¼€
- **è·¯å¾„è‡ªåŠ¨ç»„åˆ**ï¼šæœ€ç»ˆè®¿é—®è·¯å¾„ = æ³¨å†Œå‰ç¼€ + ç›¸å¯¹è·¯å¾„
  - ç¤ºä¾‹ï¼š`/api/v4/points` + `/balance` = `/api/v4/points/balance`

**æ¶æ„ä¼˜åŠ¿**ï¼š
- âœ… **æ˜“äºç»´æŠ¤**ï¼šè·¯ç”±æ–‡ä»¶ç‹¬ç«‹ï¼Œä¿®æ”¹æŸä¸ªæ¨¡å—ä¸å½±å“å…¶ä»–æ¨¡å—
- âœ… **ä¾¿äºæ‰©å±•**ï¼šæ–°å¢ä¸šåŠ¡æ¨¡å—åªéœ€åˆ›å»ºæ–°è·¯ç”±æ–‡ä»¶å¹¶åœ¨app.jsæ³¨å†Œ
- âœ… **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªè·¯ç”±æ–‡ä»¶ä¸“æ³¨äºè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘
- âœ… **é¿å…ç¡¬ç¼–ç **ï¼šå‰ç¼€ç»Ÿä¸€ç®¡ç†ï¼Œä¿®æ”¹å‰ç¼€åªéœ€æ”¹app.jsä¸€å¤„
- âœ… **ä»£ç å¤ç”¨**ï¼šç›¸å¯¹è·¯å¾„å¯åœ¨ä¸åŒå‰ç¼€ä¸‹å¤ç”¨ï¼ˆå¦‚v4/v5ç‰ˆæœ¬åˆ‡æ¢ï¼‰

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼ˆä»¥ç§¯åˆ†æ¨¡å—ä¸ºä¾‹ï¼‰ï¼š
```javascript
// âœ… æ­¥éª¤1: routes/v4/unified-engine/points.jsï¼ˆè·¯ç”±æ–‡ä»¶ï¼‰
const router = express.Router()
router.get('/balance', authenticateToken, async (req, res) => {
  // ä¸šåŠ¡é€»è¾‘ï¼šè·å–ç”¨æˆ·ç§¯åˆ†ä½™é¢
})
router.get('/transactions', authenticateToken, async (req, res) => {
  // ä¸šåŠ¡é€»è¾‘ï¼šè·å–ç§¯åˆ†äº¤æ˜“è®°å½•
})

// âœ… æ­¥éª¤2: app.jsï¼ˆè·¯ç”±æ³¨å†Œï¼‰
app.use('/api/v4/points', require('./routes/v4/unified-engine/points'))

// âœ… æ­¥éª¤3: æœ€ç»ˆè®¿é—®è·¯å¾„ï¼ˆå‰ç«¯è°ƒç”¨ï¼‰
// GET /api/v4/points/balance
// GET /api/v4/points/transactions
```

**è®¤è¯æœºåˆ¶ï¼ˆJWTåŒTokenç³»ç»Ÿï¼‰**ï¼š

**Tokenç±»å‹å’Œæœ‰æ•ˆæœŸ**ï¼š
- **accessTokenï¼ˆè®¿é—®ä»¤ç‰Œï¼‰**ï¼š
  - æœ‰æ•ˆæœŸï¼š15åˆ†é’Ÿ
  - ç”¨é€”ï¼šAPIè¯·æ±‚èº«ä»½éªŒè¯
  - å­˜å‚¨ä½ç½®ï¼šå‰ç«¯å†…å­˜/localStorage
  - åˆ·æ–°æœºåˆ¶ï¼šè¿‡æœŸå‰é€šè¿‡refreshTokenè‡ªåŠ¨åˆ·æ–°
  
- **refreshTokenï¼ˆåˆ·æ–°ä»¤ç‰Œï¼‰**ï¼š
  - æœ‰æ•ˆæœŸï¼š7å¤©
  - ç”¨é€”ï¼šåˆ·æ–°accessToken
  - å­˜å‚¨ä½ç½®ï¼šå‰ç«¯localStorageï¼ˆä»…ç”¨äºåˆ·æ–°ï¼‰
  - å®‰å…¨æœºåˆ¶ï¼šå•æ¬¡ä½¿ç”¨åå¤±æ•ˆï¼Œåˆ·æ–°æ—¶ç”Ÿæˆæ–°çš„refreshToken

**è®¤è¯æµç¨‹**ï¼š
1. ç”¨æˆ·ç™»å½• â†’ è¿”å›accessToken + refreshToken
2. APIè¯·æ±‚ â†’ æºå¸¦accessTokenéªŒè¯èº«ä»½
3. accessTokenè¿‡æœŸ â†’ ä½¿ç”¨refreshTokenåˆ·æ–°
4. refreshTokenè¿‡æœŸ â†’ é‡æ–°ç™»å½•

**æƒé™éªŒè¯ä¸­é—´ä»¶**ï¼š
- `authenticateToken`ï¼šéªŒè¯JWT Tokenæœ‰æ•ˆæ€§ï¼Œè§£æç”¨æˆ·IDå’Œè§’è‰²
- `requireAdmin`ï¼šéªŒè¯ç®¡ç†å‘˜æƒé™ï¼ˆåŸºäºUUIDè§’è‰²ç³»ç»Ÿï¼‰
- `checkPermission`ï¼šéªŒè¯ç‰¹å®šæƒé™ï¼ˆå¦‚ï¼šlottery:executeã€points:adjustï¼‰

**æƒé™ç³»ç»Ÿï¼ˆUUIDè§’è‰²ç³»ç»Ÿï¼‰**ï¼š

**è®¾è®¡ç†å¿µ**ï¼š
- æ›¿ä»£ä¼ ç»Ÿçš„`is_admin`å¸ƒå°”æ ‡å¿—ï¼Œé‡‡ç”¨åŸºäºUUIDçš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- æ”¯æŒå¤šè§’è‰²ã€å¤šæƒé™ç»„åˆï¼Œçµæ´»é…ç½®ç”¨æˆ·æƒé™
- æƒé™ç¼“å­˜æœºåˆ¶ï¼šRedisç¼“å­˜ç”¨æˆ·æƒé™ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢

**è§’è‰²ç±»å‹**ï¼š
- **è¶…çº§ç®¡ç†å‘˜ï¼ˆSuper Adminï¼‰**ï¼šæ‹¥æœ‰æ‰€æœ‰æƒé™ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé…ç½®ã€ç”¨æˆ·ç®¡ç†ã€æ•°æ®å¤‡ä»½
- **è¿è¥ç®¡ç†å‘˜ï¼ˆOperation Adminï¼‰**ï¼šæ‹¥æœ‰ä¸šåŠ¡è¿è¥æƒé™ï¼Œå¦‚æŠ½å¥–é…ç½®ã€å¥–å“ç®¡ç†ã€ç”¨æˆ·ç®¡ç†
- **å®¡æ ¸å‘˜ï¼ˆAuditorï¼‰**ï¼šæ‹¥æœ‰å®¡æ ¸æƒé™ï¼Œå¦‚å…‘æ¢è®¢å•å®¡æ ¸ã€ç”¨æˆ·ç”³è¯‰å¤„ç†
- **æ™®é€šç”¨æˆ·ï¼ˆUserï¼‰**ï¼šåŸºç¡€æƒé™ï¼Œå¦‚æŠ½å¥–ã€ç§¯åˆ†æŸ¥è¯¢ã€åº“å­˜æŸ¥è¯¢

**æƒé™ç²’åº¦**ï¼š
- **æ¨¡å—çº§æƒé™**ï¼šå¦‚`admin:*`ï¼ˆç®¡ç†å‘˜æ‰€æœ‰æƒé™ï¼‰ã€`lottery:*`ï¼ˆæŠ½å¥–æ¨¡å—æ‰€æœ‰æƒé™ï¼‰
- **æ“ä½œçº§æƒé™**ï¼šå¦‚`lottery:execute`ï¼ˆæ‰§è¡ŒæŠ½å¥–ï¼‰ã€`points:adjust`ï¼ˆè°ƒæ•´ç§¯åˆ†ï¼‰
- **èµ„æºçº§æƒé™**ï¼šå¦‚`user:123:edit`ï¼ˆç¼–è¾‘ç‰¹å®šç”¨æˆ·ï¼‰ã€`prize:456:delete`ï¼ˆåˆ é™¤ç‰¹å®šå¥–å“ï¼‰

**æ•°æ®å®‰å…¨æœºåˆ¶**ï¼š

**è½¯åˆ é™¤ï¼ˆSoft Deleteï¼‰**ï¼š
- æ‰€æœ‰åˆ é™¤æ“ä½œæ ‡è®°`is_deleted=1`ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®
- ä¿ç•™æ•°æ®ç”¨äºå®¡è®¡è¿½è¸ªå’Œæ•°æ®æ¢å¤
- æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤æ•°æ®ï¼ˆ`where: { is_deleted: 0 }`ï¼‰

**äº‹åŠ¡ä¿æŠ¤ï¼ˆTransactionï¼‰**ï¼š
- å…³é”®æ“ä½œä½¿ç”¨Sequelizeäº‹åŠ¡ç¡®ä¿åŸå­æ€§
- ç¤ºä¾‹åœºæ™¯ï¼šç§¯åˆ†å˜åŠ¨ã€åº“å­˜æ‰£å‡ã€å…‘æ¢è®¢å•åˆ›å»º
- å¤±è´¥è‡ªåŠ¨å›æ»šï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§

**æ•æ„Ÿä¿¡æ¯ä¿æŠ¤**ï¼š
- å¯†ç å­—æ®µä½¿ç”¨bcryptåŠ å¯†å­˜å‚¨
- æ‰‹æœºå·éƒ¨åˆ†è„±æ•æ˜¾ç¤ºï¼ˆå¦‚ï¼š138****5678ï¼‰
- å…‘æ¢ç åŠ å¯†å­˜å‚¨ï¼Œä½¿ç”¨æ—¶è§£å¯†

**æŠ€æœ¯æ ˆè¯´æ˜**ï¼š

**æ ¸å¿ƒæŠ€æœ¯**ï¼š
- **Node.js 18.x**ï¼šæœåŠ¡å™¨è¿è¡Œç¯å¢ƒ
- **Express 4.x**ï¼šWebåº”ç”¨æ¡†æ¶
- **Sequelize 6.x**ï¼šORMæ¡†æ¶ï¼Œæ”¯æŒMySQL
- **MySQL 8.0**ï¼šå…³ç³»å‹æ•°æ®åº“
- **Redis 7.x**ï¼šç¼“å­˜å’Œä¼šè¯ç®¡ç†

**å®‰å…¨å’Œå·¥å…·**ï¼š
- **JWT (jsonwebtoken)**ï¼šèº«ä»½è®¤è¯
- **bcryptjs**ï¼šå¯†ç åŠ å¯†
- **helmet**ï¼šHTTPå®‰å…¨å¤´
- **cors**ï¼šè·¨åŸŸèµ„æºå…±äº«
- **express-rate-limit**ï¼šAPIé™æµ
- **compression**ï¼šå“åº”å‹ç¼©

**éƒ¨ç½²ç¯å¢ƒ**ï¼š
- **Sealosäº‘å¹³å°**ï¼šå®¹å™¨åŒ–éƒ¨ç½²
- **ç¯å¢ƒå˜é‡ç®¡ç†**ï¼š.envé…ç½®æ–‡ä»¶
- **æ—¶åŒºæ ‡å‡†**ï¼šåŒ—äº¬æ—¶é—´ï¼ˆGMT+8/Asia/Shanghaiï¼‰
- **ç¼–ç æ ‡å‡†**ï¼šUTF-8 No BOM

---

## ğŸ“‹ ä¸šåŠ¡åŠŸèƒ½ç›®å½•

### [1. V4 ç»Ÿä¸€è®¤è¯å¼•æ“](#1-v4-ç»Ÿä¸€è®¤è¯å¼•æ“) (8ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/auth`
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/auth.js`
**ä¸šåŠ¡åœºæ™¯**: ç”¨æˆ·ç™»å½•æ³¨å†Œã€èº«ä»½éªŒè¯ã€Tokenç®¡ç†ã€å¾®ä¿¡å°ç¨‹åºæˆæƒã€å®‰å…¨é€€å‡º
**æ ¸å¿ƒåŠŸèƒ½**: æä¾›ç³»ç»Ÿç”¨æˆ·èº«ä»½è®¤è¯å’Œä¼šè¯ç®¡ç†ï¼Œæ”¯æŒæ‰‹æœºå·éªŒè¯ç ç™»å½•å’Œå¾®ä¿¡å°ç¨‹åºæˆæƒç™»å½•ï¼Œæ”¯æŒç”¨æˆ·ä¸»åŠ¨é€€å‡ºç™»å½•æ¸…é™¤æƒé™ç¼“å­˜
**å®‰å…¨æœºåˆ¶**: JWTåŒTokenæœºåˆ¶(accessToken+refreshToken)ã€é™æµä¿æŠ¤(100æ¬¡/åˆ†é’ŸTokenéªŒè¯)ã€æƒé™ç¼“å­˜å¤±æ•ˆæ§åˆ¶

- [1.1 ç”¨æˆ·ç™»å½•(æ‰‹æœºå·+éªŒè¯ç )](#11-ç”¨æˆ·ç™»å½•æ‰‹æœºå·éªŒè¯ç -) `POST /api/v4/auth/login`
- [1.2 è§£å¯†å¾®ä¿¡æ‰‹æœºå·](#12-è§£å¯†å¾®ä¿¡æ‰‹æœºå·-) `POST /api/v4/auth/decrypt-phone`
- [1.3 ç”¨æˆ·å¿«é€Ÿç™»å½•(å¾®ä¿¡ä¸€é”®ç™»å½•)](#13-ç”¨æˆ·å¿«é€Ÿç™»å½•å¾®ä¿¡ä¸€é”®ç™»å½•-) `POST /api/v4/auth/quick-login`
- [1.4 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯](#14-è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯-) `GET /api/v4/auth/profile`
- [1.5 éªŒè¯Tokenæœ‰æ•ˆæ€§(POST)](#15-éªŒè¯tokenæœ‰æ•ˆæ€§post-) `POST /api/v4/auth/verify`
- [1.6 éªŒè¯Tokenæœ‰æ•ˆæ€§(GET)](#16-éªŒè¯tokenæœ‰æ•ˆæ€§get-) `GET /api/v4/auth/verify`
- [1.7 åˆ·æ–°è®¿é—®ä»¤ç‰Œ](#17-åˆ·æ–°è®¿é—®ä»¤ç‰Œ-) `POST /api/v4/auth/refresh`
- [1.8 ç”¨æˆ·é€€å‡ºç™»å½•](#18-ç”¨æˆ·é€€å‡ºç™»å½•-) `POST /api/v4/auth/logout`

### [2. V4 ç»Ÿä¸€æŠ½å¥–å¼•æ“](#2-v4-ç»Ÿä¸€æŠ½å¥–å¼•æ“) (8ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/lottery`  
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/lottery.js`  
**ä¸šåŠ¡åœºæ™¯**: æŠ½å¥–æ´»åŠ¨æ‰§è¡Œã€å¥–å“é…ç½®æŸ¥è¯¢ã€æŠ½å¥–å†å²è®°å½•ã€æ´»åŠ¨æ•°æ®ç»Ÿè®¡  
**æ ¸å¿ƒåŠŸèƒ½**: åŸºäºV4ç»Ÿä¸€æŠ½å¥–å¼•æ“ï¼ˆUnifiedLotteryEngineï¼‰ï¼Œæ”¯æŒ100%ä¸­å¥–æœºåˆ¶ã€ä¿åº•è§¦å‘ã€è¿è¥å¹²é¢„ç­‰æ™ºèƒ½æŠ½å¥–ç­–ç•¥

- [2.1 è·å–æ´»åŠ¨å¥–å“æ± é…ç½®](#21-è·å–æ´»åŠ¨å¥–å“æ± é…ç½®-) `GET /api/v4/lottery/prizes/:campaignCode`
- [2.2 è·å–æ´»åŠ¨æŠ½å¥–é…ç½®](#22-è·å–æ´»åŠ¨æŠ½å¥–é…ç½®-) `GET /api/v4/lottery/config/:campaignCode`
- [2.3 æ‰§è¡ŒæŠ½å¥–](#23-æ‰§è¡ŒæŠ½å¥–-) `POST /api/v4/lottery/draw`
- [2.4 è·å–ç”¨æˆ·æŠ½å¥–å†å²](#24-è·å–ç”¨æˆ·æŠ½å¥–å†å²-) `GET /api/v4/lottery/history/:user_id`
- [2.5 è·å–æ´»åŠ¨åˆ—è¡¨](#25-è·å–æ´»åŠ¨åˆ—è¡¨-) `GET /api/v4/lottery/campaigns`
- [2.6 è·å–ç”¨æˆ·å¯ç”¨ç§¯åˆ†](#26-è·å–ç”¨æˆ·å¯ç”¨ç§¯åˆ†-) `GET /api/v4/lottery/points/:user_id`
- [2.7 è·å–ç”¨æˆ·æŠ½å¥–ç»Ÿè®¡](#27-è·å–ç”¨æˆ·æŠ½å¥–ç»Ÿè®¡-) `GET /api/v4/lottery/statistics/:user_id`
- [2.8 è·å–æŠ½å¥–ç³»ç»Ÿå¥åº·çŠ¶æ€](#28-è·å–æŠ½å¥–ç³»ç»Ÿå¥åº·çŠ¶æ€-) `GET /api/v4/lottery/health`

### [3. V4 æƒé™ç®¡ç†](#3-v4-æƒé™ç®¡ç†) (8ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/permissions`
**å®ç°æ–‡ä»¶**: `routes/v4/permissions.js`
**ä¸šåŠ¡åœºæ™¯**: åŸºäºUUIDè§’è‰²ç³»ç»Ÿçš„æƒé™æŸ¥è¯¢å’ŒéªŒè¯ï¼Œæ”¯æŒç”¨æˆ·è§’è‰²ç®¡ç†å’Œæƒé™æ£€æŸ¥ï¼Œæ”¯æŒæƒé™ç¼“å­˜åˆ·æ–°å’Œæ‰¹é‡æƒé™éªŒè¯
**æ ¸å¿ƒåŠŸèƒ½**: æä¾›ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼Œæ”¯æŒèµ„æº(resource)+åŠ¨ä½œ(action)çš„æƒé™éªŒè¯æ¨¡å¼ï¼ŒåŒå±‚ç¼“å­˜æ¶æ„(å†…å­˜+Redis)æå‡æŸ¥è¯¢æ€§èƒ½
**ç¼“å­˜æœºåˆ¶**: åŒå±‚ç¼“å­˜(memoryCache+redisClient)ï¼Œç¼“å­˜æ—¶é—´5åˆ†é’Ÿï¼Œæ”¯æŒæ‰‹åŠ¨åˆ·æ–°å’Œè‡ªåŠ¨å¤±æ•ˆ

- [3.1 è·å–æŒ‡å®šç”¨æˆ·æƒé™ä¿¡æ¯](#31-è·å–æŒ‡å®šç”¨æˆ·æƒé™ä¿¡æ¯-) `GET /api/v4/permissions/user/:user_id`
- [3.2 è·å–å½“å‰ç”¨æˆ·æƒé™](#32-è·å–å½“å‰ç”¨æˆ·æƒé™-) `GET /api/v4/permissions/current`
- [3.3 è·å–å½“å‰ç”¨æˆ·æƒé™(ç®€åŒ–ç‰ˆ)](#33-è·å–å½“å‰ç”¨æˆ·æƒé™ç®€åŒ–ç‰ˆ-) `GET /api/v4/permissions/me`
- [3.4 æ£€æŸ¥ç”¨æˆ·æƒé™](#34-æ£€æŸ¥ç”¨æˆ·æƒé™-) `POST /api/v4/permissions/check`
- [3.5 è·å–ç®¡ç†å‘˜åˆ—è¡¨](#35-è·å–ç®¡ç†å‘˜åˆ—è¡¨-) `GET /api/v4/permissions/admins`
- [3.6 åˆ·æ–°ç”¨æˆ·æƒé™ç¼“å­˜](#36-åˆ·æ–°ç”¨æˆ·æƒé™ç¼“å­˜-) `POST /api/v4/permissions/refresh`
- [3.7 æ‰¹é‡æ£€æŸ¥æƒé™](#37-æ‰¹é‡æ£€æŸ¥æƒé™-) `POST /api/v4/permissions/batch-check`
- [3.8 è·å–æƒé™ç»Ÿè®¡](#38-è·å–æƒé™ç»Ÿè®¡-) `GET /api/v4/permissions/statistics`

### [4. V4 ç§¯åˆ†ç®¡ç†](#4-v4-ç§¯åˆ†ç®¡ç†) (12ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/points`  
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/points.js`  
**ä¸šåŠ¡åœºæ™¯**: ç”¨æˆ·ç§¯åˆ†è´¦æˆ·ç®¡ç†ã€ç§¯åˆ†äº¤æ˜“è®°å½•æŸ¥è¯¢ã€ç®¡ç†å‘˜ç§¯åˆ†è°ƒæ•´ã€ç§¯åˆ†ç»Ÿè®¡åˆ†æã€ç§¯åˆ†è¶‹åŠ¿å›¾è¡¨ç”Ÿæˆ  
**æ ¸å¿ƒåŠŸèƒ½**: åŸºäºPointsServiceç»Ÿä¸€ç®¡ç†ï¼Œæ‰€æœ‰ç§¯åˆ†æ“ä½œä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯åŸå­æ€§ï¼Œæ”¯æŒå¹‚ç­‰æ€§é˜²é‡å¤„ç†ï¼Œæ”¯æŒè½¯åˆ é™¤å’Œæ¢å¤æœºåˆ¶  
**äº‹åŠ¡å®‰å…¨**: æ‰€æœ‰ç§¯åˆ†å˜åŠ¨æ“ä½œä½¿ç”¨Sequelizeäº‹åŠ¡ï¼Œä¿è¯ä½™é¢æ›´æ–°å’Œäº¤æ˜“è®°å½•åˆ›å»ºçš„åŸå­æ€§ï¼Œé˜²æ­¢æ•°æ®ä¸ä¸€è‡´

- [4.1 è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†ä½™é¢](#41-è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†ä½™é¢-) `GET /api/v4/points/balance`
- [4.2 è·å–æŒ‡å®šç”¨æˆ·ç§¯åˆ†ä½™é¢](#42-è·å–æŒ‡å®šç”¨æˆ·ç§¯åˆ†ä½™é¢-) `GET /api/v4/points/balance/:user_id`
- [4.3 è·å–ç§¯åˆ†äº¤æ˜“å†å²](#43-è·å–ç§¯åˆ†äº¤æ˜“å†å²-) `GET /api/v4/points/transactions/:user_id`
- [4.4 ç®¡ç†å‘˜è°ƒæ•´ç§¯åˆ†](#44-ç®¡ç†å‘˜è°ƒæ•´ç§¯åˆ†-) `POST /api/v4/points/admin/adjust`
- [4.5 è·å–ç®¡ç†å‘˜ç§¯åˆ†ç»Ÿè®¡](#45-è·å–ç®¡ç†å‘˜ç§¯åˆ†ç»Ÿè®¡-) `GET /api/v4/points/admin/statistics`
- [4.6 è·å–ç”¨æˆ·ç§¯åˆ†ç»Ÿè®¡](#46-è·å–ç”¨æˆ·ç§¯åˆ†ç»Ÿè®¡-) `GET /api/v4/points/user/statistics/:user_id`
- [4.7 è·å–ç§¯åˆ†æ€»è§ˆ](#47-è·å–ç§¯åˆ†æ€»è§ˆ-) `GET /api/v4/points/overview`
- [4.8 è·å–å†»ç»“ç§¯åˆ†åˆ—è¡¨](#48-è·å–å†»ç»“ç§¯åˆ†åˆ—è¡¨-) `GET /api/v4/points/frozen`
- [4.9 è·å–ç§¯åˆ†è¶‹åŠ¿æ•°æ®](#49-è·å–ç§¯åˆ†è¶‹åŠ¿æ•°æ®-) `GET /api/v4/points/trend`
- [4.10 åˆ é™¤/éšè—äº¤æ˜“è®°å½•](#410-åˆ é™¤éšè—äº¤æ˜“è®°å½•-) `DELETE /api/v4/points/transaction/:transaction_id`
- [4.11 æ¢å¤äº¤æ˜“è®°å½•](#411-æ¢å¤äº¤æ˜“è®°å½•-) `POST /api/v4/points/transaction/:transaction_id/restore`
- [4.12 æŸ¥è¯¢ç§¯åˆ†æ¢å¤å®¡è®¡è®°å½•](#412-æŸ¥è¯¢ç§¯åˆ†æ¢å¤å®¡è®¡è®°å½•-) `GET /api/v4/points/restore-audit`

### [5. V4 ç”¨æˆ·åº“å­˜ç®¡ç†](#5-v4-ç”¨æˆ·åº“å­˜ç®¡ç†) (18ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/inventory`  
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/inventory.js`  
**ä¸šåŠ¡åœºæ™¯**: ç”¨æˆ·è™šæ‹Ÿèµ„äº§ç®¡ç†ã€å•†å“å…‘æ¢ã€å¸‚åœºäº¤æ˜“ã€æ ¸é”€ç ç”Ÿæˆå’ŒéªŒè¯ã€ç‰©å“è½¬è®©  
**æ ¸å¿ƒåŠŸèƒ½**: å®Œæ•´çš„ç”¨æˆ·åº“å­˜ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåº“å­˜ç‰©å“ä½¿ç”¨ã€æ ¸é”€ã€è½¬è®©å’Œå¸‚åœºäº¤æ˜“ï¼ŒåŒ…å«è½¯åˆ é™¤å’Œæ¢å¤æœºåˆ¶

- [5.1 è·å–ç”¨æˆ·åº“å­˜åˆ—è¡¨](#51-è·å–ç”¨æˆ·åº“å­˜åˆ—è¡¨-) `GET /api/v4/inventory/user/:user_id`
- [5.2 è·å–åº“å­˜é¡¹è¯¦æƒ…](#52-è·å–åº“å­˜é¡¹è¯¦æƒ…-) `GET /api/v4/inventory/item/:item_id`
- [5.3 ä½¿ç”¨åº“å­˜é¡¹](#53-ä½¿ç”¨åº“å­˜é¡¹-) `POST /api/v4/inventory/use/:item_id`
- [5.4 è·å–ç®¡ç†å‘˜åº“å­˜ç»Ÿè®¡](#54-è·å–ç®¡ç†å‘˜åº“å­˜ç»Ÿè®¡-) `GET /api/v4/inventory/admin/statistics`
- [5.5 ç”Ÿæˆæ ¸é”€ç ](#55-ç”Ÿæˆæ ¸é”€ç -) `POST /api/v4/inventory/generate-code/:item_id`
- [5.6 ç‰©å“è½¬è®©](#56-ç‰©å“è½¬è®©-) `POST /api/v4/inventory/transfer`
- [5.7 è·å–è½¬è®©å†å²](#57-è·å–è½¬è®©å†å²-) `GET /api/v4/inventory/transfer-history`
- [5.8 å…‘æ¢å•†å“](#58-å…‘æ¢å•†å“-) `POST /api/v4/inventory/exchange`
- [5.9 è·å–å…‘æ¢è®°å½•](#59-è·å–å…‘æ¢è®°å½•-) `GET /api/v4/inventory/exchange-records`
- [5.10 å–æ¶ˆå…‘æ¢è®°å½•](#510-å–æ¶ˆå…‘æ¢è®°å½•-) `POST /api/v4/inventory/exchange-records/:id/cancel`
- [5.11 åˆ é™¤å…‘æ¢è®°å½•](#511-åˆ é™¤å…‘æ¢è®°å½•-) `DELETE /api/v4/inventory/exchange-records/:exchange_id`
- [5.12 æ¢å¤å…‘æ¢è®°å½•](#512-æ¢å¤å…‘æ¢è®°å½•-) `POST /api/v4/inventory/exchange-records/:exchange_id/restore`
- [5.13 è·å–å•†å“åˆ—è¡¨](#513-è·å–å•†å“åˆ—è¡¨-) `GET /api/v4/inventory/products`
- [5.14 è·å–å¸‚åœºå•†å“åˆ—è¡¨](#514-è·å–å¸‚åœºå•†å“åˆ—è¡¨-) `GET /api/v4/inventory/market/products`
- [5.15 è·å–å¸‚åœºå•†å“è¯¦æƒ…](#515-è·å–å¸‚åœºå•†å“è¯¦æƒ…-) `GET /api/v4/inventory/market/products/:id`
- [5.16 è´­ä¹°å¸‚åœºå•†å“](#516-è´­ä¹°å¸‚åœºå•†å“-) `POST /api/v4/inventory/market/products/:id/purchase`
- [5.17 æ’¤å›å¸‚åœºå•†å“](#517-æ’¤å›å¸‚åœºå•†å“-) `POST /api/v4/inventory/market/products/:id/withdraw`
- [5.18 æ ¸é”€éªŒè¯ç ](#518-æ ¸é”€éªŒè¯ç -) `POST /api/v4/inventory/verification/verify`

### [6. V4 æ¶ˆè´¹è®°å½•ç®¡ç†](#6-v4-æ¶ˆè´¹è®°å½•ç®¡ç†) (11ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/consumption`
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/consumption.js`
**ä¸šåŠ¡åœºæ™¯**: å•†æˆ·æ‰«ç å½•å…¥æ¶ˆè´¹è®°å½•ã€ç®¡ç†å‘˜å®¡æ ¸å‘æ”¾ç§¯åˆ†ã€ç”¨æˆ·æ¶ˆè´¹QRç ç”Ÿæˆå’ŒéªŒè¯
**æ ¸å¿ƒåŠŸèƒ½**: å•†æˆ·æ¶ˆè´¹è®°å½•ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ¶ˆè´¹è®°å½•æäº¤ã€å®¡æ ¸ï¼ˆé€šè¿‡/æ‹’ç»ï¼‰ã€QRç è®¤è¯ã€è½¯åˆ é™¤å’Œæ¢å¤

- [6.1 æäº¤æ¶ˆè´¹è®°å½•](#61-æäº¤æ¶ˆè´¹è®°å½•-) `POST /api/v4/consumption/submit`
- [6.2 è·å–ç”¨æˆ·æ¶ˆè´¹è®°å½•](#62-è·å–ç”¨æˆ·æ¶ˆè´¹è®°å½•-) `GET /api/v4/consumption/user/:user_id`
- [6.3 è·å–æ¶ˆè´¹è®°å½•è¯¦æƒ…](#63-è·å–æ¶ˆè´¹è®°å½•è¯¦æƒ…-) `GET /api/v4/consumption/detail/:record_id`
- [6.4 è·å–å¾…å®¡æ ¸æ¶ˆè´¹è®°å½•](#64-è·å–å¾…å®¡æ ¸æ¶ˆè´¹è®°å½•-) `GET /api/v4/consumption/pending`
- [6.5 ç®¡ç†å‘˜è·å–æ‰€æœ‰æ¶ˆè´¹è®°å½•](#65-ç®¡ç†å‘˜è·å–æ‰€æœ‰æ¶ˆè´¹è®°å½•-) `GET /api/v4/consumption/admin/records`
- [6.6 å®¡æ ¸é€šè¿‡æ¶ˆè´¹è®°å½•](#66-å®¡æ ¸é€šè¿‡æ¶ˆè´¹è®°å½•-) `POST /api/v4/consumption/approve/:record_id`
- [6.7 æ‹’ç»æ¶ˆè´¹è®°å½•](#67-æ‹’ç»æ¶ˆè´¹è®°å½•-) `POST /api/v4/consumption/reject/:record_id`
- [6.8 è·å–ç”¨æˆ·æ¶ˆè´¹äºŒç»´ç ](#68-è·å–ç”¨æˆ·æ¶ˆè´¹äºŒç»´ç -) `GET /api/v4/consumption/qrcode/:user_id`
- [6.9 éªŒè¯ç”¨æˆ·QRç ](#69-éªŒè¯ç”¨æˆ·qrç -) `POST /api/v4/consumption/validate-qrcode`
- [6.10 åˆ é™¤æ¶ˆè´¹è®°å½•](#610-åˆ é™¤æ¶ˆè´¹è®°å½•-) `DELETE /api/v4/consumption/:record_id`
- [6.11 æ¢å¤æ¶ˆè´¹è®°å½•](#611-æ¢å¤æ¶ˆè´¹è®°å½•-) `POST /api/v4/consumption/:record_id/restore`

### [7. V4 é«˜çº§ç©ºé—´è§£é”](#7-v4-é«˜çº§ç©ºé—´è§£é”) (2ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/premium`  
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/premium.js`  
**ä¸šåŠ¡åœºæ™¯**: é«˜çº§ç”¨æˆ·ç‰¹æƒç©ºé—´ä»˜è´¹è§£é”ï¼ŒåŸºäºå†å²ç´¯è®¡ç§¯åˆ†å’Œå½“å‰ç§¯åˆ†çš„åŒé‡éªŒè¯  
**æ ¸å¿ƒåŠŸèƒ½**: ç”¨æˆ·æ”¯ä»˜100ç§¯åˆ†è§£é”é«˜çº§ç©ºé—´ï¼Œæœ‰æ•ˆæœŸ24å°æ—¶ï¼Œéœ€æ»¡è¶³å†å²ç´¯è®¡ç§¯åˆ†â‰¥10ä¸‡çš„æ¡ä»¶

- [7.1 è§£é”é«˜çº§ç©ºé—´](#71-è§£é”é«˜çº§ç©ºé—´-) `POST /api/v4/premium/unlock`
- [7.2 æŸ¥è¯¢è§£é”çŠ¶æ€](#72-æŸ¥è¯¢è§£é”çŠ¶æ€-) `GET /api/v4/premium/status`

### [8. V4 æŠ½å¥–ç»“æœé¢„è®¾ç®¡ç†](#8-v4-æŠ½å¥–ç»“æœé¢„è®¾ç®¡ç†) (5ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/lottery-preset`
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/lottery-preset.js`  
**ä¸šåŠ¡åœºæ™¯**: ç®¡ç†å‘˜ä¸ºç‰¹å®šç”¨æˆ·é¢„è®¾æŠ½å¥–ç»“æœï¼Œç”¨äºè¿è¥å¹²é¢„å’Œç‰¹æ®Šæ´»åŠ¨  
**æ ¸å¿ƒåŠŸèƒ½**: ä»…ç®¡ç†å‘˜å¯ç”¨ï¼Œæ”¯æŒä¸ºç”¨æˆ·åˆ›å»ºé¢„è®¾å¥–å“é˜Ÿåˆ—ï¼Œç”¨æˆ·æŠ½å¥–æ—¶æŒ‰é˜Ÿåˆ—é¡ºåºå‘æ”¾ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥

- [8.1 åˆ›å»ºæŠ½å¥–é¢„è®¾](#81-åˆ›å»ºæŠ½å¥–é¢„è®¾-) `POST /api/v4/lottery-preset/create`
- [8.2 æŸ¥è¯¢ç”¨æˆ·é¢„è®¾](#82-æŸ¥è¯¢ç”¨æˆ·é¢„è®¾-) `GET /api/v4/lottery-preset/user/:user_id`
- [8.3 è·å–æ‰€æœ‰é¢„è®¾åˆ—è¡¨](#83-è·å–æ‰€æœ‰é¢„è®¾åˆ—è¡¨-) `GET /api/v4/lottery-preset/list`
- [8.4 åˆ é™¤ç”¨æˆ·é¢„è®¾](#84-åˆ é™¤ç”¨æˆ·é¢„è®¾-) `DELETE /api/v4/lottery-preset/user/:user_id`
- [8.5 é¢„è®¾ç»Ÿè®¡](#85-é¢„è®¾ç»Ÿè®¡-) `GET /api/v4/lottery-preset/stats`

### [9. V4 ç³»ç»ŸåŠŸèƒ½](#9-v4-ç³»ç»ŸåŠŸèƒ½) (19ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/system`  
**å®ç°æ–‡ä»¶**: `routes/v4/system.js`  
**ä¸šåŠ¡åœºæ™¯**: ç³»ç»Ÿå…¬å‘Šç®¡ç†ã€ç”¨æˆ·åé¦ˆç³»ç»Ÿã€å®¢æœèŠå¤©ç³»ç»Ÿï¼ˆWebSocketï¼‰ã€ç³»ç»ŸçŠ¶æ€ç›‘æ§  
**æ ¸å¿ƒåŠŸèƒ½**: æä¾›ç³»ç»Ÿçº§åŠŸèƒ½æ”¯æŒï¼ŒåŒ…æ‹¬å…¬å‘Šå‘å¸ƒã€ç”¨æˆ·åé¦ˆå¤„ç†ã€å®æ—¶èŠå¤©ï¼ˆSocket.IOï¼‰ã€ç³»ç»Ÿè¿è¡ŒçŠ¶æ€æŸ¥è¯¢

- [9.1 è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨](#91-è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨-) `GET /api/v4/system/announcements`
- [9.2 è·å–é¦–é¡µå…¬å‘Š](#92-è·å–é¦–é¡µå…¬å‘Š-) `GET /api/v4/system/announcements/home`
- [9.3 æäº¤ç”¨æˆ·åé¦ˆ](#93-æäº¤ç”¨æˆ·åé¦ˆ-) `POST /api/v4/system/feedback`
- [9.4 è·å–ç³»ç»ŸçŠ¶æ€](#94-è·å–ç³»ç»ŸçŠ¶æ€-) `GET /api/v4/system/status`
- [9.5 è·å–ä¸šåŠ¡é…ç½®](#95-è·å–ä¸šåŠ¡é…ç½®-) `GET /api/v4/system/business-config`
- [9.6 è·å–æˆ‘çš„åé¦ˆåˆ—è¡¨](#96-è·å–æˆ‘çš„åé¦ˆåˆ—è¡¨-) `GET /api/v4/system/feedback/my`
- [9.7 è·å–åé¦ˆè¯¦æƒ…](#97-è·å–åé¦ˆè¯¦æƒ…-) `GET /api/v4/system/feedback/:id`
- [9.8 è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®](#98-è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®-) `GET /api/v4/system/user/statistics/:user_id`
- [9.9 è·å–WebSocketæœåŠ¡çŠ¶æ€](#99-è·å–websocketæœåŠ¡çŠ¶æ€-) `GET /api/v4/system/chat/ws-status`
- [9.10 åˆ›å»ºèŠå¤©ä¼šè¯](#910-åˆ›å»ºèŠå¤©ä¼šè¯-) `POST /api/v4/system/chat/create`
- [9.11 è·å–èŠå¤©ä¼šè¯åˆ—è¡¨](#911-è·å–èŠå¤©ä¼šè¯åˆ—è¡¨-) `GET /api/v4/system/chat/sessions`
- [9.12 è·å–èŠå¤©å†å²](#912-è·å–èŠå¤©å†å²-) `GET /api/v4/system/chat/history/:sessionId`
- [9.13 å‘é€èŠå¤©æ¶ˆæ¯](#913-å‘é€èŠå¤©æ¶ˆæ¯-) `POST /api/v4/system/chat/send`
- [9.15 ç®¡ç†å‘˜æ€»è§ˆ](#915-ç®¡ç†å‘˜æ€»è§ˆ-) `GET /api/v4/system/admin/overview`

### [10. V4 è°ƒè¯•æ§åˆ¶ç³»ç»Ÿ](#10-v4-è°ƒè¯•æ§åˆ¶ç³»ç»Ÿ) (6ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/debug-control`  
**å®ç°æ–‡ä»¶**: `routes/v4/debug-control.js`  
**ä¸šåŠ¡åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒåŠ¨æ€è°ƒè¯•ã€æ—¥å¿—çº§åˆ«è°ƒæ•´ã€é’ˆå¯¹æ€§ç”¨æˆ·/ä¼šè¯è°ƒè¯•ã€æ—¥å¿—æ–‡ä»¶ç®¡ç†  
**æ ¸å¿ƒåŠŸèƒ½**: ä»…ç®¡ç†å‘˜å¯ç”¨ï¼Œæ”¯æŒåœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹åŠ¨æ€è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œä¸ºç‰¹å®šç”¨æˆ·æˆ–ä¼šè¯å¼€å¯è¯¦ç»†æ—¥å¿—  
**å®é™…è·¯ç”±æ•°**: 6ä¸ªAPIï¼ˆå·²é€šè¿‡ä»£ç éªŒè¯ï¼Œæ’é™¤2ä¸ªä¸­é—´ä»¶ï¼šauthenticateTokenå’ŒrequireAdminï¼‰

- [10.1 è·å–è°ƒè¯•é…ç½®](#101-è·å–è°ƒè¯•é…ç½®-) `GET /api/v4/debug-control/config`
- [10.2 è°ƒæ•´æ—¥å¿—çº§åˆ«](#102-è°ƒæ•´æ—¥å¿—çº§åˆ«-) `POST /api/v4/debug-control/log-level`
- [10.3 ç”¨æˆ·è°ƒè¯•æ¨¡å¼](#103-ç”¨æˆ·è°ƒè¯•æ¨¡å¼-) `POST /api/v4/debug-control/user-debug`
- [10.4 ä¼šè¯è°ƒè¯•æ¨¡å¼](#104-ä¼šè¯è°ƒè¯•æ¨¡å¼-) `POST /api/v4/debug-control/session-debug`
- [10.5 æ¸…é™¤è°ƒè¯•ä¼šè¯](#105-æ¸…é™¤è°ƒè¯•ä¼šè¯-) `POST /api/v4/debug-control/clear-debug`
- [10.6 æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶](#106-æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶-) `GET /api/v4/debug-control/log-files`

### [11. V4 ç»Ÿä¸€ç®¡ç†å¼•æ“](#11-v4-ç»Ÿä¸€ç®¡ç†å¼•æ“) (37ä¸ª) âœ…
**è·¯å¾„å‰ç¼€**: `/api/v4/admin`  
**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/admin/`ï¼ˆæ¨¡å—åŒ–ç›®å½•ç»“æ„ï¼‰  
**ä¸šåŠ¡åœºæ™¯**: åå°ç®¡ç†ã€ç³»ç»Ÿé…ç½®ã€æ•°æ®åˆ†æã€ç”¨æˆ·ç®¡ç†ã€æŠ½å¥–æ§åˆ¶ã€å®¡æ ¸ç®¡ç†  
**æ ¸å¿ƒåŠŸèƒ½**: ä»…ç®¡ç†å‘˜å¯ç”¨ï¼Œæä¾›å®Œæ•´çš„åå°ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…å«8ä¸ªå®ç°å­æ¨¡å—ï¼ˆè®¤è¯ã€ç›‘æ§ã€é…ç½®ã€å¥–å“æ± ã€ç”¨æˆ·ã€æŠ½å¥–ã€åˆ†æã€å®¡æ ¸ï¼‰  
**å®é™…è·¯ç”±æ•°**: 37ä¸ªAPIï¼ˆå·²é€šè¿‡ä»£ç éªŒè¯ï¼š2+10+2+3+5+6+4+4+1=37ï¼‰  
**å­æ¨¡å—æ–‡ä»¶**: 
- `admin/auth.js` - ç®¡ç†å‘˜è®¤è¯ï¼ˆ2ä¸ªAPIï¼‰
- `admin/system.js` - ç³»ç»Ÿç›‘æ§ï¼ˆ10ä¸ªAPIï¼‰
- `admin/config.js` - é…ç½®ç®¡ç†ï¼ˆ2ä¸ªAPIï¼‰
- `admin/prize_pool.js` - å¥–å“æ± ç®¡ç†ï¼ˆ3ä¸ªAPIï¼‰
- `admin/user_management.js` - ç”¨æˆ·ç®¡ç†ï¼ˆ5ä¸ªAPIï¼‰
- `admin/lottery_management.js` - æŠ½å¥–ç®¡ç†ï¼ˆ6ä¸ªAPIï¼‰
- `admin/analytics.js` - æ•°æ®åˆ†æï¼ˆ4ä¸ªAPIï¼‰
- `admin/audit.js` - å…‘æ¢å®¡æ ¸ï¼ˆ4ä¸ªAPIï¼‰
- `admin/index.js` - ç®¡ç†å¼•æ“èšåˆè·¯ç”±ï¼ˆ1ä¸ªèšåˆè·¯ç”±+10ä¸ªé¢å¤–ç®¡ç†APIï¼‰
- `admin/shared/` - å…±äº«å·¥å…·æ¨¡å—ï¼ˆæƒé™éªŒè¯ã€æ—¥å¿—è®°å½•ç­‰å·¥å…·å‡½æ•°ï¼‰

#### 11.1 åŸºç¡€ç®¡ç†åŠŸèƒ½
- [11.1 è·å–ç®¡ç†å‘˜æ¨¡å—ä¿¡æ¯](#111-è·å–ç®¡ç†å‘˜æ¨¡å—ä¿¡æ¯-) `GET /api/v4/admin/`

#### 11.2 ç®¡ç†å‘˜è®¤è¯
- `POST /api/v4/admin/auth/login` - ç®¡ç†å‘˜ç™»å½•(ä»…ç®¡ç†å‘˜è§’è‰²å¯ç™»å½•)
- `GET /api/v4/admin/auth/profile` - è·å–ç®¡ç†å‘˜ä¿¡æ¯(éªŒè¯ç®¡ç†å‘˜èº«ä»½)

**è¯´æ˜**: ç®¡ç†å‘˜è®¤è¯ä¸æ™®é€šç”¨æˆ·è®¤è¯åˆ†ç¦»ï¼Œä½¿ç”¨ç›¸åŒçš„JWT Tokenæœºåˆ¶ï¼Œä½†éªŒè¯role_levelâ‰¥100

#### 11.3 ç³»ç»Ÿç›‘æ§
- `GET /api/v4/admin/system/status` - ç³»ç»ŸçŠ¶æ€(æœåŠ¡è¿è¡ŒçŠ¶æ€)
- `GET /api/v4/admin/system/dashboard` - ç®¡ç†ä»ªè¡¨ç›˜(æ ¸å¿ƒæ•°æ®æ¦‚è§ˆ)
- `GET /api/v4/admin/system/management-status` - ç®¡ç†ç³»ç»ŸçŠ¶æ€(ç®¡ç†åå°å¥åº·æ£€æŸ¥)
- `POST /api/v4/admin/system/announcements` - åˆ›å»ºç³»ç»Ÿå…¬å‘Š(å‘å¸ƒå…¬å‘Š)
- `GET /api/v4/admin/system/announcements` - è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨(ç®¡ç†å…¬å‘Š)
- `PUT /api/v4/admin/system/announcements/:id` - æ›´æ–°ç³»ç»Ÿå…¬å‘Š(ç¼–è¾‘å…¬å‘Š)
- `DELETE /api/v4/admin/system/announcements/:id` - åˆ é™¤ç³»ç»Ÿå…¬å‘Š(è½¯åˆ é™¤)
- `GET /api/v4/admin/system/feedbacks` - è·å–åé¦ˆåˆ—è¡¨(æŸ¥çœ‹ç”¨æˆ·åé¦ˆ)
- `POST /api/v4/admin/system/feedbacks/:id/reply` - å›å¤ç”¨æˆ·åé¦ˆ(ç®¡ç†å‘˜å¤„ç†åé¦ˆ)
- `PUT /api/v4/admin/system/feedbacks/:id/status` - æ›´æ–°åé¦ˆçŠ¶æ€(æ ‡è®°å¤„ç†çŠ¶æ€)

#### 11.4 é…ç½®ç®¡ç†
- `PUT /api/v4/admin/config` - æ›´æ–°ç³»ç»Ÿé…ç½®(ä¿®æ”¹ä¸šåŠ¡é…ç½®å‚æ•°)
- `POST /api/v4/admin/config/test/simulate` - æµ‹è¯•æ¨¡æ‹Ÿ(æµ‹è¯•é…ç½®å˜æ›´æ•ˆæœ)

**è¯´æ˜**: é…ç½®ç®¡ç†æ”¯æŒåŠ¨æ€ä¿®æ”¹ä¸šåŠ¡å‚æ•°ï¼Œæ— éœ€é‡å¯æœåŠ¡

#### 11.5 å¥–å“æ± ç®¡ç†
- [11.5 å¥–å“æ± ç®¡ç†](#115-å¥–å“æ± ç®¡ç†-) 
  - `POST /api/v4/admin/prize-pool/batch-add` - æ‰¹é‡æ·»åŠ å¥–å“
  - `GET /api/v4/admin/prize-pool/:campaign_id` - è·å–æ´»åŠ¨å¥–å“æ± 
  - `PUT /api/v4/admin/prize-pool/prize/:prize_id` - æ›´æ–°å¥–å“ä¿¡æ¯

#### 11.6 ç”¨æˆ·ç®¡ç†
- [11.6 ç”¨æˆ·ç®¡ç†](#116-ç”¨æˆ·ç®¡ç†-)
  - `GET /api/v4/admin/user-management/users` - è·å–ç”¨æˆ·åˆ—è¡¨(æ”¯æŒæœç´¢å’Œè§’è‰²è¿‡æ»¤)
  - `GET /api/v4/admin/user-management/users/:user_id` - è·å–ç”¨æˆ·è¯¦æƒ…(å«è§’è‰²å’Œç§¯åˆ†ä¿¡æ¯)
  - `PUT /api/v4/admin/user-management/users/:user_id/role` - æ›´æ–°ç”¨æˆ·è§’è‰²(åˆ†é…/æ’¤é”€è§’è‰²)
  - `PUT /api/v4/admin/user-management/users/:user_id/status` - æ›´æ–°ç”¨æˆ·çŠ¶æ€(å¯ç”¨/ç¦ç”¨è´¦æˆ·)
  - `GET /api/v4/admin/user-management/roles` - è·å–æ‰€æœ‰å¯ç”¨è§’è‰²åˆ—è¡¨

#### 11.7 æŠ½å¥–ç®¡ç†
- [11.7 æŠ½å¥–ç®¡ç†](#117-æŠ½å¥–ç®¡ç†-)
  - `POST /api/v4/admin/lottery-management/force-win` - å¼ºåˆ¶ä¸­å¥–
  - `POST /api/v4/admin/lottery-management/force-lose` - å¼ºåˆ¶ä¸ä¸­å¥–
  - `POST /api/v4/admin/lottery-management/probability-adjust` - è°ƒæ•´ä¸­å¥–æ¦‚ç‡
  - `POST /api/v4/admin/lottery-management/user-specific-queue` - åˆ›å»ºç”¨æˆ·ä¸“å±é˜Ÿåˆ—
  - `GET /api/v4/admin/lottery-management/user-status/:user_id` - è·å–ç”¨æˆ·æŠ½å¥–çŠ¶æ€
  - `DELETE /api/v4/admin/lottery-management/clear-user-settings/:user_id` - æ¸…é™¤ç”¨æˆ·ç‰¹æ®Šè®¾ç½®
  - `GET /api/v4/admin/lottery-management/statistics` - æŠ½å¥–ç»Ÿè®¡

#### 11.8 æ•°æ®åˆ†æ
- [11.8 æ•°æ®åˆ†æ](#118-æ•°æ®åˆ†æ-)
  - `GET /api/v4/admin/analytics/decisions/analytics` - å†³ç­–åˆ†æ
  - `GET /api/v4/admin/analytics/lottery/trends` - æŠ½å¥–è¶‹åŠ¿åˆ†æ
  - `GET /api/v4/admin/analytics/performance/report` - æ€§èƒ½æŠ¥å‘Š
  - `GET /api/v4/admin/analytics/stats/today` - ä»Šæ—¥ç»Ÿè®¡æ•°æ®

#### 11.9 å…‘æ¢å®¡æ ¸ç®¡ç†
- [11.9 å…‘æ¢å®¡æ ¸ç®¡ç†](#119-å…‘æ¢å®¡æ ¸ç®¡ç†-)
  - `GET /api/v4/admin/audit/pending` - è·å–å¾…å®¡æ ¸åˆ—è¡¨
  - `POST /api/v4/admin/audit/:exchange_id/approve` - å®¡æ ¸é€šè¿‡
  - `POST /api/v4/admin/audit/:exchange_id/reject` - å®¡æ ¸æ‹’ç»
  - `GET /api/v4/admin/audit/history` - å®¡æ ¸å†å²

**å¤‡æ³¨**: ç¬¬11æ¨¡å—æ˜¯ç»Ÿä¸€ç®¡ç†å¼•æ“ï¼ŒåŒ…å«9ä¸ªç®¡ç†å­æ¨¡å—æ–‡ä»¶(å«shared/å·¥å…·æ¨¡å—)ï¼Œå…±37ä¸ªAPIï¼ˆå®é™…ä»£ç éªŒè¯ï¼‰ï¼Œæä¾›å®Œæ•´çš„åå°ç®¡ç†åŠŸèƒ½

### [12. V4 å±‚çº§æƒé™ç®¡ç†](#12-v4-å±‚çº§æƒé™ç®¡ç†) (5ä¸ª) âœ… ğŸ†•
**è·¯å¾„å‰ç¼€**: `/api/v4/hierarchy`  
**å®ç°æ–‡ä»¶**: `routes/v4/hierarchy/index.js`  
**ä¸šåŠ¡åœºæ™¯**: ç»„ç»‡æ¶æ„ç®¡ç†ã€ä¸Šä¸‹çº§å…³ç³»ç»´æŠ¤ã€åŒºåŸŸè´Ÿè´£äººâ†’ä¸šåŠ¡ç»ç†â†’ä¸šåŠ¡å‘˜ä¸‰çº§ç®¡ç†ã€æ‰¹é‡æƒé™æ“ä½œ  
**æ ¸å¿ƒåŠŸèƒ½**: æ”¯æŒå±‚çº§åŒ–è§’è‰²æƒé™ç®¡ç†ï¼Œå®ç°ä¸Šçº§ç®¡ç†ä¸‹çº§çš„ç»„ç»‡æ¶æ„æ¨¡å¼ï¼Œæ‰¹é‡æ¿€æ´»/åœç”¨æƒé™  
**åˆ›å»ºæ—¶é—´**: 2025å¹´11æœˆ07æ—¥

- [12.1 åˆ›å»ºå±‚çº§å…³ç³»](#121-åˆ›å»ºå±‚çº§å…³ç³»-) `POST /api/v4/hierarchy/create`
- [12.2 æŸ¥è¯¢æ‰€æœ‰ä¸‹çº§](#122-æŸ¥è¯¢æ‰€æœ‰ä¸‹çº§-) `GET /api/v4/hierarchy/subordinates/:userId`
- [12.3 æ‰¹é‡åœç”¨æƒé™](#123-æ‰¹é‡åœç”¨æƒé™-) `POST /api/v4/hierarchy/deactivate`
- [12.4 æ‰¹é‡æ¿€æ´»æƒé™](#124-æ‰¹é‡æ¿€æ´»æƒé™-) `POST /api/v4/hierarchy/activate`
- [12.5 è·å–å±‚çº§ç»Ÿè®¡](#125-è·å–å±‚çº§ç»Ÿè®¡-) `GET /api/v4/hierarchy/stats/:userId`

### [13. V4 å®¡æ ¸ç®¡ç†ç³»ç»Ÿ](#13-v4-å®¡æ ¸ç®¡ç†ç³»ç»Ÿ) (13ä¸ª) âœ… ğŸ†•
**è·¯å¾„å‰ç¼€**: `/api/v4/audit-management`  
**å®ç°æ–‡ä»¶**: `routes/audit-management.js`  
**ä¸šåŠ¡åœºæ™¯**: å…‘æ¢è®¢å•æ‰¹é‡å®¡æ ¸ã€è¶…æ—¶è®¢å•å‘Šè­¦ã€ç»Ÿä¸€å†…å®¹å®¡æ ¸ï¼ˆå…‘æ¢/å›¾ç‰‡/åé¦ˆï¼‰ã€å®¡è®¡æ—¥å¿—æŸ¥è¯¢  
**æ ¸å¿ƒåŠŸèƒ½**: ä»…ç®¡ç†å‘˜å¯ç”¨ï¼Œæ”¯æŒæ‰¹é‡å®¡æ ¸å…‘æ¢è®¢å•ã€è‡ªåŠ¨æ£€æµ‹è¶…æ—¶è®¢å•ã€ç»Ÿä¸€å®¡æ ¸å¤šç§å†…å®¹ç±»å‹ã€å®Œæ•´çš„å®¡è®¡æ—¥å¿—è¿½è¸ª  
**åˆ›å»ºæ—¶é—´**: 2025å¹´10æœˆ12æ—¥

#### 13.1 å…‘æ¢è®¢å•å®¡æ ¸
- [13.1.1 æ‰¹é‡å®¡æ ¸é€šè¿‡](#1311-æ‰¹é‡å®¡æ ¸é€šè¿‡-) `POST /api/v4/audit-management/batch-approve`
- [13.1.2 æ‰¹é‡å®¡æ ¸æ‹’ç»](#1312-æ‰¹é‡å®¡æ ¸æ‹’ç»-) `POST /api/v4/audit-management/batch-reject`
- [13.1.3 è·å–è¶…æ—¶è®¢å•](#1313-è·å–è¶…æ—¶è®¢å•-) `GET /api/v4/audit-management/timeout-orders`
- [13.1.4 æ‰‹åŠ¨è§¦å‘è¶…æ—¶å‘Šè­¦](#1314-æ‰‹åŠ¨è§¦å‘è¶…æ—¶å‘Šè­¦-) `POST /api/v4/audit-management/check-timeout-alert`
- [13.1.5 è·å–å®¡æ ¸ç»Ÿè®¡](#1315-è·å–å®¡æ ¸ç»Ÿè®¡-) `GET /api/v4/audit-management/statistics`

#### 13.2 ç»Ÿä¸€å®¡æ ¸ç³»ç»Ÿ
- [13.2.1 è·å–å¾…å®¡æ ¸åˆ—è¡¨](#1321-è·å–å¾…å®¡æ ¸åˆ—è¡¨-) `GET /api/v4/audit-management/unified/pending`
- [13.2.2 è·å–å®¡æ ¸è¯¦æƒ…](#1322-è·å–å®¡æ ¸è¯¦æƒ…-) `GET /api/v4/audit-management/unified/:audit_id`
- [13.2.3 ç»Ÿä¸€å®¡æ ¸é€šè¿‡](#1323-ç»Ÿä¸€å®¡æ ¸é€šè¿‡-) `POST /api/v4/audit-management/unified/:audit_id/approve`
- [13.2.4 ç»Ÿä¸€å®¡æ ¸æ‹’ç»](#1324-ç»Ÿä¸€å®¡æ ¸æ‹’ç»-) `POST /api/v4/audit-management/unified/:audit_id/reject`
- [13.2.5 è·å–ç»Ÿä¸€å®¡æ ¸ç»Ÿè®¡](#1325-è·å–ç»Ÿä¸€å®¡æ ¸ç»Ÿè®¡-) `GET /api/v4/audit-management/unified/statistics`

#### 13.3 æ“ä½œå®¡è®¡æ—¥å¿—
- [13.3.1 æŸ¥è¯¢å®¡è®¡æ—¥å¿—](#1331-æŸ¥è¯¢å®¡è®¡æ—¥å¿—-) `GET /api/v4/audit-management/audit-logs`
- [13.3.2 è·å–æ—¥å¿—ç»Ÿè®¡](#1332-è·å–æ—¥å¿—ç»Ÿè®¡-) `GET /api/v4/audit-management/audit-logs/statistics`
- [13.3.3 è·å–æ—¥å¿—è¯¦æƒ…](#1333-è·å–æ—¥å¿—è¯¦æƒ…-) `GET /api/v4/audit-management/audit-logs/:log_id`

### [14. V4 æ´»åŠ¨æƒé™ç®¡ç†](#14-v4-æ´»åŠ¨æƒé™ç®¡ç†) (4ä¸ª) âš ï¸ è§„åˆ’ä¸­
**è·¯å¾„å‰ç¼€**: `/api/v4/admin/campaign-permissions`  
**ä¸šåŠ¡åœºæ™¯**: æ´»åŠ¨å‡†å…¥æ§åˆ¶ã€ç”¨æˆ·æ´»åŠ¨æƒé™åˆ†é…ã€æ‰¹é‡æƒé™ç®¡ç†  
**çŠ¶æ€**: âš ï¸ è¯¥æ¨¡å—æš‚æœªå®ç°ï¼Œé¢„è®¡åç»­ç‰ˆæœ¬å¼€å‘

**è§„åˆ’çš„APIåˆ—è¡¨**:
- `POST /api/v4/admin/campaign-permissions/assign` - åˆ†é…æ´»åŠ¨æƒé™
- `DELETE /api/v4/admin/campaign-permissions/revoke` - æ’¤é”€æ´»åŠ¨æƒé™
- `GET /api/v4/admin/campaign-permissions/list` - æŸ¥çœ‹æƒé™åˆ—è¡¨
- `GET /api/v4/admin/campaign-permissions/check` - æ£€æŸ¥ç”¨æˆ·æƒé™
- `POST /api/v4/admin/campaign-permissions/batch-assign` - æ‰¹é‡åˆ†é…æƒé™
- `POST /api/v4/admin/campaign-permissions/batch-revoke` - æ‰¹é‡æ’¤é”€æƒé™
- `GET /api/v4/admin/campaign-permissions/user/:user_id` - è·å–ç”¨æˆ·æƒé™åˆ—è¡¨
- `GET /api/v4/admin/campaign-permissions/campaign/:campaign_id` - è·å–æ´»åŠ¨æƒé™é…ç½®
- `GET /api/v4/admin/campaign-permissions/statistics` - è·å–æƒé™ç»Ÿè®¡

### [é™„å½•ï¼šä¸šåŠ¡è§„åˆ™è¯´æ˜](#é™„å½•ä¸šåŠ¡è§„åˆ™è¯´æ˜)

---
 
 
### æ›´æ–°åŸåˆ™
- âœ… åŸºäºå®é™…ä»£ç éªŒè¯ï¼Œä¸æ¨æµ‹APIå®ç°
- âœ… è¡¥å……è¯¦ç»†çš„ä¸šåŠ¡åœºæ™¯è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹
- âœ… æä¾›å¼€å‘è§†è§’å’Œæ¶æ„è§†è§’çš„æŠ€æœ¯è¯´æ˜
- âœ… åˆ é™¤å·²ä»ä»£ç ä¸­ç§»é™¤çš„åŠŸèƒ½ï¼ˆä¸æ ‡è®°ä¸ºåºŸå¼ƒï¼‰
- âœ… æ˜ç¡®æ ‡æ³¨æœªå®ç°çš„è§„åˆ’åŠŸèƒ½ï¼ˆå¦‚æ¨¡å—14ï¼‰
- âœ… éªŒè¯APIè·¯å¾„ã€å‚æ•°ã€è¿”å›å€¼çš„å‡†ç¡®æ€§

## ğŸ“‹ åˆ†æ‰¹æ›´æ–°è®¡åˆ’ï¼ˆç»†åˆ†ç‰ˆï¼‰

### **ç¬¬1æ‰¹ï¼ˆæ¨¡å—1ï¼šç»Ÿä¸€è®¤è¯å¼•æ“ 1-5ï¼‰**
- 1.1 ç”¨æˆ·ç™»å½•(æ‰‹æœºå·+éªŒè¯ç ) - POST /api/v4/auth/login
- 1.2 è§£å¯†å¾®ä¿¡æ‰‹æœºå· - POST /api/v4/auth/decrypt-phone
- 1.3 ç”¨æˆ·å¿«é€Ÿç™»å½•(å¾®ä¿¡ä¸€é”®ç™»å½•) - POST /api/v4/auth/quick-login
- 1.4 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ - GET /api/v4/auth/profile
- 1.5 éªŒè¯Tokenæœ‰æ•ˆæ€§(POST) - POST /api/v4/auth/verify

### **ç¬¬2æ‰¹ï¼ˆæ¨¡å—1ï¼šç»Ÿä¸€è®¤è¯å¼•æ“ 6-8 + æ¨¡å—2ï¼šç»Ÿä¸€æŠ½å¥–å¼•æ“ 1-2ï¼‰**
- 1.6 éªŒè¯Tokenæœ‰æ•ˆæ€§(GET) - GET /api/v4/auth/verify
- 1.7 åˆ·æ–°è®¿é—®ä»¤ç‰Œ - POST /api/v4/auth/refresh
- 1.8 ç”¨æˆ·é€€å‡ºç™»å½• - POST /api/v4/auth/logout
- 2.1 è·å–æ´»åŠ¨å¥–å“æ± é…ç½® - GET /api/v4/lottery/prizes/:campaignCode
- 2.2 è·å–æ´»åŠ¨æŠ½å¥–é…ç½® - GET /api/v4/lottery/config/:campaignCode

### **ç¬¬3æ‰¹ï¼ˆæ¨¡å—2ï¼šç»Ÿä¸€æŠ½å¥–å¼•æ“ 3-7ï¼‰**
- 2.3 æ‰§è¡ŒæŠ½å¥– - POST /api/v4/lottery/draw
- 2.4 è·å–ç”¨æˆ·æŠ½å¥–å†å² - GET /api/v4/lottery/history/:user_id
- 2.5 è·å–æ´»åŠ¨åˆ—è¡¨ - GET /api/v4/lottery/campaigns
- 2.6 è·å–ç”¨æˆ·å¯ç”¨ç§¯åˆ† - GET /api/v4/lottery/points/:user_id
- 2.7 è·å–ç”¨æˆ·æŠ½å¥–ç»Ÿè®¡ - GET /api/v4/lottery/statistics/:user_id

### **ç¬¬4æ‰¹ï¼ˆæ¨¡å—2ï¼šç»Ÿä¸€æŠ½å¥–å¼•æ“ 8 + æ¨¡å—3ï¼šæƒé™ç®¡ç† 1-4ï¼‰**
- 2.8 è·å–æŠ½å¥–ç³»ç»Ÿå¥åº·çŠ¶æ€ - GET /api/v4/lottery/health
- 3.1 è·å–æŒ‡å®šç”¨æˆ·æƒé™ä¿¡æ¯ - GET /api/v4/permissions/user/:user_id
- 3.2 è·å–å½“å‰ç”¨æˆ·æƒé™ - GET /api/v4/permissions/current
- 3.3 è·å–å½“å‰ç”¨æˆ·æƒé™(ç®€åŒ–ç‰ˆ) - GET /api/v4/permissions/me
- 3.4 æ£€æŸ¥ç”¨æˆ·æƒé™ - POST /api/v4/permissions/check

### **ç¬¬5æ‰¹ï¼ˆæ¨¡å—3ï¼šæƒé™ç®¡ç† 5-8 + æ¨¡å—4ï¼šç§¯åˆ†ç®¡ç† 1ï¼‰**
- 3.5 è·å–ç®¡ç†å‘˜åˆ—è¡¨ - GET /api/v4/permissions/admins
- 3.6 åˆ·æ–°ç”¨æˆ·æƒé™ç¼“å­˜ - POST /api/v4/permissions/refresh
- 3.7 æ‰¹é‡æ£€æŸ¥æƒé™ - POST /api/v4/permissions/batch-check
- 3.8 è·å–æƒé™ç»Ÿè®¡ - GET /api/v4/permissions/statistics
- 4.1 è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†ä½™é¢ - GET /api/v4/points/balance

### **ç¬¬6æ‰¹ï¼ˆæ¨¡å—4ï¼šç§¯åˆ†ç®¡ç† 2-6ï¼‰**
- 4.2 è·å–æŒ‡å®šç”¨æˆ·ç§¯åˆ†ä½™é¢ - GET /api/v4/points/balance/:user_id
- 4.3 è·å–ç§¯åˆ†äº¤æ˜“å†å² - GET /api/v4/points/transactions/:user_id
- 4.4 ç®¡ç†å‘˜è°ƒæ•´ç§¯åˆ† - POST /api/v4/points/admin/adjust
- 4.5 è·å–ç®¡ç†å‘˜ç§¯åˆ†ç»Ÿè®¡ - GET /api/v4/points/admin/statistics
- 4.6 è·å–ç”¨æˆ·ç§¯åˆ†ç»Ÿè®¡ - GET /api/v4/points/user/statistics/:user_id

### **ç¬¬7æ‰¹ï¼ˆæ¨¡å—4ï¼šç§¯åˆ†ç®¡ç† 7-11ï¼‰**
- 4.7 è·å–ç§¯åˆ†æ€»è§ˆ - GET /api/v4/points/overview
- 4.8 è·å–å†»ç»“ç§¯åˆ†åˆ—è¡¨ - GET /api/v4/points/frozen
- 4.9 è·å–ç§¯åˆ†è¶‹åŠ¿æ•°æ® - GET /api/v4/points/trend
- 4.10 åˆ é™¤/éšè—äº¤æ˜“è®°å½• - DELETE /api/v4/points/transaction/:transaction_id
- 4.11 æ¢å¤äº¤æ˜“è®°å½• - POST /api/v4/points/transaction/:transaction_id/restore

### **ç¬¬8æ‰¹ï¼ˆæ¨¡å—4ï¼šç§¯åˆ†ç®¡ç† 12 + æ¨¡å—5ï¼šåº“å­˜ç®¡ç† 1-4ï¼‰**
- 4.12 æŸ¥è¯¢ç§¯åˆ†æ¢å¤å®¡è®¡è®°å½• - GET /api/v4/points/restore-audit
- 5.1 è·å–ç”¨æˆ·åº“å­˜åˆ—è¡¨ - GET /api/v4/inventory/user/:user_id
- 5.2 è·å–åº“å­˜é¡¹è¯¦æƒ… - GET /api/v4/inventory/item/:item_id
- 5.3 ä½¿ç”¨åº“å­˜é¡¹ - POST /api/v4/inventory/use/:item_id
- 5.4 è·å–ç®¡ç†å‘˜åº“å­˜ç»Ÿè®¡ - GET /api/v4/inventory/admin/statistics

### **ç¬¬9æ‰¹ï¼ˆæ¨¡å—5ï¼šåº“å­˜ç®¡ç† 5-9ï¼‰**
- 5.5 ç”Ÿæˆæ ¸é”€ç  - POST /api/v4/inventory/generate-code/:item_id
- 5.6 ç‰©å“è½¬è®© - POST /api/v4/inventory/transfer
- 5.7 è·å–è½¬è®©å†å² - GET /api/v4/inventory/transfer-history
- 5.8 å…‘æ¢å•†å“ - POST /api/v4/inventory/exchange
- 5.9 è·å–å…‘æ¢è®°å½• - GET /api/v4/inventory/exchange-records

### **ç¬¬10æ‰¹ï¼ˆæ¨¡å—5ï¼šåº“å­˜ç®¡ç† 10-14ï¼‰**
- 5.10 å–æ¶ˆå…‘æ¢è®°å½• - POST /api/v4/inventory/exchange-records/:id/cancel
- 5.11 åˆ é™¤å…‘æ¢è®°å½• - DELETE /api/v4/inventory/exchange-records/:exchange_id
- 5.12 æ¢å¤å…‘æ¢è®°å½• - POST /api/v4/inventory/exchange-records/:exchange_id/restore
- 5.13 è·å–å•†å“åˆ—è¡¨ - GET /api/v4/inventory/products
- 5.14 è·å–å¸‚åœºå•†å“åˆ—è¡¨ - GET /api/v4/inventory/market/products

### **ç¬¬11æ‰¹ï¼ˆæ¨¡å—5ï¼šåº“å­˜ç®¡ç† 15-18 + æ¨¡å—6ï¼šæ¶ˆè´¹è®°å½• 1ï¼‰**
- 5.15 è·å–å¸‚åœºå•†å“è¯¦æƒ… - GET /api/v4/inventory/market/products/:id
- 5.16 è´­ä¹°å¸‚åœºå•†å“ - POST /api/v4/inventory/market/products/:id/purchase
- 5.17 æ’¤å›å¸‚åœºå•†å“ - POST /api/v4/inventory/market/products/:id/withdraw
- 5.18 æ ¸é”€éªŒè¯ç  - POST /api/v4/inventory/verification/verify
- 6.1 æäº¤æ¶ˆè´¹è®°å½• - POST /api/v4/consumption/submit

### **ç¬¬12æ‰¹ï¼ˆæ¨¡å—6ï¼šæ¶ˆè´¹è®°å½• 2-6ï¼‰**
- 6.2 è·å–ç”¨æˆ·æ¶ˆè´¹è®°å½• - GET /api/v4/consumption/user/:user_id
- 6.3 è·å–æ¶ˆè´¹è®°å½•è¯¦æƒ… - GET /api/v4/consumption/detail/:record_id
- 6.4 è·å–å¾…å®¡æ ¸æ¶ˆè´¹è®°å½• - GET /api/v4/consumption/pending
- 6.5 ç®¡ç†å‘˜è·å–æ‰€æœ‰æ¶ˆè´¹è®°å½• - GET /api/v4/consumption/admin/records
- 6.6 å®¡æ ¸é€šè¿‡æ¶ˆè´¹è®°å½• - POST /api/v4/consumption/approve/:record_id

### **ç¬¬13æ‰¹ï¼ˆæ¨¡å—6ï¼šæ¶ˆè´¹è®°å½• 7-11ï¼‰**
- 6.7 æ‹’ç»æ¶ˆè´¹è®°å½• - POST /api/v4/consumption/reject/:record_id
- 6.8 è·å–ç”¨æˆ·æ¶ˆè´¹äºŒç»´ç  - GET /api/v4/consumption/qrcode/:user_id
- 6.9 éªŒè¯ç”¨æˆ·QRç ï¼ˆå·²åˆ é™¤ï¼ŒåŠŸèƒ½åˆå¹¶åˆ°user-infoæ¥å£ï¼‰
- 6.10 åˆ é™¤æ¶ˆè´¹è®°å½• - DELETE /api/v4/consumption/:record_id
- 6.11 æ¢å¤æ¶ˆè´¹è®°å½• - POST /api/v4/consumption/:record_id/restore

### **ç¬¬14æ‰¹ï¼ˆæ¨¡å—7ï¼šé«˜çº§ç©ºé—´ + æ¨¡å—8ï¼šæŠ½å¥–é¢„è®¾ 1-3ï¼‰**
- 7.1 è§£é”é«˜çº§ç©ºé—´ - POST /api/v4/premium/unlock
- 7.2 æŸ¥è¯¢è§£é”çŠ¶æ€ - GET /api/v4/premium/status
- 8.1 åˆ›å»ºæŠ½å¥–é¢„è®¾ - POST /api/v4/lottery-preset/create
- 8.2 æŸ¥è¯¢ç”¨æˆ·é¢„è®¾ - GET /api/v4/lottery-preset/user/:user_id
- 8.3 è·å–æ‰€æœ‰é¢„è®¾åˆ—è¡¨ - GET /api/v4/lottery-preset/list

### **ç¬¬15æ‰¹ï¼ˆæ¨¡å—8ï¼šæŠ½å¥–é¢„è®¾ 4-5 + æ¨¡å—9ï¼šç³»ç»ŸåŠŸèƒ½ 1-3ï¼‰**
- 8.4 åˆ é™¤ç”¨æˆ·é¢„è®¾ - DELETE /api/v4/lottery-preset/user/:user_id
- 8.5 é¢„è®¾ç»Ÿè®¡ - GET /api/v4/lottery-preset/stats
- 9.1 è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨ - GET /api/v4/system/announcements
- 9.2 è·å–é¦–é¡µå…¬å‘Š - GET /api/v4/system/announcements/home
- 9.3 æäº¤ç”¨æˆ·åé¦ˆ - POST /api/v4/system/feedback

### **ç¬¬16æ‰¹ï¼ˆæ¨¡å—9ï¼šç³»ç»ŸåŠŸèƒ½ 4-8ï¼‰**
- 9.4 è·å–ç³»ç»ŸçŠ¶æ€ - GET /api/v4/system/status
- 9.5 è·å–ä¸šåŠ¡é…ç½® - GET /api/v4/system/business-config
- 9.6 è·å–æˆ‘çš„åé¦ˆåˆ—è¡¨ - GET /api/v4/system/feedback/my
- 9.7 è·å–åé¦ˆè¯¦æƒ… - GET /api/v4/system/feedback/:id
- 9.8 è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ® - GET /api/v4/system/user/statistics/:user_id

### **ç¬¬17æ‰¹ï¼ˆæ¨¡å—9ï¼šç³»ç»ŸåŠŸèƒ½ 9-13ï¼‰**
- 9.9 è·å–WebSocketæœåŠ¡çŠ¶æ€ - GET /api/v4/system/chat/ws-status
- 9.10 åˆ›å»ºèŠå¤©ä¼šè¯ - POST /api/v4/system/chat/create
- 9.11 è·å–èŠå¤©ä¼šè¯åˆ—è¡¨ - GET /api/v4/system/chat/sessions
- 9.12 è·å–èŠå¤©å†å² - GET /api/v4/system/chat/history/:sessionId
- 9.13 å‘é€èŠå¤©æ¶ˆæ¯ - POST /api/v4/system/chat/send

### **ç¬¬18æ‰¹ï¼ˆæ¨¡å—9ï¼šç³»ç»ŸåŠŸèƒ½ 14-18ï¼‰**
- 9.15 ç®¡ç†å‘˜æ€»è§ˆ - GET /api/v4/system/admin/overview

### **ç¬¬19æ‰¹ï¼ˆæ¨¡å—9ï¼šç³»ç»ŸåŠŸèƒ½ 19 + æ¨¡å—10ï¼šè°ƒè¯•æ§åˆ¶ 1-4ï¼‰**
- 10.1 è·å–è°ƒè¯•é…ç½® - GET /api/v4/debug-control/config
- 10.2 è°ƒæ•´æ—¥å¿—çº§åˆ« - POST /api/v4/debug-control/log-level
- 10.3 ç”¨æˆ·è°ƒè¯•æ¨¡å¼ - POST /api/v4/debug-control/user-debug
- 10.4 ä¼šè¯è°ƒè¯•æ¨¡å¼ - POST /api/v4/debug-control/session-debug

### **ç¬¬20æ‰¹ï¼ˆæ¨¡å—10ï¼šè°ƒè¯•æ§åˆ¶ 5-6 + æ¨¡å—11ï¼šç®¡ç†å¼•æ“ 1-3ï¼‰**
- 10.5 æ¸…é™¤è°ƒè¯•ä¼šè¯ - POST /api/v4/debug-control/clear-debug
- 10.6 æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ - GET /api/v4/debug-control/log-files
- 11.1 è·å–ç®¡ç†å‘˜æ¨¡å—ä¿¡æ¯ - GET /api/v4/admin/
- 11.2.1 ç®¡ç†å‘˜ç™»å½• - POST /api/v4/admin/auth/login
- 11.2.2 è·å–ç®¡ç†å‘˜ä¿¡æ¯ - GET /api/v4/admin/auth/profile

### **ç¬¬21æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - ç³»ç»Ÿç›‘æ§ 1-5ï¼‰**
- 11.3.1 ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ - GET /api/v4/admin/system/status
- 11.3.2 ç®¡ç†ä»ªè¡¨ç›˜ - GET /api/v4/admin/system/dashboard
- 11.3.3 ç®¡ç†ç³»ç»ŸçŠ¶æ€ - GET /api/v4/admin/system/management-status
- 11.3.4 åˆ›å»ºç³»ç»Ÿå…¬å‘Š - POST /api/v4/admin/system/announcements
- 11.3.5 è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨ - GET /api/v4/admin/system/announcements

### **ç¬¬22æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - ç³»ç»Ÿç›‘æ§ 6-10ï¼‰**
- 11.3.6 æ›´æ–°ç³»ç»Ÿå…¬å‘Š - PUT /api/v4/admin/system/announcements/:id
- 11.3.7 åˆ é™¤ç³»ç»Ÿå…¬å‘Š - DELETE /api/v4/admin/system/announcements/:id
- 11.3.8 è·å–åé¦ˆåˆ—è¡¨ - GET /api/v4/admin/system/feedbacks
- 11.3.9 å›å¤ç”¨æˆ·åé¦ˆ - POST /api/v4/admin/system/feedbacks/:id/reply
- 11.3.10 æ›´æ–°åé¦ˆçŠ¶æ€ - PUT /api/v4/admin/system/feedbacks/:id/status

### **ç¬¬23æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - é…ç½®/å¥–å“æ±  1-5ï¼‰**
- 11.4.1 æ›´æ–°ç³»ç»Ÿé…ç½® - PUT /api/v4/admin/config
- 11.4.2 æµ‹è¯•é…ç½®æ¨¡æ‹Ÿ - POST /api/v4/admin/config/test/simulate
- 11.5.1 æ‰¹é‡æ·»åŠ å¥–å“ - POST /api/v4/admin/prize-pool/batch-add
- 11.5.2 è·å–æ´»åŠ¨å¥–å“æ±  - GET /api/v4/admin/prize-pool/:campaign_code
- 11.5.3 æ›´æ–°å¥–å“ä¿¡æ¯ - PUT /api/v4/admin/prize-pool/prize/:prize_id

### **ç¬¬24æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - ç”¨æˆ·ç®¡ç† 1-5ï¼‰**
- 11.6.1 è·å–ç”¨æˆ·åˆ—è¡¨ - GET /api/v4/admin/user-management/users
- 11.6.2 è·å–ç”¨æˆ·è¯¦æƒ… - GET /api/v4/admin/user-management/users/:user_id
- 11.6.3 æ›´æ–°ç”¨æˆ·è§’è‰² - PUT /api/v4/admin/user-management/users/:user_id/role
- 11.6.4 æ›´æ–°ç”¨æˆ·çŠ¶æ€ - PUT /api/v4/admin/user-management/users/:user_id/status
- 11.6.5 è·å–æ‰€æœ‰å¯ç”¨è§’è‰² - GET /api/v4/admin/user-management/roles

### **ç¬¬25æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - æŠ½å¥–ç®¡ç† 1-5ï¼‰**
- 11.7.1 å¼ºåˆ¶ä¸­å¥– - POST /api/v4/admin/lottery-management/force-win
- 11.7.2 å¼ºåˆ¶ä¸ä¸­å¥– - POST /api/v4/admin/lottery-management/force-lose
- 11.7.3 è°ƒæ•´ä¸­å¥–æ¦‚ç‡ - POST /api/v4/admin/lottery-management/probability-adjust
- 11.7.4 åˆ›å»ºç”¨æˆ·ä¸“å±é˜Ÿåˆ— - POST /api/v4/admin/lottery-management/user-specific-queue
- 11.7.5 è·å–ç”¨æˆ·æŠ½å¥–çŠ¶æ€ - GET /api/v4/admin/lottery-management/user-status/:user_id

### **ç¬¬26æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - æŠ½å¥–ç®¡ç†/æ•°æ®åˆ†æ 1-5ï¼‰**
- 11.7.6 æ¸…é™¤ç”¨æˆ·ç‰¹æ®Šè®¾ç½® - DELETE /api/v4/admin/lottery-management/clear-user-settings/:user_id
- 11.8.1 è·å–å†³ç­–åˆ†ææ•°æ® - GET /api/v4/admin/decisions/analytics
- 11.8.2 è·å–æŠ½å¥–è¶‹åŠ¿åˆ†æ - GET /api/v4/admin/lottery/trends
- 11.8.3 è·å–æ€§èƒ½æŠ¥å‘Š - GET /api/v4/admin/performance/report
- 11.8.4 è·å–ä»Šæ—¥ç»Ÿè®¡æ•°æ® - GET /api/v4/admin/analytics/stats/today

### **ç¬¬27æ‰¹ï¼ˆæ¨¡å—11ï¼šç®¡ç†å¼•æ“ - å®¡æ ¸ç®¡ç† 1-5ï¼‰**
- 11.9.1 è·å–å¾…å®¡æ ¸åˆ—è¡¨ - GET /api/v4/admin/audit/pending
- 11.9.2 å®¡æ ¸é€šè¿‡ - POST /api/v4/admin/audit/:exchange_id/approve
- 11.9.3 å®¡æ ¸æ‹’ç» - POST /api/v4/admin/audit/:exchange_id/reject
- 11.9.4 æŸ¥çœ‹å®¡æ ¸å†å² - GET /api/v4/admin/audit/history
- 12.1 åˆ›å»ºå±‚çº§å…³ç³» - POST /api/v4/hierarchy/create

### **ç¬¬28æ‰¹ï¼ˆæ¨¡å—12ï¼šå±‚çº§æƒé™ 2-5 + æ¨¡å—13ï¼šå®¡æ ¸ç®¡ç† 1ï¼‰**
- 12.2 æŸ¥è¯¢æ‰€æœ‰ä¸‹çº§ - GET /api/v4/hierarchy/subordinates/:userId
- 12.3 æ‰¹é‡åœç”¨æƒé™ - POST /api/v4/hierarchy/deactivate
- 12.4 æ‰¹é‡æ¿€æ´»æƒé™ - POST /api/v4/hierarchy/activate
- 12.5 è·å–å±‚çº§ç»Ÿè®¡ - GET /api/v4/hierarchy/stats/:userId
- 13.1.1 æ‰¹é‡å®¡æ ¸é€šè¿‡ - POST /api/v4/audit-management/batch-approve

### **ç¬¬29æ‰¹ï¼ˆæ¨¡å—13ï¼šå®¡æ ¸ç®¡ç† 2-6ï¼‰**
- 13.1.2 æ‰¹é‡å®¡æ ¸æ‹’ç» - POST /api/v4/audit-management/batch-reject
- 13.1.3 è·å–è¶…æ—¶è®¢å• - GET /api/v4/audit-management/timeout-orders
- 13.1.4 æ‰‹åŠ¨è§¦å‘è¶…æ—¶å‘Šè­¦ - POST /api/v4/audit-management/check-timeout-alert
- 13.1.5 è·å–å®¡æ ¸ç»Ÿè®¡ - GET /api/v4/audit-management/statistics
- 13.2.1 è·å–å¾…å®¡æ ¸åˆ—è¡¨ - GET /api/v4/audit-management/unified/pending

### **ç¬¬30æ‰¹ï¼ˆæ¨¡å—13ï¼šå®¡æ ¸ç®¡ç† 7-11ï¼‰**
- 13.2.2 è·å–å®¡æ ¸è¯¦æƒ… - GET /api/v4/audit-management/unified/:audit_id
- 13.2.3 ç»Ÿä¸€å®¡æ ¸é€šè¿‡ - POST /api/v4/audit-management/unified/:audit_id/approve
- 13.2.4 ç»Ÿä¸€å®¡æ ¸æ‹’ç» - POST /api/v4/audit-management/unified/:audit_id/reject
- 13.2.5 è·å–ç»Ÿä¸€å®¡æ ¸ç»Ÿè®¡ - GET /api/v4/audit-management/unified/statistics
- 13.3.1 æŸ¥è¯¢å®¡è®¡æ—¥å¿— - GET /api/v4/audit-management/audit-logs

### **ç¬¬31æ‰¹ï¼ˆæ¨¡å—13ï¼šå®¡æ ¸ç®¡ç† 12-13ï¼‰**
- 13.3.2 è·å–æ—¥å¿—ç»Ÿè®¡ - GET /api/v4/audit-management/audit-logs/statistics
- 13.3.3 è·å–æ—¥å¿—è¯¦æƒ… - GET /api/v4/audit-management/audit-logs/:log_id

### **ç¬¬32æ‰¹ï¼ˆæ¨¡å—14ï¼šæ´»åŠ¨æƒé™ç®¡ç† - âš ï¸ æœªå®ç°ï¼‰**
- âš ï¸ æ¨¡å—14çš„æ‰€æœ‰APIå‡ä¸ºè§„åˆ’åŠŸèƒ½ï¼Œå°šæœªå®ç°
- è¯¥æ¨¡å—å°†åœ¨åç»­ç‰ˆæœ¬ä¸­å¼€å‘
- å½“å‰æ–‡æ¡£ä¿ç•™è§„åˆ’å†…å®¹ä½œä¸ºå‚è€ƒ

---

---

# ğŸ“± æ¥å£åˆ†ç±»è¯´æ˜

æœ¬æ–‡æ¡£æŒ‰ç…§ä½¿ç”¨åœºæ™¯å°†APIæ¥å£åˆ†ä¸ºä¸¤å¤§ç±»ï¼š

## ğŸ–¥ï¸ Webç«¯ç®¡ç†åå°æ¥å£
é€‚ç”¨äºç®¡ç†å‘˜åœ¨Webæµè§ˆå™¨ä¸­ä½¿ç”¨çš„åå°ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š
- æƒé™ç®¡ç†
- è°ƒè¯•æ§åˆ¶
- ç»Ÿä¸€ç®¡ç†å¼•æ“ï¼ˆç³»ç»Ÿç›‘æ§ã€é…ç½®ç®¡ç†ã€å¥–å“æ± ã€ç”¨æˆ·ç®¡ç†ã€æŠ½å¥–ç®¡ç†ã€æ•°æ®åˆ†æã€å®¡æ ¸ç®¡ç†ï¼‰
- å±‚çº§æƒé™ç®¡ç†
- å®¡æ ¸ç®¡ç†ç³»ç»Ÿ

## ğŸ“± å¾®ä¿¡å°ç¨‹åºå‰ç«¯æ¥å£
é€‚ç”¨äºæ™®é€šç”¨æˆ·åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•æ³¨å†Œï¼‰
- æŠ½å¥–åŠŸèƒ½
- ç§¯åˆ†æŸ¥è¯¢å’Œç®¡ç†
- ç”¨æˆ·åº“å­˜ç®¡ç†
- æ¶ˆè´¹è®°å½•
- é«˜çº§ç©ºé—´è§£é”
- ç³»ç»ŸåŠŸèƒ½ï¼ˆå…¬å‘Šã€åé¦ˆã€å®¢æœï¼‰

---

# ğŸ–¥ï¸ ä¸€ã€Webç«¯ç®¡ç†åå°æ¥å£

## 3. V4 æƒé™ç®¡ç†

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- UUIDè§’è‰²ç³»ç»Ÿ: åŸºäºè§’è‰²UUIDè¿›è¡Œæƒé™åˆ¤æ–­ï¼Œç§»é™¤`is_admin`ä¾èµ–
- åˆ†çº§æƒé™: è§’è‰²æœ‰çº§åˆ«(role_level)ï¼Œç”¨äºæƒé™ç»§æ‰¿
- æƒé™æ£€æŸ¥: æ”¯æŒèµ„æº(resource)+åŠ¨ä½œ(action)çš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- ç®¡ç†å‘˜æƒé™: ç®¡ç†å‘˜è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æƒé™

---

### 3.1 è·å–æŒ‡å®šç”¨æˆ·æƒé™ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/permissions/user/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æŒ‡å®šç”¨æˆ·çš„å®Œæ•´æƒé™ä¿¡æ¯(åŒ…å«è§’è‰²ã€æƒé™åˆ—è¡¨ã€ç®¡ç†æƒé™)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„æƒé™æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººæƒé™

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·æƒé™æŸ¥è¯¢åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„æƒé™ä¿¡æ¯ï¼Œäº†è§£è‡ªå·±å¯ä»¥è®¿é—®å“ªäº›åŠŸèƒ½
2. **ç®¡ç†å‘˜å®¡è®¡åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æƒé™é…ç½®ï¼Œå®¡è®¡æƒé™åˆ†é…æ˜¯å¦åˆç†
3. **æƒé™è°ƒè¯•åœºæ™¯**: å¼€å‘äººå‘˜æˆ–ç®¡ç†å‘˜è°ƒè¯•æƒé™é—®é¢˜æ—¶æŸ¥çœ‹ç”¨æˆ·çš„å®é™…æƒé™é…ç½®
4. **æƒé™å±•ç¤ºåœºæ™¯**: å‰ç«¯æ ¹æ®ç”¨æˆ·æƒé™åŠ¨æ€æ˜¾ç¤ºæˆ–éšè—åŠŸèƒ½èœå•å’ŒæŒ‰é’®
5. **æƒé™å˜æ›´éªŒè¯åœºæ™¯**: ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œé€šè¿‡æ­¤æ¥å£éªŒè¯æƒé™æ˜¯å¦ç”Ÿæ•ˆ

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„æƒé™(user_id=å½“å‰ç”¨æˆ·)ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ä»»æ„ç”¨æˆ·æƒé™
2. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°
3. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›å®Œæ•´æƒé™ä¿¡æ¯(rolesè§’è‰²åˆ—è¡¨ã€role_levelè§’è‰²çº§åˆ«ã€permissionsæƒé™åˆ—è¡¨ã€ç®¡ç†æƒé™æ ‡è¯†)
4. **ç¼“å­˜æœºåˆ¶è§„åˆ™**: æƒé™ä¿¡æ¯ä½¿ç”¨åŒå±‚ç¼“å­˜(memoryCache+Redis)ï¼Œç¼“å­˜æ—¶é—´5åˆ†é’Ÿ
5. **æƒé™è®¡ç®—è§„åˆ™**: åŸºäºUUIDè§’è‰²ç³»ç»Ÿè®¡ç®—æƒé™ï¼Œç§»é™¤is_adminä¾èµ–ï¼Œä½¿ç”¨role_levelåˆ¤æ–­ç®¡ç†å‘˜
6. **è¿”å›å­—æ®µè§„åˆ™**: åŒ…å«can_manage_lotteryã€can_view_admin_panelã€can_modify_user_permissionsç­‰ç®€åŒ–æƒé™æ ‡è¯†

---

### 3.2 è·å–å½“å‰ç”¨æˆ·æƒé™ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/permissions/me`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„å®Œæ•´æƒé™ä¿¡æ¯(æ— éœ€ä¼ user_idå‚æ•°)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å‰ç«¯æƒé™åˆå§‹åŒ–åœºæ™¯**: ç”¨æˆ·ç™»å½•åå‰ç«¯è°ƒç”¨æ­¤æ¥å£è·å–æƒé™ä¿¡æ¯ï¼Œåˆå§‹åŒ–è·¯ç”±å’Œèœå•
2. **åŠ¨æ€èœå•æ¸²æŸ“åœºæ™¯**: æ ¹æ®è¿”å›çš„æƒé™ä¿¡æ¯åŠ¨æ€æ˜¾ç¤ºæˆ–éšè—åŠŸèƒ½èœå•é¡¹
3. **æŒ‰é’®æƒé™æ§åˆ¶åœºæ™¯**: æ ¹æ®æƒé™ä¿¡æ¯æ§åˆ¶é¡µé¢æŒ‰é’®çš„æ˜¾ç¤ºå’Œç¦ç”¨çŠ¶æ€
4. **å¿«é€Ÿæƒé™æŸ¥è¯¢åœºæ™¯**: ç›¸æ¯”3.1æ— éœ€ä¼ user_idå‚æ•°ï¼Œæ›´ç®€æ´å¿«é€Ÿ
5. **æƒé™å®æ—¶éªŒè¯åœºæ™¯**: ç”¨æˆ·æ“ä½œå‰ç«¯åŠŸèƒ½æ—¶å®æ—¶éªŒè¯æ˜¯å¦æœ‰æƒé™

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ— å‚æ•°è¦æ±‚è§„åˆ™**: ä¸éœ€è¦ä¼ user_idå‚æ•°ï¼Œä»JWT Tokenä¸­è‡ªåŠ¨è·å–å½“å‰ç”¨æˆ·ID
2. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›ä¸3.1ç›¸åŒçš„å®Œæ•´æƒé™ä¿¡æ¯ç»“æ„
3. **ç¼“å­˜æœºåˆ¶è§„åˆ™**: ä½¿ç”¨åŒå±‚ç¼“å­˜(memoryCache+Redis)ï¼Œç¼“å­˜æ—¶é—´5åˆ†é’Ÿ
4. **è‡ªåŠ¨ç”¨æˆ·è¯†åˆ«è§„åˆ™**: é€šè¿‡authenticateTokenä¸­é—´ä»¶è‡ªåŠ¨è¯†åˆ«å½“å‰ç”¨æˆ·
5. **æƒé™è®¡ç®—è§„åˆ™**: åŸºäºUUIDè§’è‰²ç³»ç»Ÿè®¡ç®—æƒé™ï¼Œè¿”å›role_based_adminã€role_levelç­‰å­—æ®µ
6. **å¿«é€Ÿå“åº”è§„åˆ™**: ç¼“å­˜å‘½ä¸­æ—¶å“åº”æ—¶é—´<10msï¼Œæœªå‘½ä¸­æ—¶<50ms

---

### 3.3 æ£€æŸ¥æƒé™ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/permissions/check`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ£€æŸ¥å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šèµ„æºå’Œæ“ä½œæ˜¯å¦æœ‰æƒé™
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å‰ç«¯æƒé™éªŒè¯åœºæ™¯**: å‰ç«¯åœ¨æ‰§è¡Œæ•æ„Ÿæ“ä½œå‰è°ƒç”¨æ­¤æ¥å£éªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰æƒé™
2. **åŠ¨æ€æƒé™æ§åˆ¶åœºæ™¯**: æ ¹æ®æ£€æŸ¥ç»“æœåŠ¨æ€æ˜¾ç¤ºæˆ–éšè—åŠŸèƒ½æŒ‰é’®
3. **APIè°ƒç”¨å‰éªŒè¯åœºæ™¯**: åç«¯APIè°ƒç”¨å‰éªŒè¯ç”¨æˆ·æƒé™ï¼Œé˜²æ­¢è¶Šæƒæ“ä½œ
4. **å®¡è®¡æ—¥å¿—è®°å½•åœºæ™¯**: è®°å½•æ‰€æœ‰æƒé™æ£€æŸ¥æ“ä½œï¼Œä¾¿äºå®‰å…¨å®¡è®¡å’Œé—®é¢˜è¿½æº¯
5. **ç»†ç²’åº¦æƒé™æ§åˆ¶åœºæ™¯**: æ”¯æŒresource(èµ„æº)+action(æ“ä½œ)çš„ç»†ç²’åº¦æƒé™éªŒè¯

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: resourceå¿…å¡«ï¼Œactioné»˜è®¤ä¸ºreadï¼Œæ”¯æŒread/write/delete/manageç­‰æ“ä½œ
2. **å‚æ•°è§„èŒƒåŒ–è§„åˆ™**: é€šè¿‡validatePermissionParamsä¸­é—´ä»¶è‡ªåŠ¨è§„èŒƒåŒ–å‚æ•°(è½¬å°å†™ã€å»ç©ºæ ¼)
3. **æƒé™è®¡ç®—è§„åˆ™**: åŸºäºUUIDè§’è‰²ç³»ç»Ÿå’Œrole_levelè®¡ç®—æƒé™ï¼Œç®¡ç†å‘˜è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æƒé™
4. **å®¡è®¡æ—¥å¿—è§„åˆ™**: è®°å½•æ¯æ¬¡æƒé™æ£€æŸ¥(user_idã€resourceã€actionã€ç»“æœã€IPã€æ—¶é—´)
5. **ç¼“å­˜æœºåˆ¶è§„åˆ™**: æƒé™æ£€æŸ¥ç»“æœä½¿ç”¨åŒå±‚ç¼“å­˜ï¼Œç¼“å­˜æ—¶é—´5åˆ†é’Ÿ
6. **è¿”å›å­—æ®µè§„åˆ™**: è¿”å›has_permission(å¸ƒå°”å€¼)ã€role_based_adminã€role_levelã€checked_atç­‰ä¿¡æ¯

---

### 3.4 è·å–ç®¡ç†å‘˜åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/permissions/admins`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç³»ç»Ÿæ‰€æœ‰ç®¡ç†å‘˜ç”¨æˆ·åˆ—è¡¨
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç®¡ç†å‘˜ç®¡ç†åœºæ™¯**: è¶…çº§ç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç®¡ç†å‘˜åˆ—è¡¨ï¼Œè¿›è¡Œæƒé™ç®¡ç†
2. **æƒé™åˆ†é…åœºæ™¯**: æŸ¥çœ‹å½“å‰ç³»ç»Ÿæœ‰å“ªäº›ç®¡ç†å‘˜ï¼Œå†³å®šæ˜¯å¦éœ€è¦è°ƒæ•´æƒé™
3. **å®‰å…¨å®¡è®¡åœºæ™¯**: å®šæœŸå®¡æŸ¥ç®¡ç†å‘˜åˆ—è¡¨ï¼Œç¡®ä¿æƒé™åˆ†é…åˆç†
4. **ç®¡ç†å‘˜é€šè®¯å½•åœºæ™¯**: å±•ç¤ºç®¡ç†å‘˜è”ç³»æ–¹å¼ï¼Œä¾¿äºå†…éƒ¨æ²Ÿé€š
5. **æƒé™ç»Ÿè®¡åœºæ™¯**: ç»Ÿè®¡ä¸åŒçº§åˆ«ç®¡ç†å‘˜çš„æ•°é‡å’Œåˆ†å¸ƒ

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…ç®¡ç†å‘˜å¯è®¿é—®æ­¤æ¥å£ï¼Œæ™®é€šç”¨æˆ·è¿”å›403é”™è¯¯
2. **æ•°æ®è¿‡æ»¤è§„åˆ™**: ä»…è¿”å›role_level>0çš„ç”¨æˆ·(ç®¡ç†å‘˜)ï¼Œæ™®é€šç”¨æˆ·role_level=0
3. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›user_idã€mobileã€nicknameã€rolesã€role_levelç­‰ä¿¡æ¯
4. **æ’åºè§„åˆ™**: æŒ‰role_levelé™åºæ’åˆ—ï¼Œçº§åˆ«é«˜çš„ç®¡ç†å‘˜æ’åœ¨å‰é¢
5. **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤è§„åˆ™**: ä¸è¿”å›å¯†ç ã€Tokenç­‰æ•æ„Ÿä¿¡æ¯
6. **ç¼“å­˜ç­–ç•¥è§„åˆ™**: ç®¡ç†å‘˜åˆ—è¡¨å¯ç¼“å­˜10åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢

---

### 3.5 åˆ·æ–°ç”¨æˆ·æƒé™ç¼“å­˜ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/permissions/refresh`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ‰‹åŠ¨åˆ·æ–°æŒ‡å®šç”¨æˆ·çš„æƒé™ç¼“å­˜(æ¸…é™¤å†…å­˜å’ŒRedisç¼“å­˜)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **æƒé™å˜æ›´ç”Ÿæ•ˆåœºæ™¯**: ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œç«‹å³åˆ·æ–°ç¼“å­˜ä½¿æ–°æƒé™ç”Ÿæ•ˆ
2. **è§’è‰²è°ƒæ•´åœºæ™¯**: ç”¨æˆ·è§’è‰²å˜æ›´åï¼Œåˆ·æ–°ç¼“å­˜ç¡®ä¿æƒé™åŒæ­¥
3. **æƒé™æ•…éšœä¿®å¤åœºæ™¯**: æƒé™ç¼“å­˜å¼‚å¸¸æ—¶ï¼Œé€šè¿‡åˆ·æ–°ç¼“å­˜æ¢å¤æ­£å¸¸
4. **æµ‹è¯•éªŒè¯åœºæ™¯**: å¼€å‘æµ‹è¯•æ—¶å¿«é€Ÿåˆ·æ–°ç¼“å­˜éªŒè¯æƒé™é…ç½®
5. **æ‰¹é‡æƒé™æ›´æ–°åœºæ™¯**: æ‰¹é‡ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œé€ä¸ªåˆ·æ–°ç¼“å­˜

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…ç®¡ç†å‘˜å¯åˆ·æ–°ä»»æ„ç”¨æˆ·ç¼“å­˜ï¼Œæ™®é€šç”¨æˆ·åªèƒ½åˆ·æ–°è‡ªå·±çš„ç¼“å­˜
2. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…å¡«ä¸”ä¸ºæ­£æ•´æ•°
3. **åŒå±‚ç¼“å­˜æ¸…ç†è§„åˆ™**: åŒæ—¶æ¸…é™¤memoryCacheå’ŒRedisä¸­çš„æƒé™ç¼“å­˜
4. **æ¸…ç†èŒƒå›´è§„åˆ™**: æ¸…é™¤getUserRoleså’ŒgetUserPermissionsç›¸å…³çš„æ‰€æœ‰ç¼“å­˜é”®
5. **æ“ä½œæ—¥å¿—è§„åˆ™**: è®°å½•ç¼“å­˜åˆ·æ–°æ“ä½œ(æ“ä½œè€…ã€ç›®æ ‡ç”¨æˆ·ã€æ—¶é—´ã€åŸå› )
6. **è‡ªåŠ¨å¤±æ•ˆè§„åˆ™**: ç¼“å­˜åˆ·æ–°åï¼Œä¸‹æ¬¡æŸ¥è¯¢è‡ªåŠ¨ä»æ•°æ®åº“é‡æ–°åŠ è½½æƒé™

---

### 3.6 æ‰¹é‡æ£€æŸ¥æƒé™ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/permissions/batch-check`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ‰¹é‡æ£€æŸ¥å½“å‰ç”¨æˆ·å¯¹å¤šä¸ªèµ„æºçš„æƒé™(ä¸€æ¬¡è¯·æ±‚æ£€æŸ¥å¤šä¸ªæƒé™)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **é¡µé¢åˆå§‹åŒ–åœºæ™¯**: é¡µé¢åŠ è½½æ—¶ä¸€æ¬¡æ€§æ£€æŸ¥å¤šä¸ªåŠŸèƒ½æƒé™ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°
2. **èœå•æƒé™æ§åˆ¶åœºæ™¯**: æ‰¹é‡æ£€æŸ¥å¤šä¸ªèœå•é¡¹æƒé™ï¼ŒåŠ¨æ€æ˜¾ç¤ºå¯è®¿é—®çš„èœå•
3. **åŠŸèƒ½æƒé™é¢„æ£€åœºæ™¯**: åœ¨ç”¨æˆ·æ“ä½œå‰æ‰¹é‡æ£€æŸ¥ç›¸å…³åŠŸèƒ½æƒé™ï¼Œæå‰æç¤ºæ— æƒé™æ“ä½œ
4. **æ€§èƒ½ä¼˜åŒ–åœºæ™¯**: ç›¸æ¯”å¤šæ¬¡è°ƒç”¨å•ä¸ªæ£€æŸ¥æ¥å£ï¼Œæ‰¹é‡æ£€æŸ¥å¤§å¹…å‡å°‘ç½‘ç»œè¯·æ±‚å’Œå“åº”æ—¶é—´
5. **æƒé™çŸ©é˜µç”Ÿæˆåœºæ™¯**: ç”Ÿæˆç”¨æˆ·çš„æƒé™çŸ©é˜µï¼Œå±•ç¤ºç”¨æˆ·å¯¹å„èµ„æºçš„æƒé™çŠ¶æ€

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: permissionså¿…å¡«ï¼Œä¸ºæ•°ç»„æ ¼å¼ï¼Œæ¯é¡¹åŒ…å«resourceå’Œaction
2. **æ•°é‡é™åˆ¶è§„åˆ™**: å•æ¬¡æœ€å¤šæ£€æŸ¥20ä¸ªæƒé™ï¼Œé˜²æ­¢è¯·æ±‚è¿‡å¤§
3. **å¹¶è¡Œæ£€æŸ¥è§„åˆ™**: å†…éƒ¨å¹¶è¡Œæ£€æŸ¥æ‰€æœ‰æƒé™ï¼Œæå‡å“åº”é€Ÿåº¦
4. **ç»“æœæ ¼å¼è§„åˆ™**: è¿”å›æ•°ç»„ï¼Œæ¯é¡¹åŒ…å«resourceã€actionã€has_permission
5. **éƒ¨åˆ†å¤±è´¥å¤„ç†è§„åˆ™**: æŸä¸ªæƒé™æ£€æŸ¥å¤±è´¥ä¸å½±å“å…¶ä»–æƒé™æ£€æŸ¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯
6. **å®¡è®¡æ—¥å¿—è§„åˆ™**: è®°å½•æ‰¹é‡æƒé™æ£€æŸ¥æ“ä½œï¼ŒåŒ…å«æ£€æŸ¥çš„æ‰€æœ‰èµ„æºå’Œç»“æœ

---

### 3.7 è·å–æƒé™ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/permissions/statistics`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç³»ç»Ÿæƒé™ç»Ÿè®¡ä¿¡æ¯(ç®¡ç†å‘˜æ•°é‡ã€è§’è‰²åˆ†å¸ƒã€æƒé™ä½¿ç”¨æƒ…å†µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **æƒé™æ¦‚è§ˆåœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿæ•´ä½“æƒé™åˆ†å¸ƒå’Œä½¿ç”¨æƒ…å†µ
2. **æ•°æ®åˆ†æåœºæ™¯**: åˆ†æä¸åŒè§’è‰²çš„ç”¨æˆ·æ•°é‡å’Œæƒé™é…ç½®
3. **å®‰å…¨å®¡è®¡åœºæ™¯**: å®šæœŸå®¡æŸ¥æƒé™ç»Ÿè®¡ï¼Œå‘ç°å¼‚å¸¸æƒé™é…ç½®
4. **ç³»ç»Ÿç›‘æ§åœºæ™¯**: ç›‘æ§æƒé™ç³»ç»Ÿå¥åº·çŠ¶æ€å’Œç¼“å­˜å‘½ä¸­ç‡
5. **æŠ¥è¡¨ç”Ÿæˆåœºæ™¯**: ç”Ÿæˆæƒé™ç®¡ç†æŠ¥è¡¨ï¼Œç”¨äºç®¡ç†å†³ç­–

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…ç®¡ç†å‘˜å¯è®¿é—®ç»Ÿè®¡ä¿¡æ¯
2. **ç»Ÿè®¡ç»´åº¦è§„åˆ™**: ç»Ÿè®¡æ€»ç”¨æˆ·æ•°ã€ç®¡ç†å‘˜æ•°ã€è§’è‰²åˆ†å¸ƒã€æƒé™æ£€æŸ¥æ¬¡æ•°ç­‰
3. **å®æ—¶è®¡ç®—è§„åˆ™**: éƒ¨åˆ†ç»Ÿè®¡æ•°æ®å®æ—¶è®¡ç®—ï¼Œéƒ¨åˆ†ä½¿ç”¨ç¼“å­˜æ•°æ®
4. **ç¼“å­˜ç­–ç•¥è§„åˆ™**: ç»Ÿè®¡æ•°æ®å¯ç¼“å­˜5åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢å‹åŠ›
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›å®Œæ•´çš„ç»Ÿè®¡ç»´åº¦å’Œè¯¦ç»†æ•°æ®
6. **æ€§èƒ½ä¼˜åŒ–è§„åˆ™**: ä½¿ç”¨èšåˆæŸ¥è¯¢ä¼˜åŒ–ç»Ÿè®¡æ€§èƒ½ï¼Œé¿å…å…¨è¡¨æ‰«æ

---


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---


## 10. V4 è°ƒè¯•æ§åˆ¶ç³»ç»Ÿ

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- ç”Ÿäº§ç¯å¢ƒè°ƒè¯•æ§åˆ¶: åŠ¨æ€è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œä¸éœ€è¦é‡å¯æœåŠ¡
- é’ˆå¯¹æ€§è°ƒè¯•: ä¸ºç‰¹å®šç”¨æˆ·æˆ–ä¼šè¯å¼€å¯è¯¦ç»†æ—¥å¿—
- å®‰å…¨ä¿æŠ¤: ä»…ç®¡ç†å‘˜å¯è®¿é—®ï¼Œæ‰€æœ‰æ“ä½œè®°å½•å®¡è®¡æ—¥å¿—
- è‡ªåŠ¨è¿‡æœŸ: è°ƒè¯•ä¼šè¯è‡ªåŠ¨è¿‡æœŸï¼Œé˜²æ­¢å¿˜è®°å…³é—­

---

### 10.1 è·å–å½“å‰è°ƒè¯•é…ç½® âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/debug-control/config`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–å½“å‰ç³»ç»Ÿçš„è°ƒè¯•é…ç½®ä¿¡æ¯
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **é…ç½®æŸ¥çœ‹**: ç®¡ç†å‘˜æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„è°ƒè¯•é…ç½®çŠ¶æ€
2. **æ—¥å¿—çº§åˆ«ç¡®è®¤**: ç¡®è®¤å½“å‰å…¨å±€æ—¥å¿—çº§åˆ«è®¾ç½®
3. **è°ƒè¯•ç”¨æˆ·æŸ¥è¯¢**: æŸ¥çœ‹å“ªäº›ç”¨æˆ·æˆ–ä¼šè¯æ­£åœ¨è°ƒè¯•æ¨¡å¼
4. **ç¯å¢ƒä¿¡æ¯**: æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œç¯å¢ƒå’Œé…ç½®ä¿¡æ¯
5. **å®¡è®¡è¿½è¸ª**: æŸ¥çœ‹è°ƒè¯•é…ç½®å†å²ï¼Œç”¨äºé—®é¢˜è¿½æº¯

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯è®¿é—®
2. **ç¯å¢ƒä¿¡æ¯**: è¿”å›å½“å‰NODE_ENVç¯å¢ƒ
3. **æ—¥å¿—çº§åˆ«**: è¿”å›å½“å‰æ—¥å¿—çº§åˆ«å’Œå¯ç”¨çº§åˆ«åˆ—è¡¨
4. **è°ƒè¯•ç”¨æˆ·**: è¿”å›å½“å‰å¼€å¯è°ƒè¯•çš„ç”¨æˆ·åˆ—è¡¨
5. **è°ƒè¯•ä¼šè¯**: è¿”å›å½“å‰å¼€å¯è°ƒè¯•çš„ä¼šè¯åˆ—è¡¨
6. **ç»Ÿè®¡ä¿¡æ¯**: è¿”å›è°ƒè¯•ç”¨æˆ·æ•°å’Œä¼šè¯æ•°
7. **æ—¶é—´æˆ³**: è¿”å›æŸ¥è¯¢æ—¶é—´ï¼ˆåŒ—äº¬æ—¶é—´ISOæ ¼å¼ï¼‰

---

### 10.2 åŠ¨æ€è°ƒæ•´å…¨å±€æ—¥å¿—çº§åˆ« âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/debug-control/log-level`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹é…ç½®)
**æè¿°**: åŠ¨æ€è°ƒæ•´ç³»ç»Ÿå…¨å±€æ—¥å¿—çº§åˆ«ï¼Œæ— éœ€é‡å¯æœåŠ¡
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **ç”Ÿäº§é—®é¢˜æ’æŸ¥**: ç”Ÿäº§ç¯å¢ƒå‡ºç°é—®é¢˜æ—¶ï¼Œä¸´æ—¶æå‡æ—¥å¿—çº§åˆ«æ’æŸ¥
2. **æ€§èƒ½ä¼˜åŒ–**: é™ä½æ—¥å¿—çº§åˆ«å‡å°‘I/Oå¼€é”€ï¼Œæå‡æ€§èƒ½
3. **ä¸´æ—¶è°ƒè¯•**: ä¸´æ—¶å¼€å¯è¯¦ç»†æ—¥å¿—ï¼Œè‡ªåŠ¨æ¢å¤åˆ°é»˜è®¤çº§åˆ«
4. **æ— éœ€é‡å¯**: åŠ¨æ€è°ƒæ•´ï¼Œä¸å½±å“æ­£åœ¨è¿è¡Œçš„æœåŠ¡
5. **å®‰å…¨å®¡è®¡**: æ‰€æœ‰æ—¥å¿—çº§åˆ«è°ƒæ•´éƒ½è®°å½•å®¡è®¡æ—¥å¿—

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯æ“ä½œ
2. **çº§åˆ«éªŒè¯**: levelå¿…é¡»ä¸ºerror/warn/info/debug/traceä¹‹ä¸€
3. **æŒç»­æ—¶é—´**: durationå¯é€‰ï¼Œå•ä½ä¸ºåˆ†é’Ÿï¼Œé»˜è®¤æ°¸ä¹…ç”Ÿæ•ˆ
4. **è‡ªåŠ¨æ¢å¤**: å¦‚æŒ‡å®šdurationï¼Œåˆ°æœŸåè‡ªåŠ¨æ¢å¤ä¸ºinfoçº§åˆ«
5. **å®¡è®¡æ—¥å¿—**: è®°å½•æ“ä½œäººã€æ—§çº§åˆ«ã€æ–°çº§åˆ«ã€æŒç»­æ—¶é—´
6. **ç«‹å³ç”Ÿæ•ˆ**: è°ƒæ•´åç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯
7. **çº§åˆ«è¯´æ˜**: error<warn<info<debug<traceï¼Œçº§åˆ«è¶Šé«˜æ—¥å¿—è¶Šè¯¦ç»†

---

### 10.3 ä¸ºç‰¹å®šç”¨æˆ·å¼€å¯è°ƒè¯•æ¨¡å¼ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/debug-control/user-debug`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹é…ç½®)
**æè¿°**: ä¸ºæŒ‡å®šç”¨æˆ·å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè®°å½•è¯¥ç”¨æˆ·çš„è¯¦ç»†æ—¥å¿—
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **ç”¨æˆ·é—®é¢˜æ’æŸ¥**: ç”¨æˆ·æŠ¥å‘Šé—®é¢˜æ—¶ï¼Œä¸ºè¯¥ç”¨æˆ·å¼€å¯è°ƒè¯•æ¨¡å¼
2. **é’ˆå¯¹æ€§è°ƒè¯•**: åªè®°å½•ç‰¹å®šç”¨æˆ·çš„è¯¦ç»†æ—¥å¿—ï¼Œä¸å½±å“å…¶ä»–ç”¨æˆ·
3. **æ€§èƒ½é—®é¢˜åˆ†æ**: åˆ†æç‰¹å®šç”¨æˆ·çš„æ€§èƒ½é—®é¢˜
4. **è¡Œä¸ºè¿½è¸ª**: è¿½è¸ªç‰¹å®šç”¨æˆ·çš„æ“ä½œè¡Œä¸ºï¼Œæ’æŸ¥å¼‚å¸¸
5. **è‡ªåŠ¨è¿‡æœŸ**: è°ƒè¯•ä¼šè¯è‡ªåŠ¨è¿‡æœŸï¼Œé˜²æ­¢å¿˜è®°å…³é—­

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯æ“ä½œ
2. **ç”¨æˆ·IDéªŒè¯**: userIdå¿…å¡«ï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆçš„ç”¨æˆ·UUID
3. **æŒç»­æ—¶é—´**: durationå¯é€‰ï¼Œé»˜è®¤30åˆ†é’Ÿï¼Œå•ä½ä¸ºåˆ†é’Ÿ
4. **è‡ªåŠ¨è¿‡æœŸ**: åˆ°æœŸåè‡ªåŠ¨å…³é—­è¯¥ç”¨æˆ·çš„è°ƒè¯•æ¨¡å¼
5. **è¯¦ç»†æ—¥å¿—**: è¯¥ç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚å°†è®°å½•è¯¦ç»†æ—¥å¿—ï¼ˆdebugçº§åˆ«ï¼‰
6. **ä¸å½±å“å…¨å±€**: ä¸å½±å“å…¶ä»–ç”¨æˆ·çš„æ—¥å¿—çº§åˆ«
7. **å®¡è®¡æ—¥å¿—**: è®°å½•æ“ä½œäººã€ç›®æ ‡ç”¨æˆ·ã€æŒç»­æ—¶é—´

---

### 10.4 ä¸ºç‰¹å®šä¼šè¯å¼€å¯è°ƒè¯•æ¨¡å¼ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/debug-control/session-debug`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹é…ç½®)
**æè¿°**: ä¸ºæŒ‡å®šä¼šè¯å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè®°å½•è¯¥ä¼šè¯çš„è¯¦ç»†æ—¥å¿—
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **ä¼šè¯é—®é¢˜æ’æŸ¥**: ç‰¹å®šä¼šè¯å‡ºç°é—®é¢˜æ—¶ï¼Œå¼€å¯è°ƒè¯•æ¨¡å¼
2. **èŠå¤©é—®é¢˜è°ƒè¯•**: è°ƒè¯•å®¢æœèŠå¤©ä¼šè¯çš„é—®é¢˜
3. **å®æ—¶ç›‘æ§**: å®æ—¶ç›‘æ§ç‰¹å®šä¼šè¯çš„æ‰€æœ‰æ“ä½œ
4. **é—®é¢˜å¤ç°**: ç”¨æˆ·æŠ¥å‘Šé—®é¢˜æ—¶ï¼Œå¼€å¯è°ƒè¯•æ¨¡å¼å¤ç°é—®é¢˜
5. **è‡ªåŠ¨è¿‡æœŸ**: è°ƒè¯•ä¼šè¯è‡ªåŠ¨è¿‡æœŸï¼Œé˜²æ­¢å¿˜è®°å…³é—­

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯æ“ä½œ
2. **ä¼šè¯IDéªŒè¯**: sessionIdå¿…å¡«ï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆçš„ä¼šè¯ID
3. **æŒç»­æ—¶é—´**: durationå¯é€‰ï¼Œé»˜è®¤30åˆ†é’Ÿï¼Œå•ä½ä¸ºåˆ†é’Ÿ
4. **è‡ªåŠ¨è¿‡æœŸ**: åˆ°æœŸåè‡ªåŠ¨å…³é—­è¯¥ä¼šè¯çš„è°ƒè¯•æ¨¡å¼
5. **è¯¦ç»†æ—¥å¿—**: è¯¥ä¼šè¯çš„æ‰€æœ‰è¯·æ±‚å°†è®°å½•è¯¦ç»†æ—¥å¿—ï¼ˆdebugçº§åˆ«ï¼‰
6. **ä¸å½±å“å…¨å±€**: ä¸å½±å“å…¶ä»–ä¼šè¯çš„æ—¥å¿—çº§åˆ«
7. **å®¡è®¡æ—¥å¿—**: è®°å½•æ“ä½œäººã€ç›®æ ‡ä¼šè¯ã€æŒç»­æ—¶é—´

---

### 10.5 æ¸…é™¤æ‰€æœ‰è°ƒè¯•ä¼šè¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/debug-control/clear-debug`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹é…ç½®)
**æè¿°**: æ¸…é™¤æ‰€æœ‰ç”¨æˆ·å’Œä¼šè¯çš„è°ƒè¯•æ¨¡å¼
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **æ‰¹é‡æ¸…ç†**: è°ƒè¯•å®Œæˆåï¼Œä¸€é”®æ¸…é™¤æ‰€æœ‰è°ƒè¯•ä¼šè¯
2. **é‡ç½®é…ç½®**: é‡ç½®è°ƒè¯•é…ç½®åˆ°åˆå§‹çŠ¶æ€
3. **æ€§èƒ½ä¼˜åŒ–**: æ¸…é™¤ä¸å¿…è¦çš„è°ƒè¯•ä¼šè¯ï¼Œå‡å°‘æ—¥å¿—å¼€é”€
4. **ç´§æ€¥å¤„ç†**: å‘ç°è°ƒè¯•é…ç½®å¼‚å¸¸æ—¶ï¼Œå¿«é€Ÿæ¸…é™¤æ‰€æœ‰é…ç½®
5. **å®šæœŸç»´æŠ¤**: å®šæœŸæ¸…ç†è¿‡æœŸçš„è°ƒè¯•ä¼šè¯

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯æ“ä½œ
2. **å…¨éƒ¨æ¸…é™¤**: æ¸…é™¤æ‰€æœ‰ç”¨æˆ·å’Œä¼šè¯çš„è°ƒè¯•æ¨¡å¼
3. **ä¸å½±å“å…¨å±€**: ä¸å½±å“å…¨å±€æ—¥å¿—çº§åˆ«è®¾ç½®
4. **ç»Ÿè®¡ä¿¡æ¯**: è¿”å›æ¸…é™¤çš„ç”¨æˆ·æ•°å’Œä¼šè¯æ•°
5. **å®¡è®¡æ—¥å¿—**: è®°å½•æ“ä½œäººã€æ¸…é™¤çš„æ•°é‡
6. **ç«‹å³ç”Ÿæ•ˆ**: æ¸…é™¤åç«‹å³ç”Ÿæ•ˆ
7. **æ— éœ€ç¡®è®¤**: ç›´æ¥æ¸…é™¤ï¼Œæ— éœ€äºŒæ¬¡ç¡®è®¤

---

### 10.6 æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—æ–‡ä»¶åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/debug-control/log-files`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: æŸ¥çœ‹ç³»ç»Ÿæœ€è¿‘çš„æ—¥å¿—æ–‡ä»¶åˆ—è¡¨
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **æ—¥å¿—æŸ¥çœ‹**: ç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶åˆ—è¡¨
2. **é—®é¢˜æ’æŸ¥**: æ ¹æ®æ—¥å¿—æ–‡ä»¶æ—¶é—´å®šä½é—®é¢˜å‘ç”Ÿæ—¶é—´
3. **æ—¥å¿—ä¸‹è½½**: æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä¿¡æ¯ï¼Œå‡†å¤‡ä¸‹è½½
4. **å­˜å‚¨ç®¡ç†**: æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œç®¡ç†å­˜å‚¨ç©ºé—´
5. **å®¡è®¡è¿½è¸ª**: æŸ¥çœ‹å†å²æ—¥å¿—æ–‡ä»¶ï¼Œè¿›è¡Œå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯è®¿é—®
2. **æ–‡ä»¶ç­›é€‰**: ä»…æ˜¾ç¤º.logåç¼€çš„æ—¥å¿—æ–‡ä»¶
3. **æ–‡ä»¶ä¿¡æ¯**: è¿”å›æ–‡ä»¶åã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ã€åˆ›å»ºæ—¶é—´
4. **å¤§å°æ ¼å¼**: æ–‡ä»¶å¤§å°ä»¥MBä¸ºå•ä½æ˜¾ç¤º
5. **æ’åºè§„åˆ™**: æŒ‰ä¿®æ”¹æ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„åœ¨å‰é¢
6. **ç›®å½•è·¯å¾„**: è¿”å›æ—¥å¿—æ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„
7. **ç»Ÿè®¡ä¿¡æ¯**: è¿”å›æ—¥å¿—æ–‡ä»¶æ€»æ•°

---

## 11. V4 ç»Ÿä¸€ç®¡ç†å¼•æ“

**å®ç°æ–‡ä»¶**: `routes/v4/unified-engine/admin/`(æ¨¡å—åŒ–ç›®å½•)  
**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- æ¨¡å—åŒ–ç®¡ç†: åˆ†ä¸º9ä¸ªå­æ¨¡å—ï¼Œå„å¸å…¶èŒ
- ç®¡ç†å‘˜ä¸“ç”¨: æ‰€æœ‰APIä»…ç®¡ç†å‘˜å¯è®¿é—®
- å®Œæ•´å®¡è®¡: æ‰€æœ‰ç®¡ç†æ“ä½œéƒ½æœ‰æ—¥å¿—è®°å½•
- æ•°æ®åˆ†æ: æä¾›ä¸°å¯Œçš„ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½

**å­æ¨¡å—åˆ—è¡¨**:
1. `/auth` - ç®¡ç†å‘˜è®¤è¯
2. `/system` - ç³»ç»Ÿç›‘æ§
3. `/config` - é…ç½®ç®¡ç†
4. `/prize-pool` - å¥–å“æ± ç®¡ç†
5. `/user-management` - ç”¨æˆ·ç®¡ç†
6. `/lottery-management` - æŠ½å¥–ç®¡ç†
7. `/analytics` - æ•°æ®åˆ†æ
8. `/audit` - å…‘æ¢å®¡æ ¸ç®¡ç†
9. `/campaign-permissions` - æ´»åŠ¨æƒé™ç®¡ç†


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

### 11.1 è·å–ç®¡ç†å‘˜æ¨¡å—ä¿¡æ¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/`  
**æè¿°**: è·å–ç®¡ç†å‘˜APIæ¨¡å—ä¿¡æ¯å’Œå¯ç”¨ç«¯ç‚¹  
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼Œå…¬å¼€è®¿é—®  
**æƒé™çº§åˆ«**: æ‰€æœ‰äººå¯è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 11.2 ç®¡ç†å‘˜è®¤è¯ âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- ä¸æ™®é€šç”¨æˆ·è®¤è¯åˆ†ç¦»ï¼šç®¡ç†å‘˜ä½¿ç”¨ä¸“ç”¨è®¤è¯ç«¯ç‚¹
- è§’è‰²çº§åˆ«éªŒè¯ï¼šä»…role_levelâ‰¥100çš„ç”¨æˆ·å¯ç™»å½•ç®¡ç†åå°
- JWT Tokenæœºåˆ¶ï¼šä½¿ç”¨ç›¸åŒçš„accessToken+refreshTokenåŒTokenè®¾è®¡

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: **æƒé™è¦æ±‚**: ç”¨æˆ·å¿…é¡»æ‹¥æœ‰role_levelâ‰¥100çš„è§’è‰²
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.2.1 ç®¡ç†å‘˜ç™»å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/auth/login`  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.2.2 è·å–ç®¡ç†å‘˜ä¿¡æ¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/auth/profile`  
**æè¿°**: è·å–å½“å‰ç™»å½•ç®¡ç†å‘˜çš„è¯¦ç»†ä¿¡æ¯ï¼ŒéªŒè¯ç®¡ç†å‘˜èº«ä»½  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œï¼ˆrole_levelâ‰¥100ï¼‰

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 11.3 ç³»ç»Ÿç›‘æ§ âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- ç³»ç»ŸçŠ¶æ€ç›‘æ§: å®æ—¶ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œå¥åº·æŒ‡æ ‡
- å…¬å‘Šç®¡ç†: åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ç³»ç»Ÿå…¬å‘Š

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

#### 11.3.1 ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/system/status`  
**æè¿°**: è·å–ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œå¥åº·ä¿¡æ¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.3.2 ç®¡ç†ä»ªè¡¨ç›˜ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/system/dashboard`  
**æè¿°**: è·å–ç®¡ç†ä»ªè¡¨ç›˜æ ¸å¿ƒæ•°æ®æ¦‚è§ˆ  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.3.3 ç®¡ç†ç³»ç»ŸçŠ¶æ€ âœ…


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.3.4 åˆ›å»ºç³»ç»Ÿå…¬å‘Š âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/system/announcements`  
**æè¿°**: åˆ›å»ºç³»ç»Ÿå…¬å‘Š  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.3.5 è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/system/announcements`  
**æè¿°**: è·å–æ‰€æœ‰ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨ï¼ˆç®¡ç†å‘˜è§†è§’ï¼‰  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.3.6 æ›´æ–°ç³»ç»Ÿå…¬å‘Š âœ…

**åŠŸèƒ½è·¯å¾„**: `PUT /api/v4/admin/system/announcements/:id`  
**æè¿°**: æ›´æ–°ç³»ç»Ÿå…¬å‘Šä¿¡æ¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.3.8 è·å–åé¦ˆåˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/system/feedbacks`  
**æè¿°**: è·å–ç”¨æˆ·åé¦ˆåˆ—è¡¨ï¼ˆç®¡ç†å‘˜è§†è§’ï¼‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

#### 11.3.9 å›å¤ç”¨æˆ·åé¦ˆ âœ…

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

#### 11.3.10 æ›´æ–°åé¦ˆçŠ¶æ€ âœ…

**åŠŸèƒ½è·¯å¾„**: `PUT /api/v4/admin/system/feedbacks/:id/status`  
**æè¿°**: æ›´æ–°åé¦ˆå¤„ç†çŠ¶æ€  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 11.4 é…ç½®ç®¡ç† âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- åŠ¨æ€é…ç½®: æ”¯æŒè¿è¡Œæ—¶ä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼Œæ— éœ€é‡å¯æœåŠ¡
- é…ç½®éªŒè¯: è‡ªåŠ¨éªŒè¯é…ç½®é¡¹çš„æœ‰æ•ˆæ€§å’Œåˆæ³•æ€§
- é…ç½®å›æ»š: æ”¯æŒé…ç½®å˜æ›´å¤±è´¥æ—¶è‡ªåŠ¨å›æ»š
- æµ‹è¯•æ¨¡æ‹Ÿ: æä¾›é…ç½®å˜æ›´æ•ˆæœæµ‹è¯•åŠŸèƒ½
- å®Œæ•´å®¡è®¡: è®°å½•æ‰€æœ‰é…ç½®å˜æ›´å†å²

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.4.1 æ›´æ–°ç³»ç»Ÿé…ç½® âœ…

**åŠŸèƒ½è·¯å¾„**: `PUT /api/v4/admin/config`  
**æè¿°**: æ›´æ–°ç³»ç»Ÿä¸šåŠ¡é…ç½®å‚æ•°  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.4.2 æµ‹è¯•é…ç½®æ¨¡æ‹Ÿ âœ…


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª
**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/config/test/simulate`  
**æè¿°**: æµ‹è¯•é…ç½®å˜æ›´æ•ˆæœï¼Œä¸å®é™…åº”ç”¨  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 11.5 å¥–å“æ± ç®¡ç† âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- æ‰¹é‡å¥–å“æ·»åŠ : æ”¯æŒä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªå¥–å“åˆ°æ´»åŠ¨å¥–å“æ± 
- å¥–å“æ•°é‡ç®¡ç†: è‡ªåŠ¨è·Ÿè¸ªå¥–å“æ€»æ•°å’Œå‰©ä½™æ•°é‡
- æ¦‚ç‡é…ç½®: æ”¯æŒä¸ºæ¯ä¸ªå¥–å“é…ç½®ä¸­å¥–æ¦‚ç‡
- å¥–å“ç±»å‹æ”¯æŒ: æ”¯æŒç§¯åˆ†ã€ä¼˜æƒ åˆ¸ã€å®ç‰©å•†å“ç­‰å¤šç§ç±»å‹
- æ´»åŠ¨å¥–å“æ± æŸ¥è¯¢: æä¾›å®Œæ•´çš„å¥–å“æ± ç»Ÿè®¡å’Œè¯¦æƒ…æŸ¥è¯¢

---

#### 11.5.1 æ‰¹é‡æ·»åŠ å¥–å“ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/prize-pool/batch-add`  
**æè¿°**: æ‰¹é‡æ·»åŠ å¥–å“åˆ°æŒ‡å®šæ´»åŠ¨çš„å¥–å“æ±   
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

#### 11.5.2 è·å–æ´»åŠ¨å¥–å“æ±  âœ…

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.5.3 æ›´æ–°å¥–å“ä¿¡æ¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `PUT /api/v4/admin/prize-pool/prize/:prize_id`  
**æè¿°**: æ›´æ–°æŒ‡å®šå¥–å“çš„ä¿¡æ¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 11.6 ç”¨æˆ·ç®¡ç† âœ…

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.6.1 è·å–ç”¨æˆ·åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/user-management/users`  
**æè¿°**: è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€æœç´¢å’Œè§’è‰²è¿‡æ»¤  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ç­›é€‰æ¡ä»¶**:
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `limit`: æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰
- `search`: æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼Œæ”¯æŒæ‰‹æœºå·/æ˜µç§°æ¨¡ç³Šæœç´¢ï¼‰
- `role_filter`: è§’è‰²è¿‡æ»¤ï¼ˆå¯é€‰ï¼ŒæŒ‰è§’è‰²åç§°ç­›é€‰ç”¨æˆ·ï¼‰

---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 11.7 æŠ½å¥–ç®¡ç† âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

#### 11.7.1 å¼ºåˆ¶ä¸­å¥– âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/lottery-management/force-win`  
**æè¿°**: ç®¡ç†å‘˜å¼ºåˆ¶æŒ‡å®šç”¨æˆ·ä¸‹æ¬¡æŠ½å¥–å¿…ä¸­å¥–  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

#### 11.7.2 å¼ºåˆ¶ä¸ä¸­å¥– âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/lottery-management/force-lose`  
**æè¿°**: ç®¡ç†å‘˜å¼ºåˆ¶æŒ‡å®šç”¨æˆ·åœ¨æŒ‡å®šæ¬¡æ•°å†…ä¸ä¸­å¥–  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.7.3 è°ƒæ•´ä¸­å¥–æ¦‚ç‡ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/lottery-management/probability-adjust`  
**æè¿°**: ç®¡ç†å‘˜ä¸´æ—¶è°ƒæ•´ç”¨æˆ·çš„ä¸­å¥–æ¦‚ç‡  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.7.4 åˆ›å»ºç”¨æˆ·ä¸“å±é˜Ÿåˆ— âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/lottery-management/user-specific-queue`  
**æè¿°**: ä¸ºç”¨æˆ·åˆ›å»ºä¸“å±å¥–å“é˜Ÿåˆ—ï¼ŒæŒ‰é¡ºåºå‘æ”¾æŒ‡å®šå¥–å“  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡è¯´æ˜**: 

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.7.5 è·å–ç”¨æˆ·æŠ½å¥–çŠ¶æ€ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/lottery-management/user-status/:user_id`  
**æè¿°**: æŸ¥è¯¢ç”¨æˆ·å½“å‰çš„æ‰€æœ‰æŠ½å¥–å¹²é¢„è®¾ç½®  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.7.6 æ¸…é™¤ç”¨æˆ·ç‰¹æ®Šè®¾ç½® âœ…

**åŠŸèƒ½è·¯å¾„**: `DELETE /api/v4/admin/lottery-management/clear-user-settings/:user_id`  
**æè¿°**: æ¸…é™¤ç”¨æˆ·çš„æ‰€æœ‰æŠ½å¥–å¹²é¢„è®¾ç½®ï¼Œæ¢å¤æ­£å¸¸çŠ¶æ€  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 11.8 æ•°æ®åˆ†æ âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.8.1 è·å–å†³ç­–åˆ†ææ•°æ® âœ…


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª
**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/decisions/analytics`  
**æè¿°**: è·å–æŠ½å¥–å¼•æ“çš„å†³ç­–åˆ†ææ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

#### 11.8.2 è·å–æŠ½å¥–è¶‹åŠ¿åˆ†æ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/lottery/trends`  
**æè¿°**: è·å–æŠ½å¥–æ´»åŠ¨çš„è¶‹åŠ¿åˆ†ææ•°æ®  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

#### 11.8.3 è·å–æ€§èƒ½æŠ¥å‘Š âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/performance/report`  
**æè¿°**: è·å–ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡å’Œå¥åº·çŠ¶å†µæŠ¥å‘Š  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.8.4 è·å–ä»Šæ—¥ç»Ÿè®¡æ•°æ® âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/analytics/stats/today`  
**æè¿°**: è·å–ç³»ç»Ÿä»Šæ—¥å®æ—¶ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬æŠ½å¥–æ¬¡æ•°ã€ä¸­å¥–ç‡ã€æ´»è·ƒç”¨æˆ·ç­‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


### 11.9 å…‘æ¢å®¡æ ¸ç®¡ç† âœ…

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- å¤§é¢äº¤æ˜“å®¡æ ¸: é’ˆå¯¹requires_audit=trueçš„å…‘æ¢è®°å½•è¿›è¡Œäººå·¥å®¡æ ¸
- äº‹åŠ¡å®‰å…¨: å®¡æ ¸æ“ä½œä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§
- è‡ªåŠ¨é€€æ¬¾: å®¡æ ¸æ‹’ç»è‡ªåŠ¨é€€å›ç§¯åˆ†ç»™ç”¨æˆ·
- å®¡è®¡æ—¥å¿—: æ‰€æœ‰å®¡æ ¸æ“ä½œè®°å½•å®Œæ•´å®¡è®¡æ—¥å¿—
- åº“å­˜ç”Ÿæˆ: å®¡æ ¸é€šè¿‡åè‡ªåŠ¨ç”Ÿæˆæ ¸é”€ç å¹¶æ·»åŠ åˆ°ç”¨æˆ·åº“å­˜

---

#### 11.9.1 è·å–å¾…å®¡æ ¸åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/audit/pending`  
**æè¿°**: è·å–æ‰€æœ‰å¾…å®¡æ ¸çš„å…‘æ¢è®°å½•åˆ—è¡¨  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

#### 11.9.2 å®¡æ ¸é€šè¿‡ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/audit/:exchange_id/approve`  
**æè¿°**: å®¡æ ¸é€šè¿‡å…‘æ¢ç”³è¯·ï¼Œè‡ªåŠ¨ç”Ÿæˆæ ¸é”€ç å¹¶æ·»åŠ åˆ°ç”¨æˆ·åº“å­˜  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. éªŒè¯å…‘æ¢è®°å½•å­˜åœ¨ä¸”çŠ¶æ€ä¸ºpending
2. æ›´æ–°å®¡æ ¸çŠ¶æ€ä¸ºapproved
3. ä¸ºæ¯ä¸ªå…‘æ¢æ•°é‡ç”Ÿæˆç‹¬ç«‹çš„æ ¸é”€ç 
4. å°†æ ¸é”€ç æ·»åŠ åˆ°ç”¨æˆ·åº“å­˜ï¼ˆUserInventoryï¼‰
5. æ ¸é”€ç æœ‰æ•ˆæœŸ30å¤©
6. è®°å½•å®Œæ•´å®¡è®¡æ—¥å¿—


#### 11.9.3 å®¡æ ¸æ‹’ç» âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/audit/:exchange_id/reject`  
**æè¿°**: æ‹’ç»å…‘æ¢ç”³è¯·ï¼Œè‡ªåŠ¨é€€å›ç§¯åˆ†ç»™ç”¨æˆ·  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. éªŒè¯æ‹’ç»åŸå› ä¸ä¸ºç©ºï¼ˆå¿…å¡«ï¼‰
2. éªŒè¯å…‘æ¢è®°å½•å­˜åœ¨ä¸”çŠ¶æ€ä¸ºpending
3. æ›´æ–°å®¡æ ¸çŠ¶æ€ä¸ºrejected
4. é€€å›å…¨éƒ¨ç§¯åˆ†ç»™ç”¨æˆ·ï¼ˆtotal_pointsï¼‰
5. ç§¯åˆ†äº¤æ˜“ç±»å‹ä¸ºrefundï¼Œæ¥æºä¸ºaudit_rejected
6. è®°å½•å®Œæ•´å®¡è®¡æ—¥å¿—


#### 11.9.4 æŸ¥çœ‹å®¡æ ¸å†å² âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/audit/history`  
**æè¿°**: è·å–å·²å®¡æ ¸çš„å…‘æ¢è®°å½•å†å²ï¼ˆé€šè¿‡/æ‹’ç»ï¼‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ç­›é€‰æ¡ä»¶**:
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `limit`: æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰
- `audit_status`: å®¡æ ¸çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰: approved/rejectedï¼‰
- `start_date`: å¼€å§‹æ—¥æœŸï¼ˆå¯é€‰ï¼Œæ ¼å¼: YYYY-MM-DDï¼‰
- `end_date`: ç»“æŸæ—¥æœŸï¼ˆå¯é€‰ï¼Œæ ¼å¼: YYYY-MM-DDï¼‰

---

### 11.10 æ´»åŠ¨æƒé™ç®¡ç† âš ï¸ è§„åˆ’ä¸­

**âš ï¸ è¯¥æ¨¡å—æš‚æœªå®ç°ï¼Œä»¥ä¸‹ä¸ºè§„åˆ’ä¸­çš„APIè®¾è®¡æ–¹æ¡ˆ**

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™ï¼ˆè§„åˆ’ï¼‰**:
- UUIDè§’è‰²ç³»ç»Ÿ: åŸºäºç°æœ‰è§’è‰²ç³»ç»Ÿï¼Œä½¿ç”¨campaign_{id}æ ¼å¼çš„è§’è‰²å
- è½¯åˆ é™¤æœºåˆ¶: ä½¿ç”¨is_activeæ ‡å¿—ï¼Œæ’¤é”€æƒé™ä¸åˆ é™¤è®°å½•
- æƒé™å¤ç”¨: æ”¯æŒé‡æ–°æ¿€æ´»å·²æ’¤é”€çš„æƒé™
- å®Œæ•´å®¡è®¡: è®°å½•assigned_byå’Œassigned_atä¿¡æ¯

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.10.1 åˆ†é…æ´»åŠ¨æƒé™ âš ï¸ è§„åˆ’ä¸­

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/admin/campaign-permissions/assign`  
**æè¿°**: ç®¡ç†å‘˜ä¸ºç”¨æˆ·åˆ†é…æ´»åŠ¨å‚ä¸æƒé™ï¼Œé€šè¿‡åˆ†é…campaign_{id}è§’è‰²å®ç°  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡è¯´æ˜**: 
- å¦‚æœæƒé™å·²å­˜åœ¨ä¸”is_active=trueï¼Œè¿”å›400é”™è¯¯
- å¦‚æœæƒé™å·²å­˜åœ¨ä½†is_active=falseï¼Œè‡ªåŠ¨é‡æ–°æ¿€æ´»å¹¶è¿”å›action: "reactivated"
- è‡ªåŠ¨åˆ›å»ºcampaign_{id}è§’è‰²ï¼ˆå¦‚ä¸å­˜åœ¨ï¼‰
- æ”¯æŒæ‰‹æœºå·å…³è”æŸ¥æ‰¾ç”¨æˆ·

---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.10.3 æŸ¥çœ‹æƒé™åˆ—è¡¨ âš ï¸ è§„åˆ’ä¸­

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/campaign-permissions/list`  
**æè¿°**: æŸ¥è¯¢æ´»åŠ¨æƒé™åˆ†é…è®°å½•ï¼Œæ”¯æŒæŒ‰ç”¨æˆ·æˆ–æ´»åŠ¨ç­›é€‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ç­›é€‰æ¡ä»¶**:
- `user_id`: ç”¨æˆ·IDï¼ˆå¯é€‰ï¼Œç­›é€‰æŒ‡å®šç”¨æˆ·çš„æƒé™ï¼‰

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

#### 11.10.4 æ£€æŸ¥ç”¨æˆ·æƒé™ âš ï¸ è§„åˆ’ä¸­

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/admin/campaign-permissions/check`  
**æè¿°**: å¿«é€Ÿæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæ´»åŠ¨æƒé™ï¼Œç”¨äºè°ƒè¯•å’ŒéªŒè¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ç­›é€‰æ¡ä»¶**:
- `user_id`: ç”¨æˆ·IDï¼ˆå¿…å¡«ï¼‰
- `campaign_id`: æ´»åŠ¨IDï¼ˆå¿…å¡«ï¼‰


---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 12.1 åˆ›å»ºå±‚çº§å…³ç³» âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/hierarchy/create`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: åˆ›å»ºç”¨æˆ·å±‚çº§å…³ç³»ï¼Œå»ºç«‹ä¸Šä¸‹çº§ç®¡ç†æ¶æ„  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆåŒºåŸŸè´Ÿè´£äººæˆ–ä¸šåŠ¡ç»ç†ï¼‰


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: - **æƒé™è¦æ±‚**: æ‰€æœ‰å®¡æ ¸æ“ä½œä»…ç®¡ç†å‘˜å¯æ‰§è¡Œ
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 12.2 æŸ¥è¯¢æ‰€æœ‰ä¸‹çº§ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/hierarchy/subordinates/:userId`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: æŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰ä¸‹çº§ï¼ˆç›´æ¥ä¸‹çº§å’Œé—´æ¥ä¸‹çº§ï¼‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: åªèƒ½æŸ¥è¯¢è‡ªå·±æˆ–è‡ªå·±ä¸‹çº§çš„ä¿¡æ¯


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 12.3 æ‰¹é‡åœç”¨æƒé™ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/hierarchy/deactivate`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: æ‰¹é‡åœç”¨ç”¨æˆ·æƒé™ï¼ˆè½¯åˆ é™¤ï¼‰ï¼Œæ”¯æŒåŒæ—¶åœç”¨æ‰€æœ‰ä¸‹çº§  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: éœ€è¦ç®¡ç†æƒé™ï¼ˆåªèƒ½åœç”¨è‡ªå·±çš„ä¸‹çº§ï¼‰


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 12.4 æ‰¹é‡æ¿€æ´»æƒé™ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/hierarchy/activate`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: æ‰¹é‡æ¿€æ´»ç”¨æˆ·æƒé™ï¼Œæ¢å¤å·²åœç”¨çš„æƒé™  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: éœ€è¦ç®¡ç†æƒé™ï¼ˆåªèƒ½æ¿€æ´»è‡ªå·±çš„ä¸‹çº§ï¼‰


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 12.5 è·å–å±‚çº§ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/hierarchy/stats/:userId`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–ç”¨æˆ·å±‚çº§ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…å«ç›´æ¥ä¸‹çº§å’Œæ‰€æœ‰ä¸‹çº§çš„æ•°é‡å’Œè¯¦æƒ…  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: åªèƒ½æŸ¥è¯¢è‡ªå·±æˆ–è‡ªå·±ä¸‹çº§çš„ç»Ÿè®¡ä¿¡æ¯


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---


## 13. V4 å®¡æ ¸ç®¡ç†ç³»ç»Ÿ

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- **æ‰¹é‡å®¡æ ¸é™åˆ¶**: å•æ¬¡æ‰¹é‡å®¡æ ¸æœ€å¤šæ”¯æŒ100ä¸ªè®¢å•
- **å®¡æ ¸åŸå› è¦æ±‚**: æ‹’ç»å®¡æ ¸æ—¶å¿…é¡»æä¾›åŸå› ï¼ˆè‡³å°‘5ä¸ªå­—ç¬¦ï¼‰
- **è¶…æ—¶å‘Šè­¦æœºåˆ¶**: æ”¯æŒè‡ªå®šä¹‰è¶…æ—¶å°æ—¶æ•°ï¼ˆ1-720å°æ—¶ï¼‰
- **ç»Ÿä¸€å®¡æ ¸å¼•æ“**: æ”¯æŒå¤šç§å†…å®¹ç±»å‹å®¡æ ¸ï¼ˆexchange/image/feedbackï¼‰
- **å®¡è®¡æ—¥å¿—**: æ‰€æœ‰å®¡æ ¸æ“ä½œè®°å½•è¯¦ç»†çš„å®¡è®¡æ—¥å¿—
- **æƒé™è¦æ±‚**: æ‰€æœ‰å®¡æ ¸æ“ä½œä»…ç®¡ç†å‘˜å¯æ‰§è¡Œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

### 13.1 æ‰¹é‡å®¡æ ¸é€šè¿‡ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/audit-management/batch-approve`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: æ‰¹é‡å®¡æ ¸é€šè¿‡å…‘æ¢è®¢å•ï¼Œæ”¯æŒä¸€æ¬¡æ€§å®¡æ ¸å¤šä¸ªè®¢å•  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.2 æ‰¹é‡å®¡æ ¸æ‹’ç» âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/audit-management/batch-reject`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: æ‰¹é‡å®¡æ ¸æ‹’ç»å…‘æ¢è®¢å•ï¼Œæ¯ä¸ªè®¢å•éœ€æä¾›æ‹’ç»åŸå›   
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.3 è·å–è¶…æ—¶è®¢å• âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/timeout-orders`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–è¶…æ—¶å¾…å®¡æ ¸è®¢å•åˆ—è¡¨ï¼Œæ”¯æŒè‡ªå®šä¹‰è¶…æ—¶å°æ—¶æ•°  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.4 æ‰‹åŠ¨è§¦å‘è¶…æ—¶å‘Šè­¦ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/audit-management/check-timeout-alert`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: æ‰‹åŠ¨è§¦å‘è¶…æ—¶è®¢å•æ£€æŸ¥å’Œå‘Šè­¦ï¼Œæ”¯æŒè‡ªå®šä¹‰è¶…æ—¶å°æ—¶æ•°  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.5 è·å–å®¡æ ¸ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/statistics`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–å¾…å®¡æ ¸è®¢å•ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…å«æ€»æ•°ã€è¶…æ—¶æ•°ã€æŒ‰çŠ¶æ€åˆ†ç±»ç­‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.6 è·å–å¾…å®¡æ ¸åˆ—è¡¨ï¼ˆç»Ÿä¸€å®¡æ ¸ç³»ç»Ÿï¼‰ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/unified/pending`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–ç»Ÿä¸€å®¡æ ¸ç³»ç»Ÿçš„å¾…å®¡æ ¸è®°å½•åˆ—è¡¨ï¼Œæ”¯æŒå¤šç§å†…å®¹ç±»å‹ï¼ˆexchange/image/feedbackï¼‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.7 è·å–å®¡æ ¸è¯¦æƒ…ï¼ˆç»Ÿä¸€å®¡æ ¸ç³»ç»Ÿï¼‰ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/unified/:audit_id`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–æŒ‡å®šå®¡æ ¸è®°å½•çš„è¯¦ç»†ä¿¡æ¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.8 ç»Ÿä¸€å®¡æ ¸é€šè¿‡ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/audit-management/unified/:audit_id/approve`  
**HTTPæ–¹æ³•**: POST  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.9 ç»Ÿä¸€å®¡æ ¸æ‹’ç» âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/audit-management/unified/:audit_id/reject`  
**HTTPæ–¹æ³•**: POST  
**æè¿°**: ç»Ÿä¸€å®¡æ ¸ç³»ç»Ÿå®¡æ ¸æ‹’ç»æ“ä½œ  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


---

### 13.10 è·å–ç»Ÿä¸€å®¡æ ¸ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/unified/statistics`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–ç»Ÿä¸€å®¡æ ¸ç³»ç»Ÿçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ”¯æŒæŒ‰å†…å®¹ç±»å‹ç­›é€‰  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

### 13.11 æŸ¥è¯¢å®¡è®¡æ—¥å¿— âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/audit-logs`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: æŸ¥è¯¢æ“ä½œå®¡è®¡æ—¥å¿—ï¼Œæ”¯æŒå¤šç§ç­›é€‰æ¡ä»¶  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.12 è·å–æ—¥å¿—ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/audit-logs/statistics`  
**HTTPæ–¹æ³•**: GET  

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 13.13 è·å–æ—¥å¿—è¯¦æƒ… âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/audit-management/audit-logs/:log_id`  
**HTTPæ–¹æ³•**: GET  
**æè¿°**: è·å–æŒ‡å®šå®¡è®¡æ—¥å¿—çš„è¯¦ç»†ä¿¡æ¯  
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•  
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---


---

# ğŸ“± äºŒã€å¾®ä¿¡å°ç¨‹åºå‰ç«¯æ¥å£

## 1. V4 ç»Ÿä¸€è®¤è¯å¼•æ“

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- JWTåŒTokenè®¾è®¡: accessToken(15åˆ†é’Ÿ) + refreshToken(7å¤©)
- è‡ªåŠ¨æ³¨å†Œ: æ–°ç”¨æˆ·é¦–æ¬¡ç™»å½•è‡ªåŠ¨åˆ›å»ºè´¦æˆ·+ç§¯åˆ†è´¦æˆ·+åˆ†é…é»˜è®¤è§’è‰²
- UUIDè§’è‰²ç³»ç»Ÿ: åŸºäºè§’è‰²UUIDè¿›è¡Œæƒé™éªŒè¯ï¼Œç§»é™¤`is_admin`ä¾èµ–
- å¼€å‘ç¯å¢ƒä¸‡èƒ½éªŒè¯ç : `123456`

---

### 1.1 ç”¨æˆ·ç™»å½•(æ‰‹æœºå·+éªŒè¯ç ) âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/auth/login`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ‰‹æœºå·+éªŒè¯ç ç™»å½•ï¼Œæ–°ç”¨æˆ·è‡ªåŠ¨æ³¨å†Œå¹¶åˆ†é…é»˜è®¤è§’è‰²
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼Œæ‰€æœ‰äººå‡å¯è®¿é—®
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **é¦–æ¬¡ç”¨æˆ·æ³¨å†Œåœºæ™¯**: ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨ç³»ç»Ÿæ—¶ï¼Œè¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç å³å¯å®Œæˆæ³¨å†Œå’Œç™»å½•ï¼Œæ— éœ€å•ç‹¬çš„æ³¨å†Œæ­¥éª¤ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºç§¯åˆ†è´¦æˆ·ï¼ˆåˆå§‹ä½™é¢0ï¼‰å¹¶åˆ†é…æ™®é€šç”¨æˆ·è§’è‰²
2. **è€ç”¨æˆ·å¿«é€Ÿç™»å½•åœºæ™¯**: å·²æ³¨å†Œç”¨æˆ·ç›´æ¥ä½¿ç”¨æ‰‹æœºå·å’ŒéªŒè¯ç å¿«é€Ÿç™»å½•ï¼Œæ— éœ€è®°å¿†å¤æ‚å¯†ç ï¼Œé™ä½ä½¿ç”¨é—¨æ§›
3. **å¤šè®¾å¤‡ç™»å½•åœºæ™¯**: åŒä¸€è´¦å·å¯ä»¥åœ¨å¤šå°è®¾å¤‡ä¸ŠåŒæ—¶ç™»å½•ï¼Œç³»ç»Ÿé€šè¿‡JWT Tokenç®¡ç†ä¼šè¯ï¼Œæ¯ä¸ªè®¾å¤‡ç‹¬ç«‹çš„Tokenäº’ä¸å½±å“
4. **å¼€å‘æµ‹è¯•è°ƒè¯•åœºæ™¯**: å¼€å‘ç¯å¢ƒæ”¯æŒä¸‡èƒ½éªŒè¯ç 123456ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜å¿«é€Ÿæµ‹è¯•ç™»å½•æµç¨‹ï¼Œæ— éœ€çœŸå®çŸ­ä¿¡éªŒè¯ç 
5. **ç§¯åˆ†è´¦æˆ·åˆå§‹åŒ–åœºæ™¯**: æ–°ç”¨æˆ·æ³¨å†Œåç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºç§¯åˆ†è´¦æˆ·ï¼ˆåˆå§‹ä½™é¢0ç§¯åˆ†ï¼‰ï¼Œä¸ºåç»­æ¶ˆè´¹è·å–ç§¯åˆ†å’Œå‚ä¸æŠ½å¥–åšå¥½å‡†å¤‡

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ‰‹æœºå·æ ¼å¼éªŒè¯è§„åˆ™**: å¿…é¡»æ˜¯11ä½ä¸­å›½å¤§é™†æ‰‹æœºå·ï¼Œç¬¦åˆ13x/14x/15x/16x/17x/18x/19xå¼€å¤´çš„æ ¼å¼è¦æ±‚
2. **éªŒè¯ç éªŒè¯è§„åˆ™**: ç”Ÿäº§ç¯å¢ƒéªŒè¯6ä½æ•°å­—éªŒè¯ç ï¼Œå¼€å‘ç¯å¢ƒæ”¯æŒä¸‡èƒ½éªŒè¯ç 123456ï¼ŒéªŒè¯ç æœ‰æ•ˆæœŸ5åˆ†é’Ÿ
3. **æ–°ç”¨æˆ·è‡ªåŠ¨æ³¨å†Œè§„åˆ™**: ç³»ç»Ÿæ£€æµ‹åˆ°æ‰‹æœºå·æœªæ³¨å†Œæ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºç”¨æˆ·è´¦å·ã€ç§¯åˆ†è´¦æˆ·ï¼ˆåˆå§‹0ç§¯åˆ†ï¼‰ã€åˆ†é…æ™®é€šç”¨æˆ·ï¼ˆuserï¼‰è§’è‰²
4. **Tokenç”Ÿæˆè§„åˆ™**: ç™»å½•æˆåŠŸåç”ŸæˆåŒTokenï¼ˆaccessTokenæœ‰æ•ˆæœŸ15åˆ†é’Ÿ+refreshTokenæœ‰æ•ˆæœŸ7å¤©ï¼‰ï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
5. **å¹¶å‘ç™»å½•æ§åˆ¶è§„åˆ™**: åŒä¸€è´¦å·å…è®¸å¤šè®¾å¤‡åŒæ—¶ç™»å½•ï¼Œæ¯ä¸ªè®¾å¤‡ä½¿ç”¨ç‹¬ç«‹Tokenï¼Œä¸ä¼šäº’ç›¸æŒ¤æ‰
6. **ç™»å½•æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•æ¯æ¬¡ç™»å½•çš„æ—¶é—´ã€è®¾å¤‡ä¿¡æ¯ã€IPåœ°å€ï¼Œä¾¿äºå®‰å…¨å®¡è®¡å’Œå¼‚å¸¸ç™»å½•æ£€æµ‹

---

### 1.2 å¿«é€Ÿç™»å½•(ä»…æ‰‹æœºå·) âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/auth/quick-login`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ä»…æ‰‹æœºå·ç›´æ¥ç™»å½•ï¼Œæ— éœ€éªŒè¯ç ï¼Œæ–°ç”¨æˆ·è‡ªåŠ¨æ³¨å†Œ
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼Œæ‰€æœ‰äººå‡å¯è®¿é—®
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å¾®ä¿¡å°ç¨‹åºå¿«é€Ÿç™»å½•åœºæ™¯**: ç”¨æˆ·åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨æ‰‹æœºå·ä¸€é”®ç™»å½•ï¼Œæ— éœ€è¾“å…¥éªŒè¯ç ï¼Œæå¤§ç®€åŒ–ç™»å½•æµç¨‹
2. **ä¿¡ä»»è®¾å¤‡ç™»å½•åœºæ™¯**: ç”¨æˆ·åœ¨å·²ä¿¡ä»»çš„è®¾å¤‡ä¸Šå¿«é€Ÿç™»å½•ï¼Œç³»ç»Ÿè¯†åˆ«è®¾å¤‡åå…éªŒè¯ç ç™»å½•
3. **å¼€å‘è°ƒè¯•å¿«é€Ÿç™»å½•åœºæ™¯**: å¼€å‘äººå‘˜åœ¨æµ‹è¯•ç¯å¢ƒä¸­å¿«é€Ÿç™»å½•æµ‹è¯•è´¦å·ï¼Œæ— éœ€ç­‰å¾…éªŒè¯ç 
4. **æ–°ç”¨æˆ·å¿«é€Ÿæ³¨å†Œåœºæ™¯**: æ–°ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨æ—¶ä»…éœ€è¾“å…¥æ‰‹æœºå·å³å¯å®Œæˆæ³¨å†Œå’Œç™»å½•ï¼Œé™ä½æ³¨å†Œé—¨æ§›
5. **è€ç”¨æˆ·ä¾¿æ·å›å½’åœºæ™¯**: è€ç”¨æˆ·é•¿æ—¶é—´æœªä½¿ç”¨ç³»ç»Ÿåï¼Œé€šè¿‡æ‰‹æœºå·å¿«é€Ÿé‡æ–°ç™»å½•

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ‰‹æœºå·æ ¼å¼éªŒè¯è§„åˆ™**: å¿…é¡»æ˜¯11ä½æœ‰æ•ˆçš„ä¸­å›½å¤§é™†æ‰‹æœºå·ç 
2. **å…éªŒè¯ç æ¡ä»¶è§„åˆ™**: ä»…åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼ˆå¦‚å¾®ä¿¡ç¯å¢ƒã€ä¿¡ä»»è®¾å¤‡ï¼‰å…è®¸å…éªŒè¯ç ç™»å½•
3. **æ–°ç”¨æˆ·è‡ªåŠ¨æ³¨å†Œè§„åˆ™**: æ‰‹æœºå·æœªæ³¨å†Œæ—¶è‡ªåŠ¨åˆ›å»ºè´¦å·ã€ç§¯åˆ†è´¦æˆ·å¹¶åˆ†é…é»˜è®¤æ™®é€šç”¨æˆ·è§’è‰²
4. **Tokenç”Ÿæˆè§„åˆ™**: ç™»å½•æˆåŠŸåç”ŸæˆaccessTokenï¼ˆ15åˆ†é’Ÿï¼‰å’ŒrefreshTokenï¼ˆ7å¤©ï¼‰åŒTokenæœºåˆ¶
5. **å®‰å…¨æ§åˆ¶è§„åˆ™**: è®°å½•ç™»å½•IPã€è®¾å¤‡ä¿¡æ¯ï¼Œå¼‚å¸¸ç™»å½•è¡Œä¸ºè§¦å‘å®‰å…¨éªŒè¯
6. **å¹¶å‘ç™»å½•è§„åˆ™**: æ”¯æŒåŒä¸€è´¦å·å¤šè®¾å¤‡åŒæ—¶ç™»å½•ï¼Œæ¯è®¾å¤‡ç‹¬ç«‹Tokenç®¡ç†

---

### 1.3 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/auth/profile`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººä¸­å¿ƒå±•ç¤ºåœºæ™¯**: ç”¨æˆ·è¿›å…¥ä¸ªäººä¸­å¿ƒé¡µé¢æ—¶ï¼Œè·å–å¹¶å±•ç¤ºè‡ªå·±çš„åŸºæœ¬ä¿¡æ¯ã€è§’è‰²ã€ç§¯åˆ†ä½™é¢ç­‰
2. **ä¿¡æ¯å®Œæ•´æ€§æ£€æŸ¥åœºæ™¯**: ç³»ç»Ÿæ£€æŸ¥ç”¨æˆ·èµ„æ–™æ˜¯å¦å®Œæ•´ï¼Œæç¤ºç”¨æˆ·è¡¥å……å¿…è¦ä¿¡æ¯ï¼ˆå¦‚æ˜µç§°ã€å¤´åƒç­‰ï¼‰
3. **æƒé™åˆ¤æ–­åœºæ™¯**: å‰ç«¯æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«å†³å®šå±•ç¤ºå“ªäº›åŠŸèƒ½æ¨¡å—å’Œæ“ä½œæŒ‰é’®
4. **è´¦æˆ·çŠ¶æ€ç¡®è®¤åœºæ™¯**: æ£€æŸ¥ç”¨æˆ·è´¦æˆ·æ˜¯å¦æ­£å¸¸ã€æ˜¯å¦è¢«ç¦ç”¨æˆ–é™åˆ¶ä½¿ç”¨
5. **æ•°æ®å®æ—¶åŒæ­¥åœºæ™¯**: ç”¨æˆ·æ“ä½œåï¼ˆå¦‚æ¶ˆè´¹ã€æŠ½å¥–ï¼‰é‡æ–°è·å–æœ€æ–°çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¡®ä¿å‰ç«¯æ˜¾ç¤ºå‡†ç¡®

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **TokenéªŒè¯è§„åˆ™**: å¿…é¡»æºå¸¦æœ‰æ•ˆçš„accessTokenï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½
2. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›ç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼ˆåŸºæœ¬ä¿¡æ¯+è§’è‰²ä¿¡æ¯+ç§¯åˆ†ä½™é¢+æƒé™åˆ—è¡¨ï¼‰
3. **éšç§ä¿æŠ¤è§„åˆ™**: æ•æ„Ÿä¿¡æ¯å¦‚å®Œæ•´æ‰‹æœºå·éœ€è¦è„±æ•å¤„ç†ï¼ˆå¦‚138****5678ï¼‰
4. **å®æ—¶æ€§è§„åˆ™**: æŸ¥è¯¢å®æ—¶æ•°æ®è€Œéç¼“å­˜æ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯å‡†ç¡®æ€§
5. **å…³è”æŸ¥è¯¢è§„åˆ™**: è‡ªåŠ¨å…³è”æŸ¥è¯¢ç”¨æˆ·è§’è‰²ã€ç§¯åˆ†è´¦æˆ·ç­‰å…³è”æ•°æ®
6. **å¼‚å¸¸å¤„ç†è§„åˆ™**: Tokenæ— æ•ˆæˆ–ç”¨æˆ·ä¸å­˜åœ¨æ—¶è¿”å›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯

---

### 1.4 éªŒè¯Tokenæœ‰æ•ˆæ€§ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/auth/verify`
**HTTPæ–¹æ³•**: POST
**æè¿°**: éªŒè¯Access Tokenæ˜¯å¦æœ‰æ•ˆï¼Œç”¨äºå‰ç«¯è·¯ç”±å®ˆå«
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å‰ç«¯è·¯ç”±å®ˆå«åœºæ™¯**: å‰ç«¯æ¯æ¬¡è·¯ç”±è·³è½¬å‰éªŒè¯Tokenæ˜¯å¦æœ‰æ•ˆï¼Œæœªç™»å½•åˆ™è·³è½¬åˆ°ç™»å½•é¡µ
2. **è‡ªåŠ¨åˆ·æ–°Tokenåœºæ™¯**: Tokenå³å°†è¿‡æœŸæ—¶ï¼ˆå‰©ä½™æ—¶é—´<5åˆ†é’Ÿï¼‰ï¼Œå‰ç«¯è‡ªåŠ¨ä½¿ç”¨refreshTokenåˆ·æ–°
3. **å¼‚å¸¸ç™»å‡ºæ£€æµ‹åœºæ™¯**: Tokenè¢«ç¯¡æ”¹æˆ–å·²å¤±æ•ˆæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¸…é™¤æœ¬åœ°Tokenå¹¶å¼•å¯¼ç”¨æˆ·é‡æ–°ç™»å½•
4. **ä¼šè¯ä¿æŒéªŒè¯åœºæ™¯**: ç”¨æˆ·æ“ä½œè¿‡ç¨‹ä¸­å®šæœŸéªŒè¯TokençŠ¶æ€ï¼Œç¡®ä¿ä¼šè¯æŒç»­æœ‰æ•ˆ
5. **å¤šè®¾å¤‡ç™»å½•ç®¡ç†åœºæ™¯**: éªŒè¯å½“å‰è®¾å¤‡çš„Tokenæ˜¯å¦ä»ç„¶æœ‰æ•ˆï¼Œé¿å…è¢«å…¶ä»–è®¾å¤‡ç™»å½•æŒ¤æ‰

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **Tokenæ ¼å¼éªŒè¯è§„åˆ™**: éªŒè¯Tokençš„JWTæ ¼å¼å®Œæ•´æ€§å’Œç­¾åæœ‰æ•ˆæ€§
2. **Tokenè¿‡æœŸéªŒè¯è§„åˆ™**: æ£€æŸ¥accessTokenæ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼ˆ15åˆ†é’Ÿï¼‰ï¼Œè¿‡æœŸåˆ™è¿”å›éœ€åˆ·æ–°çŠ¶æ€
3. **ç”¨æˆ·çŠ¶æ€éªŒè¯è§„åˆ™**: éªŒè¯Tokenå¯¹åº”çš„ç”¨æˆ·è´¦å·æ˜¯å¦æ­£å¸¸ã€æœªè¢«ç¦ç”¨
4. **æƒé™ä¿¡æ¯è¿”å›è§„åˆ™**: Tokenæœ‰æ•ˆæ—¶è¿”å›ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€è§’è‰²å’Œæƒé™åˆ—è¡¨
5. **å¿«é€Ÿå“åº”è§„åˆ™**: éªŒè¯æ“ä½œå¿…é¡»åœ¨100mså†…å®Œæˆï¼Œé¿å…å½±å“å‰ç«¯ä½“éªŒ
6. **é”™è¯¯åˆ†ç±»è§„åˆ™**: æ˜ç¡®åŒºåˆ†Tokenè¿‡æœŸã€Tokenæ— æ•ˆã€ç”¨æˆ·è¢«ç¦ç”¨ç­‰ä¸åŒé”™è¯¯ç±»å‹

---

### 1.5 åˆ·æ–°Token âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/auth/refresh`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ä½¿ç”¨Refresh Tokenè·å–æ–°çš„Tokenå¯¹
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦æœ‰æ•ˆçš„refreshToken
**æƒé™çº§åˆ«**: æŒæœ‰refreshTokençš„ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **Tokenè‡ªåŠ¨åˆ·æ–°åœºæ™¯**: accessTokenè¿‡æœŸåï¼Œå‰ç«¯è‡ªåŠ¨ä½¿ç”¨refreshTokenè·å–æ–°çš„Tokenå¯¹ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥
2. **é•¿æ—¶é—´ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·é•¿æ—¶é—´ä½¿ç”¨ç³»ç»Ÿï¼ˆè¶…è¿‡15åˆ†é’Ÿï¼‰ï¼Œé€šè¿‡åˆ·æ–°æœºåˆ¶ä¿æŒç™»å½•çŠ¶æ€
3. **å®‰å…¨æ§åˆ¶åœºæ™¯**: refreshTokenè¿‡æœŸï¼ˆ7å¤©ï¼‰åå¼ºåˆ¶ç”¨æˆ·é‡æ–°ç™»å½•ï¼Œå¹³è¡¡å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§
4. **è·¨è®¾å¤‡Tokenç®¡ç†åœºæ™¯**: æ¯ä¸ªè®¾å¤‡ä½¿ç”¨ç‹¬ç«‹çš„refreshTokenï¼Œäº’ä¸å½±å“
5. **å¼‚å¸¸æ¢å¤åœºæ™¯**: accessTokenæ„å¤–å¤±æ•ˆæ—¶ï¼Œé€šè¿‡refreshTokenå¿«é€Ÿæ¢å¤ä¼šè¯

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **refreshTokenéªŒè¯è§„åˆ™**: éªŒè¯refreshTokençš„æœ‰æ•ˆæ€§ã€æ ¼å¼å’Œç­¾å
2. **Tokenç”Ÿæˆè§„åˆ™**: åˆ·æ–°æˆåŠŸåç”Ÿæˆæ–°çš„accessTokenï¼ˆ15åˆ†é’Ÿï¼‰å’ŒrefreshTokenï¼ˆ7å¤©ï¼‰
3. **æ—§Tokenå¤±æ•ˆè§„åˆ™**: æ–°Tokenç”Ÿæˆåï¼Œæ—§çš„accessTokenå’ŒrefreshTokenç«‹å³å¤±æ•ˆ
4. **ç”¨æˆ·çŠ¶æ€éªŒè¯è§„åˆ™**: åˆ·æ–°å‰éªŒè¯ç”¨æˆ·è´¦å·æ˜¯å¦æ­£å¸¸ã€æœªè¢«ç¦ç”¨
5. **é¢‘ç‡é™åˆ¶è§„åˆ™**: åŒä¸€refreshTokenåœ¨çŸ­æ—¶é—´å†…ï¼ˆå¦‚1åˆ†é’Ÿï¼‰åªèƒ½åˆ·æ–°ä¸€æ¬¡ï¼Œé˜²æ­¢æ»¥ç”¨
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•æ¯æ¬¡Tokenåˆ·æ–°æ“ä½œï¼ŒåŒ…æ‹¬æ—¶é—´ã€è®¾å¤‡ä¿¡æ¯ã€IPåœ°å€

---

### 1.6 è§£å¯†å¾®ä¿¡æ‰‹æœºå· âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/auth/decrypt-phone`
**HTTPæ–¹æ³•**: POST
**æè¿°**: è§£å¯†å¾®ä¿¡ç”¨æˆ·æ‰‹æœºå·ï¼ˆå¾®ä¿¡å°ç¨‹åºæˆæƒè·å–ï¼‰
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦å¾®ä¿¡å°ç¨‹åºç¯å¢ƒ
**æƒé™çº§åˆ«**: å¾®ä¿¡å°ç¨‹åºç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å¾®ä¿¡ä¸€é”®æˆæƒåœºæ™¯**: ç”¨æˆ·åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ç‚¹å‡»æˆæƒæŒ‰é’®ï¼Œç³»ç»Ÿè§£å¯†è·å–çœŸå®æ‰‹æœºå·
2. **å¿«é€Ÿæ³¨å†Œç™»å½•åœºæ™¯**: è§£å¯†æ‰‹æœºå·åè‡ªåŠ¨å®Œæˆæ³¨å†Œæˆ–ç™»å½•ï¼Œç”¨æˆ·æ— éœ€æ‰‹åŠ¨è¾“å…¥
3. **ä¿¡æ¯è¡¥å…¨åœºæ™¯**: å·²ç™»å½•ç”¨æˆ·æˆæƒæ‰‹æœºå·ï¼Œç³»ç»Ÿè¡¥å…¨ç”¨æˆ·æ‰‹æœºå·ä¿¡æ¯
4. **èº«ä»½éªŒè¯åœºæ™¯**: é€šè¿‡å¾®ä¿¡æˆæƒçš„æ‰‹æœºå·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå®‰å…¨å¯é 
5. **é™ä½è¾“å…¥é—¨æ§›åœºæ™¯**: ç”¨æˆ·æ— éœ€æ‰‹åŠ¨è¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **åŠ å¯†æ•°æ®éªŒè¯è§„åˆ™**: éªŒè¯encryptedDataã€ivã€codeç­‰å‚æ•°çš„å®Œæ•´æ€§
2. **session_keyè·å–è§„åˆ™**: ä½¿ç”¨å¾®ä¿¡codeæ¢å–session_keyç”¨äºè§£å¯†
3. **è§£å¯†ç®—æ³•è§„åˆ™**: ä½¿ç”¨AES-128-CBCç®—æ³•è§£å¯†å¾®ä¿¡åŠ å¯†æ•°æ®
4. **æ‰‹æœºå·æ ¼å¼éªŒè¯è§„åˆ™**: è§£å¯†åéªŒè¯æ‰‹æœºå·æ ¼å¼æ˜¯å¦æ­£ç¡®
5. **è‡ªåŠ¨æ³¨å†Œç™»å½•è§„åˆ™**: æ‰‹æœºå·æœªæ³¨å†Œåˆ™è‡ªåŠ¨åˆ›å»ºè´¦å·å¹¶ç™»å½•ï¼Œå·²æ³¨å†Œåˆ™ç›´æ¥ç™»å½•
6. **å®‰å…¨æ§åˆ¶è§„åˆ™**: codeåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿‡æœŸæˆ–é‡å¤ä½¿ç”¨æ—¶è¿”å›é”™è¯¯

---

### 1.7 éªŒè¯Tokenæœ‰æ•ˆæ€§(GET) âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/auth/verify`
**HTTPæ–¹æ³•**: GET
**æè¿°**: éªŒè¯Access Tokenæ˜¯å¦æœ‰æ•ˆ(GETç‰ˆæœ¬ï¼Œç”¨äºç®€å•éªŒè¯)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **è½»é‡çº§TokenéªŒè¯åœºæ™¯**: GETè¯·æ±‚æ— éœ€è¯·æ±‚ä½“ï¼Œé€‚åˆå‰ç«¯è·¯ç”±å®ˆå«å¿«é€ŸéªŒè¯TokençŠ¶æ€
2. **æµè§ˆå™¨ç›´æ¥è®¿é—®åœºæ™¯**: å¯ä»¥é€šè¿‡æµè§ˆå™¨åœ°å€æ ç›´æ¥è®¿é—®éªŒè¯Tokenï¼Œæ–¹ä¾¿è°ƒè¯•
3. **ç¼“å­˜å‹å¥½åœºæ™¯**: GETè¯·æ±‚å¯ä»¥è¢«æµè§ˆå™¨å’ŒCDNç¼“å­˜ï¼ˆè®¾ç½®åˆç†çš„ç¼“å­˜ç­–ç•¥ï¼‰
4. **RESTfulè§„èŒƒåœºæ™¯**: ç¬¦åˆRESTfulè®¾è®¡ï¼ŒæŸ¥è¯¢æ“ä½œä½¿ç”¨GETæ–¹æ³•
5. **å¿«é€Ÿå¥åº·æ£€æŸ¥åœºæ™¯**: ç³»ç»Ÿç›‘æ§æ—¶å¿«é€Ÿæ£€æŸ¥è®¤è¯æœåŠ¡æ˜¯å¦æ­£å¸¸

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **Tokenæ ¼å¼éªŒè¯è§„åˆ™**: éªŒè¯Authorization Headerä¸­Bearer Tokençš„æ ¼å¼å’Œç­¾å
2. **Tokenè¿‡æœŸéªŒè¯è§„åˆ™**: æ£€æŸ¥accessTokenæ˜¯å¦åœ¨15åˆ†é’Ÿæœ‰æ•ˆæœŸå†…
3. **ç”¨æˆ·çŠ¶æ€éªŒè¯è§„åˆ™**: éªŒè¯ç”¨æˆ·è´¦å·æ˜¯å¦æ­£å¸¸ã€æœªè¢«ç¦ç”¨æˆ–åˆ é™¤
4. **è¿”å›ç®€åŒ–ä¿¡æ¯è§„åˆ™**: ä»…è¿”å›Tokenæœ‰æ•ˆçŠ¶æ€å’ŒåŸºæœ¬ç”¨æˆ·ä¿¡æ¯ï¼Œä¸è¿”å›è¯¦ç»†æƒé™
5. **é«˜é¢‘è®¿é—®ä¼˜åŒ–è§„åˆ™**: æ”¯æŒé«˜é¢‘éªŒè¯(100æ¬¡/åˆ†é’Ÿ)ï¼Œæ€§èƒ½ä¼˜åŒ–å“åº”é€Ÿåº¦<50ms
6. **å¹‚ç­‰æ€§è§„åˆ™**: GETè¯·æ±‚å¹‚ç­‰ï¼Œå¤šæ¬¡è°ƒç”¨ç»“æœä¸€è‡´ï¼Œä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€

---

### 1.8 ç”¨æˆ·é€€å‡ºç™»å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/auth/logout`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ç”¨æˆ·ä¸»åŠ¨é€€å‡ºç™»å½•ï¼Œæ¸…é™¤Tokenå’Œæƒé™ç¼“å­˜
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸»åŠ¨é€€å‡ºç™»å½•åœºæ™¯**: ç”¨æˆ·ç‚¹å‡»é€€å‡ºæŒ‰é’®ä¸»åŠ¨é€€å‡ºç™»å½•ï¼Œç³»ç»Ÿæ¸…é™¤Tokenå’Œç¼“å­˜
2. **å®‰å…¨é€€å‡ºåœºæ™¯**: ç”¨æˆ·åœ¨å…¬å…±è®¾å¤‡ä½¿ç”¨åé€€å‡ºç™»å½•ï¼Œé˜²æ­¢è´¦å·è¢«ä»–äººä½¿ç”¨
3. **å¤šè®¾å¤‡ç®¡ç†åœºæ™¯**: ç”¨æˆ·å¯ä»¥é€‰æ‹©é€€å‡ºå½“å‰è®¾å¤‡ï¼Œä¸å½±å“å…¶ä»–è®¾å¤‡çš„ç™»å½•çŠ¶æ€
4. **æƒé™ç¼“å­˜æ¸…ç†åœºæ™¯**: é€€å‡ºæ—¶æ¸…é™¤å†…å­˜å’ŒRedisä¸­çš„æƒé™ç¼“å­˜ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æº
5. **æ—¥å¿—å®¡è®¡åœºæ™¯**: è®°å½•ç”¨æˆ·é€€å‡ºæ—¶é—´ã€è®¾å¤‡ä¿¡æ¯ã€IPåœ°å€ï¼Œä¾¿äºå®‰å…¨å®¡è®¡

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **TokenéªŒè¯è§„åˆ™**: å¿…é¡»æºå¸¦æœ‰æ•ˆçš„accessTokenæ‰èƒ½æ‰§è¡Œé€€å‡ºæ“ä½œ
2. **ç¼“å­˜æ¸…ç†è§„åˆ™**: æ¸…é™¤ç”¨æˆ·åœ¨å†…å­˜ç¼“å­˜(memoryCache)å’ŒRedisä¸­çš„æƒé™ç¼“å­˜
3. **Tokenå¤±æ•ˆè§„åˆ™**: é€€å‡ºåå½“å‰Tokenç«‹å³å¤±æ•ˆï¼Œæ— æ³•å†ç”¨äºAPIè°ƒç”¨
4. **å¤šè®¾å¤‡ç‹¬ç«‹è§„åˆ™**: ä»…æ¸…é™¤å½“å‰è®¾å¤‡çš„ä¼šè¯ï¼Œä¸å½±å“ç”¨æˆ·åœ¨å…¶ä»–è®¾å¤‡çš„ç™»å½•
5. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•é€€å‡ºæ“ä½œæ—¥å¿—(user_idã€mobileã€æ—¶é—´ã€IP)ä¾¿äºå®¡è®¡
6. **å¹‚ç­‰æ€§è§„åˆ™**: å¤šæ¬¡è°ƒç”¨é€€å‡ºæ¥å£ç»“æœä¸€è‡´ï¼Œä¸ä¼šæŠ¥é”™

---


## 2. V4 ç»Ÿä¸€æŠ½å¥–å¼•æ“

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 2.1 æ‰§è¡ŒæŠ½å¥– âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/lottery/draw`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ‰§è¡ŒæŠ½å¥–(æ”¯æŒå•æŠ½å’Œåè¿æŠ½ï¼Œé»˜è®¤å•æŠ½)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•å¹¶æ‹¥æœ‰æ´»åŠ¨æƒé™
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·+æ´»åŠ¨æƒé™

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·å‚ä¸æŠ½å¥–åœºæ™¯**: ç”¨æˆ·åœ¨æ´»åŠ¨é¡µé¢ç‚¹å‡»æŠ½å¥–æŒ‰é’®ï¼Œæ¶ˆè€—æŒ‡å®šç§¯åˆ†è¿›è¡Œå•æ¬¡æŠ½å¥–æˆ–åè¿æŠ½
2. **ä¸­å¥–ç»“æœç”Ÿæˆåœºæ™¯**: ç³»ç»ŸåŸºäºUnifiedLotteryEngineæ™ºèƒ½æŠ½å¥–å¼•æ“ï¼Œæ ¹æ®æ¦‚ç‡é…ç½®ã€ä¿åº•æœºåˆ¶å’Œè¿è¥é¢„è®¾è®¡ç®—ä¸­å¥–ç»“æœ
3. **å¥–å“è‡ªåŠ¨å‘æ”¾åœºæ™¯**: ä¸­å¥–åå¥–å“è‡ªåŠ¨æ·»åŠ åˆ°ç”¨æˆ·åº“å­˜ï¼Œç§¯åˆ†åŒæ—¶æ‰£é™¤å¹¶è®°å½•äº¤æ˜“å†å²
4. **ä¿åº•è§¦å‘åœºæ™¯**: ç”¨æˆ·è¿ç»­æœªä¸­å¥–è¾¾åˆ°ä¿åº•æ¬¡æ•°æ—¶ï¼Œç³»ç»Ÿå¼ºåˆ¶è§¦å‘ä¿åº•å¥–åŠ±ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒ
5. **è¿è¥å¹²é¢„åœºæ™¯**: ç®¡ç†å‘˜é¢„è®¾çš„ä¸­å¥–é˜Ÿåˆ—ä¼˜å…ˆç”Ÿæ•ˆï¼ˆç”¨æˆ·æ— æ„ŸçŸ¥ï¼‰ï¼Œç”¨äºç‰¹æ®Šæ´»åŠ¨æˆ–ç”¨æˆ·æ¿€åŠ±

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ´»åŠ¨çŠ¶æ€éªŒè¯è§„åˆ™**: éªŒè¯æ´»åŠ¨æ˜¯å¦å­˜åœ¨ã€çŠ¶æ€æ˜¯å¦ä¸ºactiveã€æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…
2. **ç§¯åˆ†å……è¶³éªŒè¯è§„åˆ™**: æŠ½å¥–å‰éªŒè¯ç”¨æˆ·ç§¯åˆ†æ˜¯å¦è¶³å¤Ÿ(å•æŠ½cost_per_drawï¼Œåè¿æŠ½cost_per_draw*10)
3. **å¹‚ç­‰æ€§é˜²é‡è§„åˆ™**: ä½¿ç”¨è¯·æ±‚å»é‡ä¸­é—´ä»¶(requestDeduplication)é˜²æ­¢çŸ­æ—¶é—´å†…é‡å¤æäº¤å¯¼è‡´å¤šæ¬¡æ‰£è´¹
4. **é™æµä¿æŠ¤è§„åˆ™**: æ¯ç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤š10æ¬¡æŠ½å¥–è¯·æ±‚ï¼Œé˜²æ­¢æ¶æ„åˆ·å¥–æˆ–ç³»ç»Ÿè¿‡è½½
5. **äº‹åŠ¡ä¸€è‡´æ€§è§„åˆ™**: ç§¯åˆ†æ‰£é™¤ã€å¥–å“å‘æ”¾ã€æŠ½å¥–è®°å½•åˆ›å»ºåœ¨åŒä¸€æ•°æ®åº“äº‹åŠ¡ä¸­å®Œæˆï¼Œç¡®ä¿åŸå­æ€§
6. **åº“å­˜æ‰£å‡è§„åˆ™**: ä¸­å¥–æ—¶ç«‹å³æ‰£å‡å¥–å“åº“å­˜ï¼Œåº“å­˜ä¸è¶³æ—¶è‡ªåŠ¨é™çº§åˆ°å…¶ä»–å¯ç”¨å¥–å“

---

### 2.2 è·å–å¥–å“åˆ—è¡¨(å·²è„±æ•) âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/prizes/:campaignCode`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æ´»åŠ¨å¥–å“åˆ—è¡¨(å·²è„±æ•,éšè—æ¦‚ç‡å’Œåº“å­˜,ä»…å±•ç¤ºå¥–å“ä¿¡æ¯)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•å¹¶æ‹¥æœ‰æ´»åŠ¨æƒé™
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·+æ´»åŠ¨æƒé™

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å¥–å“å±•ç¤ºåœºæ™¯**: å‰ç«¯æŠ½å¥–é¡µé¢å±•ç¤ºå½“å‰æ´»åŠ¨çš„æ‰€æœ‰å¥–å“ï¼Œå¸å¼•ç”¨æˆ·å‚ä¸
2. **æ•°æ®è„±æ•åœºæ™¯**: å‘æ™®é€šç”¨æˆ·éšè—æ•æ„Ÿä¿¡æ¯ï¼ˆä¸­å¥–æ¦‚ç‡ã€å‰©ä½™åº“å­˜ã€å®é™…ä»·å€¼ï¼‰ï¼Œä¿è¯è¿è¥ç­–ç•¥ä¸å¤–æ³„
3. **å¥–å“åˆ†ç±»å±•ç¤ºåœºæ™¯**: æŒ‰sort_orderæ’åºå±•ç¤ºå¥–å“ï¼Œä¼˜å…ˆå±•ç¤ºé«˜ä»·å€¼å¥–å“
4. **å›¾ç‰‡é¢„åŠ è½½åœºæ™¯**: å‰ç«¯è·å–å¥–å“å›¾ç‰‡URLæå‰åŠ è½½ï¼Œä¼˜åŒ–æŠ½å¥–åŠ¨ç”»ä½“éªŒ
5. **æ´»åŠ¨å®£ä¼ åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹å¥–å“åˆ—è¡¨äº†è§£æ´»åŠ¨å†…å®¹ï¼Œå†³å®šæ˜¯å¦å‚ä¸

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ´»åŠ¨çŠ¶æ€éªŒè¯è§„åˆ™**: ä»…è¿”å›çŠ¶æ€ä¸ºactiveçš„æ´»åŠ¨å¥–å“ï¼Œå·²ç»“æŸæˆ–æœªå¼€å§‹çš„æ´»åŠ¨ä¸è¿”å›
2. **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤è§„åˆ™**: è¿‡æ»¤æ‰probability(æ¦‚ç‡)ã€stock(åº“å­˜)ã€cost(æˆæœ¬)ç­‰æ•æ„Ÿå­—æ®µ
3. **æ•°æ®æƒé™éªŒè¯è§„åˆ™**: éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è¯¥æ´»åŠ¨çš„è®¿é—®æƒé™ï¼ˆdataAccessControlä¸­é—´ä»¶ï¼‰
4. **æ’åºè§„åˆ™**: æŒ‰sort_orderå‡åºæ’åˆ—ï¼Œæ•°å€¼è¶Šå°è¶Šé å‰
5. **ç¼“å­˜ç­–ç•¥è§„åˆ™**: å¥–å“åˆ—è¡¨å¯ç¼“å­˜5åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢å‹åŠ›
6. **è¿”å›å­—æ®µè§„åˆ™**: ä»…è¿”å›prize_nameã€prize_imageã€prize_descriptionã€categoryç­‰å±•ç¤ºå­—æ®µ


---

### 2.3 è·å–æŠ½å¥–é…ç½® âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/config/:campaignCode`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æ´»åŠ¨é…ç½®ä¿¡æ¯(ç®¡ç†å‘˜æŸ¥çœ‹å®Œæ•´é…ç½®,æ™®é€šç”¨æˆ·æŸ¥çœ‹è„±æ•é…ç½®)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•å¹¶æ‹¥æœ‰æ´»åŠ¨æƒé™
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·(ç®¡ç†å‘˜fullæƒé™,æ™®é€šç”¨æˆ·basicæƒé™)

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å‰ç«¯æŠ½å¥–å®šä»·å±•ç¤ºåœºæ™¯**: å‰ç«¯è·å–å•æŠ½ã€åè¿æŠ½çš„ä»·æ ¼(ç§¯åˆ†æ¶ˆè€—)å’ŒæŠ˜æ‰£ä¿¡æ¯ï¼Œå±•ç¤ºç»™ç”¨æˆ·
2. **ç®¡ç†å‘˜é…ç½®å®¡æŸ¥åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹å®Œæ•´çš„æŠ½å¥–é…ç½®(å«ä¿åº•è§„åˆ™ã€æ¦‚ç‡åˆ†å¸ƒã€åº“å­˜çŠ¶æ€)è¿›è¡Œè¿è¥å†³ç­–
3. **é…ç½®é™çº§ä¿æŠ¤åœºæ™¯**: å½“æ´»åŠ¨é…ç½®ç¼ºå¤±draw_pricingæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨é»˜è®¤é…ç½®(business.config)ç¡®ä¿ä¸šåŠ¡è¿ç»­æ€§
4. **æ´»åŠ¨çŠ¶æ€éªŒè¯åœºæ™¯**: ç³»ç»ŸéªŒè¯æ´»åŠ¨æ˜¯å¦å­˜åœ¨ã€æ˜¯å¦activeçŠ¶æ€ï¼Œä¸åŒçŠ¶æ€è¿”å›ä¸åŒçš„å‹å¥½æç¤º
5. **æ•°æ®æƒé™åˆ†çº§åœºæ™¯**: æ ¹æ®ç”¨æˆ·è§’è‰²(dataLevel)è¿”å›ä¸åŒè¯¦ç»†ç¨‹åº¦çš„é…ç½®ä¿¡æ¯ï¼Œæ™®é€šç”¨æˆ·çœ‹ä¸åˆ°æ•æ„Ÿè¿è¥æ•°æ®

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ´»åŠ¨ä»£ç æ ¼å¼éªŒè¯è§„åˆ™**: campaign_codeåªå…è®¸å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé•¿åº¦ä¸è¶…è¿‡100å­—ç¬¦
2. **æ´»åŠ¨çŠ¶æ€éªŒè¯è§„åˆ™**: ä»…è¿”å›status=activeçš„æ´»åŠ¨é…ç½®ï¼Œended/paused/draftçŠ¶æ€è¿”å›ç›¸åº”é”™è¯¯æç¤º
3. **æ•°æ®åˆ†çº§è¿”å›è§„åˆ™**: ç®¡ç†å‘˜(dataLevel=full)è¿”å›å®Œæ•´é…ç½®ï¼Œæ™®é€šç”¨æˆ·(dataLevel=basic)ä»…è¿”å›draw_pricing
4. **é…ç½®é™çº§è§„åˆ™**: draw_pricingç¼ºå¤±æ—¶ä½¿ç”¨é»˜è®¤é…ç½®(å•æŠ½10ç§¯åˆ†ï¼Œåè¿æŠ½90ç§¯åˆ†)ï¼Œå¹¶è®°å½•å‘Šè­¦æ—¥å¿—
5. **æ•°æ®æƒé™æ§åˆ¶è§„åˆ™**: é€šè¿‡dataAccessControlä¸­é—´ä»¶éªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰è¯¥æ´»åŠ¨çš„è®¿é—®æƒé™
6. **å‹å¥½é”™è¯¯æç¤ºè§„åˆ™**: æ´»åŠ¨ä¸å­˜åœ¨æ—¶æä¾›å¸¸è§æ´»åŠ¨ä»£ç æç¤º(å¦‚BASIC_LOTTERY)ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½é—®é¢˜

### 2.4 è·å–æŠ½å¥–å†å² âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/history/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·æŠ½å¥–å†å²è®°å½•(æ”¯æŒåˆ†é¡µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„å†å²æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººå†å²

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººå†å²æŸ¥çœ‹åœºæ™¯**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è‡ªå·±çš„æŠ½å¥–å†å²ï¼Œäº†è§£ä¸­å¥–æƒ…å†µå’Œç§¯åˆ†æ¶ˆè€—
2. **ä¸­å¥–è®°å½•å±•ç¤ºåœºæ™¯**: å‰ç«¯å±•ç¤ºç”¨æˆ·çš„ä¸­å¥–è®°å½•ï¼ŒåŒ…æ‹¬å¥–å“åç§°ã€ä¸­å¥–æ—¶é—´ã€å¥–å“å›¾ç‰‡ç­‰
3. **ç®¡ç†å‘˜å®¡è®¡åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æŠ½å¥–å†å²ï¼Œå®¡è®¡ç”¨æˆ·è¡Œä¸ºæˆ–å¤„ç†ç”¨æˆ·æŠ•è¯‰
4. **åˆ†é¡µåŠ è½½åœºæ™¯**: å†å²è®°å½•è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š50æ¡ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®
5. **æ•°æ®è¿½æº¯åœºæ™¯**: ç”¨æˆ·å¯¹æŸæ¬¡æŠ½å¥–ç»“æœæœ‰ç–‘é—®æ—¶ï¼Œé€šè¿‡å†å²è®°å½•è¿½æº¯å…·ä½“çš„æŠ½å¥–è¯¦æƒ…

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„å†å²(user_id=å½“å‰ç”¨æˆ·)ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ä»»æ„ç”¨æˆ·å†å²
2. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼Œpageâ‰¥1ï¼ŒlimitèŒƒå›´1-50
3. **åˆ†é¡µå‚æ•°è§„åˆ™**: é»˜è®¤page=1ï¼Œlimit=20ï¼Œè¶…å‡ºèŒƒå›´è‡ªåŠ¨ä¿®æ­£åˆ°åˆç†å€¼
4. **æ•°æ®æ’åºè§„åˆ™**: æŒ‰æŠ½å¥–æ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„æŠ½å¥–è®°å½•æ’åœ¨æœ€å‰é¢
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›å®Œæ•´çš„æŠ½å¥–ä¿¡æ¯(æ´»åŠ¨åç§°ã€å¥–å“ä¿¡æ¯ã€ä¸­å¥–çŠ¶æ€ã€æ—¶é—´ã€æ¶ˆè€—ç§¯åˆ†)
6. **é”™è¯¯å¤„ç†è§„åˆ™**: ç”Ÿäº§ç¯å¢ƒè¿”å›é€šç”¨é”™è¯¯ä¿¡æ¯ï¼Œå¼€å‘ç¯å¢ƒè¿”å›è¯¦ç»†é”™è¯¯ä¾¿äºè°ƒè¯•

---

### 2.5 è·å–æ´»åŠ¨åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/campaigns`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æŠ½å¥–æ´»åŠ¨åˆ—è¡¨(é»˜è®¤è¿”å›è¿›è¡Œä¸­çš„æ´»åŠ¨)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **æ´»åŠ¨åˆ—è¡¨å±•ç¤ºåœºæ™¯**: å‰ç«¯é¦–é¡µæˆ–æ´»åŠ¨é¡µé¢å±•ç¤ºå½“å‰æ‰€æœ‰å¯å‚ä¸çš„æŠ½å¥–æ´»åŠ¨
2. **æ´»åŠ¨ç­›é€‰åœºæ™¯**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰æ´»åŠ¨(activeè¿›è¡Œä¸­/endedå·²ç»“æŸ/pausedæš‚åœ/draftè‰ç¨¿)
3. **æ´»åŠ¨é€‰æ‹©åœºæ™¯**: ç”¨æˆ·æµè§ˆæ´»åŠ¨åˆ—è¡¨ï¼Œé€‰æ‹©æ„Ÿå…´è¶£çš„æ´»åŠ¨è¿›å…¥æŠ½å¥–é¡µé¢
4. **æƒé™è¿‡æ»¤åœºæ™¯**: ç³»ç»Ÿæ ¹æ®ç”¨æˆ·æƒé™è‡ªåŠ¨è¿‡æ»¤ï¼Œåªè¿”å›ç”¨æˆ·æœ‰æƒè®¿é—®çš„æ´»åŠ¨
5. **æ´»åŠ¨ä¿¡æ¯é¢„è§ˆåœºæ™¯**: å±•ç¤ºæ´»åŠ¨åŸºæœ¬ä¿¡æ¯(åç§°ã€æ—¶é—´ã€æ¶ˆè€—ç§¯åˆ†ã€å¥–å“é¢„è§ˆ)å¸®åŠ©ç”¨æˆ·å†³ç­–

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **é»˜è®¤çŠ¶æ€è¿‡æ»¤è§„åˆ™**: ä¸ä¼ statuså‚æ•°æ—¶é»˜è®¤è¿”å›status=activeçš„æ´»åŠ¨
2. **æƒé™è¿‡æ»¤è§„åˆ™**: é€šè¿‡ç”¨æˆ·æƒé™è‡ªåŠ¨è¿‡æ»¤æ´»åŠ¨åˆ—è¡¨ï¼Œç”¨æˆ·åªèƒ½çœ‹åˆ°æœ‰æƒé™å‚ä¸çš„æ´»åŠ¨
3. **æ—¶é—´æœ‰æ•ˆæ€§è§„åˆ™**: activeçŠ¶æ€çš„æ´»åŠ¨å¿…é¡»åœ¨æœ‰æ•ˆæœŸå†…(å½“å‰æ—¶é—´åœ¨start_timeå’Œend_timeä¹‹é—´)
4. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›æ´»åŠ¨åŸºæœ¬ä¿¡æ¯(campaign_codeã€nameã€descriptionã€cost_per_drawã€æ—¶é—´èŒƒå›´)
5. **æ’åºè§„åˆ™**: æŒ‰æ´»åŠ¨åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°æ´»åŠ¨æ’åœ¨å‰é¢
6. **ç©ºåˆ—è¡¨å¤„ç†è§„åˆ™**: æ— å¯ç”¨æ´»åŠ¨æ—¶è¿”å›ç©ºæ•°ç»„ï¼Œä¸æŠ¥é”™

---

### 2.6 è·å–ç”¨æˆ·ç§¯åˆ† âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/points/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·ç§¯åˆ†ä½™é¢å’Œè´¦æˆ·ä¿¡æ¯
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç§¯åˆ†

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **æŠ½å¥–å‰ç§¯åˆ†ç¡®è®¤åœºæ™¯**: ç”¨æˆ·åœ¨æŠ½å¥–é¡µé¢æŸ¥çœ‹å½“å‰å¯ç”¨ç§¯åˆ†ï¼Œåˆ¤æ–­æ˜¯å¦è¶³å¤Ÿå‚ä¸æŠ½å¥–
2. **ç§¯åˆ†ä½™é¢å±•ç¤ºåœºæ™¯**: å‰ç«¯ä¸ªäººä¸­å¿ƒå±•ç¤ºç”¨æˆ·çš„å¯ç”¨ç§¯åˆ†ã€ç´¯è®¡è·å¾—ç§¯åˆ†ã€ç´¯è®¡æ¶ˆè€—ç§¯åˆ†
3. **ç®¡ç†å‘˜æŸ¥è¯¢åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„ç§¯åˆ†è´¦æˆ·ä¿¡æ¯ï¼Œå¤„ç†ç”¨æˆ·å’¨è¯¢æˆ–æŠ•è¯‰
4. **è´¦æˆ·çŠ¶æ€æ£€æŸ¥åœºæ™¯**: éªŒè¯ç§¯åˆ†è´¦æˆ·æ˜¯å¦å­˜åœ¨ã€æ˜¯å¦è¢«å†»ç»“ï¼Œå†»ç»“è´¦æˆ·æ— æ³•å‚ä¸æŠ½å¥–
5. **å®¡è®¡æ—¥å¿—è®°å½•åœºæ™¯**: ç®¡ç†å‘˜æŸ¥è¯¢ä»–äººç§¯åˆ†æ—¶è®°å½•å®¡è®¡æ—¥å¿—(æ“ä½œè€…ã€è¢«æŸ¥è¯¢ç”¨æˆ·ã€æ—¶é—´ã€IP)

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ä»»æ„ç”¨æˆ·ç§¯åˆ†
2. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
3. **ç”¨æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: å…ˆéªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨è¿”å›404é”™è¯¯
4. **ç§¯åˆ†è´¦æˆ·éªŒè¯è§„åˆ™**: éªŒè¯ç§¯åˆ†è´¦æˆ·æ˜¯å¦å­˜åœ¨ï¼Œæ–°ç”¨æˆ·æœªå¼€é€šç§¯åˆ†è´¦æˆ·æ—¶è¿”å›å‹å¥½æç¤º
5. **è´¦æˆ·çŠ¶æ€éªŒè¯è§„åˆ™**: éªŒè¯is_activeçŠ¶æ€ï¼Œå†»ç»“è´¦æˆ·è¿”å›403é”™è¯¯
6. **é™æµä¿æŠ¤è§„åˆ™**: æ¯ç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤š60æ¬¡æŸ¥è¯¢ï¼Œé˜²æ­¢é¢‘ç¹æŸ¥è¯¢å¯¼è‡´ç³»ç»Ÿè¿‡è½½

---

### 2.7 è·å–æŠ½å¥–ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/statistics/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·æŠ½å¥–ç»Ÿè®¡æ•°æ®(åŒ…å«æ€»ä½“å’Œä»Šæ—¥ç»Ÿè®¡)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç»Ÿè®¡

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººæ•°æ®ä¸­å¿ƒåœºæ™¯**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è‡ªå·±çš„æŠ½å¥–ç»Ÿè®¡(æ€»æŠ½å¥–æ¬¡æ•°ã€ä¸­å¥–æ¬¡æ•°ã€ä¸­å¥–ç‡)
2. **ä»Šæ—¥æ•°æ®å±•ç¤ºåœºæ™¯**: å±•ç¤ºä»Šæ—¥æŠ½å¥–æ¬¡æ•°ã€ä»Šæ—¥ä¸­å¥–æ¬¡æ•°ã€ä»Šæ—¥ä¸­å¥–ç‡ï¼Œæ¿€åŠ±ç”¨æˆ·æŒç»­å‚ä¸
3. **æ•°æ®åˆ†æåœºæ™¯**: å±•ç¤ºç´¯è®¡ç§¯åˆ†æ¶ˆè€—ã€ä¿åº•ä¸­å¥–æ¬¡æ•°ã€æ­£å¸¸ä¸­å¥–æ¬¡æ•°ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£æŠ½å¥–æŠ•å…¥
4. **å¥–å“ç±»å‹åˆ†å¸ƒåœºæ™¯**: å±•ç¤ºç”¨æˆ·ä¸­å¥–çš„å¥–å“ç±»å‹åˆ†å¸ƒ(å®ç‰©å¥–å“ã€è™šæ‹Ÿå¥–å“ã€ç§¯åˆ†å¥–åŠ±ç­‰)
5. **ç®¡ç†å‘˜æ•°æ®åˆ†æåœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹ç”¨æˆ·ç»Ÿè®¡æ•°æ®ï¼Œåˆ†æç”¨æˆ·æ´»è·ƒåº¦å’Œå‚ä¸æƒ…å†µ

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ä»»æ„ç”¨æˆ·ç»Ÿè®¡
2. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°
3. **ç»Ÿè®¡å­—æ®µå®Œæ•´æ€§è§„åˆ™**: è¿”å›11ä¸ªç»Ÿè®¡å­—æ®µ(total_drawsã€total_winsã€win_rateã€today_drawsã€today_winsã€today_win_rateã€total_points_costã€guarantee_winsã€normal_winsã€prize_type_distributionã€last_win)
4. **ä¸­å¥–ç‡è®¡ç®—è§„åˆ™**: win_rate = total_wins / total_draws * 100ï¼Œä¿ç•™2ä½å°æ•°
5. **ä»Šæ—¥æ•°æ®è§„åˆ™**: ä»Šæ—¥ç»Ÿè®¡åŸºäºåŒ—äº¬æ—¶é—´00:00:00åˆ°23:59:59çš„æ•°æ®
6. **ç¼“å­˜ç­–ç•¥è§„åˆ™**: ç»Ÿè®¡æ•°æ®å¯ç¼“å­˜1åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢å‹åŠ›

---

### 2.8 å¥åº·æ£€æŸ¥ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery/health`
**HTTPæ–¹æ³•**: GET
**æè¿°**: æŠ½å¥–æœåŠ¡å¥åº·æ£€æŸ¥(æ— éœ€è®¤è¯,å…¬å¼€è®¿é—®)
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼Œæ‰€æœ‰äººå‡å¯è®¿é—®
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç³»ç»Ÿç›‘æ§åœºæ™¯**: è¿ç»´ç³»ç»Ÿå®šæ—¶è°ƒç”¨å¥åº·æ£€æŸ¥æ¥å£ï¼Œç›‘æ§æŠ½å¥–æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. **æœåŠ¡çŠ¶æ€ç¡®è®¤åœºæ™¯**: å¼€å‘äººå‘˜å¿«é€Ÿç¡®è®¤æŠ½å¥–æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸã€ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®
3. **è´Ÿè½½å‡è¡¡å¥åº·æ£€æŸ¥åœºæ™¯**: è´Ÿè½½å‡è¡¡å™¨(å¦‚Nginx)é€šè¿‡å¥åº·æ£€æŸ¥å†³å®šæ˜¯å¦å°†æµé‡è½¬å‘åˆ°è¯¥æœåŠ¡
4. **æ•…éšœè¯Šæ–­åœºæ™¯**: æœåŠ¡å¼‚å¸¸æ—¶é€šè¿‡å¥åº·æ£€æŸ¥å¿«é€Ÿå®šä½é—®é¢˜(è¿”å›500è¡¨ç¤ºæœåŠ¡å¼‚å¸¸)
5. **APIç½‘å…³è·¯ç”±åœºæ™¯**: APIç½‘å…³é€šè¿‡å¥åº·æ£€æŸ¥åˆ¤æ–­æŠ½å¥–æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œå†³å®šè·¯ç”±ç­–ç•¥

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ— è®¤è¯è¦æ±‚è§„åˆ™**: å¥åº·æ£€æŸ¥æ¥å£æ— éœ€Tokenè®¤è¯ï¼Œä»»ä½•äººéƒ½å¯è®¿é—®
2. **å¿«é€Ÿå“åº”è§„åˆ™**: å¥åº·æ£€æŸ¥åº”åœ¨50mså†…å“åº”ï¼Œé¿å…é˜»å¡ç›‘æ§ç³»ç»Ÿ
3. **çŠ¶æ€ç è§„åˆ™**: æœåŠ¡æ­£å¸¸è¿”å›200+status:healthyï¼Œå¼‚å¸¸è¿”å›500+é”™è¯¯ä¿¡æ¯
4. **ç‰ˆæœ¬ä¿¡æ¯è§„åˆ™**: è¿”å›æœåŠ¡ç‰ˆæœ¬(4.0.0)å’ŒæœåŠ¡åç§°(V4.0ç»Ÿä¸€æŠ½å¥–å¼•æ“)
5. **ç­–ç•¥ä¿¡æ¯è§„åˆ™**: è¿”å›æ”¯æŒçš„æŠ½å¥–ç­–ç•¥åˆ—è¡¨(basic_guaranteeä¿åº•ç­–ç•¥ã€managementè¿è¥å¹²é¢„ç­–ç•¥)
6. **æ—¶é—´æˆ³è§„åˆ™**: è¿”å›åŒ—äº¬æ—¶é—´æ—¶é—´æˆ³ï¼Œä¾¿äºç›‘æ§ç³»ç»Ÿè®°å½•æ£€æŸ¥æ—¶é—´

---

### 4.1 è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†ä½™é¢ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/balance`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„å®Œæ•´ç§¯åˆ†ä¿¡æ¯(å¯ç”¨ç§¯åˆ†ã€ç´¯è®¡è·å¾—ã€ç´¯è®¡æ¶ˆè€—ã€å¾…å®¡æ ¸ç§¯åˆ†)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººä¸­å¿ƒç§¯åˆ†å±•ç¤ºåœºæ™¯**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†ä½™é¢ï¼Œäº†è§£å½“å‰å¯ç”¨ç§¯åˆ†å’Œå†å²ç§¯åˆ†å˜åŠ¨
2. **æŠ½å¥–å‰ä½™é¢ç¡®è®¤åœºæ™¯**: ç”¨æˆ·åœ¨å‚ä¸æŠ½å¥–å‰æŸ¥çœ‹ç§¯åˆ†ä½™é¢ï¼Œåˆ¤æ–­æ˜¯å¦è¶³å¤Ÿæ”¯ä»˜æŠ½å¥–æ¶ˆè€—
3. **ç§¯åˆ†è´¦æˆ·æ¦‚è§ˆåœºæ™¯**: å±•ç¤ºå®Œæ•´çš„ç§¯åˆ†è´¦æˆ·ä¿¡æ¯(å¯ç”¨ç§¯åˆ†ã€ç´¯è®¡è·å¾—ã€ç´¯è®¡æ¶ˆè€—ã€å¾…å®¡æ ¸ç§¯åˆ†)
4. **è´¦æˆ·çŠ¶æ€æ£€æŸ¥åœºæ™¯**: éªŒè¯ç§¯åˆ†è´¦æˆ·æ˜¯å¦å­˜åœ¨ã€æ˜¯å¦è¢«å†»ç»“ï¼Œå†»ç»“è´¦æˆ·æ— æ³•æŸ¥è¯¢ä½™é¢
5. **æ€§èƒ½ç›‘æ§åœºæ™¯**: ç³»ç»Ÿè®°å½•æŸ¥è¯¢è€—æ—¶ï¼Œè¶…è¿‡100msæ—¶è®°å½•å‘Šè­¦æ—¥å¿—ï¼Œä¾¿äºæ€§èƒ½ä¼˜åŒ–

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **ç”¨æˆ·éªŒè¯è§„åˆ™**: ä»JWT Tokenä¸­è‡ªåŠ¨è·å–user_idï¼ŒéªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨
2. **è´¦æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: éªŒè¯ç§¯åˆ†è´¦æˆ·æ˜¯å¦å­˜åœ¨ï¼Œæ–°ç”¨æˆ·æœªå¼€é€šè´¦æˆ·æ—¶è¿”å›å‹å¥½æç¤º(å»ºè®®å…ˆæ¶ˆè´¹æˆ–å‚ä¸æ´»åŠ¨)
3. **è´¦æˆ·çŠ¶æ€éªŒè¯è§„åˆ™**: éªŒè¯is_activeçŠ¶æ€ï¼Œå†»ç»“è´¦æˆ·è¿”å›403é”™è¯¯å¹¶è¯´æ˜å†»ç»“åŸå› 
4. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›å®Œæ•´ç§¯åˆ†ä¿¡æ¯(available_pointså¯ç”¨ç§¯åˆ†ã€total_earnedç´¯è®¡è·å¾—ã€total_consumedç´¯è®¡æ¶ˆè€—ã€pending_pointså¾…å®¡æ ¸ç§¯åˆ†)
5. **é™æµä¿æŠ¤è§„åˆ™**: é€šè¿‡balanceRateLimiteré™æµä¸­é—´ä»¶ä¿æŠ¤ï¼Œé˜²æ­¢é¢‘ç¹æŸ¥è¯¢
6. **æ€§èƒ½ç›‘æ§è§„åˆ™**: æŸ¥è¯¢è€—æ—¶è¶…è¿‡100msæ—¶è®°å½•å‘Šè­¦æ—¥å¿—ï¼Œæ­£å¸¸æŸ¥è¯¢è®°å½•æˆåŠŸæ—¥å¿—


---

### 4.2 è·å–æŒ‡å®šç”¨æˆ·ç§¯åˆ†ä½™é¢ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/balance/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æŒ‡å®šç”¨æˆ·çš„ç§¯åˆ†ä½™é¢(ç”¨æˆ·æŸ¥çœ‹è‡ªå·±æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äºº)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç§¯åˆ†

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç®¡ç†å‘˜æŸ¥è¯¢ç”¨æˆ·ç§¯åˆ†åœºæ™¯**: ç®¡ç†å‘˜åœ¨åå°ç®¡ç†ç³»ç»ŸæŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„ç§¯åˆ†ä½™é¢ï¼Œå¤„ç†ç”¨æˆ·å’¨è¯¢æˆ–æŠ•è¯‰
2. **ç”¨æˆ·æŸ¥çœ‹è‡ªå·±ç§¯åˆ†åœºæ™¯**: ç”¨æˆ·é€šè¿‡user_idå‚æ•°æŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†ä½™é¢(ä¸4.1åŠŸèƒ½ç±»ä¼¼ä½†éœ€è¦ä¼ å‚)
3. **å®¡è®¡æ—¥å¿—è®°å½•åœºæ™¯**: ç®¡ç†å‘˜æŸ¥è¯¢ä»–äººç§¯åˆ†æ—¶è®°å½•è¯¦ç»†å®¡è®¡æ—¥å¿—(æ“ä½œè€…ã€è¢«æŸ¥è¯¢ç”¨æˆ·ã€IPã€æ—¶é—´)
4. **è´¦æˆ·çŠ¶æ€éªŒè¯åœºæ™¯**: éªŒè¯ç›®æ ‡ç”¨æˆ·æ˜¯å¦å­˜åœ¨ã€ç§¯åˆ†è´¦æˆ·æ˜¯å¦å¼€é€šã€è´¦æˆ·æ˜¯å¦è¢«å†»ç»“
5. **æƒé™å®‰å…¨æ§åˆ¶åœºæ™¯**: ä¸¥æ ¼éªŒè¯æƒé™ï¼Œæ™®é€šç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„ç§¯åˆ†ï¼Œé˜²æ­¢è¶ŠæƒæŸ¥è¯¢

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„ç§¯åˆ†(user_id=å½“å‰ç”¨æˆ·)ï¼Œç®¡ç†å‘˜å¯æŸ¥è¯¢ä»»æ„ç”¨æˆ·ç§¯åˆ†
3. **ç”¨æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: éªŒè¯ç›®æ ‡ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨è¿”å›404é”™è¯¯ï¼Œé˜²æ­¢è‡ªåŠ¨åˆ›å»ºåƒåœ¾è´¦æˆ·
4. **è´¦æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: éªŒè¯ç§¯åˆ†è´¦æˆ·æ˜¯å¦å­˜åœ¨ï¼Œæœªå¼€é€šè´¦æˆ·è¿”å›å‹å¥½æç¤º(å»ºè®®å…ˆæ¶ˆè´¹æˆ–å‚ä¸æ´»åŠ¨)
5. **å®¡è®¡æ—¥å¿—è§„åˆ™**: ç®¡ç†å‘˜æŸ¥è¯¢ä»–äººç§¯åˆ†æ—¶è®°å½•è¯¦ç»†å®¡è®¡æ—¥å¿—(operator_idã€target_user_idã€IPã€user_agentã€æ—¶é—´)
6. **é™æµä¿æŠ¤è§„åˆ™**: é€šè¿‡pointsBalanceByIdRateLimiteré™æµä¸­é—´ä»¶ä¿æŠ¤ï¼Œé˜²æ­¢é¢‘ç¹æŸ¥è¯¢


---

### 4.3 è·å–ç§¯åˆ†äº¤æ˜“å†å² âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/transactions/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·ç§¯åˆ†äº¤æ˜“è®°å½•(æ”¯æŒåˆ†é¡µå’Œç±»å‹ç­›é€‰)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„äº¤æ˜“è®°å½•æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººäº¤æ˜“è®°å½•

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººäº¤æ˜“å†å²æŸ¥çœ‹åœºæ™¯**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†äº¤æ˜“å†å²ï¼Œäº†è§£ç§¯åˆ†è·å¾—å’Œæ¶ˆè€—æ˜ç»†
2. **äº¤æ˜“ç±»å‹ç­›é€‰åœºæ™¯**: æ”¯æŒæŒ‰ç±»å‹ç­›é€‰äº¤æ˜“è®°å½•(earnè·å¾—/consumeæ¶ˆè€—/adjustè°ƒæ•´/refundé€€æ¬¾)
3. **åˆ†é¡µåŠ è½½åœºæ™¯**: äº¤æ˜“è®°å½•è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š100æ¡ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®
4. **ç®¡ç†å‘˜å®¡è®¡åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„äº¤æ˜“å†å²ï¼Œå®¡è®¡ç§¯åˆ†æµæ°´æˆ–å¤„ç†ç”¨æˆ·æŠ•è¯‰
5. **æ•°æ®è¿½æº¯åœºæ™¯**: ç”¨æˆ·å¯¹æŸæ¬¡ç§¯åˆ†å˜åŠ¨æœ‰ç–‘é—®æ—¶ï¼Œé€šè¿‡äº¤æ˜“å†å²è¿½æº¯å…·ä½“çš„äº¤æ˜“è¯¦æƒ…

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°(undefined/null)è¿”å›400é”™è¯¯å¹¶æä¾›å‹å¥½æç¤º
2. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„äº¤æ˜“è®°å½•ï¼Œç®¡ç†å‘˜å¯æŸ¥è¯¢ä»»æ„ç”¨æˆ·äº¤æ˜“è®°å½•
3. **åˆ†é¡µå‚æ•°è§„åˆ™**: é»˜è®¤page=1ï¼Œlimit=20ï¼Œæœ€å¤§limit=100(åŒé‡é˜²æŠ¤ï¼šè·¯ç”±å±‚å’ŒæœåŠ¡å±‚)
4. **ç±»å‹ç­›é€‰è§„åˆ™**: æ”¯æŒtypeå‚æ•°ç­›é€‰äº¤æ˜“ç±»å‹(earn/consume/adjust/refund)ï¼Œä¸ä¼ åˆ™è¿”å›æ‰€æœ‰ç±»å‹
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›å®Œæ•´äº¤æ˜“ä¿¡æ¯(transaction_idã€typeã€amountã€balance_afterã€reasonã€created_at)
6. **æ’åºè§„åˆ™**: æŒ‰äº¤æ˜“æ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„äº¤æ˜“è®°å½•æ’åœ¨æœ€å‰é¢

---

### 4.4 ç®¡ç†å‘˜è°ƒæ•´ç§¯åˆ† âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/points/admin/adjust`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ç®¡ç†å‘˜æ‰‹åŠ¨è°ƒæ•´ç”¨æˆ·ç§¯åˆ†(å¢åŠ æˆ–æ‰£é™¤)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç§¯åˆ†è¡¥å¿åœºæ™¯**: å› ç³»ç»Ÿæ•…éšœæˆ–æ´»åŠ¨å¤±è¯¯ï¼Œç®¡ç†å‘˜ä¸ºç”¨æˆ·è¡¥å¿ç§¯åˆ†
2. **ç§¯åˆ†æ‰£é™¤åœºæ™¯**: å‘ç°ç”¨æˆ·è¿è§„è·å–ç§¯åˆ†ï¼Œç®¡ç†å‘˜æ‰£é™¤è¿è§„ç§¯åˆ†
3. **æ´»åŠ¨å¥–åŠ±å‘æ”¾åœºæ™¯**: çº¿ä¸‹æ´»åŠ¨æˆ–ç‰¹æ®Šæ´»åŠ¨ç»“æŸåï¼Œç®¡ç†å‘˜æ‰‹åŠ¨å‘æ”¾å¥–åŠ±ç§¯åˆ†
4. **ç§¯åˆ†çº é”™åœºæ™¯**: å‘ç°ç§¯åˆ†è®¡ç®—é”™è¯¯ï¼Œç®¡ç†å‘˜è°ƒæ•´ç§¯åˆ†åˆ°æ­£ç¡®æ•°å€¼
5. **æµ‹è¯•è´¦æˆ·ç®¡ç†åœºæ™¯**: æµ‹è¯•ç¯å¢ƒä¸­ç®¡ç†å‘˜ä¸ºæµ‹è¯•è´¦æˆ·è°ƒæ•´ç§¯åˆ†ä¾¿äºæµ‹è¯•

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ‰§è¡Œç§¯åˆ†è°ƒæ•´ï¼Œæ™®é€šç”¨æˆ·å’Œæ™®é€šç®¡ç†å‘˜è¿”å›403é”™è¯¯
2. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼Œamountå¿…é¡»ä¸ºéé›¶æ•°å­—ï¼Œreasonå¿…å¡«
3. **ç”¨æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: éªŒè¯ç›®æ ‡ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨è¿”å›404é”™è¯¯
4. **ä½™é¢éªŒè¯è§„åˆ™**: æ‰£é™¤ç§¯åˆ†å‰éªŒè¯ä½™é¢æ˜¯å¦å……è¶³ï¼Œä¸è¶³æ—¶è¿”å›è¯¦ç»†é”™è¯¯(å½“å‰ä½™é¢ã€éœ€è¦æ‰£é™¤ã€å·®é¢)
5. **å¹‚ç­‰æ€§ä¿æŠ¤è§„åˆ™**: ä½¿ç”¨business_idå®ç°å¹‚ç­‰æ€§ï¼Œé˜²æ­¢ç½‘ç»œé‡è¯•å¯¼è‡´é‡å¤è°ƒæ•´(æ”¯æŒä¼ å…¥request_idæˆ–è‡ªåŠ¨ç”Ÿæˆ)
6. **å®¡è®¡æ—¥å¿—è§„åˆ™**: è®°å½•è¯¦ç»†çš„è°ƒæ•´æ—¥å¿—(æ“ä½œè€…ã€ç›®æ ‡ç”¨æˆ·ã€è°ƒæ•´é‡‘é¢ã€åŸå› ã€è°ƒæ•´å‰åä½™é¢ã€æ—¶é—´)

---

### 4.5 è·å–ç®¡ç†å‘˜ç§¯åˆ†ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/admin/statistics`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç³»ç»Ÿç§¯åˆ†ç»Ÿè®¡ä¿¡æ¯(æ€»å‘æ”¾ã€æ€»æ¶ˆè´¹ã€è´¦æˆ·ç»Ÿè®¡ã€äº¤æ˜“ç»Ÿè®¡)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç³»ç»Ÿè¿è¥æ¦‚è§ˆåœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹ç§¯åˆ†ç³»ç»Ÿæ•´ä½“è¿è¥æ•°æ®ï¼Œäº†è§£ç§¯åˆ†å‘æ”¾å’Œæ¶ˆè€—æƒ…å†µ
2. **è´¢åŠ¡å¯¹è´¦åœºæ™¯**: ç»Ÿè®¡ç³»ç»Ÿç§¯åˆ†è´Ÿå€º(æ€»å¯ç”¨ç§¯åˆ†)ã€ç´¯è®¡å‘æ”¾ã€ç´¯è®¡æ¶ˆè€—ï¼Œç”¨äºè´¢åŠ¡å¯¹è´¦
3. **é£é™©è¯„ä¼°åœºæ™¯**: ç›‘æ§å¼‚å¸¸è´¦æˆ·æ•°é‡ã€å†»ç»“è´¦æˆ·æ¯”ä¾‹ï¼Œè¯„ä¼°ç³»ç»Ÿé£é™©
4. **æ€§èƒ½ç›‘æ§åœºæ™¯**: æŸ¥çœ‹ç»Ÿè®¡æŸ¥è¯¢è€—æ—¶ï¼Œè¶…è¿‡500msæ—¶è®°å½•å‘Šè­¦æ—¥å¿—
5. **æ•°æ®åˆ†æåœºæ™¯**: åˆ†æä»Šæ—¥äº¤æ˜“é‡ã€ä»Šæ—¥å‘æ”¾/æ¶ˆè€—ç§¯åˆ†ï¼Œè¯„ä¼°ç³»ç»Ÿæ´»è·ƒåº¦

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯è®¿é—®ç»Ÿè®¡ä¿¡æ¯ï¼Œæ™®é€šç”¨æˆ·è¿”å›403é”™è¯¯
2. **å¹¶è¡ŒæŸ¥è¯¢è§„åˆ™**: ä½¿ç”¨Promise.allå¹¶è¡Œæ‰§è¡Œ3æ¬¡èšåˆæŸ¥è¯¢(è´¦æˆ·ç»Ÿè®¡ã€äº¤æ˜“ç»Ÿè®¡ã€å¼‚å¸¸ç»Ÿè®¡)ï¼Œä¼˜åŒ–æ€§èƒ½
3. **ç»Ÿè®¡ç»´åº¦è§„åˆ™**: è¿”å›15+ä¸ªç»Ÿè®¡æŒ‡æ ‡(æ€»è´¦æˆ·æ•°ã€æ´»è·ƒè´¦æˆ·æ•°ã€æ€»ä½™é¢ã€ç´¯è®¡å‘æ”¾ã€ç´¯è®¡æ¶ˆè€—ã€ä»Šæ—¥äº¤æ˜“é‡ç­‰)
4. **æ€§èƒ½ç›‘æ§è§„åˆ™**: æŸ¥è¯¢è€—æ—¶è¶…è¿‡500msæ—¶è®°å½•å‘Šè­¦æ—¥å¿—ï¼Œæ­£å¸¸æŸ¥è¯¢è®°å½•æˆåŠŸæ—¥å¿—
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: æ‰€æœ‰ç»Ÿè®¡æ•°æ®ä½¿ç”¨SQLèšåˆå‡½æ•°å®æ—¶è®¡ç®—ï¼Œç¡®ä¿å‡†ç¡®æ€§
6. **ç¼“å­˜ç­–ç•¥è§„åˆ™**: ç»Ÿè®¡æ•°æ®å¯ç¼“å­˜5åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢å‹åŠ›

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 4.6 è·å–ç”¨æˆ·ç§¯åˆ†ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/user/statistics/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·ç§¯åˆ†ç»Ÿè®¡æ•°æ®(å¯ç”¨ç§¯åˆ†ã€ç´¯è®¡è·å¾—ã€ç´¯è®¡æ¶ˆè€—ã€äº¤æ˜“ç»Ÿè®¡)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç»Ÿè®¡

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººæ•°æ®ç»Ÿè®¡åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†ç»Ÿè®¡æ•°æ®ï¼Œäº†è§£ç§¯åˆ†ä½¿ç”¨æƒ…å†µ
2. **ç®¡ç†å‘˜ç”¨æˆ·åˆ†æåœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„ç§¯åˆ†ç»Ÿè®¡ï¼Œåˆ†æç”¨æˆ·æ´»è·ƒåº¦å’Œæ¶ˆè´¹ä¹ æƒ¯
3. **è´¦æˆ·æœªå¼€é€šå¤„ç†åœºæ™¯**: ç”¨æˆ·å­˜åœ¨ä½†æœªå¼€é€šç§¯åˆ†è´¦æˆ·æ—¶ï¼Œè¿”å›é»˜è®¤å€¼(0ç§¯åˆ†)è€Œä¸è‡ªåŠ¨åˆ›å»ºè´¦æˆ·
4. **å‚æ•°å®‰å…¨éªŒè¯åœºæ™¯**: éªŒè¯user_idèŒƒå›´(1-1000000)ï¼Œé˜²æ­¢æšä¸¾æ”»å‡»
5. **æ•°æ®å®Œæ•´æ€§åœºæ™¯**: è¿”å›å®Œæ•´ç»Ÿè®¡ä¿¡æ¯(å¯ç”¨ç§¯åˆ†ã€ç´¯è®¡è·å¾—ã€ç´¯è®¡æ¶ˆè€—ã€è´¦æˆ·åˆ›å»ºæ—¶é—´)

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ä¸”åœ¨1-1000000èŒƒå›´å†…ï¼Œè¶…å‡ºèŒƒå›´è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„ç»Ÿè®¡ï¼Œç®¡ç†å‘˜å¯æŸ¥è¯¢ä»»æ„ç”¨æˆ·ç»Ÿè®¡
3. **ç”¨æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨è¿”å›404é”™è¯¯
4. **è´¦æˆ·å¤„ç†è§„åˆ™**: ç§¯åˆ†è´¦æˆ·ä¸å­˜åœ¨æ—¶è¿”å›é»˜è®¤å€¼(0ç§¯åˆ†)ï¼Œä¸è‡ªåŠ¨åˆ›å»ºè´¦æˆ·
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›available_pointsã€total_earnedã€total_consumedã€account_created_atç­‰å­—æ®µ
6. **å®‰å…¨é˜²æŠ¤è§„åˆ™**: user_idèŒƒå›´æ£€æŸ¥é˜²æ­¢æšä¸¾æ”»å‡»ï¼Œå‚æ•°ç±»å‹éªŒè¯é˜²æ­¢æ³¨å…¥æ”»å‡»

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 4.7 è·å–ç§¯åˆ†æ€»è§ˆ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/overview`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„ç§¯åˆ†æ€»è§ˆä¿¡æ¯(åŒ…æ‹¬å¯ç”¨ç§¯åˆ†ã€å†»ç»“ç§¯åˆ†ã€å†å²ç´¯è®¡ã€å†»ç»“äº¤æ˜“åˆ—è¡¨)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººä¸­å¿ƒç§¯åˆ†æ€»è§ˆåœºæ™¯**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹å®Œæ•´çš„ç§¯åˆ†è´¦æˆ·æ¦‚è§ˆï¼ŒåŒ…æ‹¬å¯ç”¨ã€å†»ç»“ã€ç´¯è®¡è·å¾—ã€ç´¯è®¡æ¶ˆè€—
2. **å†»ç»“ç§¯åˆ†æŸ¥çœ‹åœºæ™¯**: å±•ç¤ºæ‰€æœ‰å†»ç»“ä¸­çš„ç§¯åˆ†äº¤æ˜“è®°å½•ï¼Œç”¨æˆ·äº†è§£å“ªäº›ç§¯åˆ†è¢«å†»ç»“ä»¥åŠåŸå› 
3. **è´¦æˆ·æœªå¼€é€šå¤„ç†åœºæ™¯**: ç§¯åˆ†è´¦æˆ·ä¸å­˜åœ¨æ—¶è¿”å›å‹å¥½æç¤ºå’Œé»˜è®¤å€¼(0ç§¯åˆ†)ï¼Œä¸è‡ªåŠ¨åˆ›å»ºè´¦æˆ·
4. **æ€§èƒ½ç›‘æ§åœºæ™¯**: æŸ¥è¯¢è€—æ—¶è¶…è¿‡500msæ—¶è®°å½•æ…¢æŸ¥è¯¢å‘Šè­¦ï¼Œä¾¿äºæ€§èƒ½ä¼˜åŒ–
5. **æ•°æ®å®Œæ•´æ€§å±•ç¤ºåœºæ™¯**: ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ç§¯åˆ†ç›¸å…³æ•°æ®ï¼Œå‡å°‘å‰ç«¯å¤šæ¬¡è¯·æ±‚

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **ç”¨æˆ·è¯†åˆ«è§„åˆ™**: ä»JWT Tokenä¸­è‡ªåŠ¨è·å–user_idï¼Œæ— éœ€ä¼ å‚
2. **è´¦æˆ·å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: éªŒè¯ç§¯åˆ†è´¦æˆ·æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨è¿”å›404é”™è¯¯å’Œå‹å¥½æç¤º
3. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›available_pointsã€frozen_pointsã€total_earnedã€total_consumedã€frozen_transactionsç­‰å®Œæ•´ä¿¡æ¯
4. **æ€§èƒ½ç›‘æ§è§„åˆ™**: æŸ¥è¯¢è€—æ—¶è¶…è¿‡500msæ—¶è®°å½•æ…¢æŸ¥è¯¢å‘Šè­¦(åŒ…å«user_idã€è€—æ—¶ã€è®°å½•æ•°ã€ä¼˜åŒ–å»ºè®®)
5. **å†»ç»“äº¤æ˜“å±•ç¤ºè§„åˆ™**: è¿”å›æ‰€æœ‰çŠ¶æ€ä¸ºfrozençš„äº¤æ˜“è®°å½•ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•æŸ¥è¯¢æˆåŠŸæ—¥å¿—(user_idã€å¯ç”¨ç§¯åˆ†ã€å†»ç»“ç§¯åˆ†ã€è€—æ—¶)

---

### 4.8 è·å–å†»ç»“ç§¯åˆ†åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/frozen`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„å†»ç»“ç§¯åˆ†æ˜ç»†åˆ—è¡¨(æ”¯æŒåˆ†é¡µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å†»ç»“ç§¯åˆ†æŸ¥è¯¢åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹æ‰€æœ‰è¢«å†»ç»“çš„ç§¯åˆ†äº¤æ˜“è®°å½•ï¼Œäº†è§£å†»ç»“åŸå› å’Œé‡‘é¢
2. **åˆ†é¡µåŠ è½½åœºæ™¯**: å†»ç»“è®°å½•è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®
3. **å†»ç»“åŸå› è¿½æº¯åœºæ™¯**: æŸ¥çœ‹æ¯æ¡å†»ç»“è®°å½•çš„è¯¦ç»†ä¿¡æ¯(é‡‘é¢ã€åŸå› ã€å†»ç»“æ—¶é—´ã€ä¸šåŠ¡ç±»å‹)
4. **æ€§èƒ½ç›‘æ§åœºæ™¯**: æŸ¥è¯¢è€—æ—¶è¶…è¿‡500msæ—¶è®°å½•æ…¢æŸ¥è¯¢å‘Šè­¦
5. **æ•°æ®ç»Ÿè®¡åœºæ™¯**: è¿”å›å†»ç»“è®°å½•æ€»æ•°ï¼Œç”¨æˆ·äº†è§£æœ‰å¤šå°‘ç¬”ç§¯åˆ†è¢«å†»ç»“

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **ç”¨æˆ·è¯†åˆ«è§„åˆ™**: ä»JWT Tokenä¸­è‡ªåŠ¨è·å–user_idï¼Œåªèƒ½æŸ¥çœ‹è‡ªå·±çš„å†»ç»“ç§¯åˆ†
2. **åˆ†é¡µå‚æ•°è§„åˆ™**: é»˜è®¤page=1ï¼Œpage_size=20ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ†é¡µå¤§å°
3. **æ•°æ®è¿‡æ»¤è§„åˆ™**: ä»…è¿”å›çŠ¶æ€ä¸ºfrozençš„äº¤æ˜“è®°å½•
4. **æ’åºè§„åˆ™**: æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„å†»ç»“è®°å½•æ’åœ¨æœ€å‰é¢
5. **æ€§èƒ½ç›‘æ§è§„åˆ™**: æŸ¥è¯¢è€—æ—¶è¶…è¿‡500msæ—¶è®°å½•æ…¢æŸ¥è¯¢å‘Šè­¦(åŒ…å«user_idã€åˆ†é¡µå‚æ•°ã€è®°å½•æ•°ã€ä¼˜åŒ–å»ºè®®)
6. **é”™è¯¯æ—¥å¿—è§„åˆ™**: æŸ¥è¯¢å¤±è´¥æ—¶è®°å½•å®Œæ•´é”™è¯¯å †æ ˆå’Œè¯·æ±‚å‚æ•°ï¼Œä¾¿äºé—®é¢˜å®šä½

---

### 4.9 è·å–ç§¯åˆ†è¶‹åŠ¿ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/trend`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·ç§¯åˆ†å˜åŒ–è¶‹åŠ¿(æŒ‰å¤©ç»Ÿè®¡ï¼Œæ”¯æŒ7-90å¤©æŸ¥è¯¢)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç§¯åˆ†è¶‹åŠ¿åˆ†æåœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹è¿‘æœŸç§¯åˆ†å˜åŒ–è¶‹åŠ¿ï¼Œäº†è§£ç§¯åˆ†è·å¾—å’Œæ¶ˆè€—çš„æ—¶é—´åˆ†å¸ƒ
2. **è‡ªå®šä¹‰æ—¶é—´èŒƒå›´åœºæ™¯**: æ”¯æŒæŸ¥è¯¢7-90å¤©çš„ç§¯åˆ†è¶‹åŠ¿ï¼Œé»˜è®¤30å¤©(å¸¸ç”¨å€¼ï¼š7å¤©/30å¤©/90å¤©)
3. **å†å²æ•°æ®æŸ¥è¯¢åœºæ™¯**: æ”¯æŒæŒ‡å®šç»“æŸæ—¥æœŸ(end_date)æŸ¥çœ‹å†å²è¶‹åŠ¿ï¼Œé»˜è®¤æŸ¥è¯¢åˆ°ä»Šå¤©
4. **æ—¥æœŸå‚æ•°éªŒè¯åœºæ™¯**: ä¸¥æ ¼éªŒè¯æ—¥æœŸæ ¼å¼(YYYY-MM-DD)å’Œåˆæ³•æ€§ï¼Œæ‹’ç»æœªæ¥æ—¥æœŸå’Œæ— æ•ˆæ ¼å¼
5. **é™æµä¿æŠ¤åœºæ™¯**: é€šè¿‡trendRateLimiteré™æµä¸­é—´ä»¶ä¿æŠ¤ï¼Œé˜²æ­¢é¢‘ç¹æŸ¥è¯¢

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **ç”¨æˆ·è¯†åˆ«è§„åˆ™**: ä»JWT Tokenä¸­è‡ªåŠ¨è·å–user_idï¼Œåªèƒ½æŸ¥çœ‹è‡ªå·±çš„ç§¯åˆ†è¶‹åŠ¿
2. **å¤©æ•°èŒƒå›´è§„åˆ™**: dayså‚æ•°èŒƒå›´7-90å¤©ï¼Œè¶…å‡ºè‡ªåŠ¨ä¿®æ­£(å°äº7å¤©ä¿®æ­£ä¸º7å¤©ï¼Œå¤§äº90å¤©ä¿®æ­£ä¸º90å¤©)
3. **æ—¥æœŸéªŒè¯è§„åˆ™**: end_dateå¿…é¡»ä¸ºæœ‰æ•ˆæ—¥æœŸæ ¼å¼(YYYY-MM-DD)ï¼Œä¸”ä¸èƒ½è¶…è¿‡ä»Šå¤©
4. **æ—¥æœŸèŒƒå›´è®¡ç®—è§„åˆ™**: å¼€å§‹æ—¥æœŸ=ç»“æŸæ—¥æœŸ-days+1å¤©ï¼ŒåŒ…å«ç»“æŸæ—¥æœŸå½“å¤©(ä¾‹å¦‚30å¤©æŸ¥è¯¢åŒ…å«èµ·æ­¢æ—¥æœŸå…±30å¤©)
5. **æ—¶é—´èŒƒå›´è§„åˆ™**: å¼€å§‹æ—¥æœŸä»00:00:00å¼€å§‹ï¼Œç»“æŸæ—¥æœŸåˆ°23:59:59.999ç»“æŸ
6. **é™æµä¿æŠ¤è§„åˆ™**: é€šè¿‡trendRateLimiteré™æµä¸­é—´ä»¶ä¿æŠ¤ï¼Œé˜²æ­¢é¢‘ç¹æŸ¥è¯¢å¯¼è‡´æ•°æ®åº“å‹åŠ›

---

### 4.10 åˆ é™¤/éšè—äº¤æ˜“è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `DELETE /api/v4/points/transaction/:transaction_id`
**HTTPæ–¹æ³•**: DELETE
**æè¿°**: è½¯åˆ é™¤äº¤æ˜“è®°å½•(ä»…éšè—ï¼Œä¸å®é™…åˆ é™¤ï¼Œæ”¯æŒæ¢å¤)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ç”¨æˆ·å¯åˆ é™¤è‡ªå·±çš„éƒ¨åˆ†è®°å½•ï¼Œç®¡ç†å‘˜å¯åˆ é™¤ä»»æ„è®°å½•

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·åˆ é™¤å¤±è´¥è®°å½•åœºæ™¯**: ç”¨æˆ·åˆ é™¤è‡ªå·±çš„å¾…å¤„ç†(pending)ã€å¤±è´¥(failed)ã€å·²å–æ¶ˆ(cancelled)çš„äº¤æ˜“è®°å½•
2. **ç®¡ç†å‘˜åˆ é™¤å¼‚å¸¸è®°å½•åœºæ™¯**: ç®¡ç†å‘˜åˆ é™¤ä»»æ„çŠ¶æ€çš„äº¤æ˜“è®°å½•ï¼Œå¿…é¡»å¡«å†™åˆ é™¤åŸå› (è‡³å°‘5ä¸ªå­—ç¬¦)
3. **é€€æ¬¾è®°å½•ä¿æŠ¤åœºæ™¯**: é€€æ¬¾è®°å½•ä¸å…è®¸ç”¨æˆ·åˆ é™¤(å³ä½¿æ˜¯failedçŠ¶æ€)ï¼Œåªèƒ½ç”±ç®¡ç†å‘˜åˆ é™¤
4. **å·²å®Œæˆè®°å½•ä¿æŠ¤åœºæ™¯**: å·²å®Œæˆ(completed)çš„äº¤æ˜“è®°å½•ç”¨æˆ·æ— æ³•åˆ é™¤ï¼Œéœ€è”ç³»ç®¡ç†å‘˜å¤„ç†
5. **å¹¶å‘å®‰å…¨åœºæ™¯**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡å’Œè¡Œé”ï¼Œé˜²æ­¢å¹¶å‘åˆ é™¤å¯¼è‡´æ•°æ®ä¸ä¸€è‡´

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: transaction_idå¿…é¡»ä¸ºæœ‰æ•ˆæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½åˆ é™¤è‡ªå·±çš„è®°å½•(user_idåŒ¹é…)ï¼Œç®¡ç†å‘˜å¯åˆ é™¤ä»»æ„è®°å½•
3. **çŠ¶æ€é™åˆ¶è§„åˆ™**: ç”¨æˆ·åªèƒ½åˆ é™¤pending/failed/cancelledçŠ¶æ€çš„è®°å½•ï¼Œcompletedè®°å½•éœ€ç®¡ç†å‘˜å¤„ç†
4. **é€€æ¬¾ä¿æŠ¤è§„åˆ™**: é€€æ¬¾è®°å½•(transaction_type=refund)ä¸å…è®¸ç”¨æˆ·åˆ é™¤ï¼Œåªèƒ½ç”±ç®¡ç†å‘˜åˆ é™¤
5. **ç®¡ç†å‘˜åŸå› è§„åˆ™**: ç®¡ç†å‘˜åˆ é™¤è®°å½•å¿…é¡»å¡«å†™deletion_reason(è‡³å°‘5ä¸ªå­—ç¬¦)
6. **è½¯åˆ é™¤è§„åˆ™**: è®¾ç½®is_deleted=1ï¼Œä¸å®é™…åˆ é™¤æ•°æ®ï¼Œæ”¯æŒåç»­æ¢å¤


---

### 4.11 æ¢å¤äº¤æ˜“è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/points/transaction/:transaction_id/restore`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ¢å¤å·²åˆ é™¤çš„äº¤æ˜“è®°å½•(ä»…ç®¡ç†å‘˜å¯æ“ä½œ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **è¯¯åˆ æ¢å¤åœºæ™¯**: ç®¡ç†å‘˜è¯¯åˆ äº¤æ˜“è®°å½•åï¼Œé€šè¿‡æ­¤æ¥å£æ¢å¤è®°å½•
2. **å®¡è®¡æ¢å¤åœºæ™¯**: å®¡è®¡å‘ç°æŸæ¡è®°å½•è¢«é”™è¯¯åˆ é™¤ï¼Œç®¡ç†å‘˜æ¢å¤è®°å½•å¹¶è®°å½•æ¢å¤åŸå› 
3. **å¹‚ç­‰æ€§å¤„ç†åœºæ™¯**: è®°å½•å·²å¤„äºæ­£å¸¸çŠ¶æ€æ—¶ï¼Œè¿”å›æˆåŠŸå“åº”(å¹‚ç­‰)ï¼Œæ— éœ€é‡å¤æ¢å¤
4. **æ¢å¤æ¬¡æ•°é™åˆ¶åœºæ™¯**: å•æ¡è®°å½•æœ€å¤šæ¢å¤10æ¬¡ï¼Œé˜²æ­¢æ»¥ç”¨
5. **å®¡è®¡æ—¥å¿—è®°å½•åœºæ™¯**: è®°å½•å®Œæ•´çš„æ¢å¤å®¡è®¡æ—¥å¿—(ç®¡ç†å‘˜IDã€æ¢å¤åŸå› ã€æ¢å¤æ—¶é—´ã€IP)

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ¢å¤äº¤æ˜“è®°å½•ï¼Œé€šè¿‡requireAdminä¸­é—´ä»¶éªŒè¯
2. **å‚æ•°éªŒè¯è§„åˆ™**: transaction_idå¿…é¡»ä¸ºæœ‰æ•ˆæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
3. **è®°å½•æŸ¥è¯¢è§„åˆ™**: ä½¿ç”¨scope('includeDeleted')æŸ¥è¯¢åŒ…å«å·²åˆ é™¤è®°å½•çš„æ‰€æœ‰è®°å½•
4. **å¹‚ç­‰æ€§è§„åˆ™**: è®°å½•å·²å¤„äºæ­£å¸¸çŠ¶æ€(is_deleted=0)æ—¶ï¼Œè¿”å›æˆåŠŸå“åº”ï¼Œæ— éœ€é‡å¤æ¢å¤
5. **æ¢å¤æ¬¡æ•°é™åˆ¶è§„åˆ™**: å•æ¡è®°å½•æœ€å¤šæ¢å¤10æ¬¡(restore_count<10)ï¼Œè¶…è¿‡é™åˆ¶æ‹’ç»æ¢å¤
6. **å®¡è®¡æ—¥å¿—è§„åˆ™**: è®°å½•å®Œæ•´çš„æ¢å¤å®¡è®¡æ—¥å¿—åˆ°PointsRestoreAuditè¡¨(transaction_idã€admin_idã€reasonã€restore_timeã€ip)


---

### 4.12 æŸ¥è¯¢ç§¯åˆ†æ¢å¤å®¡è®¡è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/points/restore-audit`
**HTTPæ–¹æ³•**: GET
**æè¿°**: æŸ¥è¯¢ç§¯åˆ†äº¤æ˜“è®°å½•çš„æ¢å¤å®¡è®¡æ—¥å¿—(æ”¯æŒå¤šç»´åº¦ç­›é€‰å’Œåˆ†é¡µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **æ¢å¤æ“ä½œå®¡è®¡åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰äº¤æ˜“è®°å½•æ¢å¤æ“ä½œçš„å®¡è®¡æ—¥å¿—ï¼Œè¿½è¸ªè°åœ¨ä»€ä¹ˆæ—¶å€™æ¢å¤äº†å“ªäº›è®°å½•
2. **ç”¨æˆ·ç»´åº¦ç­›é€‰åœºæ™¯**: æŒ‰user_idç­›é€‰ï¼ŒæŸ¥çœ‹ç‰¹å®šç”¨æˆ·çš„äº¤æ˜“è®°å½•æ¢å¤å†å²
3. **ç®¡ç†å‘˜ç»´åº¦ç­›é€‰åœºæ™¯**: æŒ‰admin_idç­›é€‰ï¼ŒæŸ¥çœ‹ç‰¹å®šç®¡ç†å‘˜æ‰§è¡Œçš„æ‰€æœ‰æ¢å¤æ“ä½œ
4. **æ—¶é—´èŒƒå›´ç­›é€‰åœºæ™¯**: æŒ‰start_dateå’Œend_dateç­›é€‰ï¼ŒæŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µå†…çš„æ¢å¤æ“ä½œ
5. **åˆ†é¡µåŠ è½½åœºæ™¯**: å®¡è®¡è®°å½•è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š100æ¡

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯è®¿é—®å®¡è®¡æ—¥å¿—ï¼Œé€šè¿‡requireAdminä¸­é—´ä»¶éªŒè¯
2. **ç­›é€‰æ¡ä»¶è§„åˆ™**: æ”¯æŒuser_idã€admin_idã€start_dateã€end_dateå¤šç»´åº¦ç­›é€‰ï¼Œæ‰€æœ‰å‚æ•°å¯é€‰
3. **æ—¶é—´èŒƒå›´è§„åˆ™**: start_dateä»00:00:00å¼€å§‹ï¼Œend_dateåˆ°23:59:59.999ç»“æŸ(åŒ—äº¬æ—¶é—´)
4. **åˆ†é¡µå‚æ•°è§„åˆ™**: é»˜è®¤page=1ï¼Œlimit=20ï¼Œæœ€å¤§limit=100(é˜²æ­¢ä¸€æ¬¡æŸ¥è¯¢è¿‡å¤šæ•°æ®)
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›transaction_idã€user_idã€transaction_typeã€points_amountã€restored_byã€restored_atã€restore_reasonç­‰å®Œæ•´ä¿¡æ¯
6. **æ’åºè§„åˆ™**: æŒ‰æ¢å¤æ—¶é—´(restored_at)å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„æ¢å¤æ“ä½œæ’åœ¨æœ€å‰é¢

---


**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥è¯¢ç›¸å…³æ•°æ®ä¿¡æ¯
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: **æƒé™è¦æ±‚**: è®°å½•æ‰€æœ‰è€…æˆ–ç®¡ç†å‘˜
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…æ•°æ®åº“è¿‡è½½

---

### 5.1 è·å–ç”¨æˆ·åº“å­˜åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/user/:user_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æŒ‡å®šç”¨æˆ·çš„åº“å­˜ç‰©å“åˆ—è¡¨(æ”¯æŒçŠ¶æ€å’Œç±»å‹ç­›é€‰ã€åˆ†é¡µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„åº“å­˜æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººåº“å­˜

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººåº“å­˜æŸ¥çœ‹åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„æ‰€æœ‰åº“å­˜ç‰©å“ï¼Œäº†è§£æ‹¥æœ‰å“ªäº›å¥–å“æˆ–å•†å“
2. **çŠ¶æ€ç­›é€‰åœºæ™¯**: æŒ‰statusç­›é€‰(availableå¯ç”¨/usedå·²ä½¿ç”¨/expiredå·²è¿‡æœŸ/lockedå·²é”å®š)
3. **ç±»å‹ç­›é€‰åœºæ™¯**: æŒ‰typeç­›é€‰ç‰©å“ç±»å‹(prizeå¥–å“/productå•†å“/couponä¼˜æƒ åˆ¸)
4. **ç®¡ç†å‘˜å®¡è®¡åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„åº“å­˜ï¼Œå¤„ç†ç”¨æˆ·å’¨è¯¢æˆ–æŠ•è¯‰
5. **åˆ†é¡µåŠ è½½åœºæ™¯**: åº“å­˜ç‰©å“è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š50æ¡

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: user_idå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°(NaN/0/è´Ÿæ•°)è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„åº“å­˜(user_id=å½“å‰ç”¨æˆ·)ï¼Œç®¡ç†å‘˜(role_level>=100)å¯æŸ¥è¯¢ä»»æ„ç”¨æˆ·
3. **å®¡è®¡æ—¥å¿—è§„åˆ™**: ç®¡ç†å‘˜æŸ¥è¯¢ä»–äººåº“å­˜æ—¶è®°å½•å®¡è®¡æ—¥å¿—(admin_idã€target_user_idã€query_time)
4. **åˆ†é¡µå‚æ•°è§„åˆ™**: limitèŒƒå›´1-50ï¼Œé»˜è®¤20ï¼Œé˜²æ­¢NaN/0/è´Ÿæ•°å¯¼è‡´æŸ¥è¯¢å¤±è´¥
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›inventory_idã€nameã€descriptionã€iconã€typeã€statusã€quantityã€created_atç­‰å®Œæ•´å­—æ®µ
6. **æ’åºè§„åˆ™**: æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°è·å¾—çš„ç‰©å“æ’åœ¨æœ€å‰é¢

---

### 5.2 è·å–åº“å­˜ç‰©å“è¯¦æƒ… âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/item/:item_id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–æŒ‡å®šåº“å­˜ç‰©å“çš„è¯¦ç»†ä¿¡æ¯(åŒ…æ‹¬ç‰©å“å±æ€§ã€æ‰€å±ç”¨æˆ·ä¿¡æ¯)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: æŸ¥çœ‹è‡ªå·±çš„ç‰©å“æˆ–ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç‰©å“

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç‰©å“è¯¦æƒ…æŸ¥çœ‹åœºæ™¯**: ç”¨æˆ·ç‚¹å‡»åº“å­˜ç‰©å“æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯(åç§°ã€æè¿°ã€å›¾æ ‡ã€ç±»å‹ã€çŠ¶æ€ã€æ•°é‡ã€æœ‰æ•ˆæœŸ)
2. **ç®¡ç†å‘˜å®¡è®¡åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹ä»»æ„ç”¨æˆ·çš„ç‰©å“è¯¦æƒ…ï¼Œå¤„ç†ç”¨æˆ·å’¨è¯¢æˆ–æŠ•è¯‰
3. **æ‰€å±ç”¨æˆ·ä¿¡æ¯åœºæ™¯**: è¿”å›ç‰©å“æ‰€å±ç”¨æˆ·ä¿¡æ¯(user_idã€nickname)ï¼Œä¿æŠ¤éšç§ä¸è¿”å›æ‰‹æœºå·
4. **å®¡è®¡æ—¥å¿—è®°å½•åœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç‰©å“æ—¶è®°å½•å®¡è®¡æ—¥å¿—(admin_idã€target_user_idã€item_idã€item_nameã€æ—¶é—´)
5. **å›¾æ ‡é»˜è®¤å€¼åœºæ™¯**: ç‰©å“æ²¡æœ‰å›¾æ ‡æ—¶è‡ªåŠ¨è®¾ç½®é»˜è®¤å›¾æ ‡ï¼Œç¡®ä¿å‰ç«¯æ˜¾ç¤ºæ­£å¸¸

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ç‰©å“(user_id=å½“å‰ç”¨æˆ·)ï¼Œç®¡ç†å‘˜(role_level>=100)å¯æŸ¥çœ‹ä»»æ„ç‰©å“
2. **æŸ¥è¯¢æ¡ä»¶è§„åˆ™**: æ™®é€šç”¨æˆ·æŸ¥è¯¢æ—¶æ·»åŠ user_idé™åˆ¶ï¼Œç®¡ç†å‘˜æŸ¥è¯¢æ—¶ä¸é™åˆ¶user_id
3. **éšç§ä¿æŠ¤è§„åˆ™**: è¿”å›ç”¨æˆ·ä¿¡æ¯æ—¶åªåŒ…å«user_idå’Œnicknameï¼Œä¸è¿”å›mobileç­‰æ•æ„Ÿä¿¡æ¯
4. **å®¡è®¡æ—¥å¿—è§„åˆ™**: ç®¡ç†å‘˜æŸ¥çœ‹ä»–äººç‰©å“æ—¶è®°å½•è¯¦ç»†å®¡è®¡æ—¥å¿—(admin_idã€target_user_idã€item_idã€item_nameã€query_time)
5. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›å®Œæ•´ç‰©å“ä¿¡æ¯(inventory_idã€nameã€descriptionã€iconã€typeã€statusã€quantityã€expires_atã€userä¿¡æ¯)
6. **é»˜è®¤å€¼å¤„ç†è§„åˆ™**: iconå­—æ®µä¸ºç©ºæ—¶è®¾ç½®é»˜è®¤å›¾æ ‡ï¼Œç¡®ä¿å‰ç«¯æ˜¾ç¤ºä¸å‡ºé”™

---

### 5.3 ä½¿ç”¨åº“å­˜ç‰©å“ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/use/:item_id`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ä½¿ç”¨åº“å­˜ä¸­çš„ç‰©å“ï¼Œå°†ç‰©å“çŠ¶æ€ä»"å¯ç”¨"æ ‡è®°ä¸º"å·²ä½¿ç”¨"
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç‰©å“æ‰€æœ‰è€…å¯ä½¿ç”¨è‡ªå·±çš„ç‰©å“

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **è™šæ‹Ÿç‰©å“ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·ä½¿ç”¨è™šæ‹Ÿç‰©å“(å¦‚ç§¯åˆ†åŠ æˆå¡ã€ç»éªŒåŠ é€Ÿå¡)ï¼Œç³»ç»Ÿæ ‡è®°ä¸ºå·²ä½¿ç”¨
2. **ä¼˜æƒ åˆ¸æ ¸é”€åœºæ™¯**: ç”¨æˆ·åœ¨çº¿ä¸Šä½¿ç”¨ä¼˜æƒ åˆ¸ï¼Œç³»ç»Ÿè‡ªåŠ¨æ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼Œå¯é€‰ä¼ å…¥verification_code
3. **ç¤¼å“å¡æ¿€æ´»åœºæ™¯**: ç”¨æˆ·æ¿€æ´»ç¤¼å“å¡ï¼Œå…‘æ¢ç›¸åº”çš„ç§¯åˆ†æˆ–æƒç›Š
4. **è‡ªåŠ¨è¿‡æœŸå¤„ç†åœºæ™¯**: ç‰©å“è¶…è¿‡expires_atæ—¶é—´åè‡ªåŠ¨æ ‡è®°ä¸ºè¿‡æœŸï¼Œä¸å¯ä½¿ç”¨
5. **æ ¸é”€ç è¿‡æœŸæ£€æŸ¥åœºæ™¯**: æ ¸é”€ç æœ‰24å°æ—¶æœ‰æ•ˆæœŸï¼Œè¶…è¿‡verification_expires_atåæ— æ³•ä½¿ç”¨

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ‰€æœ‰æƒéªŒè¯è§„åˆ™**: æ·»åŠ user_idéªŒè¯ï¼Œé˜²æ­¢ç”¨æˆ·Aä½¿ç”¨ç”¨æˆ·Bçš„ç‰©å“
2. **çŠ¶æ€éªŒè¯è§„åˆ™**: åªæœ‰availableçŠ¶æ€çš„ç‰©å“å¯ä½¿ç”¨ï¼Œused/expired/transferredçŠ¶æ€è¿”å›400é”™è¯¯
3. **è¿‡æœŸæ£€æŸ¥è§„åˆ™**: ç‰©å“è¶…è¿‡expires_atæ—¶é—´åè‡ªåŠ¨æ›´æ–°ä¸ºexpiredçŠ¶æ€ï¼Œä¸å¯ä½¿ç”¨
4. **æ ¸é”€ç éªŒè¯è§„åˆ™**: å¦‚ä¼ å…¥verification_codeï¼ŒéªŒè¯æ ¸é”€ç æ˜¯å¦åŒ¹é…ä¸”æœªè¿‡æœŸ(24å°æ—¶æœ‰æ•ˆæœŸ)
5. **ä½¿ç”¨è®°å½•è§„åˆ™**: æ›´æ–°ç‰©å“çŠ¶æ€ä¸ºusedï¼Œè®°å½•used_atæ—¶é—´å’Œä½¿ç”¨è€…ä¿¡æ¯
6. **é™æµä¿æŠ¤è§„åˆ™**: æ¯åˆ†é’Ÿæœ€å¤š20æ¬¡ä½¿ç”¨æ“ä½œï¼Œé˜²æ­¢æ¶æ„åˆ·æ¥å£

---

### 5.4 è·å–ç®¡ç†å‘˜åº“å­˜ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/admin/statistics`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç³»ç»Ÿåº“å­˜ç»Ÿè®¡ä¿¡æ¯(æ€»æ•°ã€å„çŠ¶æ€æ•°é‡ã€ç±»å‹åˆ†å¸ƒã€æœ€è¿‘ç‰©å“)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç³»ç»Ÿè¿è¥æ¦‚è§ˆåœºæ™¯**: ç®¡ç†å‘˜æŸ¥çœ‹åº“å­˜ç³»ç»Ÿæ•´ä½“è¿è¥æ•°æ®ï¼Œäº†è§£ç‰©å“åˆ†å¸ƒå’Œä½¿ç”¨æƒ…å†µ
2. **çŠ¶æ€ç»Ÿè®¡åœºæ™¯**: ç»Ÿè®¡5ç§çŠ¶æ€ç‰©å“æ•°é‡(availableå¯ç”¨ã€usedå·²ä½¿ç”¨ã€expiredå·²è¿‡æœŸã€transferredå·²è½¬è®©ã€pendingå¾…å¤„ç†)
3. **ç±»å‹åˆ†å¸ƒåˆ†æåœºæ™¯**: æŒ‰typeå’Œiconåˆ†ç»„ç»Ÿè®¡ï¼Œåˆ†æä¸åŒç±»å‹ç‰©å“çš„åˆ†å¸ƒæƒ…å†µ
4. **æœ€è¿‘ç‰©å“æŸ¥çœ‹åœºæ™¯**: æŸ¥çœ‹æœ€è¿‘åˆ›å»ºçš„10ä¸ªç‰©å“ï¼Œäº†è§£æœ€æ–°å‘æ”¾çš„å¥–å“æˆ–å•†å“
5. **å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–åœºæ™¯**: ä½¿ç”¨Promise.allå¹¶è¡Œæ‰§è¡Œ8ä¸ªç‹¬ç«‹æŸ¥è¯¢ï¼Œæ¯”ä¸²è¡Œå¿«70%

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯è®¿é—®ç»Ÿè®¡ä¿¡æ¯ï¼Œé€šè¿‡requireAdminä¸­é—´ä»¶éªŒè¯
2. **å¹¶è¡ŒæŸ¥è¯¢è§„åˆ™**: ä½¿ç”¨Promise.allå¹¶è¡Œæ‰§è¡Œ8ä¸ªç‹¬ç«‹æŸ¥è¯¢(æ€»æ•°ã€5ç§çŠ¶æ€ã€ç±»å‹åˆ†å¸ƒã€æœ€è¿‘ç‰©å“)
3. **çŠ¶æ€å®Œæ•´æ€§è§„åˆ™**: ç»Ÿè®¡æ‰€æœ‰5ç§çŠ¶æ€(availableã€usedã€expiredã€transferredã€pending)
4. **ç±»å‹åˆ†ç»„è§„åˆ™**: æŒ‰typeå’Œiconåˆ†ç»„ç»Ÿè®¡ï¼Œè¿”å›æ¯ç§ç±»å‹çš„æ•°é‡
5. **æœ€è¿‘ç‰©å“è§„åˆ™**: è¿”å›æœ€è¿‘åˆ›å»ºçš„10ä¸ªç‰©å“ï¼ŒæŒ‰created_atå€’åºæ’åˆ—
6. **æ•°æ®å®Œæ•´æ€§è§„åˆ™**: è¿”å›totalItemsã€availableItemsã€usedItemsã€expiredItemsã€transferredItemsã€pendingItemsã€typeStatsã€recentItems

---

### 5.5 ç”Ÿæˆæ ¸é”€ç  âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/generate-code/:item_id`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ä¸ºåº“å­˜ç‰©å“ç”Ÿæˆæ ¸é”€ç (ç”¨äºå•†å®¶æ‰«ç æ ¸é”€)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç‰©å“æ‰€æœ‰è€…å¯ç”Ÿæˆè‡ªå·±ç‰©å“çš„æ ¸é”€ç 

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·ç”Ÿæˆæ ¸é”€ç åœºæ™¯**: ç”¨æˆ·åœ¨åˆ°åº—æ¶ˆè´¹å‰ç”Ÿæˆæ ¸é”€ç ï¼Œå•†å®¶æ‰«ç æ ¸é”€
2. **åŠ å¯†å®‰å…¨éšæœºæ•°åœºæ™¯**: ä½¿ç”¨crypto.randomBytes()ç”Ÿæˆ8ä½åŠ å¯†å®‰å…¨éšæœºæ•°(ä¼˜äºMath.random())
3. **å”¯ä¸€æ€§ä¿è¯åœºæ™¯**: whileå¾ªç¯æŸ¥è¯¢æ•°æ®åº“éªŒè¯æ ¸é”€ç ä¸é‡å¤ï¼Œç¡®ä¿100%å”¯ä¸€æ€§
4. **è‡ªåŠ¨è¿‡æœŸè®¾ç½®åœºæ™¯**: æ ¸é”€ç æœ‰24å°æ—¶æœ‰æ•ˆæœŸï¼Œè‡ªåŠ¨è®¾ç½®verification_expires_at(åŒ—äº¬æ—¶é—´)
5. **çŠ¶æ€éªŒè¯åœºæ™¯**: åªæœ‰availableçŠ¶æ€çš„ç‰©å“å¯ç”Ÿæˆæ ¸é”€ç ï¼Œå…¶ä»–çŠ¶æ€è¿”å›400é”™è¯¯

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ‰€æœ‰æƒéªŒè¯è§„åˆ™**: éªŒè¯ç‰©å“å±äºå½“å‰ç”¨æˆ·(user_idåŒ¹é…)ï¼Œé˜²æ­¢ä¸ºä»–äººç‰©å“ç”Ÿæˆæ ¸é”€ç 
2. **çŠ¶æ€éªŒè¯è§„åˆ™**: åªæœ‰availableçŠ¶æ€å¯ç”Ÿæˆæ ¸é”€ç ï¼Œused/expired/transferredçŠ¶æ€è¿”å›400é”™è¯¯
3. **å”¯ä¸€æ€§ä¿è¯è§„åˆ™**: ä½¿ç”¨whileå¾ªç¯æŸ¥è¯¢æ•°æ®åº“ï¼Œç¡®ä¿ç”Ÿæˆçš„æ ¸é”€ç ä¸é‡å¤
4. **åŠ å¯†å®‰å…¨è§„åˆ™**: ä½¿ç”¨crypto.randomBytes()ç”ŸæˆåŠ å¯†å®‰å…¨éšæœºæ•°ï¼Œä¸ä½¿ç”¨Math.random()
5. **è¿‡æœŸæ—¶é—´è§„åˆ™**: æ ¸é”€ç æœ‰24å°æ—¶æœ‰æ•ˆæœŸï¼Œè‡ªåŠ¨è®¾ç½®verification_expires_atä¸ºå½“å‰æ—¶é—´+24å°æ—¶(åŒ—äº¬æ—¶é—´)
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•ç”ŸæˆæˆåŠŸæ—¥å¿—(item_idã€user_idã€verification_codeã€expires_at)

---

### 5.6 è·å–å•†å“åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/products`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å¯å…‘æ¢çš„å•†å“åˆ—è¡¨(æ”¯æŒç©ºé—´ã€åˆ†ç±»ç­›é€‰å’Œåˆ†é¡µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å•†å“æµè§ˆåœºæ™¯**: ç”¨æˆ·æµè§ˆå¯å…‘æ¢çš„å•†å“åˆ—è¡¨ï¼Œé€‰æ‹©æƒ³è¦å…‘æ¢çš„å•†å“
2. **ç©ºé—´ç­›é€‰åœºæ™¯**: æŒ‰spaceç­›é€‰(luckyå¹¸è¿ç©ºé—´/premiumé«˜çº§ç©ºé—´/bothä¸¤è€…éƒ½æœ‰/allå…¨éƒ¨)
3. **åˆ†ç±»ç­›é€‰åœºæ™¯**: æŒ‰categoryç­›é€‰å•†å“åˆ†ç±»ï¼Œä¸ä¼ æˆ–ä¼ allåˆ™è¿”å›æ‰€æœ‰åˆ†ç±»
4. **åˆ†é¡µåŠ è½½åœºæ™¯**: å•†å“è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š50æ¡
5. **æ•°æ®è„±æ•åœºæ™¯**: æ™®é€šç”¨æˆ·è¿”å›publicçº§åˆ«æ•°æ®ï¼Œç®¡ç†å‘˜è¿”å›fullçº§åˆ«æ•°æ®

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°ç™½åå•è§„åˆ™**: spaceå‚æ•°å¿…é¡»åœ¨['lucky', 'premium', 'both', 'all']ç™½åå•å†…ï¼Œæ— æ•ˆå€¼è¿”å›400é”™è¯¯
2. **çŠ¶æ€è¿‡æ»¤è§„åˆ™**: åªè¿”å›status='active'çš„å•†å“ï¼Œä¸‹æ¶å•†å“ä¸æ˜¾ç¤º
3. **ç©ºé—´è¿‡æ»¤è§„åˆ™**: space='all'æ—¶è¿”å›æ‰€æœ‰ç©ºé—´å•†å“ï¼Œå…¶ä»–å€¼è¿”å›åŒ¹é…spaceæˆ–space='both'çš„å•†å“
4. **åˆ†é¡µå‚æ•°è§„åˆ™**: limitèŒƒå›´1-50ï¼Œé»˜è®¤20ï¼Œpage>=1ï¼Œç¡®ä¿å‚æ•°å®‰å…¨
5. **æ’åºè§„åˆ™**: æŒ‰sort_orderå‡åºã€created_até™åºæ’åˆ—
6. **æ•°æ®è„±æ•è§„åˆ™**: æ ¹æ®ç”¨æˆ·æƒé™è¿”å›ä¸åŒçº§åˆ«æ•°æ®(æ™®é€šç”¨æˆ·publicï¼Œç®¡ç†å‘˜full)

---

### 5.7 å•†å“å…‘æ¢ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/transfer`
**HTTPæ–¹æ³•**: POST
**æè¿°**: å°†åº“å­˜ç‰©å“è½¬è®©ç»™å…¶ä»–ç”¨æˆ·(æ”¯æŒè½¬è®©å¤‡æ³¨å’Œæ¬¡æ•°é™åˆ¶)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç‰©å“æ‰€æœ‰è€…å¯è½¬è®©è‡ªå·±çš„ç‰©å“

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·é—´è½¬è®©åœºæ™¯**: ç”¨æˆ·å°†è‡ªå·±çš„åº“å­˜ç‰©å“è½¬è®©ç»™å…¶ä»–ç”¨æˆ·(å¦‚æœ‹å‹ã€å®¶äºº)
2. **è½¬è®©é™åˆ¶åœºæ™¯**: ç‰©å“æœ€å¤šè½¬è®©3æ¬¡ï¼Œè¶…è¿‡æ¬¡æ•°é™åˆ¶æ— æ³•ç»§ç»­è½¬è®©
3. **ä¸å¯è½¬è®©ç‰©å“åœºæ™¯**: can_transfer=falseçš„ç‰©å“ä¸æ”¯æŒè½¬è®©ï¼Œè¿”å›400é”™è¯¯
4. **è¿‡æœŸæ£€æŸ¥åœºæ™¯**: è½¬è®©å‰æ£€æŸ¥ç‰©å“æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸç‰©å“è‡ªåŠ¨æ ‡è®°ä¸ºexpiredçŠ¶æ€
5. **äº‹åŠ¡ä¿è¯åœºæ™¯**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ç‰©å“è½¬ç§»å’Œå†å²è®°å½•çš„åŸå­æ€§

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: item_idå’Œtarget_user_idå¿…å¡«ï¼Œä¸èƒ½è½¬è®©ç»™è‡ªå·±
2. **æ‰€æœ‰æƒéªŒè¯è§„åˆ™**: éªŒè¯ç‰©å“å±äºå½“å‰ç”¨æˆ·ä¸”çŠ¶æ€ä¸ºavailable
3. **è½¬è®©æƒé™è§„åˆ™**: æ£€æŸ¥can_transferå­—æ®µï¼Œfalseæ—¶ä¸å…è®¸è½¬è®©
4. **è¿‡æœŸæ£€æŸ¥è§„åˆ™**: è½¬è®©å‰æ£€æŸ¥expires_atï¼Œè¿‡æœŸç‰©å“è‡ªåŠ¨æ›´æ–°ä¸ºexpiredçŠ¶æ€
5. **æ¬¡æ•°é™åˆ¶è§„åˆ™**: å•ä¸ªç‰©å“æœ€å¤šè½¬è®©3æ¬¡(transfer_count<3)ï¼Œè¶…è¿‡é™åˆ¶è¿”å›é”™è¯¯
6. **äº‹åŠ¡åŸå­æ€§è§„åˆ™**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ç‰©å“æ‰€æœ‰æƒè½¬ç§»å’ŒTradeRecordè®°å½•çš„åŸå­æ€§


---

### 5.7 è·å–è½¬è®©å†å² âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/transfer-history`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç‰©å“è½¬è®©å†å²è®°å½•(æ”¯æŒç±»å‹ç­›é€‰å’Œå®Œæ•´è½¬è®©é“¾æ¡æŸ¥çœ‹)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„è½¬è®©è®°å½•ï¼Œç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰è½¬è®©è®°å½•

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ä¸ªäººè½¬è®©å†å²åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±å‘å‡ºæˆ–æ¥æ”¶çš„è½¬è®©è®°å½•
2. **ç±»å‹ç­›é€‰åœºæ™¯**: æŒ‰typeç­›é€‰(sentå‘å‡º/receivedæ¥æ”¶/allå…¨éƒ¨)
3. **ç®¡ç†å‘˜å®Œæ•´é“¾æ¡åœºæ™¯**: ç®¡ç†å‘˜é€šè¿‡item_idæŸ¥çœ‹ç‰©å“çš„å®Œæ•´è½¬è®©é“¾æ¡
4. **æƒé™é™åˆ¶åœºæ™¯**: æ™®é€šç”¨æˆ·ä¸èƒ½æŸ¥çœ‹å®Œæ•´è½¬è®©é“¾æ¡ï¼Œä»…ç®¡ç†å‘˜å¯æŸ¥çœ‹
5. **åˆ†é¡µåŠ è½½åœºæ™¯**: è½¬è®©è®°å½•è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š50æ¡

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: æ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹ä¸è‡ªå·±ç›´æ¥ç›¸å…³çš„è½¬è®©(from_user_idæˆ–to_user_id=å½“å‰ç”¨æˆ·)
2. **ç±»å‹ç­›é€‰è§„åˆ™**: type=sentæŸ¥çœ‹å‘å‡ºçš„è½¬è®©ï¼Œtype=receivedæŸ¥çœ‹æ¥æ”¶çš„è½¬è®©ï¼Œtype=allæŸ¥çœ‹å…¨éƒ¨
3. **å®Œæ•´é“¾æ¡é™åˆ¶è§„åˆ™**: æ™®é€šç”¨æˆ·ä¼ å…¥item_idæ—¶è¿”å›403é”™è¯¯ï¼Œä»…ç®¡ç†å‘˜å¯æŸ¥çœ‹å®Œæ•´è½¬è®©é“¾æ¡
4. **ç®¡ç†å‘˜ç‰¹æƒè§„åˆ™**: ç®¡ç†å‘˜å¯é€šè¿‡item_idæŸ¥çœ‹ç‰©å“çš„å®Œæ•´è½¬è®©é“¾æ¡ï¼Œä¸å—ç”¨æˆ·é™åˆ¶
5. **åˆ†é¡µå‚æ•°è§„åˆ™**: limitæœ€å¤§50æ¡ï¼Œé˜²æ­¢ä¸€æ¬¡æŸ¥è¯¢è¿‡å¤šæ•°æ®
6. **æ—¥å¿—è®°å½•è§„åˆ™**: ç®¡ç†å‘˜æŸ¥çœ‹å®Œæ•´è½¬è®©é“¾æ¡æ—¶è®°å½•å®¡è®¡æ—¥å¿—(admin_idã€item_idã€role_level)


---

### 5.8 å•†å“å…‘æ¢ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/exchange`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ä½¿ç”¨ç§¯åˆ†å…‘æ¢å•†å“(æ”¯æŒå¹¸è¿ç©ºé—´å’Œé«˜çº§ç©ºé—´)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç§¯åˆ†å…‘æ¢å•†å“åœºæ™¯**: ç”¨æˆ·ä½¿ç”¨ç´¯ç§¯çš„ç§¯åˆ†å…‘æ¢å®ç‰©å•†å“æˆ–è™šæ‹Ÿå•†å“
2. **ç©ºé—´é€‰æ‹©åœºæ™¯**: æ”¯æŒä»å¹¸è¿ç©ºé—´(lucky)æˆ–é«˜çº§ç©ºé—´(premium)å…‘æ¢å•†å“ï¼Œé»˜è®¤å¹¸è¿ç©ºé—´
3. **æ•°é‡æ§åˆ¶åœºæ™¯**: å•æ¬¡å…‘æ¢æ•°é‡é™åˆ¶åœ¨1-10ä¹‹é—´ï¼Œé˜²æ­¢æ¶æ„æ‰¹é‡å…‘æ¢
4. **è‡ªåŠ¨å®¡æ ¸åœºæ™¯**: è™šæ‹Ÿå•†å“è‡ªåŠ¨å®¡æ ¸é€šè¿‡ç«‹å³æ·»åŠ åˆ°åº“å­˜ï¼Œå®ç‰©å•†å“éœ€ç®¡ç†å‘˜å®¡æ ¸
5. **äº‹åŠ¡ä¿è¯åœºæ™¯**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ç§¯åˆ†æ‰£é™¤å’Œè®¢å•åˆ›å»ºçš„åŸå­æ€§

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: product_idå¿…å¡«ï¼ŒquantityèŒƒå›´1-10ï¼Œspaceå¿…é¡»æ˜¯luckyæˆ–premium
2. **ç©ºé—´éªŒè¯è§„åˆ™**: spaceå‚æ•°å¿…é¡»åœ¨['lucky', 'premium']ç™½åå•å†…ï¼Œæ— æ•ˆå€¼è¿”å›400é”™è¯¯
3. **ç§¯åˆ†æ£€æŸ¥è§„åˆ™**: å…ˆæ£€æŸ¥ç”¨æˆ·ç§¯åˆ†æ˜¯å¦è¶³å¤Ÿ(å•†å“ä»·æ ¼Ã—æ•°é‡)ï¼Œä¸è¶³è¿”å›é”™è¯¯
4. **åº“å­˜æ£€æŸ¥è§„åˆ™**: æ£€æŸ¥å•†å“åº“å­˜æ˜¯å¦å……è¶³ï¼Œåº“å­˜ä¸è¶³è¿”å›é”™è¯¯
5. **äº‹åŠ¡åŸå­æ€§è§„åˆ™**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ç§¯åˆ†æ‰£é™¤å’Œè®¢å•åˆ›å»ºçš„åŸå­æ€§ï¼Œå¤±è´¥è‡ªåŠ¨å›æ»š
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•å…‘æ¢æˆåŠŸæ—¥å¿—(user_idã€product_idã€spaceã€quantityã€exchange_idã€total_points)

---

### 5.9 è·å–å…‘æ¢è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/exchange-records`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–ç”¨æˆ·çš„å…‘æ¢è®°å½•åˆ—è¡¨(æ”¯æŒçŠ¶æ€å’Œç©ºé—´ç­›é€‰ã€åˆ†é¡µ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å…‘æ¢å†å²æŸ¥çœ‹åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„æ‰€æœ‰å…‘æ¢è®°å½•ï¼Œäº†è§£å…‘æ¢å†å²
2. **çŠ¶æ€ç­›é€‰åœºæ™¯**: æŒ‰statusç­›é€‰(pendingå¾…å¤„ç†/distributedå·²å‘æ”¾/usedå·²ä½¿ç”¨/expiredå·²è¿‡æœŸ/cancelledå·²å–æ¶ˆ)
3. **ç©ºé—´ç­›é€‰åœºæ™¯**: æŒ‰spaceç­›é€‰(luckyå¹¸è¿ç©ºé—´/premiumé«˜çº§ç©ºé—´)
4. **åˆ†é¡µåŠ è½½åœºæ™¯**: å…‘æ¢è®°å½•è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š100æ¡
5. **æ€§èƒ½ç›‘æ§åœºæ™¯**: è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´ï¼Œç›‘æ§æŸ¥è¯¢æ€§èƒ½

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: page>=1ï¼ŒlimitèŒƒå›´1-100ï¼Œé˜²æ­¢NaNå’Œè´Ÿæ•°å¯¼è‡´æŸ¥è¯¢å¤±è´¥
2. **çŠ¶æ€ç™½åå•è§„åˆ™**: statuså¿…é¡»åœ¨['pending', 'distributed', 'used', 'expired', 'cancelled']ç™½åå•å†…
3. **ç©ºé—´ç™½åå•è§„åˆ™**: spaceå¿…é¡»åœ¨['lucky', 'premium']ç™½åå•å†…ï¼Œæ— æ•ˆå€¼è¿”å›400é”™è¯¯
4. **æ•°æ®è„±æ•è§„åˆ™**: æ ¹æ®ç”¨æˆ·æƒé™è¿”å›ä¸åŒçº§åˆ«æ•°æ®(æ™®é€šç”¨æˆ·publicï¼Œç®¡ç†å‘˜full)
5. **æ’åºè§„åˆ™**: æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„å…‘æ¢è®°å½•æ’åœ¨æœ€å‰é¢
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•æŸ¥è¯¢å‚æ•°å’Œç»“æœ(user_idã€pageã€limitã€statusã€spaceã€è®°å½•æ•°)

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 5.10 å–æ¶ˆå…‘æ¢è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/exchange-records/:id/cancel`
**HTTPæ–¹æ³•**: POST
**æè¿°**: å–æ¶ˆå¾…å¤„ç†çš„å…‘æ¢è®°å½•(é€€è¿˜ç§¯åˆ†)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è®°å½•æ‰€æœ‰è€…å¯å–æ¶ˆè‡ªå·±çš„å…‘æ¢è®°å½•

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·å–æ¶ˆå…‘æ¢åœºæ™¯**: ç”¨æˆ·åœ¨å…‘æ¢å®¡æ ¸å‰å–æ¶ˆå…‘æ¢ï¼Œç³»ç»Ÿè‡ªåŠ¨é€€è¿˜ç§¯åˆ†
2. **åŸå› å¿…å¡«åœºæ™¯**: å–æ¶ˆæ—¶å¿…é¡»å¡«å†™åŸå› (1-200å­—ç¬¦)ï¼Œä¾¿äºå®¡è®¡å’Œåˆ†æ
3. **çŠ¶æ€éªŒè¯åœºæ™¯**: åªå…è®¸å–æ¶ˆpendingçŠ¶æ€ä¸”audit_status=pendingçš„è®°å½•
4. **ç§¯åˆ†é€€è¿˜åœºæ™¯**: ä½¿ç”¨æ¨¡å‹cancel()æ–¹æ³•è‡ªåŠ¨é€€è¿˜ç§¯åˆ†ï¼Œä¿è¯äº‹åŠ¡ä¸€è‡´æ€§
5. **å·²å®¡æ ¸æ‹’ç»åœºæ™¯**: å·²å®¡æ ¸é€šè¿‡/å·²ä½¿ç”¨/å·²è¿‡æœŸ/å·²å–æ¶ˆçš„è®°å½•æ— æ³•å†æ¬¡å–æ¶ˆ

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: reasonå¿…å¡«ä¸”é•¿åº¦1-200å­—ç¬¦ï¼Œè¶…å‡ºèŒƒå›´è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: åªå…è®¸ç”¨æˆ·å–æ¶ˆè‡ªå·±çš„å…‘æ¢è®°å½•(user_idåŒ¹é…)ï¼Œå¦åˆ™è¿”å›403é”™è¯¯
3. **çŠ¶æ€éªŒè¯è§„åˆ™**: åªå…è®¸å–æ¶ˆstatus=pendingä¸”audit_status=pendingçš„è®°å½•
4. **å·²å®¡æ ¸æ‹’ç»è§„åˆ™**: distributed/used/expired/cancelledçŠ¶æ€çš„è®°å½•æ— æ³•å–æ¶ˆï¼Œè¿”å›å‹å¥½é”™è¯¯æç¤º
5. **ç§¯åˆ†é€€è¿˜è§„åˆ™**: ä½¿ç”¨æ¨¡å‹cancel()æ–¹æ³•è‡ªåŠ¨é€€è¿˜ç§¯åˆ†ï¼Œå†…éƒ¨ä½¿ç”¨äº‹åŠ¡ä¿è¯åŸå­æ€§
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•å–æ¶ˆæˆåŠŸæ—¥å¿—(exchange_idã€user_idã€refunded_pointsã€reasonã€cancelled_at)

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åŠŸèƒ½ä½¿ç”¨**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜ä½¿ç”¨è¯¥åŠŸèƒ½å®Œæˆä¸šåŠ¡æ“ä½œ
2. **æ•°æ®æŸ¥è¯¢**: æŸ¥è¯¢å’Œè·å–ç›¸å…³ä¸šåŠ¡æ•°æ®
3. **æƒé™éªŒè¯**: ç³»ç»ŸéªŒè¯ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æ“ä½œåˆæ³•
4. **æ•°æ®å¤„ç†**: ç³»ç»Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›ç›¸åº”ç»“æœ
5. **æ—¥å¿—è®°å½•**: è®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª


**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: æ ¹æ®ç”¨æˆ·è§’è‰²å’Œæƒé™çº§åˆ«æ§åˆ¶è®¿é—®
2. **å‚æ•°éªŒè¯**: éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°çš„æœ‰æ•ˆæ€§å’Œæ ¼å¼
3. **æ•°æ®éªŒè¯**: éªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§
4. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½
5. **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
6. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æŸ¥è¯¢å’Œå¤„ç†æ€§èƒ½ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½


---

### 5.11 åˆ é™¤/éšè—å…‘æ¢è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `DELETE /api/v4/inventory/exchange-records/:exchange_id`
**HTTPæ–¹æ³•**: DELETE
**æè¿°**: è½¯åˆ é™¤å…‘æ¢è®°å½•(ä»…éšè—ï¼Œä¸å®é™…åˆ é™¤ï¼Œæ”¯æŒæ¢å¤)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è®°å½•æ‰€æœ‰è€…å¯åˆ é™¤è‡ªå·±çš„å…‘æ¢è®°å½•

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **ç”¨æˆ·åˆ é™¤è®°å½•åœºæ™¯**: ç”¨æˆ·åˆ é™¤è‡ªå·±çš„å…‘æ¢è®°å½•ï¼Œè®°å½•ä¸å†æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
2. **è½¯åˆ é™¤æœºåˆ¶åœºæ™¯**: è®¾ç½®is_deleted=1ï¼Œä¸å®é™…åˆ é™¤æ•°æ®ï¼Œæ”¯æŒåç»­æ¢å¤
3. **é‡å¤åˆ é™¤é˜²æŠ¤åœºæ™¯**: å·²åˆ é™¤çš„è®°å½•å†æ¬¡åˆ é™¤æ—¶è¿”å›å‹å¥½æç¤ºï¼Œé¿å…é‡å¤æ“ä½œ
4. **åŒ—äº¬æ—¶é—´è®°å½•åœºæ™¯**: ä½¿ç”¨BeijingTimeHelperè®°å½•deleted_atæ—¶é—´(åŒ—äº¬æ—¶é—´)
5. **æƒé™éªŒè¯åœºæ™¯**: åªèƒ½åˆ é™¤è‡ªå·±çš„è®°å½•(user_idåŒ¹é…)ï¼Œé˜²æ­¢åˆ é™¤ä»–äººè®°å½•

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: exchange_idå¿…é¡»ä¸ºæœ‰æ•ˆæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: åªèƒ½åˆ é™¤è‡ªå·±çš„è®°å½•(user_idåŒ¹é…)ï¼Œå¦åˆ™è¿”å›403é”™è¯¯
3. **å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: è®°å½•ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤è¿”å›404é”™è¯¯(defaultScopeè‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤è®°å½•)
4. **é‡å¤åˆ é™¤é˜²æŠ¤è§„åˆ™**: å·²åˆ é™¤çš„è®°å½•(is_deleted=1)å†æ¬¡åˆ é™¤è¿”å›400é”™è¯¯å’Œå‹å¥½æç¤º
5. **è½¯åˆ é™¤è§„åˆ™**: è®¾ç½®is_deleted=1å’Œdeleted_atï¼Œä¸å®é™…åˆ é™¤æ•°æ®
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•è½¯åˆ é™¤æˆåŠŸæ—¥å¿—(exchange_idã€user_idã€deleted_at)


---

### 5.12 æ¢å¤å…‘æ¢è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/exchange-records/:exchange_id/restore`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ¢å¤å·²åˆ é™¤çš„å…‘æ¢è®°å½•(ä»…ç®¡ç†å‘˜å¯æ“ä½œ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **è¯¯åˆ æ¢å¤åœºæ™¯**: ç®¡ç†å‘˜è¯¯åˆ å…‘æ¢è®°å½•åï¼Œé€šè¿‡æ­¤æ¥å£æ¢å¤è®°å½•
2. **çŠ¶æ€é™åˆ¶åœºæ™¯**: åªèƒ½æ¢å¤pending(å¾…å®¡æ ¸)å’Œdistributed(å·²åˆ†å‘)çŠ¶æ€çš„è®°å½•
3. **å·²ä½¿ç”¨æ‹’ç»åœºæ™¯**: used(å·²ä½¿ç”¨)ã€expired(å·²è¿‡æœŸ)ã€cancelled(å·²å–æ¶ˆ)çŠ¶æ€çš„è®°å½•ä¸å¯æ¢å¤
4. **ScopeæŸ¥è¯¢åœºæ™¯**: ä½¿ç”¨scope('onlyDeleted')ç»•è¿‡defaultScopeï¼ŒæŸ¥è¯¢å·²åˆ é™¤çš„è®°å½•
5. **å®¡è®¡æ—¥å¿—åœºæ™¯**: è®°å½•å®Œæ•´çš„æ¢å¤å®¡è®¡æ—¥å¿—(admin_idã€exchange_idã€æ¢å¤æ—¶é—´)

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ¢å¤å…‘æ¢è®°å½•ï¼Œé€šè¿‡requireAdminä¸­é—´ä»¶éªŒè¯
2. **å‚æ•°éªŒè¯è§„åˆ™**: exchange_idå¿…é¡»ä¸ºæœ‰æ•ˆæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
3. **ScopeæŸ¥è¯¢è§„åˆ™**: ä½¿ç”¨scope('onlyDeleted')ç»•è¿‡defaultScopeï¼ŒæŸ¥è¯¢å·²åˆ é™¤çš„è®°å½•(is_deleted=1)
4. **çŠ¶æ€é™åˆ¶è§„åˆ™**: åªèƒ½æ¢å¤pendingå’ŒdistributedçŠ¶æ€çš„è®°å½•ï¼Œused/expired/cancelledçŠ¶æ€ä¸å¯æ¢å¤
5. **è½¯åˆ é™¤æ¢å¤è§„åˆ™**: è®¾ç½®is_deleted=0å’Œrestored_atï¼Œæ¢å¤è®°å½•åˆ°æ­£å¸¸çŠ¶æ€
6. **å®¡è®¡æ—¥å¿—è§„åˆ™**: è®°å½•æ¢å¤æ“ä½œæ—¥å¿—(admin_idã€exchange_idã€record_statusã€restored_at)


---

### 5.13 æ ¸é”€éªŒè¯ç  âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/verification/verify`
**HTTPæ–¹æ³•**: POST
**æè¿°**: å•†æˆ·æˆ–ç®¡ç†å‘˜æ ¸é”€ç”¨æˆ·çš„ç‰©å“éªŒè¯ç (8ä½å¤§å†™åå…­è¿›åˆ¶)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…å•†æˆ·(role_levelâ‰¥50)æˆ–ç®¡ç†å‘˜(role_levelâ‰¥100)å¯æ ¸é”€

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å•†æˆ·æ ¸é”€åœºæ™¯**: å•†æˆ·æ‰«æç”¨æˆ·çš„æ ¸é”€ç ï¼Œæ ¸é”€ç‰©å“(å¦‚ä¼˜æƒ åˆ¸ã€ç¤¼å“)
2. **æ ¼å¼éªŒè¯åœºæ™¯**: æ ¸é”€ç å¿…é¡»ä¸º8ä½å¤§å†™åå…­è¿›åˆ¶å­—ç¬¦(0-9, A-F)ï¼Œå¦‚A1B2C3D4
3. **æƒé™é™åˆ¶åœºæ™¯**: åªæœ‰å•†æˆ·(role_levelâ‰¥50)æˆ–ç®¡ç†å‘˜å¯æ ¸é”€ï¼Œæ™®é€šç”¨æˆ·è¿”å›403é”™è¯¯
4. **çŠ¶æ€éªŒè¯åœºæ™¯**: åªèƒ½æ ¸é”€availableçŠ¶æ€çš„ç‰©å“ï¼Œå·²ä½¿ç”¨/è¿‡æœŸ/å·²è½¬è®©çš„ç‰©å“ä¸å¯æ ¸é”€
5. **å”¯ä¸€ç´¢å¼•æŸ¥è¯¢åœºæ™¯**: é€šè¿‡verification_codeçš„UNIQUEç´¢å¼•å¿«é€ŸæŸ¥è¯¢(O(1)å¤æ‚åº¦)

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ ¼å¼éªŒè¯è§„åˆ™**: æ ¸é”€ç å¿…é¡»ä¸º8ä½å¤§å†™åå…­è¿›åˆ¶å­—ç¬¦ï¼Œä¸ç¬¦åˆæ ¼å¼è¿”å›400é”™è¯¯
2. **æƒé™éªŒè¯è§„åˆ™**: åªæœ‰role_levelâ‰¥50çš„å•†æˆ·æˆ–ç®¡ç†å‘˜å¯æ ¸é”€ï¼Œæ™®é€šç”¨æˆ·è¿”å›403é”™è¯¯
3. **å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: æ ¸é”€ç ä¸å­˜åœ¨è¿”å›404é”™è¯¯ï¼Œæç¤ºæ ¸é”€ç æ— æ•ˆ
4. **çŠ¶æ€éªŒè¯è§„åˆ™**: åªèƒ½æ ¸é”€availableçŠ¶æ€çš„ç‰©å“ï¼Œå…¶ä»–çŠ¶æ€è¿”å›400é”™è¯¯
5. **æ ¸é”€è®°å½•è§„åˆ™**: æ ¸é”€æˆåŠŸåæ›´æ–°status=usedå’Œused_atæ—¶é—´æˆ³
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•æ ¸é”€æ“ä½œæ—¥å¿—(operator_idã€verification_codeã€item_idã€user_id)


---

### 5.14 è·å–å¸‚åœºå•†å“åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/market/products`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å¸‚åœºåœ¨å”®å•†å“åˆ—è¡¨(æ”¯æŒåˆ†ç±»ç­›é€‰å’Œæ’åº)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å¸‚åœºæµè§ˆåœºæ™¯**: ç”¨æˆ·æµè§ˆå¸‚åœºä¸­å…¶ä»–ç”¨æˆ·ä¸Šæ¶çš„å•†å“
2. **åˆ†ç±»ç­›é€‰åœºæ™¯**: æŒ‰categoryç­›é€‰(voucherä¼˜æƒ åˆ¸/productå®ç‰©å•†å“/serviceæœåŠ¡/allå…¨éƒ¨)
3. **æ’åºåœºæ™¯**: æŒ‰sortæ’åº(newestæœ€æ–°/price_lowä»·æ ¼ä»ä½åˆ°é«˜/price_highä»·æ ¼ä»é«˜åˆ°ä½)
4. **åˆ†é¡µåŠ è½½åœºæ™¯**: å•†å“è¾ƒå¤šæ—¶åˆ†é¡µåŠ è½½ï¼Œé»˜è®¤æ¯é¡µ20æ¡ï¼Œæœ€å¤š50æ¡
5. **åœ¨å”®çŠ¶æ€ç­›é€‰åœºæ™¯**: åªæ˜¾ç¤ºmarket_status=on_saleä¸”is_available=trueçš„å•†å“

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°ç™½åå•è§„åˆ™**: categoryåªå…è®¸voucher/product/service/allï¼Œsortåªå…è®¸newest/price_low/price_high
2. **åˆ†é¡µå‚æ•°è§„åˆ™**: limitåœ¨1-50ä¹‹é—´ï¼Œpageâ‰¥1ï¼Œé˜²æ­¢æ¶æ„æŸ¥è¯¢
3. **åœ¨å”®çŠ¶æ€è§„åˆ™**: åªæŸ¥è¯¢market_status=on_saleä¸”is_available=trueçš„å•†å“
4. **åˆ†ç±»ç­›é€‰è§„åˆ™**: categoryä¸ä¸ºallæ—¶ï¼ŒæŒ‰typeå­—æ®µç­›é€‰å•†å“ç±»å‹
5. **æ’åºè§„åˆ™**: newestæŒ‰created_at DESCï¼Œprice_lowæŒ‰selling_points ASCï¼Œprice_highæŒ‰selling_points DESC
6. **å…³è”æŸ¥è¯¢è§„åˆ™**: åŒ…å«å–å®¶ä¿¡æ¯(user_idã€nickname)ï¼Œä¾¿äºä¹°å®¶äº†è§£å–å®¶


---

### 5.15 è·å–å¸‚åœºå•†å“è¯¦æƒ… âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/inventory/market/products/:id`
**HTTPæ–¹æ³•**: GET
**æè¿°**: è·å–å¸‚åœºå•†å“çš„è¯¦ç»†ä¿¡æ¯(åŒ…å«å–å®¶ä¿¡æ¯å’Œè´­ä¹°é™åˆ¶)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å•†å“è¯¦æƒ…æŸ¥çœ‹åœºæ™¯**: ç”¨æˆ·ç‚¹å‡»å•†å“æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯(åç§°ã€æè¿°ã€ä»·æ ¼ã€å–å®¶ä¿¡æ¯)
2. **è´­ä¹°å‰ç¡®è®¤åœºæ™¯**: ç”¨æˆ·è´­ä¹°å‰æŸ¥çœ‹å•†å“è¯¦æƒ…ï¼Œç¡®è®¤æ˜¯å¦è´­ä¹°
3. **å–å®¶ä¿¡æ¯åœºæ™¯**: æ˜¾ç¤ºå–å®¶ä¿¡æ¯(user_idã€nickname)ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹å®Œæ•´ä¿¡æ¯(mobile)
4. **è´­ä¹°é™åˆ¶åœºæ™¯**: ä¸èƒ½è´­ä¹°è‡ªå·±çš„å•†å“(can_purchase=false)
5. **æ•°æ®è„±æ•åœºæ™¯**: éç®¡ç†å‘˜æŸ¥çœ‹æ—¶ï¼Œå–å®¶æ‰‹æœºå·æ˜¾ç¤ºä¸º****

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **å‚æ•°éªŒè¯è§„åˆ™**: idå¿…é¡»ä¸ºæœ‰æ•ˆçš„inventory_idï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
2. **å­˜åœ¨æ€§éªŒè¯è§„åˆ™**: å•†å“ä¸å­˜åœ¨æˆ–å·²ä¸‹æ¶(market_statusâ‰ on_sale)è¿”å›404é”™è¯¯
3. **æ•°æ®è„±æ•è§„åˆ™**: éç®¡ç†å‘˜æŸ¥çœ‹æ—¶ï¼Œå–å®¶æ‰‹æœºå·æ˜¾ç¤ºä¸º****ï¼Œä¿æŠ¤éšç§
4. **è´­ä¹°é™åˆ¶è§„åˆ™**: ä¸èƒ½è´­ä¹°è‡ªå·±çš„å•†å“ï¼Œcan_purchase=user_idâ‰ seller_id
5. **å…³è”æŸ¥è¯¢è§„åˆ™**: åŒ…å«å–å®¶ä¿¡æ¯(user_idã€nicknameã€mobileã€registration_time)
6. **å•†å“ä¿¡æ¯è§„åˆ™**: è¿”å›å®Œæ•´å•†å“ä¿¡æ¯(nameã€descriptionã€typeã€selling_pointsã€conditionã€transfer_count)


---

### 5.16 è´­ä¹°å¸‚åœºå•†å“ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/market/products/:id/purchase`
**HTTPæ–¹æ³•**: POST
**æè¿°**: ä½¿ç”¨ç§¯åˆ†è´­ä¹°å¸‚åœºå•†å“(æ”¯æŒè¡Œçº§é”å’Œå¹‚ç­‰æ€§ä¿æŠ¤)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å¸‚åœºè´­ä¹°åœºæ™¯**: ç”¨æˆ·ä½¿ç”¨ç§¯åˆ†è´­ä¹°å…¶ä»–ç”¨æˆ·ä¸Šæ¶çš„å•†å“
2. **ç§¯åˆ†æ‰£é™¤åœºæ™¯**: æ‰£é™¤ä¹°å®¶ç§¯åˆ†ï¼Œå¢åŠ å–å®¶ç§¯åˆ†(ä½¿ç”¨PointsService)
3. **æ‰€æœ‰æƒè½¬ç§»åœºæ™¯**: å•†å“ä»å–å®¶è½¬ç§»åˆ°ä¹°å®¶ï¼Œæ›´æ–°user_idå’Œmarket_status
4. **å¹¶å‘ä¿æŠ¤åœºæ™¯**: ä½¿ç”¨FOR UPDATEè¡Œçº§é”é˜²æ­¢å¹¶å‘è´­ä¹°åŒä¸€å•†å“
5. **å¹‚ç­‰æ€§ä¿æŠ¤åœºæ™¯**: ä½¿ç”¨business_idé˜²æ­¢é‡å¤è´­ä¹°(market_purchase_{product_id}_{buyer_id}_{timestamp})

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **è´­ä¹°é™åˆ¶è§„åˆ™**: ä¸èƒ½è´­ä¹°è‡ªå·±çš„å•†å“(user_idâ‰ buyer_id)ï¼Œä¸å¯è½¬è®©å•†å“(can_transfer=false)ä¸èƒ½è´­ä¹°
2. **ç§¯åˆ†éªŒè¯è§„åˆ™**: ä¹°å®¶ç§¯åˆ†è´¦æˆ·å¿…é¡»å­˜åœ¨ä¸”is_active=trueï¼Œç§¯åˆ†ä½™é¢â‰¥selling_points
3. **è¡Œçº§é”è§„åˆ™**: ä½¿ç”¨FOR UPDATEé”å®šå•†å“è®°å½•ï¼Œé˜²æ­¢å¹¶å‘è´­ä¹°å¯¼è‡´è¶…å–
4. **äº‹åŠ¡åŸå­æ€§è§„åˆ™**: ç§¯åˆ†æ‰£é™¤ã€ç§¯åˆ†å¢åŠ ã€æ‰€æœ‰æƒè½¬ç§»ã€äº¤æ˜“è®°å½•åœ¨åŒä¸€äº‹åŠ¡ä¸­å®Œæˆ
5. **å¹‚ç­‰æ€§è§„åˆ™**: ä½¿ç”¨business_idé˜²æ­¢é‡å¤è´­ä¹°ï¼Œç›¸åŒbusiness_idçš„è¯·æ±‚åªæ‰§è¡Œä¸€æ¬¡
6. **çŠ¶æ€æ›´æ–°è§„åˆ™**: è´­ä¹°æˆåŠŸåæ›´æ–°market_status=soldã€is_available=falseã€transfer_count+1


---

### 5.17 æ’¤å›å¸‚åœºå•†å“ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/market/products/:id/withdraw`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ’¤å›å·²ä¸Šæ¶çš„å•†å“(æ”¯æŒ4å°æ—¶å†·å´æ—¶é—´é˜²æ»¥ç”¨)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…å•†å“æ‰€æœ‰è€…å¯æ’¤å›è‡ªå·±çš„å•†å“

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **å•†å“æ’¤å›åœºæ™¯**: ç”¨æˆ·æ’¤å›è‡ªå·±ä¸Šæ¶çš„å•†å“ï¼Œå•†å“ä¸å†åœ¨å¸‚åœºæ˜¾ç¤º
2. **å†·å´æ—¶é—´åœºæ™¯**: 4å°æ—¶å†…åªèƒ½æ’¤å›ä¸€æ¬¡å•†å“ï¼Œé˜²æ­¢é¢‘ç¹ä¸Šæ¶/æ’¤å›æ»¥ç”¨å¸‚åœº
3. **çŠ¶æ€é™åˆ¶åœºæ™¯**: åªèƒ½æ’¤å›market_status=on_saleçš„å•†å“ï¼Œå·²å”®å‡ºå•†å“ä¸èƒ½æ’¤å›
4. **æ‰€æœ‰æƒéªŒè¯åœºæ™¯**: åªèƒ½æ’¤å›è‡ªå·±çš„å•†å“(user_id=seller_id)ï¼Œä¸èƒ½æ’¤å›ä»–äººå•†å“
5. **äº‹åŠ¡ä¿æŠ¤åœºæ™¯**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯çŠ¶æ€æ›´æ–°çš„åŸå­æ€§

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æ‰€æœ‰æƒéªŒè¯è§„åˆ™**: åªèƒ½æ’¤å›è‡ªå·±çš„å•†å“(user_id=seller_id)ï¼Œå¦åˆ™è¿”å›404é”™è¯¯
2. **çŠ¶æ€éªŒè¯è§„åˆ™**: åªèƒ½æ’¤å›market_status=on_saleçš„å•†å“ï¼Œå…¶ä»–çŠ¶æ€è¿”å›400é”™è¯¯
3. **å†·å´æ—¶é—´è§„åˆ™**: 4å°æ—¶å†…åªèƒ½æ’¤å›ä¸€æ¬¡å•†å“ï¼Œé¢‘ç¹æ’¤å›è¿”å›429é”™è¯¯å’Œå‰©ä½™æ—¶é—´
4. **çŠ¶æ€æ›´æ–°è§„åˆ™**: æ’¤å›æˆåŠŸåæ›´æ–°market_status=withdrawnã€last_withdraw_at=å½“å‰æ—¶é—´
5. **äº‹åŠ¡åŸå­æ€§è§„åˆ™**: çŠ¶æ€éªŒè¯ã€å†·å´æ—¶é—´æ£€æŸ¥ã€çŠ¶æ€æ›´æ–°åœ¨åŒä¸€äº‹åŠ¡ä¸­å®Œæˆ
6. **æ—¥å¿—è®°å½•è§„åˆ™**: è®°å½•æ’¤å›æ“ä½œæ—¥å¿—(seller_idã€product_idã€last_withdraw_at)


---

### 5.18 æ¢å¤å…‘æ¢è®°å½•ï¼ˆå·²åœ¨5.12å®Œæˆï¼Œæ­¤å¤„ä¸ºé‡å¤é¡¹ï¼‰ âœ…

**è¯´æ˜**: æ­¤APIå®é™…ä¸Šåœ¨5.12å·²ç»å®Œæˆï¼Œè¿™é‡Œæ˜¯æ–‡æ¡£ä¸­çš„é‡å¤é¡¹ã€‚æ¢å¤å…‘æ¢è®°å½•çš„åŠŸèƒ½è¯·å‚è€ƒ5.12ã€‚

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/inventory/exchange-records/:exchange_id/restore`
**HTTPæ–¹æ³•**: POST
**æè¿°**: æ¢å¤å·²åˆ é™¤çš„å…‘æ¢è®°å½•(ä»…ç®¡ç†å‘˜å¯æ“ä½œ)
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**(5ä¸ª):
1. **è¯¯åˆ æ¢å¤åœºæ™¯**: ç®¡ç†å‘˜è¯¯åˆ å…‘æ¢è®°å½•åï¼Œé€šè¿‡æ­¤æ¥å£æ¢å¤è®°å½•
2. **çŠ¶æ€é™åˆ¶åœºæ™¯**: åªèƒ½æ¢å¤pending(å¾…å®¡æ ¸)å’Œdistributed(å·²åˆ†å‘)çŠ¶æ€çš„è®°å½•
3. **å·²ä½¿ç”¨æ‹’ç»åœºæ™¯**: used(å·²ä½¿ç”¨)ã€expired(å·²è¿‡æœŸ)ã€cancelled(å·²å–æ¶ˆ)çŠ¶æ€çš„è®°å½•ä¸å¯æ¢å¤
4. **ScopeæŸ¥è¯¢åœºæ™¯**: ä½¿ç”¨scope('onlyDeleted')ç»•è¿‡defaultScopeï¼ŒæŸ¥è¯¢å·²åˆ é™¤çš„è®°å½•
5. **å®¡è®¡æ—¥å¿—åœºæ™¯**: è®°å½•å®Œæ•´çš„æ¢å¤å®¡è®¡æ—¥å¿—(admin_idã€exchange_idã€æ¢å¤æ—¶é—´)

**ä¸šåŠ¡è§„åˆ™**(6ä¸ª):
1. **æƒé™éªŒè¯è§„åˆ™**: ä»…è¶…çº§ç®¡ç†å‘˜å¯æ¢å¤å…‘æ¢è®°å½•ï¼Œé€šè¿‡requireAdminä¸­é—´ä»¶éªŒè¯
2. **å‚æ•°éªŒè¯è§„åˆ™**: exchange_idå¿…é¡»ä¸ºæœ‰æ•ˆæ­£æ•´æ•°ï¼Œæ— æ•ˆå‚æ•°è¿”å›400é”™è¯¯
3. **ScopeæŸ¥è¯¢è§„åˆ™**: ä½¿ç”¨scope('onlyDeleted')ç»•è¿‡defaultScopeï¼ŒæŸ¥è¯¢å·²åˆ é™¤çš„è®°å½•(is_deleted=1)
4. **çŠ¶æ€é™åˆ¶è§„åˆ™**: åªèƒ½æ¢å¤pendingå’ŒdistributedçŠ¶æ€çš„è®°å½•ï¼Œused/expired/cancelledçŠ¶æ€ä¸å¯æ¢å¤
5. **è½¯åˆ é™¤æ¢å¤è§„åˆ™**: è®¾ç½®is_deleted=0å’Œrestored_atï¼Œæ¢å¤è®°å½•åˆ°æ­£å¸¸çŠ¶æ€
6. **å®¡è®¡æ—¥å¿—è§„åˆ™**: è®°å½•æ¢å¤æ“ä½œæ—¥å¿—(admin_idã€exchange_idã€record_statusã€restored_at)


---


## 6. V4 æ¶ˆè´¹è®°å½•ç®¡ç†

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- å•†æˆ·æ¶ˆè´¹è®°å½•ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ¶ˆè´¹è®°å½•æäº¤ã€å®¡æ ¸ï¼ˆé€šè¿‡/æ‹’ç»ï¼‰ã€QRç è®¤è¯ã€è½¯åˆ é™¤å’Œæ¢å¤

---

### 6.1 æäº¤æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/consumption/submit`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šåˆ›å»ºæ–°æ•°æ®)
**æè¿°**: å•†å®¶æ‰«ç æäº¤ç”¨æˆ·æ¶ˆè´¹è®°å½•ï¼Œå¾…ç®¡ç†å‘˜å®¡æ ¸åå‘æ”¾ç§¯åˆ†
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å•†å®¶è§’è‰²æˆ–ç®¡ç†å‘˜

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **æ‰«ç å½•å…¥**: å•†å®¶ä½¿ç”¨æ‰«ç æªæˆ–æ‰‹æœºæ‰«æç”¨æˆ·çš„æ¶ˆè´¹äºŒç»´ç ï¼Œå¿«é€Ÿå½•å…¥æ¶ˆè´¹é‡‘é¢
2. **æ¶ˆè´¹å‡­è¯**: å•†å®¶å½•å…¥æ¶ˆè´¹è®°å½•ä½œä¸ºç”¨æˆ·æ¶ˆè´¹çš„å‡­è¯ï¼Œç”¨äºåç»­ç§¯åˆ†å‘æ”¾
3. **é˜²ä½œå¼Š**: ç”¨æˆ·äºŒç»´ç å…·æœ‰æ—¶æ•ˆæ€§å’Œå”¯ä¸€æ€§ï¼Œé˜²æ­¢å•†å®¶é‡å¤å½•å…¥æˆ–ä¼ªé€ æ¶ˆè´¹
4. **å®¡æ ¸æœºåˆ¶**: æäº¤çš„æ¶ˆè´¹è®°å½•éœ€è¦ç®¡ç†å‘˜å®¡æ ¸ï¼Œé˜²æ­¢å•†å®¶è™šå‡å½•å…¥
5. **å¤‡æ³¨è¯´æ˜**: å•†å®¶å¯æ·»åŠ å¤‡æ³¨è¯´æ˜æ¶ˆè´¹è¯¦æƒ…ï¼Œä¾¿äºç®¡ç†å‘˜å®¡æ ¸åˆ¤æ–­

**ä¸šåŠ¡è§„åˆ™**:
1. **äºŒç»´ç éªŒè¯**: éªŒè¯ç”¨æˆ·äºŒç»´ç çš„æœ‰æ•ˆæ€§å’Œç­¾åæ­£ç¡®æ€§ï¼ˆHMAC-SHA256ï¼‰
2. **é‡‘é¢é™åˆ¶**: æ¶ˆè´¹é‡‘é¢å¿…é¡»å¤§äº0ä¸”ä¸è¶…è¿‡99999.99å…ƒ
3. **ç”¨æˆ·è¯†åˆ«**: é€šè¿‡äºŒç»´ç è§£æç”¨æˆ·IDï¼Œè‡ªåŠ¨å…³è”æ¶ˆè´¹è®°å½•
4. **çŠ¶æ€åˆå§‹åŒ–**: æ–°æäº¤çš„è®°å½•çŠ¶æ€ä¸ºpendingï¼ˆå¾…å®¡æ ¸ï¼‰
5. **ç§¯åˆ†é¢„è®¡ç®—**: è‡ªåŠ¨è®¡ç®—é¢„è®¡å‘æ”¾çš„ç§¯åˆ†ï¼ˆæ¶ˆè´¹é‡‘é¢Ã—ç§¯åˆ†æ¯”ä¾‹ï¼Œé»˜è®¤1å…ƒ=1ç§¯åˆ†ï¼‰
6. **å•†å®¶è®°å½•**: è®°å½•æäº¤å•†å®¶çš„IDå’Œæäº¤æ—¶é—´
7. **é˜²é‡æäº¤**: åŒä¸€ç”¨æˆ·çš„æ¶ˆè´¹è®°å½•éœ€è¦å®¡æ ¸å®Œæˆåæ‰èƒ½å†æ¬¡æäº¤

---

### 6.2 è·å–ç”¨æˆ·æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/consumption/user/:user_id`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–æŒ‡å®šç”¨æˆ·çš„æ¶ˆè´¹è®°å½•åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰å’Œåˆ†é¡µæŸ¥è¯¢
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ç”¨æˆ·æœ¬äººæˆ–ç®¡ç†å‘˜

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **ä¸ªäººè®°å½•æŸ¥è¯¢**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è‡ªå·±çš„æ¶ˆè´¹è®°å½•å’Œå®¡æ ¸çŠ¶æ€
2. **ç§¯åˆ†æ¥æºè¿½æº¯**: ç”¨æˆ·æŸ¥çœ‹æ¶ˆè´¹è®°å½•ï¼Œäº†è§£ç§¯åˆ†çš„è·å¾—æ¥æº
3. **å®¡æ ¸è¿›åº¦è·Ÿè¸ª**: ç”¨æˆ·æŸ¥çœ‹å¾…å®¡æ ¸çš„æ¶ˆè´¹è®°å½•ï¼Œäº†è§£å®¡æ ¸è¿›åº¦
4. **ç®¡ç†å‘˜å®¡è®¡**: ç®¡ç†å‘˜æŸ¥çœ‹ç”¨æˆ·çš„æ¶ˆè´¹è®°å½•ï¼Œå¤„ç†ç”¨æˆ·åé¦ˆå’ŒæŠ•è¯‰
5. **æ•°æ®ç»Ÿè®¡**: å¯¼å‡ºç”¨æˆ·æ¶ˆè´¹æ•°æ®ï¼Œè¿›è¡Œæ¶ˆè´¹è¡Œä¸ºåˆ†æ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„è®°å½•ï¼Œç®¡ç†å‘˜(role_levelâ‰¥100)å¯æŸ¥è¯¢ä»»ä½•ç”¨æˆ·
2. **å‚æ•°éªŒè¯**: user_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°ï¼Œé˜²æ­¢NaNç»•è¿‡æƒé™æ£€æŸ¥
3. **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆpending/approved/rejected/expired/allï¼‰
4. **åˆ†é¡µä¿æŠ¤**: æ¯é¡µæœ€å¤š50æ¡è®°å½•ï¼Œé˜²æ­¢æ•°æ®è¿‡è½½
5. **è‡ªåŠ¨è¿‡æ»¤**: é»˜è®¤ä¸æ˜¾ç¤ºå·²åˆ é™¤çš„è®°å½•ï¼ˆis_deleted=0ï¼‰
6. **å®¡è®¡æ—¥å¿—**: ç®¡ç†å‘˜æŸ¥è¯¢ä»–äººè®°å½•æ—¶è®°å½•å®¡è®¡æ—¥å¿—
7. **æŒ‰æ—¶é—´æ’åº**: è®°å½•æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„åœ¨å‰é¢

---

### 6.3 è·å–æ¶ˆè´¹è®°å½•è¯¦æƒ… âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/consumption/detail/:record_id`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–å•æ¡æ¶ˆè´¹è®°å½•çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«å®¡æ ¸å†å²å’Œç§¯åˆ†äº¤æ˜“è®°å½•
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: è®°å½•ç›¸å…³äººå‘˜ï¼ˆç”¨æˆ·æœ¬äººã€æäº¤å•†å®¶ã€ç®¡ç†å‘˜ï¼‰

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¯¦æƒ…æŸ¥çœ‹**: ç”¨æˆ·ç‚¹å‡»æ¶ˆè´¹è®°å½•æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«æ¶ˆè´¹é‡‘é¢ã€å•†å®¶ã€å®¡æ ¸çŠ¶æ€ç­‰
2. **å®¡æ ¸ä¿¡æ¯**: æŸ¥çœ‹å®¡æ ¸äººã€å®¡æ ¸æ—¶é—´ã€å®¡æ ¸å¤‡æ³¨ç­‰å®¡æ ¸è¯¦æƒ…
3. **ç§¯åˆ†è¿½è¸ª**: æŸ¥çœ‹è¯¥æ¶ˆè´¹è®°å½•å¯¹åº”çš„ç§¯åˆ†äº¤æ˜“è®°å½•
4. **é—®é¢˜æ’æŸ¥**: ç”¨æˆ·æˆ–ç®¡ç†å‘˜æŸ¥çœ‹è®°å½•è¯¦æƒ…ï¼Œæ’æŸ¥ç§¯åˆ†å‘æ”¾é—®é¢˜
5. **æ•°æ®æ ¸å®**: å•†å®¶æŸ¥çœ‹è‡ªå·±æäº¤çš„æ¶ˆè´¹è®°å½•è¯¦æƒ…ï¼Œæ ¸å®æ•°æ®å‡†ç¡®æ€§

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·æœ¬äººã€æäº¤å•†å®¶ã€ç®¡ç†å‘˜(role_levelâ‰¥100)å¯æŸ¥è¯¢
2. **å‚æ•°éªŒè¯**: record_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **è½»é‡æŸ¥è¯¢ä¼˜åŒ–**: å…ˆè½»é‡æŸ¥è¯¢éªŒè¯æƒé™ï¼ˆä»…3ä¸ªå­—æ®µï¼‰ï¼Œå†æŸ¥è¯¢å®Œæ•´æ•°æ®ï¼ˆèŠ‚çœ75%å“åº”æ—¶é—´ï¼‰
4. **è®°å½•å­˜åœ¨æ€§**: éªŒè¯è®°å½•å­˜åœ¨ä¸”æœªè¢«åˆ é™¤
5. **å…³è”æ•°æ®**: åŒ…å«ç”¨æˆ·ä¿¡æ¯ã€å•†å®¶ä¿¡æ¯ã€å®¡æ ¸äººä¿¡æ¯ã€ç§¯åˆ†äº¤æ˜“è®°å½•
6. **å®¡æ ¸å†å²**: åŒ…å«å®Œæ•´çš„å®¡æ ¸å†å²è®°å½•ï¼ˆå®¡æ ¸æ—¶é—´ã€å®¡æ ¸äººã€å®¡æ ¸ç»“æœï¼‰
7. **é”™è¯¯è„±æ•**: é”™è¯¯æ¶ˆæ¯ä¸æš´éœ²æ•°æ®åº“ã€è¡¨åç­‰æŠ€æœ¯ç»†èŠ‚

---

### 6.4 è·å–å¾…å®¡æ ¸æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/consumption/pending`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç®¡ç†å‘˜è·å–æ‰€æœ‰å¾…å®¡æ ¸çš„æ¶ˆè´¹è®°å½•åˆ—è¡¨
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å®¡æ ¸é˜Ÿåˆ—**: ç®¡ç†å‘˜æŸ¥çœ‹å¾…å®¡æ ¸çš„æ¶ˆè´¹è®°å½•é˜Ÿåˆ—ï¼ŒæŒ‰æäº¤æ—¶é—´æ’åº
2. **ä¼˜å…ˆå¤„ç†**: ä¼˜å…ˆæ˜¾ç¤ºæäº¤æ—¶é—´æœ€æ—©çš„è®°å½•ï¼Œç¡®ä¿å…¬å¹³å®¡æ ¸
3. **æ‰¹é‡å®¡æ ¸**: ç®¡ç†å‘˜å¯ä»¥æ‰¹é‡æŸ¥çœ‹å¤šæ¡å¾…å®¡æ ¸è®°å½•ï¼Œæé«˜å®¡æ ¸æ•ˆç‡
4. **å·¥ä½œåˆ†é…**: å¤šä¸ªç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å¾…å®¡æ ¸é˜Ÿåˆ—ï¼Œåˆ†é…å®¡æ ¸ä»»åŠ¡
5. **å®¡æ ¸ç›‘æ§**: ç›‘æ§å¾…å®¡æ ¸è®°å½•æ•°é‡ï¼ŒåŠæ—¶å¤„ç†ç§¯å‹æƒ…å†µ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯è®¿é—®
2. **çŠ¶æ€ç­›é€‰**: ä»…æŸ¥è¯¢status=pendingçš„è®°å½•
3. **åˆ†é¡µä¿æŠ¤**: æ¯é¡µæœ€å¤š100æ¡è®°å½•ï¼Œé»˜è®¤20æ¡
4. **è‡ªåŠ¨è¿‡æ»¤**: ä¸æ˜¾ç¤ºå·²åˆ é™¤çš„è®°å½•ï¼ˆis_deleted=0ï¼‰
5. **æŒ‰æ—¶é—´æ’åº**: æŒ‰åˆ›å»ºæ—¶é—´å‡åºæ’åˆ—ï¼Œæœ€æ—©æäº¤çš„åœ¨å‰é¢
6. **å…³è”æ•°æ®**: åŒ…å«ç”¨æˆ·ä¿¡æ¯ã€å•†å®¶ä¿¡æ¯ï¼Œä¾¿äºå®¡æ ¸åˆ¤æ–­
7. **ç»Ÿè®¡ä¿¡æ¯**: è¿”å›å¾…å®¡æ ¸è®°å½•æ€»æ•°

---

### 6.5 ç®¡ç†å‘˜è·å–æ‰€æœ‰æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/consumption/admin/records`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç®¡ç†å‘˜æŸ¥è¯¢æ‰€æœ‰æ¶ˆè´¹è®°å½•ï¼Œæ”¯æŒçŠ¶æ€ç­›é€‰ã€æœç´¢å’Œç»Ÿè®¡
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å…¨å±€æŸ¥è¯¢**: ç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„æ¶ˆè´¹è®°å½•
2. **çŠ¶æ€ç­›é€‰**: æŒ‰å®¡æ ¸çŠ¶æ€ç­›é€‰è®°å½•ï¼ˆå¾…å®¡æ ¸/å·²é€šè¿‡/å·²æ‹’ç»ï¼‰
3. **ç”¨æˆ·æœç´¢**: é€šè¿‡æ‰‹æœºå·æˆ–æ˜µç§°æœç´¢ç‰¹å®šç”¨æˆ·çš„æ¶ˆè´¹è®°å½•
4. **æ•°æ®ç»Ÿè®¡**: æŸ¥çœ‹å¾…å®¡æ ¸æ•°é‡ã€ä»Šæ—¥å®¡æ ¸æ•°é‡ã€é€šè¿‡ç‡ç­‰ç»Ÿè®¡æ•°æ®
5. **å®¡æ ¸ç®¡ç†**: ç®¡ç†å‘˜è¿›è¡Œæ¶ˆè´¹è®°å½•çš„å®¡æ ¸å’Œç®¡ç†

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯è®¿é—®
2. **çŠ¶æ€ç­›é€‰**: æ”¯æŒpending/approved/rejected/allçŠ¶æ€ç­›é€‰ï¼Œé»˜è®¤all
3. **æœç´¢åŠŸèƒ½**: æ”¯æŒæŒ‰æ‰‹æœºå·ã€ç”¨æˆ·æ˜µç§°æ¨¡ç³Šæœç´¢
4. **åˆ†é¡µä¿æŠ¤**: æ¯é¡µæœ€å¤š100æ¡è®°å½•ï¼Œé»˜è®¤20æ¡
5. **ç»Ÿè®¡æ•°æ®**: è¿”å›å¾…å®¡æ ¸æ•°ã€ä»Šæ—¥å®¡æ ¸æ•°ã€é€šè¿‡æ•°ã€æ‹’ç»æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯
6. **å…³è”æŸ¥è¯¢**: åŒ…å«ç”¨æˆ·ä¿¡æ¯ã€å•†å®¶ä¿¡æ¯ã€å®¡æ ¸äººä¿¡æ¯
7. **æŒ‰æ—¶é—´æ’åº**: æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„åœ¨å‰é¢

---

### 6.6 å®¡æ ¸é€šè¿‡æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/consumption/approve/:record_id`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡æ¶ˆè´¹è®°å½•å¹¶å‘æ”¾ç§¯åˆ†
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **äººå·¥å®¡æ ¸**: ç®¡ç†å‘˜æŸ¥çœ‹æ¶ˆè´¹è®°å½•å’Œå‡­è¯ï¼Œç¡®è®¤çœŸå®æ€§åå®¡æ ¸é€šè¿‡
2. **ç§¯åˆ†å‘æ”¾**: å®¡æ ¸é€šè¿‡åè‡ªåŠ¨è®¡ç®—å¹¶å‘æ”¾ç§¯åˆ†ç»™ç”¨æˆ·
3. **ç”¨æˆ·é€šçŸ¥**: å®¡æ ¸é€šè¿‡åå‘é€é€šçŸ¥ç»™ç”¨æˆ·ï¼Œå‘ŠçŸ¥è·å¾—çš„ç§¯åˆ†
4. **æ•°æ®ç»Ÿè®¡**: å®¡æ ¸é€šè¿‡çš„è®°å½•è®¡å…¥å•†æˆ·å’Œç”¨æˆ·çš„ç»Ÿè®¡æ•°æ®
5. **é˜²åˆ·éªŒè¯**: ç®¡ç†å‘˜å¯ä»¥è¯†åˆ«å¼‚å¸¸æ¶ˆè´¹è®°å½•å¹¶æ‹’ç»

**ä¸šåŠ¡è§„åˆ™**:
1. **çŠ¶æ€éªŒè¯**: ä»…pendingçŠ¶æ€çš„è®°å½•å¯ä»¥å®¡æ ¸
2. **ç§¯åˆ†è®¡ç®—**: ç§¯åˆ†=æ¶ˆè´¹é‡‘é¢Ã—ç§¯åˆ†æ¯”ä¾‹ï¼ˆé»˜è®¤1å…ƒ=1ç§¯åˆ†ï¼‰
3. **ç§¯åˆ†è°ƒæ•´**: ç®¡ç†å‘˜å¯ä»¥æ‰‹åŠ¨è°ƒæ•´ç§¯åˆ†æ•°ï¼ˆå¦‚ä¼˜æƒ æ´»åŠ¨ã€ç‰¹æ®Šæƒ…å†µï¼‰
4. **ç§¯åˆ†å‘æ”¾**: è°ƒç”¨PointsService.earn()å‘æ”¾ç§¯åˆ†ï¼Œè®°å½•æ¥æºä¸ºconsumption
5. **çŠ¶æ€æ›´æ–°**: æ›´æ–°è®°å½•çŠ¶æ€ä¸ºapproved
6. **å®¡æ ¸è®°å½•**: è®°å½•å®¡æ ¸äººIDã€å®¡æ ¸æ—¶é—´ã€å®¡æ ¸å¤‡æ³¨
7. **äº‹åŠ¡ä¿è¯**: ç§¯åˆ†å‘æ”¾å’ŒçŠ¶æ€æ›´æ–°åœ¨åŒä¸€äº‹åŠ¡ä¸­å®Œæˆ

---

### 6.7 æ‹’ç»æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/consumption/reject/:record_id`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç®¡ç†å‘˜å®¡æ ¸æ‹’ç»æ¶ˆè´¹è®°å½•ï¼Œéœ€æä¾›æ‹’ç»åŸå› 
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å¼‚å¸¸è¯†åˆ«**: ç®¡ç†å‘˜å‘ç°æ¶ˆè´¹è®°å½•å¼‚å¸¸ï¼ˆé‡‘é¢ä¸ç¬¦ã€è™šå‡æ¶ˆè´¹ç­‰ï¼‰ï¼Œå®¡æ ¸æ‹’ç»
2. **åŸå› è¯´æ˜**: ç®¡ç†å‘˜å¿…é¡»æä¾›æ˜ç¡®çš„æ‹’ç»åŸå› ï¼Œä¾¿äºç”¨æˆ·å’Œå•†å®¶äº†è§£é—®é¢˜
3. **ç”¨æˆ·é€šçŸ¥**: æ‹’ç»åå‘é€é€šçŸ¥ç»™ç”¨æˆ·å’Œå•†å®¶ï¼Œè¯´æ˜æ‹’ç»åŸå› 
4. **æ•°æ®è¿½æº¯**: æ‹’ç»è®°å½•ä¿ç•™åœ¨ç³»ç»Ÿä¸­ï¼Œç”¨äºåç»­é—®é¢˜è¿½æº¯å’Œç”³è¯‰å¤„ç†
5. **é˜²åˆ·ä¿æŠ¤**: æ‹’ç»è™šå‡æˆ–é‡å¤çš„æ¶ˆè´¹è®°å½•ï¼Œä¿æŠ¤ç³»ç»Ÿç§¯åˆ†å®‰å…¨

**ä¸šåŠ¡è§„åˆ™**:
1. **çŠ¶æ€éªŒè¯**: ä»…pendingçŠ¶æ€çš„è®°å½•å¯ä»¥å®¡æ ¸
2. **åŸå› å¿…å¡«**: æ‹’ç»åŸå› å¿…é¡»å¡«å†™ï¼Œä¸”è‡³å°‘5ä¸ªå­—ç¬¦ï¼Œæœ€å¤š500ä¸ªå­—ç¬¦
3. **çŠ¶æ€æ›´æ–°**: æ›´æ–°è®°å½•çŠ¶æ€ä¸ºrejected
4. **ç§¯åˆ†ä¸å‘æ”¾**: æ‹’ç»çš„è®°å½•ä¸å‘æ”¾ç§¯åˆ†
5. **å®¡æ ¸è®°å½•**: è®°å½•å®¡æ ¸äººIDã€å®¡æ ¸æ—¶é—´ã€æ‹’ç»åŸå› 
6. **ç”¨æˆ·é€šçŸ¥**: å‘é€æ‹’ç»é€šçŸ¥ç»™ç”¨æˆ·å’Œå•†å®¶ï¼ŒåŒ…å«æ‹’ç»åŸå› 
7. **å¯é‡æ–°æäº¤**: ç”¨æˆ·å’Œå•†å®¶å¯ä»¥ä¿®æ­£åé‡æ–°æäº¤æ¶ˆè´¹è®°å½•

---

### 6.8 è·å–ç”¨æˆ·æ¶ˆè´¹äºŒç»´ç  âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/consumption/qrcode/:user_id`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç”Ÿæˆç”¨æˆ·å›ºå®šèº«ä»½äºŒç»´ç ï¼Œç”¨äºå•†å®¶æ‰«ç å½•å…¥æ¶ˆè´¹
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ç”¨æˆ·æœ¬äººæˆ–ç®¡ç†å‘˜

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **äºŒç»´ç ç”Ÿæˆ**: ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒç”Ÿæˆè‡ªå·±çš„æ¶ˆè´¹äºŒç»´ç 
2. **å•†å®¶æ‰«ç **: å•†å®¶æ‰«æç”¨æˆ·äºŒç»´ç ï¼Œå¿«é€Ÿè¯†åˆ«ç”¨æˆ·èº«ä»½å¹¶å½•å…¥æ¶ˆè´¹
3. **æ‰“å°ä½¿ç”¨**: ç”¨æˆ·å¯ä»¥æ‰“å°äºŒç»´ç ï¼Œçº¿ä¸‹æ¶ˆè´¹æ—¶å‡ºç¤ºç»™å•†å®¶
4. **ç®¡ç†å‘˜ç”Ÿæˆ**: ç®¡ç†å‘˜å¯ä»¥ä¸ºä»»ä½•ç”¨æˆ·ç”ŸæˆäºŒç»´ç ï¼Œç”¨äºå®¢æœæ”¯æŒ
5. **æ°¸ä¹…æœ‰æ•ˆ**: äºŒç»´ç é•¿æœŸæœ‰æ•ˆï¼Œæ— éœ€é¢‘ç¹é‡æ–°ç”Ÿæˆ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½ç”Ÿæˆè‡ªå·±çš„äºŒç»´ç ï¼Œç®¡ç†å‘˜(role_levelâ‰¥100)å¯ç”Ÿæˆä»»ä½•ç”¨æˆ·
2. **å‚æ•°éªŒè¯**: user_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **ç­¾åç”Ÿæˆ**: ä½¿ç”¨HMAC-SHA256ç®—æ³•ç”ŸæˆäºŒç»´ç ç­¾åï¼Œé˜²æ­¢ä¼ªé€ 
4. **å›ºå®šèº«ä»½ç **: äºŒç»´ç æ ¼å¼ä¸ºQR_{user_id}_{signature}ï¼Œæ°¸ä¹…æœ‰æ•ˆ
5. **ç”¨æˆ·è¯†åˆ«**: å•†å®¶æ‰«ç åå¯ä»¥è§£æå‡ºç”¨æˆ·ID
6. **å®‰å…¨ä¿æŠ¤**: ç­¾åéªŒè¯ç¡®ä¿äºŒç»´ç æœªè¢«ç¯¡æ”¹
7. **ä½¿ç”¨è¯´æ˜**: è¿”å›äºŒç»´ç ä½¿ç”¨è¯´æ˜ï¼ŒæŒ‡å¯¼ç”¨æˆ·å’Œå•†å®¶ä½¿ç”¨

---

### 6.9 éªŒè¯ç”¨æˆ·QRç  âŒ å·²åˆ é™¤

**è¯´æ˜**: è¯¥æ¥å£å·²è¢«åˆ é™¤ï¼ŒåŠŸèƒ½å·²åˆå¹¶åˆ°`GET /api/v4/consumption/user-info`æ¥å£

**åˆ é™¤åŸå› **: 
- user-infoæ¥å£åŒæ—¶æä¾›äºŒç»´ç éªŒè¯å’Œç”¨æˆ·è¯¦ç»†ä¿¡æ¯æŸ¥è¯¢
- é¿å…æ¥å£å†—ä½™ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- ç¬¦åˆYAGNIåŸåˆ™ï¼ˆYou Aren't Gonna Need Itï¼‰

**æ›¿ä»£æ–¹æ¡ˆ**: ä½¿ç”¨`GET /api/v4/consumption/user-info?qr_code={qr_code}`æ¥å£

---

### 6.10 åˆ é™¤æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `DELETE /api/v4/consumption/:record_id`
**HTTPæ–¹æ³•**: DELETE (åˆ é™¤æ“ä½œï¼Œä¼šæ ‡è®°æ•°æ®ä¸ºå·²åˆ é™¤)
**æè¿°**: è½¯åˆ é™¤æ¶ˆè´¹è®°å½•ï¼Œç”¨æˆ·ç«¯éšè—è®°å½•ï¼Œç®¡ç†å‘˜å¯æ¢å¤
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: è®°å½•æ‰€æœ‰è€…ï¼ˆç”¨æˆ·æœ¬äººï¼‰

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **éšè—è®°å½•**: ç”¨æˆ·éšè—ä¸æƒ³çœ‹åˆ°çš„æ¶ˆè´¹è®°å½•ï¼ˆå¦‚æ‹’ç»çš„è®°å½•ï¼‰
2. **æ¸…ç†åˆ—è¡¨**: ç”¨æˆ·æ¸…ç†ä¸ªäººæ¶ˆè´¹è®°å½•åˆ—è¡¨ï¼Œä¿æŒç•Œé¢æ•´æ´
3. **éšç§ä¿æŠ¤**: ç”¨æˆ·åˆ é™¤æ•æ„Ÿçš„æ¶ˆè´¹è®°å½•ï¼Œä¿æŠ¤ä¸ªäººéšç§
4. **è¯¯æ“ä½œæ¢å¤**: ç”¨æˆ·è¯¯åˆ é™¤åï¼Œå¯ä»¥è”ç³»ç®¡ç†å‘˜æ¢å¤
5. **æ•°æ®ä¿ç•™**: åˆ é™¤çš„è®°å½•ä»ä¿ç•™åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨äºå®¡è®¡å’Œè¿½æº¯

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½åˆ é™¤è‡ªå·±çš„æ¶ˆè´¹è®°å½•
2. **çŠ¶æ€é™åˆ¶**: æ™®é€šç”¨æˆ·åªèƒ½åˆ é™¤pendingçŠ¶æ€çš„è®°å½•ï¼Œç®¡ç†å‘˜å¯åˆ é™¤ä»»ä½•çŠ¶æ€
3. **è½¯åˆ é™¤**: è®°å½•æ ‡è®°ä¸ºis_deleted=1ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®
4. **åˆ é™¤æ—¶é—´**: è®°å½•deleted_atåˆ é™¤æ—¶é—´ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
5. **å‰ç«¯è¿‡æ»¤**: æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤è®°å½•ï¼ˆWHERE is_deleted=0ï¼‰
6. **ç§¯åˆ†ä¸å½±å“**: åˆ é™¤è®°å½•ä¸å½±å“å·²å‘æ”¾çš„ç§¯åˆ†
7. **é˜²åˆ·ä¿æŠ¤**: é˜²æ­¢ç”¨æˆ·åˆ é™¤å·²å®¡æ ¸è®°å½•åé‡æ–°æäº¤åˆ·åˆ†

---

### 6.11 æ¢å¤æ¶ˆè´¹è®°å½• âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/consumption/:record_id/restore`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç®¡ç†å‘˜æ¢å¤å·²åˆ é™¤çš„æ¶ˆè´¹è®°å½•
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¯¯åˆ æ¢å¤**: ç”¨æˆ·è¯¯åˆ é™¤æ¶ˆè´¹è®°å½•åï¼Œè”ç³»ç®¡ç†å‘˜æ¢å¤
2. **æ•°æ®æ¢å¤**: ç®¡ç†å‘˜æ ¹æ®ç”¨æˆ·ç”³è¯‰ï¼Œæ¢å¤è¢«é”™è¯¯åˆ é™¤çš„è®°å½•
3. **å®¡è®¡è¿½æº¯**: æ¢å¤å†å²æ•°æ®ï¼Œç”¨äºå®¡è®¡å’Œé—®é¢˜è¿½æº¯
4. **å®¢æœæ”¯æŒ**: å®¢æœäººå‘˜æ ¹æ®ç”¨æˆ·åé¦ˆï¼Œæ¢å¤éœ€è¦çš„æ¶ˆè´¹è®°å½•
5. **æ•°æ®ä¿®æ­£**: å‘ç°æ•°æ®é”™è¯¯åï¼Œæ¢å¤è®°å½•å¹¶è¿›è¡Œä¿®æ­£

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯ä»¥æ¢å¤è®°å½•
2. **å‚æ•°éªŒè¯**: record_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **è®°å½•å­˜åœ¨æ€§**: éªŒè¯è®°å½•å­˜åœ¨ï¼ˆåŒ…å«å·²åˆ é™¤çš„è®°å½•ï¼‰
4. **åˆ é™¤çŠ¶æ€éªŒè¯**: ä»…å·²åˆ é™¤çš„è®°å½•ï¼ˆis_deleted=1ï¼‰å¯ä»¥æ¢å¤
5. **æ¢å¤æ“ä½œ**: è®¾ç½®is_deleted=0ï¼Œæ¸…ç©ºdeleted_atæ—¶é—´
6. **ç”¨æˆ·å¯è§**: æ¢å¤åç”¨æˆ·ç«¯å°†é‡æ–°æ˜¾ç¤ºè¯¥è®°å½•
7. **å®¡è®¡æ—¥å¿—**: è®°å½•æ¢å¤æ“ä½œçš„ç®¡ç†å‘˜IDå’Œæ¢å¤æ—¶é—´

---


## 7. V4 é«˜çº§ç©ºé—´è§£é”

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- åŒé‡æ¡ä»¶éªŒè¯: å†å²ç´¯è®¡ç§¯åˆ†â‰¥10ä¸‡ AND å½“å‰å¯ç”¨ç§¯åˆ†â‰¥100
- å›ºå®šè´¹ç”¨: 100ç§¯åˆ†/æ¬¡
- å›ºå®šæœ‰æ•ˆæœŸ: 24å°æ—¶
- æ‰‹åŠ¨è§£é”: æ— è‡ªåŠ¨ç»­è´¹ï¼Œè¿‡æœŸéœ€é‡æ–°è§£é”
- äº‹åŠ¡å®‰å…¨: ç§¯åˆ†æ‰£é™¤å’ŒçŠ¶æ€æ›´æ–°åŸå­æ€§ä¿è¯

---

### 7.1 è§£é”é«˜çº§ç©ºé—´ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/premium/unlock`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: ç”¨æˆ·æ”¯ä»˜100ç§¯åˆ†è§£é”é«˜çº§ç©ºé—´ï¼Œæœ‰æ•ˆæœŸ24å°æ—¶
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **é«˜çº§åŠŸèƒ½è®¿é—®**: ç”¨æˆ·æ”¯ä»˜ç§¯åˆ†è§£é”é«˜çº§ç©ºé—´ï¼Œè·å¾—ç‰¹æƒåŠŸèƒ½è®¿é—®æƒé™
2. **ä¸´æ—¶æƒé™**: è§£é”å24å°æ—¶å†…æœ‰æ•ˆï¼Œè¿‡æœŸéœ€é‡æ–°æ”¯ä»˜è§£é”
3. **èµ„æ ¼éªŒè¯**: éœ€è¦å†å²ç´¯è®¡ç§¯åˆ†â‰¥10ä¸‡ï¼Œè¯†åˆ«é«˜çº§ç”¨æˆ·èµ„æ ¼
4. **é˜²æ­¢é‡å¤**: æœ‰æ•ˆæœŸå†…ç¦æ­¢é‡å¤è§£é”ï¼Œé¿å…é‡å¤æ‰£è´¹
5. **ç§¯åˆ†æ¶ˆè´¹**: æ¯æ¬¡è§£é”æ¶ˆè€—100ç§¯åˆ†ï¼Œè®°å½•ç§¯åˆ†äº¤æ˜“æµæ°´

**ä¸šåŠ¡è§„åˆ™**:
1. **åŒé‡æ¡ä»¶éªŒè¯**: å†å²ç´¯è®¡ç§¯åˆ†â‰¥10ä¸‡ AND å½“å‰å¯ç”¨ç§¯åˆ†â‰¥100ï¼ˆç¼ºä¸€ä¸å¯ï¼‰
2. **é‡å¤è§£é”æ£€æŸ¥**: æœ‰æ•ˆæœŸå†…ç¦æ­¢é‡å¤è§£é”ï¼Œè¿”å›409å†²çªé”™è¯¯
3. **ç§¯åˆ†æ‰£é™¤**: æ‰£é™¤100ç§¯åˆ†ï¼Œæ›´æ–°available_pointsã€total_consumedã€last_consume_time
4. **äº¤æ˜“è®°å½•**: åˆ›å»ºç§¯åˆ†äº¤æ˜“è®°å½•ï¼Œbusiness_type='premium_unlock'
5. **çŠ¶æ€æ›´æ–°**: åˆ›å»º/æ›´æ–°user_premium_statusè¡¨ï¼Œè®¾ç½®is_unlocked=true
6. **è¿‡æœŸæ—¶é—´è®¡ç®—**: expires_at = unlock_time + 24å°æ—¶ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
7. **äº‹åŠ¡ä¿è¯**: ç§¯åˆ†æ‰£é™¤ã€äº¤æ˜“è®°å½•ã€çŠ¶æ€æ›´æ–°åœ¨åŒä¸€äº‹åŠ¡ä¸­å®Œæˆ

---

### 7.2 æŸ¥è¯¢è§£é”çŠ¶æ€ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/premium/status`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: æŸ¥è¯¢ç”¨æˆ·çš„é«˜çº§ç©ºé—´è§£é”çŠ¶æ€å’Œæ¡ä»¶è¿›åº¦
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **çŠ¶æ€æŸ¥è¯¢**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„é«˜çº§ç©ºé—´è§£é”çŠ¶æ€å’Œå‰©ä½™æ—¶é—´
2. **æ¡ä»¶æ£€æŸ¥**: æŸ¥çœ‹è§£é”æ¡ä»¶çš„å®Œæˆè¿›åº¦ï¼ˆå†å²ç§¯åˆ†ã€å½“å‰ä½™é¢ï¼‰
3. **è¿‡æœŸæé†’**: æŸ¥çœ‹æ˜¯å¦å·²è¿‡æœŸï¼Œéœ€è¦é‡æ–°è§£é”
4. **è§£é”å¼•å¯¼**: æœªè§£é”ç”¨æˆ·æŸ¥çœ‹è§£é”æ¡ä»¶å’Œè¿›åº¦ï¼Œå¼•å¯¼ç”¨æˆ·è§£é”
5. **æƒé™éªŒè¯**: å‰ç«¯æ ¹æ®è§£é”çŠ¶æ€æ§åˆ¶é«˜çº§åŠŸèƒ½çš„è®¿é—®æƒé™

**ä¸šåŠ¡è§„åˆ™**:
1. **çŠ¶æ€åˆ¤æ–­**: æŸ¥è¯¢user_premium_statusè¡¨ï¼Œåˆ¤æ–­is_unlockedå’Œexpires_at
2. **è¿‡æœŸæ£€æŸ¥**: expires_at > NOW() åˆ¤æ–­æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…
3. **æ¡ä»¶è¿›åº¦**: è®¡ç®—å†å²ç§¯åˆ†è¿›åº¦å’Œå½“å‰ä½™é¢è¿›åº¦ï¼ˆç™¾åˆ†æ¯”ï¼‰
4. **å‰©ä½™æ—¶é—´**: è®¡ç®—å‰©ä½™å°æ—¶æ•°å’Œåˆ†é’Ÿæ•°ï¼ˆå‘ä¸Šå–æ•´ï¼‰
5. **è§£é”èµ„æ ¼**: åˆ¤æ–­æ˜¯å¦æ»¡è¶³è§£é”æ¡ä»¶ï¼ˆcan_unlockå­—æ®µï¼‰
6. **å…³è”æŸ¥è¯¢**: æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å’Œç§¯åˆ†è´¦æˆ·ï¼Œè·å–å†å²ç§¯åˆ†å’Œå½“å‰ä½™é¢
7. **çŠ¶æ€åˆ†ç±»**: æœªè§£é”ã€å·²è¿‡æœŸã€æœ‰æ•ˆæœŸå†…ä¸‰ç§çŠ¶æ€

---


## 8. V4 æŠ½å¥–ç»“æœé¢„è®¾ç®¡ç†

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- è¿è¥å¹²é¢„åŠŸèƒ½: ç®¡ç†å‘˜ä¸ºç‰¹å®šç”¨æˆ·é¢„è®¾æŠ½å¥–ç»“æœ
- é˜Ÿåˆ—æœºåˆ¶: æŒ‰queue_orderé¡ºåºæ¶ˆè´¹é¢„è®¾ç»“æœ
- ç”¨æˆ·æ— æ„ŸçŸ¥: ç”¨æˆ·æŠ½å¥–æ—¶è‡ªåŠ¨ä½¿ç”¨é¢„è®¾ç»“æœï¼Œä½“éªŒæ— å·®å¼‚
- ç®¡ç†å‘˜ä¸“ç”¨: æ‰€æœ‰APIä»…ç®¡ç†å‘˜å¯è®¿é—®

---

### 8.1 åˆ›å»ºæŠ½å¥–é¢„è®¾ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/lottery-preset/create`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šåˆ›å»ºæ–°æ•°æ®)
**æè¿°**: ç®¡ç†å‘˜ä¸ºæŒ‡å®šç”¨æˆ·åˆ›å»ºæŠ½å¥–ç»“æœé¢„è®¾é˜Ÿåˆ—
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¿è¥å¹²é¢„**: ç®¡ç†å‘˜ä¸ºç‰¹å®šç”¨æˆ·é¢„è®¾æŠ½å¥–ç»“æœï¼Œå®ç°è¿è¥ç­–ç•¥
2. **æ´»åŠ¨å¥–åŠ±**: ä¸ºæ´»åŠ¨è·å¥–ç”¨æˆ·é¢„è®¾å¥–å“ï¼Œç¡®ä¿ç”¨æˆ·è·å¾—æ‰¿è¯ºçš„å¥–åŠ±
3. **VIPç‰¹æƒ**: ä¸ºVIPç”¨æˆ·é¢„è®¾é«˜ä»·å€¼å¥–å“ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. **é—®é¢˜è¡¥å¿**: ç”¨æˆ·æŠ•è¯‰æˆ–ç³»ç»Ÿé—®é¢˜æ—¶ï¼Œé¢„è®¾å¥–å“ä½œä¸ºè¡¥å¿
5. **æµ‹è¯•éªŒè¯**: æµ‹è¯•æŠ½å¥–åŠŸèƒ½æ—¶ï¼Œé¢„è®¾ç»“æœéªŒè¯æµç¨‹æ­£ç¡®æ€§

**ä¸šåŠ¡è§„åˆ™**:
1. **æ‰¹é‡é™åˆ¶**: å•æ¬¡æœ€å¤šåˆ›å»º20æ¡é¢„è®¾ï¼Œé˜²æ­¢æ•°æ®è¿‡è½½
2. **é˜Ÿåˆ—é¡ºåº**: queue_orderå¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½é‡å¤ï¼ˆåŒä¸€æ‰¹æ¬¡å†…ï¼‰
3. **å¥–å“éªŒè¯**: éªŒè¯prize_idå­˜åœ¨ä¸”æœ‰æ•ˆ
4. **ç”¨æˆ·éªŒè¯**: éªŒè¯ç›®æ ‡ç”¨æˆ·å­˜åœ¨
5. **é¡ºåºéªŒè¯**: queue_orderå¿…é¡»ä¸ºæ­£æ•´æ•°ï¼ˆâ‰¥1ï¼‰
6. **äº‹åŠ¡ä¿è¯**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿æ‰¹é‡åˆ›å»ºçš„åŸå­æ€§
7. **ç®¡ç†å‘˜è®°å½•**: è®°å½•åˆ›å»ºäººadmin_idï¼Œç”¨äºå®¡è®¡è¿½è¸ª

---

### 8.2 æŸ¥è¯¢ç”¨æˆ·é¢„è®¾ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery-preset/user/:user_id`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æŠ½å¥–é¢„è®¾é˜Ÿåˆ—
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¿è¥å®¡è®¡**: æŸ¥çœ‹ä¸ºç”¨æˆ·åˆ›å»ºçš„é¢„è®¾é…ç½®ï¼Œæ ¸å¯¹é¢„è®¾å¥–å“æ˜¯å¦æ­£ç¡®
2. **ç”¨æˆ·æ”¯æŒ**: ç”¨æˆ·æŠ•è¯‰æ—¶ï¼Œå®¢æœæŸ¥è¯¢ç”¨æˆ·é¢„è®¾çŠ¶æ€ï¼Œç¡®è®¤æ˜¯å¦æœ‰è¿è¥å¹²é¢„
3. **é¢„è®¾ç›‘æ§**: ç®¡ç†å‘˜ç›‘æ§é¢„è®¾ä½¿ç”¨æƒ…å†µï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ä½¿ç”¨å®Œæ‰€æœ‰é¢„è®¾
4. **ç­–ç•¥è°ƒæ•´**: è¿è¥äººå‘˜æŸ¥çœ‹ç”¨æˆ·é¢„è®¾é˜Ÿåˆ—ï¼Œå†³å®šæ˜¯å¦éœ€è¦è¡¥å……æˆ–æ¸…ç†é¢„è®¾
5. **æ•°æ®æ ¸å®**: æŸ¥çœ‹é¢„è®¾è¯¦æƒ…ï¼ŒåŒ…å«å¥–å“ä¿¡æ¯ã€åˆ›å»ºäººã€åˆ›å»ºæ—¶é—´ç­‰

**ä¸šåŠ¡è§„åˆ™**:
1. **ç”¨æˆ·éªŒè¯**: éªŒè¯ç›®æ ‡ç”¨æˆ·å­˜åœ¨
2. **å‚æ•°éªŒè¯**: user_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆpending/used/allï¼‰ï¼Œé»˜è®¤all
4. **å…³è”æŸ¥è¯¢**: åŒ…å«å¥–å“ä¿¡æ¯ã€åˆ›å»ºäººä¿¡æ¯ã€ç›®æ ‡ç”¨æˆ·ä¿¡æ¯
5. **æ’åºè§„åˆ™**: æŒ‰queue_orderå‡åºæ’åˆ—ï¼Œç¡®ä¿é˜Ÿåˆ—é¡ºåºæ­£ç¡®
6. **ç»Ÿè®¡ä¿¡æ¯**: è¿”å›é¢„è®¾ç»Ÿè®¡ï¼ˆtotalã€pendingã€usedï¼‰
7. **æƒé™æ£€æŸ¥**: ä»…ç®¡ç†å‘˜å¯æŸ¥è¯¢ä»»ä½•ç”¨æˆ·çš„é¢„è®¾

---

### 8.3 è·å–æ‰€æœ‰é¢„è®¾åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery-preset/list`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–æ‰€æœ‰ç”¨æˆ·çš„é¢„è®¾åˆ—è¡¨ï¼Œæ”¯æŒç­›é€‰å’Œåˆ†é¡µ
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **é¢„è®¾åˆ—è¡¨ç®¡ç†**: ç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰é¢„è®¾è®°å½•ï¼Œè¿›è¡Œç»Ÿä¸€ç®¡ç†
2. **è¿è¥å®¡è®¡**: å®¡æŸ¥æ‰€æœ‰é¢„è®¾é…ç½®ï¼Œç¡®ä¿è¿è¥ç­–ç•¥æ‰§è¡Œæ­£ç¡®
3. **ç”¨æˆ·æ”¯æŒ**: å¿«é€Ÿå®šä½ç”¨æˆ·çš„é¢„è®¾é…ç½®ï¼Œå¤„ç†ç”¨æˆ·é—®é¢˜
4. **æ•°æ®åˆ†æ**: å¯¼å‡ºé¢„è®¾æ•°æ®ï¼Œåˆ†æè¿è¥æ•ˆæœ
5. **æ‰¹é‡æ“ä½œ**: æ‰¹é‡æŸ¥çœ‹å’Œç®¡ç†å¤šä¸ªç”¨æˆ·çš„é¢„è®¾

**ä¸šåŠ¡è§„åˆ™**:
1. **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆpending/used/allï¼‰ï¼Œé»˜è®¤all
2. **ç”¨æˆ·ç­›é€‰**: æ”¯æŒæŒ‰user_idç­›é€‰ç‰¹å®šç”¨æˆ·çš„é¢„è®¾
3. **åˆ†é¡µä¿æŠ¤**: æ¯é¡µæœ€å¤š100æ¡è®°å½•ï¼Œé»˜è®¤20æ¡
4. **æ’åºæ”¯æŒ**: æ”¯æŒæŒ‰created_atæˆ–queue_orderæ’åº
5. **æ’åºæ–¹å‘**: æ”¯æŒå‡åº(ASC)æˆ–é™åº(DESC)ï¼Œé»˜è®¤DESC
6. **å…³è”æŸ¥è¯¢**: åŒ…å«ç›®æ ‡ç”¨æˆ·ã€å¥–å“ã€åˆ›å»ºäººä¿¡æ¯
7. **å¹¶è¡ŒæŸ¥è¯¢**: æ•°æ®æŸ¥è¯¢å’Œæ€»æ•°ç»Ÿè®¡å¹¶è¡Œæ‰§è¡Œï¼Œæå‡æ€§èƒ½

---

### 8.4 åˆ é™¤ç”¨æˆ·é¢„è®¾ âœ…

**åŠŸèƒ½è·¯å¾„**: `DELETE /api/v4/lottery-preset/user/:user_id`
**HTTPæ–¹æ³•**: DELETE (åˆ é™¤æ“ä½œï¼Œä¼šåˆ é™¤æ•°æ®)
**æè¿°**: åˆ é™¤æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰é¢„è®¾è®°å½•
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¿è¥è°ƒæ•´**: é‡æ–°è§„åˆ’ç”¨æˆ·çš„é¢„è®¾ç­–ç•¥å‰ï¼Œå…ˆæ¸…é™¤æ—§é¢„è®¾
2. **ç”¨æˆ·æŠ•è¯‰**: åˆ é™¤é”™è¯¯çš„é¢„è®¾é…ç½®ï¼Œè§£å†³ç”¨æˆ·é—®é¢˜
3. **æ´»åŠ¨ç»“æŸ**: æ¸…ç†æ´»åŠ¨æœŸé—´çš„é¢„è®¾è®°å½•ï¼Œé¿å…æ•°æ®å†—ä½™
4. **ç­–ç•¥å˜æ›´**: è¿è¥ç­–ç•¥è°ƒæ•´æ—¶ï¼Œæ‰¹é‡æ¸…ç†ä¸å†éœ€è¦çš„é¢„è®¾
5. **æµ‹è¯•æ¸…ç†**: æµ‹è¯•å®Œæˆåæ¸…ç†æµ‹è¯•æ•°æ®

**ä¸šåŠ¡è§„åˆ™**:
1. **ç”¨æˆ·éªŒè¯**: éªŒè¯ç›®æ ‡ç”¨æˆ·å­˜åœ¨
2. **å‚æ•°éªŒè¯**: user_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **æ‰¹é‡åˆ é™¤**: åˆ é™¤è¯¥ç”¨æˆ·çš„æ‰€æœ‰é¢„è®¾ï¼ˆpendingå’ŒusedçŠ¶æ€ï¼‰
4. **è¿”å›ç»Ÿè®¡**: è¿”å›åˆ é™¤çš„è®°å½•æ•°é‡
5. **ç‰©ç†åˆ é™¤**: ç›´æ¥ä»æ•°æ®åº“åˆ é™¤è®°å½•ï¼Œä¸æ˜¯è½¯åˆ é™¤
6. **ç®¡ç†å‘˜è®°å½•**: è®°å½•åˆ é™¤æ“ä½œçš„ç®¡ç†å‘˜ID
7. **å®¡è®¡æ—¥å¿—**: è®°å½•åˆ é™¤æ“ä½œï¼Œç”¨äºå®¡è®¡è¿½è¸ª

---

### 8.5 é¢„è®¾ç»Ÿè®¡ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/lottery-preset/stats`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–ç³»ç»Ÿçº§é¢„è®¾ç»Ÿè®¡æ•°æ®
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¿è¥ç›‘æ§**: æŸ¥çœ‹é¢„è®¾æ€»ä½“ä½¿ç”¨æƒ…å†µï¼Œç›‘æ§è¿è¥æ•ˆæœ
2. **æ•°æ®åˆ†æ**: è¯„ä¼°é¢„è®¾è¿è¥æ•ˆæœï¼ˆä½¿ç”¨ç‡ã€å¥–å“åˆ†å¸ƒï¼‰
3. **å†³ç­–æ”¯æŒ**: æ ¹æ®ç»Ÿè®¡æ•°æ®è°ƒæ•´è¿è¥ç­–ç•¥
4. **æ•ˆæœè¯„ä¼°**: åˆ†æé¢„è®¾åŠŸèƒ½çš„ä½¿ç”¨æƒ…å†µå’Œç”¨æˆ·åé¦ˆ
5. **èµ„æºè§„åˆ’**: æ ¹æ®ç»Ÿè®¡æ•°æ®è§„åˆ’å¥–å“èµ„æºåˆ†é…

**ä¸šåŠ¡è§„åˆ™**:
1. **æ€»ä½“ç»Ÿè®¡**: ç»Ÿè®¡æ€»é¢„è®¾æ•°é‡ï¼ˆpending + usedï¼‰
2. **çŠ¶æ€ç»Ÿè®¡**: åˆ†åˆ«ç»Ÿè®¡å¾…ä½¿ç”¨å’Œå·²ä½¿ç”¨çš„é¢„è®¾æ•°é‡
3. **ç”¨æˆ·ç»Ÿè®¡**: ç»Ÿè®¡æ‹¥æœ‰é¢„è®¾çš„ç”¨æˆ·æ•°é‡ï¼ˆå»é‡ï¼‰
4. **ä½¿ç”¨ç‡è®¡ç®—**: è®¡ç®—é¢„è®¾ä½¿ç”¨ç‡ï¼ˆå·²ä½¿ç”¨/æ€»æ•°Ã—100%ï¼‰
5. **å¥–å“åˆ†å¸ƒ**: ç»Ÿè®¡å„å¥–å“ç±»å‹çš„é¢„è®¾æ•°é‡åˆ†å¸ƒ
6. **å¹¶è¡ŒæŸ¥è¯¢**: æ‰€æœ‰ç»Ÿè®¡æŸ¥è¯¢å¹¶è¡Œæ‰§è¡Œï¼Œæå‡æ€§èƒ½
7. **å®æ—¶æ•°æ®**: ä¸ä½¿ç”¨ç¼“å­˜ï¼Œç¡®ä¿æ•°æ®å®æ—¶æ€§

---


## 9. V4 ç³»ç»ŸåŠŸèƒ½

**æ ¸å¿ƒä¸šåŠ¡è§„åˆ™**:
- ç³»ç»Ÿå…¬å‘Šç®¡ç†: å…¬å‘Šå‘å¸ƒå’Œé¦–é¡µå±•ç¤º
- ç”¨æˆ·åé¦ˆç³»ç»Ÿ: ç”¨æˆ·æäº¤åé¦ˆï¼ŒæŸ¥çœ‹åé¦ˆå†å²
- å®¢æœèŠå¤©ç³»ç»Ÿ: ç”¨æˆ·ä¸ç®¡ç†å‘˜å®æ—¶èŠå¤©(WebSocketæ”¯æŒ)
- ç³»ç»ŸçŠ¶æ€ç›‘æ§: å¥åº·æ£€æŸ¥å’Œè¿è¡ŒçŠ¶æ€
- ä¸šåŠ¡é…ç½®æŸ¥è¯¢: è·å–ç³»ç»Ÿä¸šåŠ¡é…ç½®ä¿¡æ¯

---

### 9.1 è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/announcements`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–ç³»ç»Ÿå…¬å‘Šåˆ—è¡¨ï¼Œæ”¯æŒç±»å‹å’Œä¼˜å…ˆçº§ç­›é€‰
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼ˆå…¬å¼€è®¿é—®ï¼‰
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **é¦–é¡µå±•ç¤º**: ç”¨æˆ·è®¿é—®é¦–é¡µæ—¶æŸ¥çœ‹ç³»ç»Ÿå…¬å‘Šå’Œæ´»åŠ¨é€šçŸ¥
2. **ç±»å‹ç­›é€‰**: æŒ‰å…¬å‘Šç±»å‹ç­›é€‰ï¼ˆç³»ç»Ÿ/æ´»åŠ¨/é€šçŸ¥/ç»´æŠ¤ï¼‰
3. **ä¼˜å…ˆçº§æ’åº**: é«˜ä¼˜å…ˆçº§å…¬å‘Šä¼˜å…ˆå±•ç¤ºï¼Œç¡®ä¿é‡è¦ä¿¡æ¯è§¦è¾¾
4. **è¿‡æœŸè¿‡æ»¤**: è‡ªåŠ¨è¿‡æ»¤å·²è¿‡æœŸçš„å…¬å‘Šï¼Œä»…æ˜¾ç¤ºæœ‰æ•ˆå…¬å‘Š
5. **åˆ†é¡µåŠ è½½**: æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œé˜²æ­¢æ•°æ®è¿‡è½½

**ä¸šåŠ¡è§„åˆ™**:
1. **çŠ¶æ€è¿‡æ»¤**: ä»…æ˜¾ç¤ºis_active=trueçš„å…¬å‘Š
2. **è¿‡æœŸæ£€æŸ¥**: expires_atä¸ºnullæˆ–å¤§äºå½“å‰æ—¶é—´çš„å…¬å‘Š
3. **ç±»å‹ç­›é€‰**: æ”¯æŒsystem/activity/notice/maintenanceç±»å‹ç­›é€‰
4. **ä¼˜å…ˆçº§ç­›é€‰**: æ”¯æŒæŒ‰priorityç­›é€‰ï¼ˆhigh/medium/lowï¼‰
5. **æ’åºè§„åˆ™**: æŒ‰priorityé™åºã€created_até™åºæ’åˆ—
6. **åˆ†é¡µé™åˆ¶**: æ¯é¡µæœ€å¤š50æ¡è®°å½•ï¼Œé»˜è®¤10æ¡
7. **æ•°æ®è„±æ•**: æ ¹æ®ç”¨æˆ·æƒé™è¿”å›ä¸åŒçº§åˆ«çš„æ•°æ®

---

### 9.2 è·å–é¦–é¡µå…¬å‘Š âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/announcements/home`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–é¦–é¡µå…¬å‘Šï¼ˆä»…æ˜¾ç¤ºå‰5æ¡é‡è¦å…¬å‘Šï¼‰
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼ˆå…¬å¼€è®¿é—®ï¼‰
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **é¦–é¡µå¿«é€Ÿå±•ç¤º**: é¦–é¡µä»…å±•ç¤ºæœ€é‡è¦çš„5æ¡å…¬å‘Šï¼Œé¿å…ä¿¡æ¯è¿‡è½½
2. **é‡è¦ä¿¡æ¯ä¼˜å…ˆ**: ä¼˜å…ˆå±•ç¤ºç³»ç»Ÿã€æ´»åŠ¨ã€é€šçŸ¥ç±»å‹çš„å…¬å‘Š
3. **ç®€æ´å±•ç¤º**: é¦–é¡µå…¬å‘Šç²¾ç®€æ˜¾ç¤ºï¼Œç”¨æˆ·å¯ç‚¹å‡»æŸ¥çœ‹æ›´å¤š
4. **å®æ—¶æ›´æ–°**: è‡ªåŠ¨è¿‡æ»¤è¿‡æœŸå…¬å‘Šï¼Œç¡®ä¿ä¿¡æ¯æ—¶æ•ˆæ€§
5. **å¿«é€ŸåŠ è½½**: å›ºå®šè¿”å›5æ¡ï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦

**ä¸šåŠ¡è§„åˆ™**:
1. **ç±»å‹é™åˆ¶**: ä»…æ˜¾ç¤ºsystem/activity/noticeç±»å‹å…¬å‘Š
2. **æ•°é‡å›ºå®š**: å›ºå®šè¿”å›å‰5æ¡å…¬å‘Š
3. **çŠ¶æ€è¿‡æ»¤**: ä»…æ˜¾ç¤ºis_active=trueçš„å…¬å‘Š
4. **è¿‡æœŸæ£€æŸ¥**: è‡ªåŠ¨è¿‡æ»¤å·²è¿‡æœŸçš„å…¬å‘Š
5. **æ’åºè§„åˆ™**: æŒ‰priorityé™åºã€created_até™åºæ’åˆ—
6. **æ•°æ®è„±æ•**: æ ¹æ®ç”¨æˆ·æƒé™è¿”å›ä¸åŒçº§åˆ«çš„æ•°æ®
7. **æ— åˆ†é¡µ**: ä¸æ”¯æŒåˆ†é¡µï¼Œå›ºå®šè¿”å›5æ¡

---

### 9.3 æäº¤ç”¨æˆ·åé¦ˆ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/system/feedback`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šåˆ›å»ºæ–°æ•°æ®)
**æè¿°**: ç”¨æˆ·æäº¤åé¦ˆæ„è§æˆ–é—®é¢˜æŠ¥å‘Š
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **é—®é¢˜åé¦ˆ**: ç”¨æˆ·é‡åˆ°é—®é¢˜æ—¶æäº¤åé¦ˆï¼Œå¸®åŠ©æ”¹è¿›ç³»ç»Ÿ
2. **åŠŸèƒ½å»ºè®®**: ç”¨æˆ·æå‡ºåŠŸèƒ½æ”¹è¿›å»ºè®®ï¼Œæ”¶é›†ç”¨æˆ·éœ€æ±‚
3. **BugæŠ¥å‘Š**: ç”¨æˆ·æŠ¥å‘Šç³»ç»ŸBugï¼ŒæŠ€æœ¯å›¢é˜Ÿè·Ÿè¿›ä¿®å¤
4. **æŠ•è¯‰å»ºè®®**: ç”¨æˆ·å¯¹æœåŠ¡ä¸æ»¡æ—¶æäº¤æŠ•è¯‰
5. **ç”¨æˆ·è°ƒç ”**: æ”¶é›†ç”¨æˆ·åé¦ˆï¼Œè¿›è¡Œäº§å“è¿­ä»£å†³ç­–

**ä¸šåŠ¡è§„åˆ™**:
1. **å†…å®¹éªŒè¯**: åé¦ˆå†…å®¹å¿…å¡«ï¼Œè‡³å°‘10ä¸ªå­—ç¬¦ï¼Œæœ€å¤š2000ä¸ªå­—ç¬¦
2. **ç±»å‹éªŒè¯**: feedback_typeå¿…é¡»ä¸ºbug/suggestion/complaint/otherä¹‹ä¸€
3. **è”ç³»æ–¹å¼**: contactå¯é€‰ï¼Œç”¨äºåç»­è”ç³»ç”¨æˆ·
4. **çŠ¶æ€åˆå§‹åŒ–**: æ–°åé¦ˆçŠ¶æ€ä¸ºpendingï¼ˆå¾…å¤„ç†ï¼‰
5. **ç”¨æˆ·å…³è”**: è‡ªåŠ¨å…³è”æäº¤ç”¨æˆ·çš„user_id
6. **æ—¶é—´è®°å½•**: è®°å½•æäº¤æ—¶é—´ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
7. **å†…å®¹è¿‡æ»¤**: å¯¹åé¦ˆå†…å®¹è¿›è¡Œæ•æ„Ÿè¯è¿‡æ»¤

---

### 9.4 è·å–ç³»ç»ŸçŠ¶æ€ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/status`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œå¥åº·æ£€æŸ¥ä¿¡æ¯
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼ˆå…¬å¼€è®¿é—®ï¼‰
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å¥åº·æ£€æŸ¥**: ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œç¡®ä¿æœåŠ¡æ­£å¸¸
2. **è¿ç»´ç›‘æ§**: è¿ç»´äººå‘˜æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
3. **ç”¨æˆ·æŸ¥è¯¢**: ç”¨æˆ·æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦æ­£å¸¸ï¼Œåˆ¤æ–­æ˜¯å¦å¯ç”¨
4. **è´Ÿè½½å‡è¡¡**: è´Ÿè½½å‡è¡¡å™¨é€šè¿‡å¥åº·æ£€æŸ¥åˆ¤æ–­èŠ‚ç‚¹çŠ¶æ€
5. **æ•…éšœè¯Šæ–­**: ç³»ç»Ÿå¼‚å¸¸æ—¶æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ï¼Œè¾…åŠ©æ•…éšœè¯Šæ–­

**ä¸šåŠ¡è§„åˆ™**:
1. **æ•°æ®åº“æ£€æŸ¥**: æ£€æŸ¥æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
2. **æœåŠ¡çŠ¶æ€**: è¿”å›æœåŠ¡è¿è¡ŒçŠ¶æ€ï¼ˆrunning/degraded/downï¼‰
3. **ç‰ˆæœ¬ä¿¡æ¯**: è¿”å›ç³»ç»Ÿç‰ˆæœ¬å·å’Œæ„å»ºæ—¶é—´
4. **è¿è¡Œæ—¶é—´**: è¿”å›æœåŠ¡å¯åŠ¨æ—¶é—´å’Œè¿è¡Œæ—¶é•¿
5. **å†…å­˜ä½¿ç”¨**: è¿”å›å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆå¯é€‰ï¼‰
6. **å“åº”æ—¶é—´**: å¿«é€Ÿå“åº”ï¼ˆ<100msï¼‰ï¼Œé¿å…è¶…æ—¶
7. **æ•°æ®è„±æ•**: æ•æ„Ÿä¿¡æ¯ä»…å¯¹ç®¡ç†å‘˜å¯è§

---

### 9.5 è·å–ä¸šåŠ¡é…ç½® âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/business-config`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–ç³»ç»Ÿä¸šåŠ¡é…ç½®ä¿¡æ¯
**ä½¿ç”¨æ¡ä»¶**: æ— éœ€ç™»å½•ï¼ˆå…¬å¼€è®¿é—®ï¼‰
**æƒé™çº§åˆ«**: å…¬å¼€è®¿é—®

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å‰ç«¯é…ç½®**: å‰ç«¯è·å–ä¸šåŠ¡é…ç½®ï¼ŒåŠ¨æ€è°ƒæ•´ç•Œé¢å’ŒåŠŸèƒ½
2. **è§„åˆ™å±•ç¤º**: å‘ç”¨æˆ·å±•ç¤ºä¸šåŠ¡è§„åˆ™ï¼ˆç§¯åˆ†æ¯”ä¾‹ã€æŠ½å¥–è§„åˆ™ç­‰ï¼‰
3. **åŠŸèƒ½å¼€å…³**: å‰ç«¯æ ¹æ®é…ç½®æ§åˆ¶åŠŸèƒ½å¼€å…³ï¼ˆå¦‚ç»´æŠ¤æ¨¡å¼ï¼‰
4. **å‚æ•°åŒæ­¥**: å‰åç«¯é…ç½®åŒæ­¥ï¼Œç¡®ä¿ä¸šåŠ¡è§„åˆ™ä¸€è‡´
5. **åŠ¨æ€è°ƒæ•´**: æ— éœ€å‘å¸ƒå‰ç«¯ä»£ç å³å¯è°ƒæ•´ä¸šåŠ¡å‚æ•°

**ä¸šåŠ¡è§„åˆ™**:
1. **é…ç½®åˆ†ç±»**: è¿”å›ä¸åŒç±»åˆ«çš„é…ç½®ï¼ˆç§¯åˆ†/æŠ½å¥–/èŠå¤©ç­‰ï¼‰
2. **å…¬å¼€é…ç½®**: ä»…è¿”å›å…¬å¼€çš„é…ç½®é¡¹ï¼Œæ•æ„Ÿé…ç½®ä¸è¿”å›
3. **æ•°æ®è„±æ•**: ç®¡ç†å‘˜å¯è§å®Œæ•´é…ç½®ï¼Œæ™®é€šç”¨æˆ·ä»…è§å…¬å¼€éƒ¨åˆ†
4. **ç¼“å­˜ç­–ç•¥**: é…ç½®ä¿¡æ¯ç¼“å­˜5åˆ†é’Ÿï¼Œå‡å°‘æ–‡ä»¶è¯»å–
5. **ç‰ˆæœ¬æ§åˆ¶**: è¿”å›é…ç½®ç‰ˆæœ¬å·ï¼Œå‰ç«¯å¯åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°
6. **æ ¼å¼æ ‡å‡†**: è¿”å›JSONæ ¼å¼ï¼Œä¾¿äºå‰ç«¯è§£æ
7. **é»˜è®¤å€¼**: é…ç½®ç¼ºå¤±æ—¶è¿”å›é»˜è®¤å€¼ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®š

---

### 9.6 è·å–æˆ‘çš„åé¦ˆåˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/feedback/my`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„åé¦ˆåˆ—è¡¨
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **åé¦ˆå†å²**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±æäº¤çš„æ‰€æœ‰åé¦ˆè®°å½•
2. **å¤„ç†è¿›åº¦**: æŸ¥çœ‹åé¦ˆçš„å¤„ç†çŠ¶æ€ï¼ˆå¾…å¤„ç†/å¤„ç†ä¸­/å·²å®Œæˆï¼‰
3. **å›å¤æŸ¥çœ‹**: æŸ¥çœ‹ç®¡ç†å‘˜å¯¹åé¦ˆçš„å›å¤å†…å®¹
4. **é—®é¢˜è¿½è¸ª**: è¿½è¸ªé—®é¢˜è§£å†³è¿›åº¦ï¼Œäº†è§£å¤„ç†ç»“æœ
5. **æ•°æ®ç»Ÿè®¡**: ç»Ÿè®¡ç”¨æˆ·åé¦ˆæ•°é‡å’Œå¤„ç†æƒ…å†µ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„åé¦ˆ
2. **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆpending/processing/completed/rejectedï¼‰
3. **åˆ†é¡µä¿æŠ¤**: æ¯é¡µæœ€å¤š50æ¡è®°å½•ï¼Œé»˜è®¤20æ¡
4. **æ’åºè§„åˆ™**: æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„åœ¨å‰é¢
5. **å…³è”æŸ¥è¯¢**: åŒ…å«å¤„ç†äººä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰
6. **ç»Ÿè®¡ä¿¡æ¯**: è¿”å›åé¦ˆæ€»æ•°å’Œå„çŠ¶æ€æ•°é‡
7. **å›å¤å±•ç¤º**: åŒ…å«ç®¡ç†å‘˜å›å¤å†…å®¹å’Œå›å¤æ—¶é—´

---

### 9.7 è·å–åé¦ˆè¯¦æƒ… âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/feedback/:id`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–å•æ¡åé¦ˆçš„è¯¦ç»†ä¿¡æ¯
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: åé¦ˆæäº¤è€…æˆ–ç®¡ç†å‘˜

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¯¦æƒ…æŸ¥çœ‹**: ç”¨æˆ·ç‚¹å‡»åé¦ˆè®°å½•æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
2. **å›å¤æŸ¥çœ‹**: æŸ¥çœ‹ç®¡ç†å‘˜çš„è¯¦ç»†å›å¤å†…å®¹
3. **å¤„ç†å†å²**: æŸ¥çœ‹åé¦ˆçš„å®Œæ•´å¤„ç†å†å²
4. **é—®é¢˜æ ¸å®**: æ ¸å®åé¦ˆå†…å®¹å’Œå¤„ç†ç»“æœ
5. **æ•°æ®å¯¼å‡º**: å¯¼å‡ºåé¦ˆè¯¦æƒ…ç”¨äºå­˜æ¡£

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„åé¦ˆï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹æ‰€æœ‰
2. **å‚æ•°éªŒè¯**: feedback_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **å­˜åœ¨æ€§éªŒè¯**: éªŒè¯åé¦ˆè®°å½•å­˜åœ¨
4. **å…³è”æŸ¥è¯¢**: åŒ…å«æäº¤äººã€å¤„ç†äººä¿¡æ¯
5. **å®Œæ•´ä¿¡æ¯**: è¿”å›åé¦ˆçš„æ‰€æœ‰å­—æ®µä¿¡æ¯
6. **æ—¶é—´æ ¼å¼**: æ—¶é—´å­—æ®µç»Ÿä¸€ä½¿ç”¨åŒ—äº¬æ—¶é—´ISOæ ¼å¼
7. **æ•°æ®è„±æ•**: æ ¹æ®ç”¨æˆ·æƒé™è¿”å›ä¸åŒçº§åˆ«çš„æ•°æ®

---

### 9.8 è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ® âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/user/statistics/:user_id`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–æŒ‡å®šç”¨æˆ·çš„ç»Ÿè®¡æ•°æ®
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ç”¨æˆ·æœ¬äººæˆ–ç®¡ç†å‘˜

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **ä¸ªäººä¸­å¿ƒ**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡æ•°æ®ï¼ˆç§¯åˆ†/æŠ½å¥–/å…‘æ¢ç­‰ï¼‰
2. **æ•°æ®åˆ†æ**: ç®¡ç†å‘˜æŸ¥çœ‹ç”¨æˆ·ç»Ÿè®¡æ•°æ®ï¼Œåˆ†æç”¨æˆ·è¡Œä¸º
3. **ç”¨æˆ·ç”»åƒ**: æ„å»ºç”¨æˆ·ç”»åƒï¼Œè¿›è¡Œç²¾å‡†è¿è¥
4. **æ´»è·ƒåº¦è¯„ä¼°**: è¯„ä¼°ç”¨æˆ·æ´»è·ƒåº¦å’Œå‚ä¸åº¦
5. **å†³ç­–æ”¯æŒ**: åŸºäºç»Ÿè®¡æ•°æ®è¿›è¡Œè¿è¥å†³ç­–

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ä»»ä½•ç”¨æˆ·
2. **å‚æ•°éªŒè¯**: user_idå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **ç”¨æˆ·éªŒè¯**: éªŒè¯ç›®æ ‡ç”¨æˆ·å­˜åœ¨
4. **ç»Ÿè®¡ç»´åº¦**: åŒ…å«ç§¯åˆ†/æŠ½å¥–/å…‘æ¢/åé¦ˆç­‰å¤šç»´åº¦ç»Ÿè®¡
5. **å®æ—¶è®¡ç®—**: ç»Ÿè®¡æ•°æ®å®æ—¶è®¡ç®—ï¼Œç¡®ä¿å‡†ç¡®æ€§
6. **ç¼“å­˜ç­–ç•¥**: ç»Ÿè®¡æ•°æ®ç¼“å­˜1åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
7. **æ•°æ®è„±æ•**: æ•æ„Ÿç»Ÿè®¡æ•°æ®ä»…å¯¹ç®¡ç†å‘˜å¯è§

---

### 9.9 è·å–WebSocketæœåŠ¡çŠ¶æ€ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/chat/ws-status`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–WebSocketæœåŠ¡çš„è¿è¡ŒçŠ¶æ€
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **è¿æ¥æ£€æŸ¥**: å‰ç«¯æ£€æŸ¥WebSocketæœåŠ¡æ˜¯å¦å¯ç”¨
2. **æ•…éšœè¯Šæ–­**: WebSocketè¿æ¥å¤±è´¥æ—¶æŸ¥çœ‹æœåŠ¡çŠ¶æ€
3. **è¿ç»´ç›‘æ§**: è¿ç»´äººå‘˜ç›‘æ§WebSocketæœåŠ¡å¥åº·çŠ¶æ€
4. **è´Ÿè½½æŸ¥çœ‹**: æŸ¥çœ‹å½“å‰åœ¨çº¿ç”¨æˆ·æ•°å’Œè¿æ¥æ•°
5. **æœåŠ¡é™çº§**: æœåŠ¡ä¸å¯ç”¨æ—¶æç¤ºç”¨æˆ·ä½¿ç”¨è½®è¯¢æ–¹å¼

**ä¸šåŠ¡è§„åˆ™**:
1. **çŠ¶æ€æ£€æŸ¥**: æ£€æŸ¥WebSocketæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. **è¿æ¥ç»Ÿè®¡**: è¿”å›å½“å‰åœ¨çº¿ç”¨æˆ·æ•°å’Œè¿æ¥æ•°
3. **æœåŠ¡ç«¯å£**: è¿”å›WebSocketæœåŠ¡ç«¯å£å’Œè·¯å¾„
4. **ç‰ˆæœ¬ä¿¡æ¯**: è¿”å›WebSocketæœåŠ¡ç‰ˆæœ¬
5. **å“åº”æ—¶é—´**: å¿«é€Ÿå“åº”ï¼ˆ<50msï¼‰
6. **æ•°æ®è„±æ•**: è¯¦ç»†ç»Ÿè®¡ä»…å¯¹ç®¡ç†å‘˜å¯è§
7. **ç¼“å­˜ç­–ç•¥**: çŠ¶æ€ä¿¡æ¯ç¼“å­˜10ç§’

---

### 9.10 åˆ›å»ºèŠå¤©ä¼šè¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/system/chat/create`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šåˆ›å»ºæ–°æ•°æ®)
**æè¿°**: ç”¨æˆ·åˆ›å»ºå®¢æœèŠå¤©ä¼šè¯
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å‘èµ·å’¨è¯¢**: ç”¨æˆ·ç‚¹å‡»å®¢æœæŒ‰é’®ï¼Œåˆ›å»ºèŠå¤©ä¼šè¯
2. **é—®é¢˜å’¨è¯¢**: ç”¨æˆ·é‡åˆ°é—®é¢˜æ—¶å‘èµ·å®¢æœå’¨è¯¢
3. **æŠ•è¯‰åé¦ˆ**: ç”¨æˆ·å¯¹æœåŠ¡ä¸æ»¡æ—¶è”ç³»å®¢æœ
4. **ä¸šåŠ¡å’¨è¯¢**: ç”¨æˆ·å’¨è¯¢ä¸šåŠ¡è§„åˆ™å’Œä½¿ç”¨æ–¹æ³•
5. **æŠ€æœ¯æ”¯æŒ**: ç”¨æˆ·é‡åˆ°æŠ€æœ¯é—®é¢˜æ—¶å¯»æ±‚å¸®åŠ©

**ä¸šåŠ¡è§„åˆ™**:
1. **é¢‘ç‡é™åˆ¶**: æ¯10ç§’æœ€å¤šåˆ›å»º3æ¬¡ä¼šè¯ï¼Œé˜²æ­¢å¹¶å‘é‡å¤åˆ›å»º
2. **é‡å¤æ£€æŸ¥**: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æœªå…³é—­çš„ä¼šè¯ï¼Œé¿å…é‡å¤åˆ›å»º
3. **çŠ¶æ€åˆå§‹åŒ–**: æ–°ä¼šè¯çŠ¶æ€ä¸ºwaitingï¼ˆç­‰å¾…åˆ†é…å®¢æœï¼‰
4. **è‡ªåŠ¨åˆ†é…**: å¯é€‰æ‹©è‡ªåŠ¨åˆ†é…åœ¨çº¿å®¢æœï¼ˆå¦‚æœ‰ï¼‰
5. **ä¼šè¯IDç”Ÿæˆ**: ç”Ÿæˆå”¯ä¸€çš„session_id
6. **æ—¶é—´è®°å½•**: è®°å½•ä¼šè¯åˆ›å»ºæ—¶é—´ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
7. **äº‹åŠ¡ä¿è¯**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿åˆ›å»ºæˆåŠŸ

---

### 9.11 è·å–èŠå¤©ä¼šè¯åˆ—è¡¨ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/chat/sessions`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„èŠå¤©ä¼šè¯åˆ—è¡¨
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: å·²ç™»å½•ç”¨æˆ·

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **ä¼šè¯å†å²**: ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„æ‰€æœ‰èŠå¤©ä¼šè¯è®°å½•
2. **ç»§ç»­å¯¹è¯**: ç”¨æˆ·é‡æ–°æ‰“å¼€ä¹‹å‰çš„ä¼šè¯ç»§ç»­å¯¹è¯
3. **é—®é¢˜è¿½è¸ª**: è¿½è¸ªä¹‹å‰å’¨è¯¢çš„é—®é¢˜è§£å†³è¿›åº¦
4. **æ•°æ®ç»Ÿè®¡**: ç»Ÿè®¡ç”¨æˆ·çš„å’¨è¯¢æ¬¡æ•°å’Œé¢‘ç‡
5. **ä¼šè¯ç®¡ç†**: ç®¡ç†å’ŒæŸ¥çœ‹å†å²ä¼šè¯

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ä¼šè¯
2. **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆwaiting/assigned/active/closedï¼‰
3. **åˆ†é¡µä¿æŠ¤**: æ¯é¡µæœ€å¤š50æ¡è®°å½•ï¼Œé»˜è®¤20æ¡
4. **æ’åºè§„åˆ™**: æŒ‰æœ€åæ¶ˆæ¯æ—¶é—´å€’åºæ’åˆ—
5. **å…³è”æŸ¥è¯¢**: åŒ…å«åˆ†é…çš„å®¢æœä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰
6. **æ¶ˆæ¯é¢„è§ˆ**: è¿”å›æœ€åä¸€æ¡æ¶ˆæ¯çš„é¢„è§ˆ
7. **æœªè¯»ç»Ÿè®¡**: è¿”å›æ¯ä¸ªä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ•°

---

### 9.12 è·å–èŠå¤©å†å² âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/chat/history/:sessionId`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–æŒ‡å®šä¼šè¯çš„èŠå¤©å†å²è®°å½•
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä¼šè¯å‚ä¸è€…ï¼ˆç”¨æˆ·æˆ–åˆ†é…çš„å®¢æœï¼‰

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å†å²æŸ¥çœ‹**: ç”¨æˆ·æŸ¥çœ‹ä¹‹å‰çš„èŠå¤©è®°å½•
2. **é—®é¢˜å›é¡¾**: å›é¡¾ä¹‹å‰å’¨è¯¢çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
3. **è¯æ®ä¿å­˜**: ä¿å­˜èŠå¤©è®°å½•ä½œä¸ºé—®é¢˜å¤„ç†è¯æ®
4. **å®¢æœåŸ¹è®­**: å®¢æœæŸ¥çœ‹å†å²è®°å½•è¿›è¡ŒåŸ¹è®­å­¦ä¹ 
5. **è´¨é‡ç›‘æ§**: ç®¡ç†å‘˜æŸ¥çœ‹èŠå¤©è®°å½•ç›‘æ§æœåŠ¡è´¨é‡

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™éªŒè¯**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ä¼šè¯ï¼Œå®¢æœåªèƒ½æŸ¥çœ‹åˆ†é…ç»™è‡ªå·±çš„ä¼šè¯
2. **å‚æ•°éªŒè¯**: sessionIdå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°
3. **ä¼šè¯éªŒè¯**: éªŒè¯ä¼šè¯å­˜åœ¨ä¸”ç”¨æˆ·æœ‰æƒé™è®¿é—®
4. **åˆ†é¡µåŠ è½½**: æ”¯æŒåˆ†é¡µåŠ è½½ï¼Œæ¯é¡µé»˜è®¤50æ¡æ¶ˆæ¯
5. **æ’åºè§„åˆ™**: æŒ‰æ¶ˆæ¯å‘é€æ—¶é—´å‡åºæ’åˆ—ï¼ˆæ—§æ¶ˆæ¯åœ¨å‰ï¼‰
6. **å…³è”æŸ¥è¯¢**: åŒ…å«å‘é€äººä¿¡æ¯
7. **å·²è¯»æ ‡è®°**: ç”¨æˆ·æŸ¥çœ‹åè‡ªåŠ¨æ ‡è®°æ¶ˆæ¯ä¸ºå·²è¯»

---

### 9.13 å‘é€èŠå¤©æ¶ˆæ¯ âœ…

**åŠŸèƒ½è·¯å¾„**: `POST /api/v4/system/chat/send`
**HTTPæ–¹æ³•**: POST (æäº¤æ“ä½œï¼Œä¼šåˆ›å»ºæ–°æ•°æ®)
**æè¿°**: ç”¨æˆ·åœ¨èŠå¤©ä¼šè¯ä¸­å‘é€æ¶ˆæ¯
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä¼šè¯å‚ä¸è€…

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å®æ—¶æ²Ÿé€š**: ç”¨æˆ·ä¸å®¢æœå®æ—¶èŠå¤©æ²Ÿé€š
2. **é—®é¢˜æè¿°**: ç”¨æˆ·è¯¦ç»†æè¿°é‡åˆ°çš„é—®é¢˜
3. **è¡¥å……ä¿¡æ¯**: è¡¥å……ä¹‹å‰å’¨è¯¢çš„ç›¸å…³ä¿¡æ¯
4. **ç¡®è®¤å›å¤**: ç¡®è®¤å®¢æœçš„è§£å†³æ–¹æ¡ˆ
5. **æ»¡æ„åº¦åé¦ˆ**: å¯¹å®¢æœæœåŠ¡è¿›è¡Œåé¦ˆ

**ä¸šåŠ¡è§„åˆ™**:
1. **é¢‘ç‡é™åˆ¶**: æ™®é€šç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤š20æ¡æ¶ˆæ¯ï¼Œç®¡ç†å‘˜30æ¡
2. **å†…å®¹éªŒè¯**: æ¶ˆæ¯å†…å®¹å¿…å¡«ï¼Œæœ€å°‘1ä¸ªå­—ç¬¦ï¼Œæœ€å¤š2000ä¸ªå­—ç¬¦
3. **ä¼šè¯éªŒè¯**: éªŒè¯ä¼šè¯å­˜åœ¨ä¸”ç”¨æˆ·æœ‰æƒé™å‘é€
4. **çŠ¶æ€æ£€æŸ¥**: ä¼šè¯å¿…é¡»æ˜¯activeçŠ¶æ€æ‰èƒ½å‘é€æ¶ˆæ¯
5. **å†…å®¹è¿‡æ»¤**: å¯¹æ¶ˆæ¯å†…å®¹è¿›è¡Œæ•æ„Ÿè¯è¿‡æ»¤
6. **æ—¶é—´è®°å½•**: è®°å½•æ¶ˆæ¯å‘é€æ—¶é—´ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
7. **WebSocketæ¨é€**: å®æ—¶æ¨é€æ¶ˆæ¯ç»™å¯¹æ–¹ï¼ˆå¸¦é‡è¯•æœºåˆ¶ï¼‰

---

### 9.15 ç®¡ç†å‘˜æ€»è§ˆ âœ…

**åŠŸèƒ½è·¯å¾„**: `GET /api/v4/system/admin/overview`
**HTTPæ–¹æ³•**: GET (æŸ¥è¯¢æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®)
**æè¿°**: è·å–ç®¡ç†å‘˜å·¥ä½œå°æ€»è§ˆæ•°æ®
**ä½¿ç”¨æ¡ä»¶**: éœ€è¦ç”¨æˆ·ç™»å½•
**æƒé™çº§åˆ«**: ä»…ç®¡ç†å‘˜å¯æ“ä½œ

**ä¸šåŠ¡åœºæ™¯è¯´æ˜**:
1. **å·¥ä½œå°é¦–é¡µ**: ç®¡ç†å‘˜ç™»å½•åæŸ¥çœ‹å·¥ä½œå°æ€»è§ˆ
2. **å¾…åŠäº‹é¡¹**: æŸ¥çœ‹å¾…å¤„ç†çš„ä»»åŠ¡æ•°é‡ï¼ˆå¾…å®¡æ ¸/å¾…å›å¤ç­‰ï¼‰
3. **æ•°æ®ç»Ÿè®¡**: æŸ¥çœ‹ç³»ç»Ÿæ ¸å¿ƒæ•°æ®ç»Ÿè®¡
4. **å¿«é€Ÿå¯¼èˆª**: å¿«é€Ÿè·³è½¬åˆ°å„åŠŸèƒ½æ¨¡å—
5. **å¼‚å¸¸é¢„è­¦**: æ˜¾ç¤ºéœ€è¦å…³æ³¨çš„å¼‚å¸¸æƒ…å†µ

**ä¸šåŠ¡è§„åˆ™**:
1. **æƒé™é™åˆ¶**: ä»…ç®¡ç†å‘˜(role_levelâ‰¥100)å¯è®¿é—®
2. **æ•°æ®æ±‡æ€»**: æ±‡æ€»å¾…å®¡æ ¸è®¢å•ã€å¾…å›å¤ä¼šè¯ç­‰æ•°æ®
3. **å®æ—¶ç»Ÿè®¡**: ç»Ÿè®¡æ•°æ®å®æ—¶è®¡ç®—
4. **ç¼“å­˜ç­–ç•¥**: æ€»è§ˆæ•°æ®ç¼“å­˜30ç§’ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
5. **åˆ†ç±»ç»Ÿè®¡**: æŒ‰ç±»åˆ«ç»Ÿè®¡å„æ¨¡å—æ•°æ®
6. **è¶‹åŠ¿åˆ†æ**: æä¾›ä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆçš„æ•°æ®è¶‹åŠ¿
7. **å¼‚å¸¸æ ‡è®°**: æ ‡è®°å¼‚å¸¸æ•°æ®ï¼ˆå¦‚è¶…æ—¶è®¢å•ï¼‰

---

---

## é™„å½•ï¼šä¸šåŠ¡è§„åˆ™è¯´æ˜

### HTTPçŠ¶æ€ç è¯´æ˜
- `200`: æ“ä½œæˆåŠŸ
- `400`: å‚æ•°é”™è¯¯æˆ–ä¸šåŠ¡è§„åˆ™ä¸ç¬¦
- `401`: æœªç™»å½•æˆ–ç™»å½•å·²è¿‡æœŸ
- `403`: æƒé™ä¸è¶³ï¼Œæ— æ³•æ‰§è¡Œæ­¤æ“ä½œ
- `404`: è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨
- `500`: ç³»ç»Ÿé”™è¯¯

### é€šç”¨ä¸šåŠ¡é”™è¯¯
- **å‚æ•°éªŒè¯å¤±è´¥**: æäº¤çš„æ•°æ®ä¸ç¬¦åˆè¦æ±‚ï¼ˆå¦‚ï¼šå¿…å¡«é¡¹ä¸ºç©ºã€æ ¼å¼é”™è¯¯ç­‰ï¼‰
- **ä¸šåŠ¡è§„åˆ™è¿å**: æ“ä½œä¸ç¬¦åˆä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚ï¼šç§¯åˆ†ä¸è¶³ã€æƒé™ä¸å¤Ÿç­‰ï¼‰
- **æƒé™ä¸è¶³**: å½“å‰ç”¨æˆ·æ²¡æœ‰æ‰§è¡Œæ­¤æ“ä½œçš„æƒé™
- **èµ„æºä¸å­˜åœ¨**: æŸ¥è¯¢çš„æ•°æ®ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤

### åˆ†é¡µæŸ¥è¯¢è¯´æ˜
- å¤§å¤šæ•°åˆ—è¡¨æŸ¥è¯¢æ”¯æŒåˆ†é¡µï¼Œé»˜è®¤æ¯é¡µ20æ¡
- æœ€å¤§æ¯é¡µ100æ¡ï¼Œé˜²æ­¢æ•°æ®è¿‡è½½
- è¿”å›æ€»è®°å½•æ•°å’Œæ€»é¡µæ•°ï¼Œä¾¿äºå‰ç«¯å±•ç¤ºåˆ†é¡µæ§ä»¶

---

**æ–‡æ¡£ç‰ˆæœ¬**: V4.0 (ä¸šåŠ¡ç‰ˆ)
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ26æ—¥
**ç»´æŠ¤å›¢é˜Ÿ**: é¤å…æŠ½å¥–ç³»ç»Ÿäº§å“å›¢é˜Ÿ
**åŒ—äº¬æ—¶é—´**: æ‰€æœ‰æ—¶é—´æ•°æ®å‡ä½¿ç”¨åŒ—äº¬æ—¶é—´ï¼ˆGMT+8ï¼‰

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚å¯¹æœ¬æ–‡æ¡£æœ‰ä»»ä½•ç–‘é—®,è¯·è”ç³»æŠ€æœ¯å›¢é˜Ÿæˆ–äº§å“å›¢é˜Ÿã€‚
