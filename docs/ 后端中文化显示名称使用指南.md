# ä¸­æ–‡åŒ–æ˜¾ç¤ºåç§°ç»Ÿä¸€æŒ‡å—ï¼ˆå‰åç«¯ï¼‰

> **ç›®çš„**ï¼šè§£å†³å‰ç«¯ç»´æŠ¤ä¸­æ–‡æ˜ å°„è¡¨çš„é—®é¢˜ï¼Œè®©åç«¯ API ç»Ÿä¸€è¿”å› `xxx_display` å’Œ `xxx_color` å­—æ®µã€‚

---

## ğŸ—ï¸ é¡¹ç›®æŠ€æœ¯æ¡†æ¶åˆ†æï¼ˆ2026-02-06 å®é™…æ£€æŸ¥ï¼‰

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬/è¯´æ˜ | å¯å¤ç”¨ç»„ä»¶ |
|------|----------|-----------|
| **Node.js** | >=20.18.0 | è¿è¡Œæ—¶ç¯å¢ƒ |
| **Express** | RESTful API æ¡†æ¶ | è·¯ç”±ä¸­é—´ä»¶ |
| **Sequelize** | ORM æ¡†æ¶ | æ¨¡å‹æŸ¥è¯¢ã€äº‹åŠ¡ |
| **MySQL** | å…³ç³»å‹æ•°æ®åº“ | `system_dictionaries` è¡¨ |
| **Redis** | ç¼“å­˜å±‚ | `DisplayNameService` ç¼“å­˜ |
| **nodemon** | å¼€å‘çƒ­é‡è½½ | `npm run dev` |

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬/è¯´æ˜ | å¯å¤ç”¨ç»„ä»¶ |
|------|----------|-----------|
| **Vite** | 6.4.1 æ„å»ºå·¥å…· | ES Module æ”¯æŒ |
| **Alpine.js** | 3.15.4 å“åº”å¼æ¡†æ¶ | `x-data`, `x-text`, `x-bind` |
| **Tailwind CSS** | 3.4.19 æ ·å¼æ¡†æ¶ | `bg-success`, `bg-danger` ç­‰é¢œè‰²ç±» |
| **ECharts** | 6.0.0 å›¾è¡¨åº“ | æ•°æ®å¯è§†åŒ– |
| **Socket.io-client** | 4.8.3 | å®æ—¶é€šä¿¡ |

### åç«¯å¯å¤ç”¨ç»„ä»¶

| ç»„ä»¶ | è·¯å¾„ | åŠŸèƒ½ | æ‰©å±•æ–¹å¼ |
|------|------|------|----------|
| `attachDisplayNames()` | `utils/displayNameHelper.js` | æ‰¹é‡é™„åŠ æ˜¾ç¤ºåç§° | ä¼ å…¥ `mappings` æ•°ç»„ |
| `DICT_TYPES` | `utils/displayNameHelper.js` | 56 ç§å­—å…¸ç±»å‹å¸¸é‡ | æ·»åŠ æ–°å¸¸é‡ |
| `DisplayNameService` | `services/DisplayNameService.js` | Redis ç¼“å­˜ + DB æŸ¥è¯¢ | è°ƒç”¨ `getDisplayName()` |
| `system_dictionaries` | MySQL è¡¨ | 244 æ¡å­—å…¸æ•°æ® | INSERT æ–°è®°å½• |

### å‰ç«¯å¯å¤ç”¨ç»„ä»¶

| ç»„ä»¶ | è·¯å¾„ | åŠŸèƒ½ | æ”¹é€ æ–¹å¼ |
|------|------|------|----------|
| `asyncDataMixin` | `src/alpine/mixins/async-data.js` | API è¯·æ±‚å°è£… | è¿”å›æ•°æ®å·²åŒ…å« `_display` |
| `paginationMixin` | `src/alpine/mixins/pagination.js` | åˆ†é¡µå¤„ç† | æ— éœ€ä¿®æ”¹ |
| Alpine ç»„ä»¶ | `src/alpine/components/` | UI ç»„ä»¶ | ç›´æ¥ä½¿ç”¨ `item.xxx_display` |
| æ£€æŸ¥è„šæœ¬ | `scripts/check-frontend-mappings.js` | æ£€æµ‹æ˜ å°„å‡½æ•° | `npm run lint:mappings` |

### å‰åç«¯æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         åç«¯ (Node.js + Express)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Service æŸ¥è¯¢æ•°æ®åº“                                           â”‚
â”‚     const data = await Model.findAll()                          â”‚
â”‚                                                                  â”‚
â”‚  2. è°ƒç”¨ attachDisplayNames é™„åŠ æ˜¾ç¤ºåç§°                         â”‚
â”‚     await attachDisplayNames(data, [                            â”‚
â”‚       { field: 'status', dictType: DICT_TYPES.XXX_STATUS }      â”‚
â”‚     ])                                                           â”‚
â”‚                                                                  â”‚
â”‚  3. è¿”å›å¸¦ _display å’Œ _color çš„æ•°æ®                             â”‚
â”‚     res.apiSuccess(data)                                         â”‚
â”‚     // { status: 'active', status_display: 'è¿›è¡Œä¸­',            â”‚
â”‚     //   status_color: 'bg-success' }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ HTTP Response
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (Vite + Alpine.js)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. API è¯·æ±‚ï¼ˆasyncDataMixin å°è£…ï¼‰                              â”‚
â”‚     const response = await this.apiGet('/api/v4/xxx/list')      â”‚
â”‚                                                                  â”‚
â”‚  2. ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„å­—æ®µ                                       â”‚
â”‚     <span x-text="item.status_display"></span>                  â”‚
â”‚     <span :class="item.status_color">...</span>                 â”‚
â”‚                                                                  â”‚
â”‚  âŒ åˆ é™¤ getXxxText() æ˜ å°„å‡½æ•°                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ€»ç»“ï¼šåç«¯å·²æœ‰å®Œæ•´æ–¹æ¡ˆï¼

**ä½ ä¸éœ€è¦æ–°å¼€å‘ï¼Œåªéœ€è¦ä½¿ç”¨ç°æœ‰ç³»ç»Ÿã€‚**

### ç°æœ‰ç³»ç»Ÿ

| ç»„ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| å·¥å…·å‡½æ•° | `utils/displayNameHelper.js` | æä¾› `attachDisplayNames` æ–¹æ³• |
| æœåŠ¡å±‚ | `services/DisplayNameService.js` | Redis ç¼“å­˜ + æ•°æ®åº“æŸ¥è¯¢ |
| å­—å…¸è¡¨ | `system_dictionaries` | 244 æ¡è®°å½•ï¼Œ56 ç§ç±»å‹ |

### ä½¿ç”¨æ–¹æ³•ï¼ˆ3 è¡Œä»£ç ï¼‰

```javascript
// åœ¨ Service æˆ– Route ä¸­
const { attachDisplayNames, DICT_TYPES } = require('../utils/displayNameHelper')

// æŸ¥è¯¢æ•°æ®åï¼Œè°ƒç”¨ä¸€ä¸‹
await attachDisplayNames(data, [
  { field: 'status', dictType: DICT_TYPES.CAMPAIGN_STATUS }
])

// æ•°æ®è‡ªåŠ¨å˜æˆï¼š
// { status: 'active', status_display: 'è¿›è¡Œä¸­', status_color: 'bg-success' }
```

### å‰ç«¯ä¿®æ”¹

**å‰ç«¯åªéœ€è¦æŠŠï¼š**

```javascript
// âŒ åˆ é™¤è¿™ç§æ˜ å°„å‡½æ•°
getStatusText(status) {
  const map = { active: 'è¿›è¡Œä¸­', inactive: 'å·²ç»“æŸ' }
  return map[status]
}
```

**æ”¹æˆï¼š**

```html
<!-- âœ… ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„å­—æ®µ -->
<span x-text="item.status_display"></span>
```

---

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

### é—®é¢˜ç°è±¡

å‰ç«¯ä»£ç ä¸­å­˜åœ¨å¤§é‡ç±»ä¼¼è¿™æ ·çš„å‡½æ•°ï¼š

```javascript
// âŒ é—®é¢˜ä»£ç ï¼šå‰ç«¯ç»´æŠ¤ä¸­æ–‡æ˜ å°„
getCampaignStatusText(status) {
  const map = { active: 'è¿›è¡Œä¸­', inactive: 'å·²ç»“æŸ', pending: 'å¾…å¼€å§‹' }
  return map[status] || status
}
```

### é—®é¢˜å½±å“

| å½±å“ | è¯´æ˜ |
|------|------|
| **æ•°æ®ä¸ä¸€è‡´** | åç«¯æ”¹äº†çŠ¶æ€ç ï¼Œå‰ç«¯å¿˜è®°åŒæ­¥ï¼Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯ |
| **ç»´æŠ¤æˆæœ¬é«˜** | åŒä¸€æ˜ å°„åœ¨å¤šä¸ªæ–‡ä»¶é‡å¤å®šä¹‰ï¼Œæ”¹ä¸€å¤„è¦æ”¹å¤šå¤„ |
| **å›½é™…åŒ–å›°éš¾** | å‰ç«¯ç¡¬ç¼–ç ä¸­æ–‡ï¼Œæ— æ³•æ”¯æŒå¤šè¯­è¨€ |
| **æ–°å¢çŠ¶æ€æ¼æ”¹** | åç«¯æ–°å¢çŠ¶æ€ï¼Œå‰ç«¯æœªæ›´æ–°ï¼Œæ˜¾ç¤ºè‹±æ–‡åŸæ–‡ |

### ç»Ÿè®¡æ•°æ®

```
æ‰«ææ–‡ä»¶ï¼š140 ä¸ª
å‘ç°é—®é¢˜ï¼š74 å¤„
æ¶‰åŠæ¨¡å—ï¼š9 ä¸ª
```

---

## ğŸ”´ å‰ç«¯é—®é¢˜æ¸…å•ï¼ˆéœ€åˆ é™¤çš„æ˜ å°„å‡½æ•°ï¼‰

### 1. æŠ½å¥–æ¨¡å— (lottery) - 14 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `composables/campaigns.js` | 362 | `getCampaignStatusText` | `activeâ†’è¿›è¡Œä¸­, inactiveâ†’å·²ç»“æŸ, pendingâ†’å¾…å¼€å§‹` |
| `composables/budget.js` | 200 | `getBudgetModeText` | `poolâ†’æ€»é¢„ç®—, userâ†’ç”¨æˆ·é¢„ç®—, dailyâ†’æ¯æ—¥é¢„ç®—` |
| `composables/prizes.js` | 316 | `getPrizeTypeText` | `physicalâ†’å®ç‰©, virtualâ†’è™šæ‹Ÿ, couponâ†’ä¼˜æƒ åˆ¸, pointsâ†’ç§¯åˆ†` |
| `composables/metrics.js` | 330 | `getExperiencePhaseText` | `newcomerâ†’æ–°æ‰‹æœŸ, growthâ†’æˆé•¿æœŸ, matureâ†’æˆç†ŸæœŸ` |
| `composables/metrics.js` | 426 | `getTierDisplayName` | `highâ†’é«˜æ¡£å¥–å“, midâ†’ä¸­æ¡£å¥–å“, lowâ†’ä½æ¡£å¥–å“` |
| `composables/user-profile.js` | 204 | `getProfilePhaseText` | `newcomerâ†’ğŸŒ±æ–°æ‰‹æœŸ, growthâ†’ğŸ“ˆæˆé•¿æœŸ, matureâ†’ğŸŒŸæˆç†ŸæœŸ` |
| `composables/user-profile.js` | 236 | `getProfileTierText` | `highâ†’ğŸ†é«˜æ¡£å¥–å“, midâ†’ğŸ¥ˆä¸­æ¡£å¥–å“, lowâ†’ğŸ¥‰ä½æ¡£å¥–å“` |
| `composables/preset-visualization.js` | 293 | `getPresetStatusText` | `pendingâ†’æ´»è·ƒ, usedâ†’å·²ä½¿ç”¨, pausedâ†’æš‚åœ` |
| `composables/quota.js` | 325 | `getScopeTypeText` | `globalâ†’å…¨å±€, campaignâ†’æ´»åŠ¨, ruleâ†’è§„åˆ™` |
| `composables/system-advance.js` | 423 | `getAdvanceTypeText` | `inventoryâ†’åº“å­˜å«ä»˜, budgetâ†’é¢„ç®—å«ä»˜` |
| `composables/batch-operations.js` | 371 | `getBatchOperationTypeText` | `quota-grantâ†’æ‰¹é‡èµ é€, campaign-statusâ†’æ‰¹é‡çŠ¶æ€` |
| `composables/batch-operations.js` | 387 | `getCampaignStatusText` | `activeâ†’è¿›è¡Œä¸­, pausedâ†’å·²æš‚åœ` |

### 2. ç”¨æˆ·æ¨¡å— (user) - 6 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `composables/users.js` | 367 | `getUserStatusText` | `activeâ†’æ­£å¸¸, inactiveâ†’ç¦ç”¨, bannedâ†’å°ç¦, pendingâ†’å¾…å®¡æ ¸` |
| `composables/advanced-status.js` | 605 | `getAdvancedStatusText` | çŠ¶æ€æ˜ å°„ |
| `composables/advanced-status.js` | 616 | `getRiskLevelText` | é£é™©ç­‰çº§æ˜ å°„ |
| `pages/user-management.js` | 443 | `getUserStatusText` | `activeâ†’æ­£å¸¸, inactiveâ†’ç¦ç”¨` |
| `pages/user-management.js` | 482 | `getRoleText` | è§’è‰²æ˜ å°„ |

### 3. åˆ†ææ¨¡å— (analytics) - 8 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `composables/consumption.js` | 325 | `getPaymentMethodText` | `wechatâ†’å¾®ä¿¡, alipayâ†’æ”¯ä»˜å®, cashâ†’ç°é‡‘` |
| `composables/consumption.js` | 351 | `getConsumptionStatusText` | `pendingâ†’å¾…å®¡æ ¸, approvedâ†’å·²é€šè¿‡, rejectedâ†’å·²æ‹’ç»` |
| `composables/campaign-budget.js` | 350 | `getBudgetStatusText` | `activeâ†’è¿è¡Œä¸­, pausedâ†’å·²æš‚åœ, exhaustedâ†’å·²è€—å°½` |
| `composables/campaign-budget.js` | 367 | `getBudgetModeText` | `UNLIMITEDâ†’æ— é™åˆ¶æ¨¡å¼, BUDGET_POINTSâ†’é¢„ç®—ç§¯åˆ†æ¨¡å¼` |
| `composables/debt-management.js` | 286 | `getDebtStatusText` | `pendingâ†’å¾…è¿˜æ¬¾, partialâ†’éƒ¨åˆ†è¿˜æ¬¾` |
| `pages/statistics.js` | 1042 | `getDimensionName` | `storeâ†’é—¨åº—, campaignâ†’æ´»åŠ¨, user_segmentâ†’ç”¨æˆ·ç¾¤` |

### 4. èµ„äº§æ¨¡å— (asset) - 6 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `pages/assets-portfolio.js` | 570 | `getAssetTypeText` | `pointsâ†’ç§¯åˆ†, balanceâ†’ä½™é¢, diamondâ†’é’»çŸ³` |
| `pages/asset-management.js` | 427 | `getStatusText` | `activeâ†’æœ‰æ•ˆ, inactiveâ†’æ— æ•ˆ, usedâ†’å·²ä½¿ç”¨` |
| `pages/asset-adjustment.js` | 829 | `getAssetDisplayName` | èµ„äº§åç§°æ˜ å°„ |
| `pages/asset-adjustment.js` | 1045 | `getAssetTypeText` | èµ„äº§ç±»å‹æ˜ å°„ |

### 5. å†…å®¹æ¨¡å— (content) - 4 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `pages/content-management.js` | 676 | `getPositionText` | `homeâ†’é¦–é¡µ, lotteryâ†’æŠ½å¥–é¡µ` |
| `pages/content-management.js` | 916 | `getImageTypeText` | `bannerâ†’è½®æ’­å›¾, avatarâ†’å¤´åƒ, prizeâ†’å¥–å“å›¾` |

### 6. äº¤æ˜“æ¨¡å— (market) - 4 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `pages/trade-management.js` | 519 | `getRedemptionStatusText` | å…‘æ¢çŠ¶æ€æ˜ å°„ |
| `pages/trade-management.js` | 875 | `getTradeStatusText` | `pendingâ†’å¾…å¤„ç†, completedâ†’å·²å®Œæˆ` |

### 7. é—¨åº—æ¨¡å— (store) - 6 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `pages/store-management.js` | 489 | `getStoreLevelText` | é—¨åº—ç­‰çº§æ˜ å°„ |
| `pages/store-management.js` | 885 | `getStoreStatusText` | é—¨åº—çŠ¶æ€æ˜ å°„ |
| `pages/store-management.js` | 948 | `getStoreTypeText` | é—¨åº—ç±»å‹æ˜ å°„ |

### 8. ç³»ç»Ÿæ¨¡å— (system) - 6 å¤„

| æ–‡ä»¶ | è¡Œå· | å‡½æ•°å | æ˜ å°„å†…å®¹ |
|------|------|--------|---------|
| `pages/audit-logs.js` | 544 | `getActionText` | `createâ†’åˆ›å»º, updateâ†’æ›´æ–°, deleteâ†’åˆ é™¤, loginâ†’ç™»å½•` |
| `pages/system-settings.js` | 322 | `getRuleTypeName` | è§„åˆ™ç±»å‹æ˜ å°„ |
| `pages/system-settings.js` | 337 | `getConditionTypeName` | æ¡ä»¶ç±»å‹æ˜ å°„ |
| `pages/orphan-frozen.js` | 543 | `getAssetName` | èµ„äº§åç§°æ˜ å°„ |
| `pages/orphan-frozen.js` | 580 | `getStatusText` | çŠ¶æ€æ˜ å°„ |
| `composables/feature-flags.js` | 215 | `getFeatureFlagText` | åŠŸèƒ½æ ‡å¿—æ˜ å°„ |

### å®Œæ•´çš„å‰ç«¯æ˜ å°„å‡½æ•°åˆ—è¡¨

<details>
<summary>ç‚¹å‡»å±•å¼€å®Œæ•´çš„å‰ç«¯æ˜ å°„å‡½æ•°åˆ—è¡¨ï¼ˆ40+ ä¸ªï¼‰</summary>

```
getWindowTypeText
getWaitingTimeText
getUserStatusText
getUserApprovalRateText
getUnlockMethodText
getTradeOrderStatusText
getTimeoutText
getStrategyText
getStoreStatusText
getStaffStatusText
getStaffRoleText
getSeverityText
getSessionStatusText
getScopeTypeText
getProfileTierText
getProfilePhaseText
getPrizeTypeText
getPricingStatusText
getPresetStatusText
getPositionText
getOperationResultText
getListingStatusText
getItemStatusText
getImageTypeText
getFeedbackStatusText
getFeedbackCategoryText
getExchangeStatusText
getEnabledStatusText
getDebtStatusText
getConsumptionStatusText
getAuditStatusText
getAnnouncementTypeText
getStatusText
getRedemptionStatusText
getTypeText
getCampaignStatusText
getTradeStatusText
getRiskLevelText
getLevelText
getBudgetModeText
getAssetTypeText
getActionText
```

</details>

---

## ğŸ“‹ å‰åç«¯å·¥ä½œæ¸…å•

### ğŸ”§ åç«¯éœ€è¦å®Œæˆçš„å·¥ä½œ

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | æ¶‰åŠæ–‡ä»¶ | å·¥ä½œé‡ |
|--------|------|----------|--------|
| **P0** | åœ¨ `CampaignService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/CampaignService.js` | ~5 è¡Œ |
| **P0** | åœ¨ `UserService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/UserService.js` | ~5 è¡Œ |
| **P0** | åœ¨ `TradeOrderService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/TradeOrderService.js` | ~5 è¡Œ |
| **P0** | åœ¨ `AssetService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/AssetService.js` | ~5 è¡Œ |
| **P1** | åœ¨ `StoreService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/StoreService.js` | ~5 è¡Œ |
| **P1** | åœ¨ `ConsumptionService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/consumption/*.js` | ~5 è¡Œ |
| **P1** | åœ¨ `ExchangeService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/exchange/*.js` | ~5 è¡Œ |
| **P2** | åœ¨ `FeedbackService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/FeedbackService.js` | ~5 è¡Œ |
| **P2** | åœ¨ `ContentService` ä¸­è°ƒç”¨ `attachDisplayNames` | `services/ContentService.js` | ~5 è¡Œ |
| **P2** | æ£€æŸ¥å­—å…¸è¡¨æ•°æ®å®Œæ•´æ€§ï¼Œè¡¥å……ç¼ºå¤±é¡¹ | `system_dictionaries` è¡¨ | è§†æƒ…å†µ |

**åç«¯æ€»å·¥ä½œé‡**: çº¦ 10 ä¸ª Serviceï¼Œæ¯ä¸ª ~5 è¡Œä»£ç  â‰ˆ **50 è¡Œä»£ç **

---

### ğŸ¨ å‰ç«¯éœ€è¦å®Œæˆçš„å·¥ä½œ

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | æ¶‰åŠæ–‡ä»¶ | å·¥ä½œé‡ |
|--------|------|----------|--------|
| **P0** | åˆ é™¤ `getCampaignStatusText` æ˜ å°„å‡½æ•° | `src/modules/lottery/composables/campaigns.js` | åˆ é™¤ ~10 è¡Œ |
| **P0** | åˆ é™¤ `getCampaignTypeText` æ˜ å°„å‡½æ•° | `src/modules/lottery/composables/campaigns.js` | åˆ é™¤ ~15 è¡Œ |
| **P0** | åˆ é™¤ `getPrizeTypeText` æ˜ å°„å‡½æ•° | `src/modules/lottery/composables/prizes.js` | åˆ é™¤ ~10 è¡Œ |
| **P0** | åˆ é™¤ `getUserStatusText` æ˜ å°„å‡½æ•° | `src/modules/users/composables/users.js` | åˆ é™¤ ~8 è¡Œ |
| **P0** | åˆ é™¤ `getTradeStatusText` æ˜ å°„å‡½æ•° | `src/modules/trading/composables/*.js` | åˆ é™¤ ~10 è¡Œ |
| **P1** | åˆ é™¤ `getStoreStatusText` æ˜ å°„å‡½æ•° | `src/modules/stores/composables/stores.js` | åˆ é™¤ ~8 è¡Œ |
| **P1** | åˆ é™¤ `getConsumptionStatusText` æ˜ å°„å‡½æ•° | `src/modules/consumption/composables/*.js` | åˆ é™¤ ~8 è¡Œ |
| **P1** | åˆ é™¤ `getExchangeStatusText` æ˜ å°„å‡½æ•° | `src/modules/exchange/composables/*.js` | åˆ é™¤ ~8 è¡Œ |
| **P2** | åˆ é™¤å…¶ä»– 36 å¤„ `getXxxText` æ˜ å°„å‡½æ•° | è§ä¸Šæ–¹é—®é¢˜æ¸…å• | åˆ é™¤ ~200 è¡Œ |
| **P2** | ä¿®æ”¹ HTML æ¨¡æ¿ï¼Œä½¿ç”¨ `item.xxx_display` | å„é¡µé¢ HTML æ–‡ä»¶ | è§†æƒ…å†µ |

**å‰ç«¯æ€»å·¥ä½œé‡**: çº¦ 74 å¤„é—®é¢˜ï¼Œåˆ é™¤ ~300 è¡Œæ˜ å°„ä»£ç ï¼Œä¿®æ”¹ ~100 å¤„ HTML æ¨¡æ¿

---

### âœ… éªŒæ”¶æ ‡å‡†

**åç«¯éªŒæ”¶**:
- [ ] æ‰€æœ‰åˆ—è¡¨ API è¿”å›çš„æ•°æ®éƒ½åŒ…å« `xxx_display` å­—æ®µ
- [ ] æ‰€æœ‰è¯¦æƒ… API è¿”å›çš„æ•°æ®éƒ½åŒ…å« `xxx_display` å­—æ®µ
- [ ] å­—å…¸è¡¨æ•°æ®å®Œæ•´ï¼Œæ— ç¼ºå¤±é¡¹

**å‰ç«¯éªŒæ”¶**:
- [ ] è¿è¡Œ `npm run lint:mappings` æ— é”™è¯¯
- [ ] å‰ç«¯ä»£ç ä¸­ä¸å­˜åœ¨ä¸­æ–‡æ˜ å°„ Map
- [ ] é¡µé¢æ˜¾ç¤ºçš„çŠ¶æ€æ–‡æœ¬æ¥è‡ª `item.xxx_display`

---

### ğŸ”„ åä½œæµç¨‹

```
1. åç«¯å…ˆå®Œæˆ P0 çº§ Service æ”¹é€ 
   â†“
2. åç«¯éƒ¨ç½²ï¼Œå‰ç«¯å¯æµ‹è¯• API è¿”å›çš„æ–°å­—æ®µ
   â†“
3. å‰ç«¯åˆ é™¤å¯¹åº”çš„æ˜ å°„å‡½æ•°ï¼Œæ”¹ç”¨ xxx_display
   â†“
4. å‰åç«¯è”è°ƒéªŒè¯
   â†“
5. é‡å¤æ­¥éª¤ 1-4ï¼Œå®Œæˆ P1ã€P2 çº§ä»»åŠ¡
```

---

## ğŸ”§ æ£€æŸ¥å·¥å…·

### è¿è¡Œæ£€æŸ¥

```bash
# æ£€æŸ¥å‰ç«¯ä¸­æ–‡æ˜ å°„é—®é¢˜
npm run lint:mappings

# è¿è¡Œå®Œæ•´æ£€æŸ¥ï¼ˆESLint + æ˜ å°„æ£€æŸ¥ï¼‰
npm run lint:all
```

### æ£€æŸ¥è¾“å‡ºç¤ºä¾‹

```
ğŸ“‹ å‰ç«¯ä¸­æ–‡æ˜ å°„æ£€æŸ¥å·¥å…·
============================================================
è§„èŒƒï¼šå‰ç«¯ä¸åº”ç»´æŠ¤ä¸­æ–‡æ˜ å°„è¡¨ï¼Œåº”ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„æ•°æ®

âœ“ æ£€æŸ¥å®Œæˆï¼šæ‰«æäº† 140 ä¸ªæ–‡ä»¶

âŒ é”™è¯¯ (36)ï¼š
  src/modules/lottery/composables/campaigns.js:362
    é—®é¢˜: getXxxText/getXxxName/getXxxLabel å‡½æ•°ä¸­çš„ä¸­æ–‡æ˜ å°„
    ä»£ç : getCampaignStatusText(status) { const map = { active: 'è¿›è¡Œä¸­'...
    å»ºè®®: åº”ç”±åç«¯è¿”å›ä¸­æ–‡åç§°å­—æ®µï¼ˆå¦‚ xxx_displayï¼‰ï¼Œå‰ç«¯ç›´æ¥ä½¿ç”¨
```

---

## ğŸ“ ä¾‹å¤–æƒ…å†µ

ä»¥ä¸‹åœºæ™¯å…è®¸å‰ç«¯ç»´æŠ¤æ˜ å°„ï¼š

| åœºæ™¯ | ç¤ºä¾‹ | åŸå›  |
|------|------|------|
| UI æ–‡æ¡ˆ | æŒ‰é’®æ–‡å­—ã€æç¤ºä¿¡æ¯ | çº¯å‰ç«¯å±•ç¤ºé€»è¾‘ |
| æ—¥æœŸæ ¼å¼ | "3åˆ†é’Ÿå‰"ã€"ä»Šå¤©" | å‰ç«¯è®¡ç®—åˆç† |
| é”™è¯¯æç¤º | "ç½‘ç»œé”™è¯¯" | å‰ç«¯ç‰¹æœ‰åœºæ™¯ |

---

## ğŸ“Š ç³»ç»Ÿç°çŠ¶

- **å­—å…¸è¡¨**: `system_dictionaries`ï¼Œå…± 333 æ¡è®°å½•
- **å­—å…¸ç±»å‹**: 70 ç§ï¼ˆè¦†ç›–æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ï¼‰
- **å·¥å…·æ–‡ä»¶**: `utils/displayNameHelper.js`
- **æœåŠ¡æ–‡ä»¶**: `services/DisplayNameService.js`

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. åœ¨ Service ä¸­ä½¿ç”¨

```javascript
// services/YourService.js
const { attachDisplayNames, DICT_TYPES } = require('../utils/displayNameHelper')

class YourService {
  /**
   * è·å–æ´»åŠ¨åˆ—è¡¨
   */
  static async getCampaigns(params) {
    // 1. æŸ¥è¯¢æ•°æ®åº“
    const campaigns = await Campaign.findAll({ where: params })

    // 2. é™„åŠ ä¸­æ–‡æ˜¾ç¤ºåç§°
    await attachDisplayNames(campaigns, [
      { field: 'status', dictType: DICT_TYPES.CAMPAIGN_STATUS },
      { field: 'type', dictType: DICT_TYPES.CAMPAIGN_TYPE }
    ])

    // 3. è¿”å›å¸¦ä¸­æ–‡å­—æ®µçš„æ•°æ®
    return campaigns
    // ç»“æœç¤ºä¾‹ï¼š
    // {
    //   status: 'active',
    //   status_display: 'è¿›è¡Œä¸­',    â† è‡ªåŠ¨é™„åŠ 
    //   status_color: 'bg-success',  â† è‡ªåŠ¨é™„åŠ 
    //   type: 'normal',
    //   type_display: 'æ™®é€šæ´»åŠ¨',
    //   type_color: null
    // }
  }
}
```

### 2. åœ¨ Route ä¸­ç›´æ¥ä½¿ç”¨

```javascript
// routes/v4/console/campaigns.js
const { attachDisplayNames, DICT_TYPES } = require('../../../utils/displayNameHelper')

router.get('/list', async (req, res) => {
  const campaigns = await CampaignService.getList(req.query)

  // é™„åŠ æ˜¾ç¤ºåç§°
  await attachDisplayNames(campaigns.rows, [
    { field: 'status', dictType: DICT_TYPES.CAMPAIGN_STATUS }
  ])

  return res.apiSuccess(campaigns)
})
```

---

## ğŸ“‹ å¯ç”¨çš„å­—å…¸ç±»å‹ (DICT_TYPES)

### ç”¨æˆ·ç›¸å…³
| å¸¸é‡ | å€¼ | è¯´æ˜ | è®°å½•æ•° |
|-----|---|------|-------|
| `USER_STATUS` | `user_status` | ç”¨æˆ·çŠ¶æ€ | 3 |
| `USER_LEVEL` | `user_level` | ç”¨æˆ·ç­‰çº§ | 3 |
| `ACCOUNT_STATUS` | `account_status` | è´¦æˆ·çŠ¶æ€ | 2 |

### æ´»åŠ¨æŠ½å¥–ç›¸å…³
| å¸¸é‡ | å€¼ | è¯´æ˜ | è®°å½•æ•° |
|-----|---|------|-------|
| `CAMPAIGN_STATUS` | `campaign_status` | æ´»åŠ¨çŠ¶æ€ | 5 |
| `CAMPAIGN_TYPE` | `campaign_type` | æ´»åŠ¨ç±»å‹ | 8 |
| `PRIZE_TYPE` | `prize_type` | å¥–å“ç±»å‹ | 7 |
| `BUDGET_MODE` | `budget_mode` | é¢„ç®—æ¨¡å¼ | 3 |
| `REWARD_TIER` | `reward_tier` | å¥–åŠ±æ¡£ä½ | 5 |

### è®¢å•äº¤æ˜“ç›¸å…³
| å¸¸é‡ | å€¼ | è¯´æ˜ | è®°å½•æ•° |
|-----|---|------|-------|
| `TRADE_ORDER_STATUS` | `trade_order_status` | äº¤æ˜“çŠ¶æ€ | 5 |
| `LISTING_STATUS` | `listing_status` | æŒ‚ç‰ŒçŠ¶æ€ | 5 |
| `REDEMPTION_STATUS` | `redemption_status` | æ ¸é”€çŠ¶æ€ | 4 |
| `CONSUMPTION_STATUS` | `consumption_status` | æ¶ˆè´¹çŠ¶æ€ | 4 |

### å®¡è®¡æ—¥å¿—ç›¸å…³
| å¸¸é‡ | å€¼ | è¯´æ˜ | è®°å½•æ•° |
|-----|---|------|-------|
| `OPERATION_TYPE` | `operation_type` | æ“ä½œç±»å‹ | 30 |
| `TARGET_TYPE` | `target_type` | ç›®æ ‡ç±»å‹ | 12 |
| `AUDIT_STATUS` | `audit_status` | å®¡æ ¸çŠ¶æ€ | 4 |

### é—¨åº—ç›¸å…³
| å¸¸é‡ | å€¼ | è¯´æ˜ | è®°å½•æ•° |
|-----|---|------|-------|
| `STORE_STATUS` | `store_status` | é—¨åº—çŠ¶æ€ | 3 |
| `STORE_STAFF_ROLE` | `store_staff_role` | å‘˜å·¥è§’è‰² | 2 |

### å®Œæ•´åˆ—è¡¨
è¯·æŸ¥çœ‹ `utils/displayNameHelper.js` ä¸­çš„ `DICT_TYPES` å¸¸é‡ï¼ˆ56 ç§ï¼‰ã€‚

---

## ğŸ“Œ éœ€è¦ä¿®æ”¹çš„ Service åˆ—è¡¨

ä»¥ä¸‹ Service éœ€è¦æ·»åŠ  `attachDisplayNames` è°ƒç”¨ï¼š

### é«˜ä¼˜å…ˆçº§ï¼ˆP0ï¼‰

| Service | æ–¹æ³• | éœ€é™„åŠ çš„å­—æ®µ |
|---------|------|------------|
| `CampaignService` | `getList`, `getDetail` | `status`, `type` |
| `UserService` | `getList`, `getDetail` | `status` |
| `TradeOrderService` | `getList` | `status` |
| `AssetService` | `getList` | `type`, `status` |

### ä¸­ä¼˜å…ˆçº§ï¼ˆP1ï¼‰

| Service | æ–¹æ³• | éœ€é™„åŠ çš„å­—æ®µ |
|---------|------|------------|
| `StoreService` | `getList` | `status` |
| `ConsumptionService` | `getList` | `status` |
| `ExchangeService` | `getList` | `status` |

### ä½ä¼˜å…ˆçº§ï¼ˆP2ï¼‰

| Service | æ–¹æ³• | éœ€é™„åŠ çš„å­—æ®µ |
|---------|------|------------|
| `FeedbackService` | `getList` | `status`, `category` |
| `ContentService` | `getList` | `position`, `type` |

---

## ğŸ”§ è‡ªå®šä¹‰å­—æ®µå

å¦‚æœä¸æƒ³ç”¨é»˜è®¤çš„ `_display` å’Œ `_color` åç¼€ï¼š

```javascript
await attachDisplayNames(data, [{
  field: 'status',
  dictType: DICT_TYPES.CAMPAIGN_STATUS,
  displayField: 'status_name',   // è‡ªå®šä¹‰æ˜¾ç¤ºå­—æ®µå
  colorField: 'status_badge'     // è‡ªå®šä¹‰é¢œè‰²å­—æ®µå
}])

// ç»“æœï¼š
// { status: 'active', status_name: 'è¿›è¡Œä¸­', status_badge: 'bg-success' }
```

---

## ğŸ” æ£€æŸ¥å­—å…¸æ•°æ®

```bash
# æŸ¥çœ‹æ‰€æœ‰å­—å…¸ç±»å‹
node -e "
require('dotenv').config()
const { SystemDictionary } = require('./models')
SystemDictionary.findAll({
  attributes: ['dict_type', 'dict_code', 'dict_name'],
  where: { dict_type: 'campaign_status' }
}).then(rows => console.log(JSON.stringify(rows, null, 2)))
"
```

---

## ğŸ“ æ·»åŠ æ–°å­—å…¸é¡¹

å¦‚æœå‘ç°æŸä¸ªæšä¸¾å€¼æ²¡æœ‰å¯¹åº”çš„ä¸­æ–‡åç§°ï¼š

```sql
INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, color_class, sort_order)
VALUES ('your_dict_type', 'your_code', 'ä¸­æ–‡åç§°', 'bg-primary', 1);
```

æˆ–ä½¿ç”¨ Sequelizeï¼š

```javascript
await SystemDictionary.create({
  dict_type: 'campaign_status',
  dict_code: 'new_status',
  dict_name: 'æ–°çŠ¶æ€',
  color_class: 'bg-info',
  sort_order: 10
})
```

---

## âœ… å·²ä½¿ç”¨ attachDisplayNames çš„ Service

ä»¥ä¸‹ Service å·²ç»æ­£ç¡®ä½¿ç”¨äº†ä¸­æ–‡åŒ–ç³»ç»Ÿï¼ˆå…± 25 ä¸ªæ–‡ä»¶ï¼Œ80 æ¬¡è°ƒç”¨ï¼‰ï¼š

- `services/AuditLogService.js` - operation_type, target_type
- `services/TradeOrderService.js` - status (trade_order_status, listing_status)
- `services/UserService.js` - status
- `services/FeedbackService.js` - status, category
- `services/BackpackService.js` - status
- `services/exchange/QueryService.js` - status
- `services/consumption/QueryService.js` - status
- `services/StoreService.js` - status
- `services/admin-lottery/CampaignService.js` - status, campaign_type
- `services/LotteryAlertService.js` - alert_type, severity, status
- `services/StaffManagementService.js` - status, role_in_store (**P2 æ–°å¢**)
- `services/CustomerServiceSessionService.js` - status (**P2 æ–°å¢**)
- `services/LotteryPresetService.js` - status, approval_status, advance_mode (**P2 æ–°å¢**)
- `services/DebtManagementService.js` - status (**P2 æ–°å¢**)
- `services/AnnouncementService.js` - type, priority (**P2 æ–°å¢**)
- `services/PopupBannerService.js` - position, link_type (**P2 æ–°å¢**)
- `services/FeatureFlagService.js` - rollout_strategy, fallback_behavior (**P2 æ–°å¢**)

---

## ğŸ“Š å®é™…ä»£ç æ£€æŸ¥ç»“æœï¼ˆ2026-02-06ï¼‰

> ä»¥ä¸‹æ•°æ®æ¥è‡ªå¯¹é¡¹ç›®å®é™…ä»£ç å’Œæ•°æ®åº“çš„æ£€æŸ¥ï¼Œè€Œéæ–‡æ¡£æ¨æµ‹ã€‚

### âœ… åç«¯åŸºç¡€è®¾æ–½çŠ¶æ€

| ç»„ä»¶ | çŠ¶æ€ | å®é™…æ•°æ® |
|------|------|----------|
| `system_dictionaries` è¡¨ | âœ… å®Œæ•´ | **333 æ¡è®°å½•ï¼Œ70 ç§ç±»å‹** |
| `utils/displayNameHelper.js` | âœ… å¯ç”¨ | æä¾› `attachDisplayNames` å‡½æ•° |
| `services/DisplayNameService.js` | âœ… å¯ç”¨ | Redis ç¼“å­˜ + æ•°æ®åº“æŸ¥è¯¢ |

### âœ… åç«¯å·²ä½¿ç”¨ attachDisplayNames çš„æ–‡ä»¶ï¼ˆ25ä¸ªï¼‰

ä»¥ä¸‹æ–‡ä»¶å·²æ­£ç¡®è°ƒç”¨ `attachDisplayNames`ï¼Œå¯ä½œä¸ºæ”¹é€ å‚è€ƒï¼š

| æ–‡ä»¶è·¯å¾„ | é™„åŠ çš„å­—æ®µ |
|----------|-----------|
| `services/TradeOrderService.js` | `status` (trade_order_status, listing_status) |
| `services/UserService.js` | `status` |
| `services/AuditLogService.js` | `operation_type`, `target_type` |
| `services/BackpackService.js` | `status` |
| `services/FeedbackService.js` | `status`, `category` |
| `services/UserRoleService.js` | `status` |
| `services/exchange/QueryService.js` | `status` |
| `services/exchange/AdminService.js` | `status` |
| `services/consumption/QueryService.js` | `status` |
| `services/consumption/MerchantService.js` | `status` |
| `services/market-listing/QueryService.js` | `status` |
| `services/admin-lottery/QueryService.js` | `status` |
| `services/lottery/LotteryHistoryService.js` | `status` |

### âŒ åç«¯æœªä½¿ç”¨çš„æ–‡ä»¶ï¼ˆéœ€æ”¹é€ ï¼‰

ä»¥ä¸‹æ–‡ä»¶/è·¯ç”±è¿”å›æ•°æ®æ—¶**æœªè°ƒç”¨** `attachDisplayNames`ï¼š

| ä¼˜å…ˆçº§ | æ–‡ä»¶è·¯å¾„ | æ¶‰åŠå­—æ®µ | è¯´æ˜ |
|--------|----------|----------|------|
| **P0** | `routes/v4/console/lottery-campaigns.js` | `status`, `campaign_type` | æ´»åŠ¨åˆ—è¡¨è·¯ç”± |
| **P0** | `services/admin-lottery/CampaignService.js` | `status` | æ´»åŠ¨ç®¡ç†æœåŠ¡ |
| **P1** | `services/StoreService.js` | `status` | é—¨åº—æœåŠ¡ |
| **P1** | `routes/v4/console/stores.js` | `status` | é—¨åº—è·¯ç”± |

---

## âœ… å·²æ‹æ¿çš„å†³å®šï¼ˆ2026-02-06ï¼‰

### 1ï¸âƒ£ å®æ–½æ‰¹æ¬¡å’Œä¼˜å…ˆçº§

~~æ–¹æ¡ˆ Aï¼šé€ä¸ªè”è°ƒï¼ˆç¨³å¦¥ï¼‰~~

**âœ… å·²é€‰æ‹©ï¼šæ–¹æ¡ˆ B - åç«¯å…¨æ”¹å®Œå†å‰ç«¯ï¼ˆé«˜æ•ˆï¼‰**
```
åç«¯ï¼šä¸€æ¬¡æ€§æ”¹å®Œæ‰€æœ‰ Serviceï¼ˆ1-2 å¤©ï¼‰
å‰ç«¯ï¼šç»Ÿä¸€åˆ é™¤æ˜ å°„å‡½æ•°ï¼ˆ1 å¤©ï¼‰
```

---

### 2ï¸âƒ£ æ˜¯å¦éœ€è¦è¿‡æ¸¡æœŸå…¼å®¹

**âœ… å·²é€‰æ‹©ï¼šæ–¹æ¡ˆ A - ä¸å…¼å®¹ï¼ˆç®€å•ï¼‰**
- åç«¯æ”¹å®Œç›´æ¥éƒ¨ç½²
- å‰ç«¯å¿…é¡»åŒæ­¥æ›´æ–°
- âš ï¸ æ³¨æ„ï¼šå‰ç«¯æ²¡æ›´æ–°ä¼šæ˜¾ç¤º undefined

~~æ–¹æ¡ˆ Bï¼šå…¼å®¹ä¸€æ®µæ—¶é—´ï¼ˆå®‰å…¨ï¼‰~~

---

### 3ï¸âƒ£ æ•°æ®åº“å­—å…¸æ•°æ®è¡¥å……ï¼ˆ2026-02-06 æ‰¹å‡†ï¼‰

**âœ… å†³ç­–1: æ‰¹å‡†æ‰§è¡Œ SQL æ’å…¥çº¦ 41 æ¡å­—å…¸è®°å½•**

| éœ€è¦æ–°å¢ | æ•°é‡ | è¯´æ˜ | çŠ¶æ€ |
|---------|-----|------|------|
| `lottery_alert_type` | 13æ¡ | å‘Šè­¦ç±»å‹æ˜ å°„ | âœ… æ‰¹å‡† |
| `lottery_alert_status` | 3æ¡ | å‘Šè­¦çŠ¶æ€æ˜ å°„ | âœ… æ‰¹å‡† |
| `lottery_alert_severity` | 3æ¡ | å‘Šè­¦çº§åˆ«æ˜ å°„ | âœ… æ‰¹å‡† |
| `campaign_status` è¡¥å…… | 2æ¡ | inactive, pending | âœ… æ‰¹å‡† |
| `store_status` è¡¥å…… | 1æ¡ | closed | âœ… æ‰¹å‡† |
| `target_type` è¡¥å…… | 21æ¡ | å®¡è®¡ç›®æ ‡ç±»å‹ | âœ… æ‰¹å‡† |

**ç†ç”±**ï¼šè¿™æ˜¯"é…ç½®é©±åŠ¨"çš„æ ¸å¿ƒï¼Œæ•°æ®å³é…ç½®

---

### 4ï¸âƒ£ displayNameHelper.js å¸¸é‡æ–°å¢ï¼ˆ2026-02-06 æ‰¹å‡†ï¼‰

**âœ… å†³ç­–2: æ‰¹å‡†æ·»åŠ  3 ä¸ªæ–°å¸¸é‡**

```javascript
LOTTERY_ALERT_TYPE: 'lottery_alert_type',
LOTTERY_ALERT_STATUS: 'lottery_alert_status', 
LOTTERY_ALERT_SEVERITY: 'lottery_alert_severity'
```

**ç†ç”±**ï¼šç¬¦åˆç°æœ‰è®¾è®¡æ¨¡å¼ï¼Œæœ€å°æ”¹åŠ¨

---

### 5ï¸âƒ£ target_type æ•°æ®åº“ä¸ä»£ç ä¸ä¸€è‡´å¤„ç†ï¼ˆ2026-02-06 æ‰¹å‡†ï¼‰

**âœ… å†³ç­–3: é€‰æ‹©æ–¹æ¡ˆ A - ä¿å®ˆæ–¹æ¡ˆ**

- âœ… ä»…è¡¥å……æ•°æ®åº“ç¼ºå¤±çš„ 21 ä¸ªç±»å‹
- â¸ï¸ æ•°æ®åº“å¤šå‡ºçš„ 7 ä¸ª"é—ç•™"ç±»å‹æš‚ä¸æ¸…ç†
- ğŸ“Œ åç»­æœ‰éœ€è¦å†æ¸…ç†ï¼ˆ`admin`, `campaign`, `config`, `lottery`, `order`, `prize`, `system`ï¼‰

**ç†ç”±**ï¼šæœ€å°æ”¹åŠ¨ï¼Œä¸å½±å“å·²æœ‰ä¸šåŠ¡

---

### 6ï¸âƒ£ å‰ç«¯æ¸…ç†èŒƒå›´ç¡®è®¤ï¼ˆ2026-02-06 æ‰¹å‡†ï¼‰

**âœ… å†³ç­–4: æ‰¹å‡†åˆ é™¤ 19 ä¸ª `getXxxText` å‡½æ•°**

åˆ†å¸ƒåœ¨ 12 ä¸ªæ–‡ä»¶ä¸­ï¼Œæ”¹ç”¨ `xxx_display` å­—æ®µ

**ç†ç”±**ï¼šå®ç°"å•ä¸€æ•°æ®æº"åŸåˆ™

---

### 7ï¸âƒ£ åç«¯æœåŠ¡ä¿®æ”¹èŒƒå›´ç¡®è®¤ï¼ˆ2026-02-06 æ‰¹å‡†ï¼‰

**âœ… å†³ç­–5: æ‰¹å‡†ä¿®æ”¹ 4 ä¸ªåç«¯æ–‡ä»¶**

| æ–‡ä»¶ | éœ€æ·»åŠ å­—æ®µ |
|------|-----------|
| `services/admin-lottery/CampaignService.js` | status, campaign_type |
| `routes/v4/console/lottery-campaigns.js` | status |
| `services/StoreService.js` | status |
| `services/admin-lottery/AlertService.js` | type, status, severity |

**ç†ç”±**ï¼šæ ¸å¿ƒæ”¹åŠ¨ç‚¹ï¼Œå¿…é¡»æ‰§è¡Œ

---

### 8ï¸âƒ£ å­—å…¸æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ç»“æœï¼ˆå·²å®Œæˆ 2026-02-06ï¼‰

**âœ… å·²å®Œæˆæ£€æŸ¥ï¼Œå‘ç°ä»¥ä¸‹ç¼ºå¤±/ä¸ä¸€è‡´é¡¹éœ€è¦è¡¥å……ï¼š**

---

#### ğŸ”´ éœ€è¦æ–°å¢çš„å­—å…¸ç±»å‹ï¼ˆ3 ç§ï¼‰

| dict_type | è¯´æ˜ | éœ€è¡¥å……çš„ dict_code |
|-----------|------|-------------------|
| `lottery_alert_type` | æŠ½å¥–å‘Šè­¦ç±»å‹ | budget_exhaust, budget_warning, stock_low, stock_warning, win_rate_high, win_rate_low, high_frequency_user, empty_streak_high, win_rate, budget, inventory, user, system |
| `lottery_alert_status` | æŠ½å¥–å‘Šè­¦çŠ¶æ€ | active, acknowledged, resolved |
| `lottery_alert_severity` | æŠ½å¥–å‘Šè­¦çº§åˆ« | danger, warning, info |

---

#### ğŸŸ¡ éœ€è¦è¡¥å……çš„ dict_codeï¼ˆç°æœ‰ç±»å‹ï¼‰

| dict_type | ç°æœ‰ | ç¼ºå¤± | å‰ç«¯ç”¨é€” |
|-----------|------|------|----------|
| `campaign_status` | draft, active, paused, ended, cancelled | **inactive**, **pending** | campaigns.js ç”¨ inactive='å·²ç»“æŸ', pending='å¾…å¼€å§‹' |
| `preset_status` | pending, used | **active**, **expired**, **cancelled** | presets.js ç”¨ active='ç”Ÿæ•ˆä¸­' |
| `store_status` | active, inactive, pending | **closed** | store-management.js ç”¨ closed='å·²å…³é—­' |

---

#### ğŸŸ¢ åç§°ä¸ä¸€è‡´ä½†å¯æ¥å—çš„é¡¹

| dict_type | dict_code | æ•°æ®åº“åç§° | å‰ç«¯åç§° | å»ºè®® |
|-----------|-----------|-----------|----------|------|
| `debt_status` | pending | å¾…æ¸…å¿ | å¾…è¿˜æ¬¾ | ä¿æŒæ•°æ®åº“ï¼Œå‰ç«¯æ”¹ç”¨ `_display` |
| `store_staff_status` | active | åœ¨èŒ | åœ¨èŒ | âœ… ä¸€è‡´ |
| `store_staff_status` | inactive | ç¦»èŒ | ç¦»èŒ | âœ… ä¸€è‡´ |

---

#### ğŸ“Š å·²ç¡®è®¤å®Œæ•´çš„å­—å…¸ç±»å‹ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

ä»¥ä¸‹ç±»å‹æ•°æ®åº“å·²å®Œæ•´ï¼Œå‰ç«¯å¯ç›´æ¥ä½¿ç”¨ `_display`ï¼š

| dict_type | è®°å½•æ•° | åŒ…å«çš„ code |
|-----------|--------|------------|
| `user_status` | 3 | active, inactive, banned |
| `trade_order_status` | 5 | created, frozen, completed, cancelled, failed |
| `listing_status` | 5 | on_sale, locked, sold, withdrawn, admin_withdrawn |
| `redemption_status` | 4 | pending, fulfilled, cancelled, expired |
| `consumption_status` | 4 | pending, approved, rejected, expired |
| `exchange_status` | 4 | pending, completed, shipped, cancelled |
| `feedback_status` | 4 | pending, processing, replied, closed |
| `risk_alert_status` | 3 | pending, reviewed, ignored |
| `risk_severity` | 4 | low, medium, high, critical |
| `unlock_method` | 4 | points, exchange, vip, manual |

---

#### ğŸ“ éœ€è¦æ‰§è¡Œçš„ SQLï¼ˆè¡¥å……ç¼ºå¤±å­—å…¸ï¼‰

```sql
-- 1. è¡¥å…… campaign_status ç¼ºå¤±é¡¹
INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
VALUES 
  ('campaign_status', 'inactive', 'å·²åœç”¨', 'bg-secondary', 6, 'active', NOW(), NOW()),
  ('campaign_status', 'pending', 'å¾…å¼€å§‹', 'bg-warning', 7, 'active', NOW(), NOW());

-- 2. è¡¥å…… preset_status ç¼ºå¤±é¡¹ï¼ˆåˆå¹¶åˆ° management_setting_statusï¼‰
-- æ³¨æ„ï¼šæ•°æ®åº“å·²æœ‰ management_setting_status åŒ…å« active, expired, used, cancelled
-- å‰ç«¯ presets.js åº”è¯¥æ”¹ç”¨ DICT_TYPES.MANAGEMENT_SETTING_STATUS

-- 3. è¡¥å…… store_status ç¼ºå¤±é¡¹
INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
VALUES 
  ('store_status', 'closed', 'å·²å…³é—­', 'bg-danger', 4, 'active', NOW(), NOW());

-- 4. æ–°å¢ lottery_alert_type ç±»å‹
INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
VALUES 
  ('lottery_alert_type', 'budget_exhaust', 'é¢„ç®—å‘Šæ€¥', 'bg-danger', 1, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'budget_warning', 'é¢„ç®—é¢„è­¦', 'bg-warning', 2, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'stock_low', 'åº“å­˜å‘Šæ€¥', 'bg-danger', 3, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'stock_warning', 'åº“å­˜é¢„è­¦', 'bg-warning', 4, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'win_rate_high', 'ä¸­å¥–ç‡è¿‡é«˜', 'bg-warning', 5, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'win_rate_low', 'ä¸­å¥–ç‡è¿‡ä½', 'bg-info', 6, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'high_frequency_user', 'é«˜é¢‘ç”¨æˆ·', 'bg-warning', 7, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'empty_streak_high', 'è¿ç©ºç”¨æˆ·è¿‡å¤š', 'bg-warning', 8, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'win_rate', 'ä¸­å¥–ç‡å¼‚å¸¸', 'bg-warning', 9, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'budget', 'é¢„ç®—å‘Šè­¦', 'bg-warning', 10, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'inventory', 'åº“å­˜å‘Šè­¦', 'bg-warning', 11, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'user', 'ç”¨æˆ·å¼‚å¸¸', 'bg-info', 12, 'active', NOW(), NOW()),
  ('lottery_alert_type', 'system', 'ç³»ç»Ÿå‘Šè­¦', 'bg-danger', 13, 'active', NOW(), NOW());

-- 5. æ–°å¢ lottery_alert_status ç±»å‹
INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
VALUES 
  ('lottery_alert_status', 'active', 'æ´»è·ƒ', 'bg-danger', 1, 'active', NOW(), NOW()),
  ('lottery_alert_status', 'acknowledged', 'å·²ç¡®è®¤', 'bg-warning', 2, 'active', NOW(), NOW()),
  ('lottery_alert_status', 'resolved', 'å·²è§£å†³', 'bg-success', 3, 'active', NOW(), NOW());

-- 6. æ–°å¢ lottery_alert_severity ç±»å‹
INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
VALUES 
  ('lottery_alert_severity', 'danger', 'å±é™©', 'bg-danger', 1, 'active', NOW(), NOW()),
  ('lottery_alert_severity', 'warning', 'è­¦å‘Š', 'bg-warning', 2, 'active', NOW(), NOW()),
  ('lottery_alert_severity', 'info', 'æç¤º', 'bg-info', 3, 'active', NOW(), NOW());
```

---

#### ğŸ“ éœ€è¦åœ¨ displayNameHelper.js ä¸­æ·»åŠ çš„å¸¸é‡

```javascript
// åœ¨ DICT_TYPES ä¸­æ·»åŠ 
LOTTERY_ALERT_TYPE: 'lottery_alert_type',
LOTTERY_ALERT_STATUS: 'lottery_alert_status', 
LOTTERY_ALERT_SEVERITY: 'lottery_alert_severity',
```

---

### 4ï¸âƒ£ æµ‹è¯•éªŒè¯æ–¹å¼

~~æ–¹æ¡ˆ Aï¼šäººå·¥éªŒè¯~~

**âœ… å·²é€‰æ‹©ï¼šæ–¹æ¡ˆ B - å†™è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬**
- æ£€æŸ¥æ‰€æœ‰ API å“åº”æ˜¯å¦åŒ…å« `_display` å­—æ®µ
- æ£€æŸ¥å‰ç«¯ä»£ç æ˜¯å¦è¿˜æœ‰ `getXxxText` å‡½æ•°

---

### 5ï¸âƒ£ target_type å­—å…¸æ•°æ®è¡¥å……ï¼ˆ2026-02-06ï¼‰

> **é—®é¢˜æè¿°**ï¼šå®¡è®¡æŠ¥å‘Šä¸­éƒ¨åˆ† `target_type_display` æ˜¾ç¤ºåŸå§‹å€¼è€Œéä¸­æ–‡ï¼ŒåŸå› æ˜¯æ•°æ®åº“å­—å…¸ä¸å®Œæ•´ã€‚

#### ğŸ”´ ç°çŠ¶å¯¹æ¯”

| æ•°æ®æ¥æº | æ•°é‡ | è¯´æ˜ |
|----------|------|------|
| æ•°æ®åº“ `system_dictionaries` (target_type) | **12 æ¡** | ä»…è¦†ç›–éƒ¨åˆ†ç±»å‹ |
| `constants/AuditTargetTypes.js` | **26 ç§** | å®Œæ•´çš„èµ„æºç å®šä¹‰ |
| `getTargetTypeDisplayName()` å‡½æ•° | **26 ç§** | å®Œæ•´çš„ä¸­æ–‡æ˜ å°„ |

#### ğŸ”´ ç¼ºå¤±çš„ target_type å­—å…¸ï¼ˆ14 æ¡ï¼‰

æ ¹æ® `AuditTargetTypes.js` ä¸­çš„å®šä¹‰ï¼Œæ•°æ®åº“ç¼ºå¤±ä»¥ä¸‹ target_typeï¼š

| dict_code | dict_name | ä¸šåŠ¡åˆ†ç±» |
|-----------|-----------|----------|
| `role` | è§’è‰² | ç”¨æˆ·ä¸æƒé™ |
| `user_role_change_record` | è§’è‰²å˜æ›´è®°å½• | ç”¨æˆ·ä¸æƒé™ |
| `user_status_change_record` | çŠ¶æ€å˜æ›´è®°å½• | ç”¨æˆ·ä¸æƒé™ |
| `customer_service_session` | å®¢æœä¼šè¯ | ç”¨æˆ·ä¸æƒé™ |
| `account` | è´¦æˆ· | èµ„äº§ä¸è´¦æœ¬ |
| `account_asset_balance` | èµ„äº§ä½™é¢ | èµ„äº§ä¸è´¦æœ¬ |
| `asset_transaction` | èµ„äº§æµæ°´ | èµ„äº§ä¸è´¦æœ¬ |
| `item_instance` | é“å…·å®ä¾‹ | ç‰©å“ä¸åº“å­˜ |
| `item_instance_event` | é“å…·äº‹ä»¶ | ç‰©å“ä¸åº“å­˜ |
| `redemption_order` | å…‘æ¢è®¢å• | ç‰©å“ä¸åº“å­˜ |
| `exchange_item` | å…‘æ¢ç‰©å“ | å•†å“ä¸å…‘æ¢ |
| `exchange_record` | å…‘æ¢è®°å½• | å•†å“ä¸å…‘æ¢ |
| `consumption_record` | æ¶ˆè´¹è®°å½• | æ¶ˆè´¹ä¸å®¡æ ¸ |
| `content_review_record` | å†…å®¹å®¡æ ¸è®°å½• | æ¶ˆè´¹ä¸å®¡æ ¸ |
| `lottery_campaign` | æŠ½å¥–æ´»åŠ¨ | æŠ½å¥–ç³»ç»Ÿ |
| `lottery_prize` | æŠ½å¥–å¥–å“ | æŠ½å¥–ç³»ç»Ÿ |
| `lottery_draw` | æŠ½å¥–è®°å½• | æŠ½å¥–ç³»ç»Ÿ |
| `lottery_management_setting` | æŠ½å¥–ç®¡ç†è®¾ç½® | æŠ½å¥–ç³»ç»Ÿ |
| `lottery_clear_setting_record` | æ¸…åº“å­˜è®¾ç½®è®°å½• | æŠ½å¥–ç³»ç»Ÿ |
| `system_setting` | ç³»ç»Ÿè®¾ç½® | ç³»ç»Ÿé…ç½® |
| `popup_banner` | å¼¹çª—å¹¿å‘Š | ç³»ç»Ÿé…ç½® |

#### ğŸ“ éœ€è¦æ‰§è¡Œçš„ SQLï¼ˆè¡¥å…… target_type å­—å…¸ï¼‰

```sql
-- è¡¥å…… target_type ç¼ºå¤±çš„å­—å…¸æ•°æ®ï¼ˆ2026-02-06ï¼‰
-- å…± 21 æ¡ï¼ˆ14æ¡æ–°å¢ + 7æ¡å·²æœ‰ä½†åç§°å¯èƒ½éœ€æ›´æ–°çš„ï¼‰

INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
VALUES 
  -- ç”¨æˆ·ä¸æƒé™
  ('target_type', 'role', 'è§’è‰²', 'bg-primary', 13, 'active', NOW(), NOW()),
  ('target_type', 'user_role_change_record', 'è§’è‰²å˜æ›´è®°å½•', 'bg-info', 14, 'active', NOW(), NOW()),
  ('target_type', 'user_status_change_record', 'çŠ¶æ€å˜æ›´è®°å½•', 'bg-info', 15, 'active', NOW(), NOW()),
  ('target_type', 'customer_service_session', 'å®¢æœä¼šè¯', 'bg-success', 16, 'active', NOW(), NOW()),
  
  -- èµ„äº§ä¸è´¦æœ¬
  ('target_type', 'account', 'è´¦æˆ·', 'bg-warning', 17, 'active', NOW(), NOW()),
  ('target_type', 'account_asset_balance', 'èµ„äº§ä½™é¢', 'bg-warning', 18, 'active', NOW(), NOW()),
  ('target_type', 'asset_transaction', 'èµ„äº§æµæ°´', 'bg-warning', 19, 'active', NOW(), NOW()),
  
  -- ç‰©å“ä¸åº“å­˜
  ('target_type', 'item_instance', 'é“å…·å®ä¾‹', 'bg-info', 20, 'active', NOW(), NOW()),
  ('target_type', 'item_instance_event', 'é“å…·äº‹ä»¶', 'bg-info', 21, 'active', NOW(), NOW()),
  ('target_type', 'redemption_order', 'å…‘æ¢è®¢å•', 'bg-success', 22, 'active', NOW(), NOW()),
  
  -- å•†å“ä¸å…‘æ¢
  ('target_type', 'exchange_item', 'å…‘æ¢ç‰©å“', 'bg-primary', 23, 'active', NOW(), NOW()),
  ('target_type', 'exchange_record', 'å…‘æ¢è®°å½•', 'bg-primary', 24, 'active', NOW(), NOW()),
  
  -- æ¶ˆè´¹ä¸å®¡æ ¸
  ('target_type', 'consumption_record', 'æ¶ˆè´¹è®°å½•', 'bg-success', 25, 'active', NOW(), NOW()),
  ('target_type', 'content_review_record', 'å†…å®¹å®¡æ ¸è®°å½•', 'bg-warning', 26, 'active', NOW(), NOW()),
  
  -- æŠ½å¥–ç³»ç»Ÿ
  ('target_type', 'lottery_campaign', 'æŠ½å¥–æ´»åŠ¨', 'bg-danger', 27, 'active', NOW(), NOW()),
  ('target_type', 'lottery_prize', 'æŠ½å¥–å¥–å“', 'bg-danger', 28, 'active', NOW(), NOW()),
  ('target_type', 'lottery_draw', 'æŠ½å¥–è®°å½•', 'bg-danger', 29, 'active', NOW(), NOW()),
  ('target_type', 'lottery_management_setting', 'æŠ½å¥–ç®¡ç†è®¾ç½®', 'bg-secondary', 30, 'active', NOW(), NOW()),
  ('target_type', 'lottery_clear_setting_record', 'æ¸…åº“å­˜è®¾ç½®è®°å½•', 'bg-secondary', 31, 'active', NOW(), NOW()),
  
  -- ç³»ç»Ÿé…ç½®
  ('target_type', 'system_setting', 'ç³»ç»Ÿè®¾ç½®', 'bg-dark', 32, 'active', NOW(), NOW()),
  ('target_type', 'popup_banner', 'å¼¹çª—å¹¿å‘Š', 'bg-info', 33, 'active', NOW(), NOW())
ON DUPLICATE KEY UPDATE 
  dict_name = VALUES(dict_name),
  dict_color = VALUES(dict_color),
  sort_order = VALUES(sort_order),
  updated_at = NOW();
```

#### âš ï¸ æ•°æ®åº“ç°æœ‰ target_type ä¸ä»£ç ä¸ä¸€è‡´çš„é¡¹

ä»¥ä¸‹æ˜¯æ•°æ®åº“ä¸­å­˜åœ¨ä½† `AuditTargetTypes.js` ä¸­æœªå®šä¹‰çš„å€¼ï¼ˆå¯èƒ½æ˜¯å†å²é—ç•™ï¼‰ï¼š

| dict_code | æ•°æ®åº“åç§° | AuditTargetTypes.js å¯¹åº” | å»ºè®® |
|-----------|------------|-------------------------|------|
| `admin` | ç®¡ç†å‘˜ | æ— ï¼ˆå·²åˆå¹¶åˆ° `user`ï¼‰ | ä¿ç•™ |
| `order` | è®¢å• | æ— ï¼ˆç”¨ `trade_order`ï¼‰ | ä¿ç•™ |
| `lottery` | æŠ½å¥– | `lottery_campaign` | ä¿ç•™ï¼ˆå‘åå…¼å®¹ï¼‰ |
| `prize` | å¥–å“ | `lottery_prize` | ä¿ç•™ï¼ˆå‘åå…¼å®¹ï¼‰ |
| `campaign` | æ´»åŠ¨ | `lottery_campaign` | ä¿ç•™ï¼ˆå‘åå…¼å®¹ï¼‰ |

#### âœ… å®Œæ•´çš„ target_type å­—å…¸å‚è€ƒè¡¨

æ‰§è¡Œ SQL åï¼Œ`target_type` å­—å…¸åº”åŒ…å«ä»¥ä¸‹ **33 æ¡**è®°å½•ï¼š

| # | dict_code | dict_name | æ¥æº |
|---|-----------|-----------|------|
| 1 | user | ç”¨æˆ· | åŸæœ‰ |
| 2 | admin | ç®¡ç†å‘˜ | åŸæœ‰ |
| 3 | product | å•†å“ | åŸæœ‰ |
| 4 | order | è®¢å• | åŸæœ‰ |
| 5 | trade_order | äº¤æ˜“è®¢å• | åŸæœ‰ |
| 6 | market_listing | å¸‚åœºæŒ‚ç‰Œ | åŸæœ‰ |
| 7 | system | ç³»ç»Ÿ | åŸæœ‰ |
| 8 | config | é…ç½® | åŸæœ‰ |
| 9 | lottery | æŠ½å¥– | åŸæœ‰ |
| 10 | prize | å¥–å“ | åŸæœ‰ |
| 11 | campaign | æ´»åŠ¨ | åŸæœ‰ |
| 12 | feature_flag | åŠŸèƒ½å¼€å…³ | åŸæœ‰ |
| 13 | role | è§’è‰² | **æ–°å¢** |
| 14 | user_role_change_record | è§’è‰²å˜æ›´è®°å½• | **æ–°å¢** |
| 15 | user_status_change_record | çŠ¶æ€å˜æ›´è®°å½• | **æ–°å¢** |
| 16 | customer_service_session | å®¢æœä¼šè¯ | **æ–°å¢** |
| 17 | account | è´¦æˆ· | **æ–°å¢** |
| 18 | account_asset_balance | èµ„äº§ä½™é¢ | **æ–°å¢** |
| 19 | asset_transaction | èµ„äº§æµæ°´ | **æ–°å¢** |
| 20 | item_instance | é“å…·å®ä¾‹ | **æ–°å¢** |
| 21 | item_instance_event | é“å…·äº‹ä»¶ | **æ–°å¢** |
| 22 | redemption_order | å…‘æ¢è®¢å• | **æ–°å¢** |
| 23 | exchange_item | å…‘æ¢ç‰©å“ | **æ–°å¢** |
| 24 | exchange_record | å…‘æ¢è®°å½• | **æ–°å¢** |
| 25 | consumption_record | æ¶ˆè´¹è®°å½• | **æ–°å¢** |
| 26 | content_review_record | å†…å®¹å®¡æ ¸è®°å½• | **æ–°å¢** |
| 27 | lottery_campaign | æŠ½å¥–æ´»åŠ¨ | **æ–°å¢** |
| 28 | lottery_prize | æŠ½å¥–å¥–å“ | **æ–°å¢** |
| 29 | lottery_draw | æŠ½å¥–è®°å½• | **æ–°å¢** |
| 30 | lottery_management_setting | æŠ½å¥–ç®¡ç†è®¾ç½® | **æ–°å¢** |
| 31 | lottery_clear_setting_record | æ¸…åº“å­˜è®¾ç½®è®°å½• | **æ–°å¢** |
| 32 | system_setting | ç³»ç»Ÿè®¾ç½® | **æ–°å¢** |
| 33 | popup_banner | å¼¹çª—å¹¿å‘Š | **æ–°å¢** |

---

## ğŸ“‹ æ‰§è¡Œè®¡åˆ’

æ ¹æ®ä¸Šè¿°å†³å®šï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š

| æ­¥éª¤ | ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|------|
| **ç¬¬1æ­¥** | æ£€æŸ¥å­—å…¸æ•°æ®å®Œæ•´æ€§ï¼Œè¡¥å……ç¼ºå¤±é¡¹ | âœ… å·²å®Œæˆ | å‘ç°éœ€è¡¥å…… 3 ç§æ–°ç±»å‹ + 5 ä¸ªç¼ºå¤± code |
| **ç¬¬1.1æ­¥** | è¡¥å…… target_type å­—å…¸ç¼ºå¤±é¡¹ | âœ… å·²å®Œæˆ | å·²è¡¥å…… 21 æ¡ |
| **ç¬¬2æ­¥** | æ‰§è¡Œ SQL è¡¥å……å­—å…¸æ•°æ®ï¼ˆçº¦41æ¡ï¼‰ | âœ… å·²å®Œæˆ | å·²é€šè¿‡è¿ç§»æ‰§è¡Œ |
| **ç¬¬3æ­¥** | åœ¨ displayNameHelper.js æ·»åŠ å¸¸é‡ | âœ… å·²å®Œæˆ | 3 ä¸ªå‘Šè­¦å¸¸é‡ |
| **ç¬¬4æ­¥** | åç«¯ P0/P1 Service/Route æ”¹é€  | âœ… å·²å®Œæˆ | 4 ä¸ªæ–‡ä»¶ |
| **ç¬¬5æ­¥** | P2 å­—å…¸ç±»å‹è¡¥å……ï¼ˆ10ç§43æ¡ï¼‰ | âœ… å·²å®Œæˆ | è¿ç§»: 20260205221140 |
| **ç¬¬6æ­¥** | P2 Service æ”¹é€ ï¼ˆ7ä¸ªæ–‡ä»¶ï¼‰ | âœ… å·²å®Œæˆ | Staff/Session/Preset/Debt/Announcement/Banner/FeatureFlag |
| **ç¬¬7æ­¥** | åç«¯ API éªŒè¯é€šè¿‡ | âœ… å·²å®Œæˆ | 25ä¸ªServiceã€80æ¬¡è°ƒç”¨ã€333æ¡å­—å…¸ |
| ç¬¬8æ­¥ | å‰ç«¯ç»Ÿä¸€åˆ é™¤ getXxxText æ˜ å°„å‡½æ•° | â³ å¾…å‰ç«¯æ‰§è¡Œ | è§ä¸‹æ–¹æ¸…å• |
| ç¬¬9æ­¥ | å‰åç«¯è”è°ƒéªŒè¯ | â³ å¾…æ‰§è¡Œ |

---

## ğŸ”§ è¯¦ç»†æ‰§è¡Œæ­¥éª¤ï¼ˆåŸºäºé¡¹ç›®å®é™…æŠ€æœ¯æ ˆï¼‰

### ç¬¬2æ­¥ï¼šæ‰§è¡Œ SQL è¡¥å……å­—å…¸æ•°æ®

**æ‰§è¡Œæ–¹å¼**ï¼šä½¿ç”¨ Node.js + Sequelizeï¼ˆé¡¹ç›®å·²æœ‰ï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
cd /home/devbox/project
node -e "
require('dotenv').config()
const { sequelize } = require('./models')

async function insertDictionaries() {
  const sql = \`
    -- è¡¥å…… campaign_status ç¼ºå¤±é¡¹
    INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
    VALUES 
      ('campaign_status', 'inactive', 'å·²åœç”¨', 'bg-secondary', 6, 'active', NOW(), NOW()),
      ('campaign_status', 'pending', 'å¾…å¼€å§‹', 'bg-warning', 7, 'active', NOW(), NOW())
    ON DUPLICATE KEY UPDATE dict_name = VALUES(dict_name), updated_at = NOW();
    
    -- è¡¥å…… store_status ç¼ºå¤±é¡¹
    INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
    VALUES 
      ('store_status', 'closed', 'å·²å…³é—­', 'bg-danger', 4, 'active', NOW(), NOW())
    ON DUPLICATE KEY UPDATE dict_name = VALUES(dict_name), updated_at = NOW();
    
    -- æ–°å¢ lottery_alert_type ç±»å‹
    INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
    VALUES 
      ('lottery_alert_type', 'budget_exhaust', 'é¢„ç®—å‘Šæ€¥', 'bg-danger', 1, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'budget_warning', 'é¢„ç®—é¢„è­¦', 'bg-warning', 2, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'stock_low', 'åº“å­˜å‘Šæ€¥', 'bg-danger', 3, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'stock_warning', 'åº“å­˜é¢„è­¦', 'bg-warning', 4, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'win_rate_high', 'ä¸­å¥–ç‡è¿‡é«˜', 'bg-warning', 5, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'win_rate_low', 'ä¸­å¥–ç‡è¿‡ä½', 'bg-info', 6, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'high_frequency_user', 'é«˜é¢‘ç”¨æˆ·', 'bg-warning', 7, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'empty_streak_high', 'è¿ç©ºç”¨æˆ·è¿‡å¤š', 'bg-warning', 8, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'win_rate', 'ä¸­å¥–ç‡å¼‚å¸¸', 'bg-warning', 9, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'budget', 'é¢„ç®—å‘Šè­¦', 'bg-warning', 10, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'inventory', 'åº“å­˜å‘Šè­¦', 'bg-warning', 11, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'user', 'ç”¨æˆ·å¼‚å¸¸', 'bg-info', 12, 'active', NOW(), NOW()),
      ('lottery_alert_type', 'system', 'ç³»ç»Ÿå‘Šè­¦', 'bg-danger', 13, 'active', NOW(), NOW())
    ON DUPLICATE KEY UPDATE dict_name = VALUES(dict_name), updated_at = NOW();
    
    -- æ–°å¢ lottery_alert_status ç±»å‹
    INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
    VALUES 
      ('lottery_alert_status', 'active', 'æ´»è·ƒ', 'bg-danger', 1, 'active', NOW(), NOW()),
      ('lottery_alert_status', 'acknowledged', 'å·²ç¡®è®¤', 'bg-warning', 2, 'active', NOW(), NOW()),
      ('lottery_alert_status', 'resolved', 'å·²è§£å†³', 'bg-success', 3, 'active', NOW(), NOW())
    ON DUPLICATE KEY UPDATE dict_name = VALUES(dict_name), updated_at = NOW();
    
    -- æ–°å¢ lottery_alert_severity ç±»å‹
    INSERT INTO system_dictionaries (dict_type, dict_code, dict_name, dict_color, sort_order, status, created_at, updated_at)
    VALUES 
      ('lottery_alert_severity', 'danger', 'å±é™©', 'bg-danger', 1, 'active', NOW(), NOW()),
      ('lottery_alert_severity', 'warning', 'è­¦å‘Š', 'bg-warning', 2, 'active', NOW(), NOW()),
      ('lottery_alert_severity', 'info', 'æç¤º', 'bg-info', 3, 'active', NOW(), NOW())
    ON DUPLICATE KEY UPDATE dict_name = VALUES(dict_name), updated_at = NOW();
  \`
  
  await sequelize.query(sql)
  console.log('âœ… å­—å…¸æ•°æ®è¡¥å……å®Œæˆ')
  
  // éªŒè¯ç»“æœ
  const [results] = await sequelize.query('SELECT dict_type, COUNT(*) as count FROM system_dictionaries GROUP BY dict_type ORDER BY count DESC')
  console.log('ğŸ“Š å­—å…¸ç±»å‹ç»Ÿè®¡:', results.slice(0, 10))
  
  process.exit(0)
}

insertDictionaries().catch(err => {
  console.error('âŒ æ‰§è¡Œå¤±è´¥:', err.message)
  process.exit(1)
})
"
```

---

### ç¬¬3æ­¥ï¼šåœ¨ displayNameHelper.js æ·»åŠ å¸¸é‡

**æ–‡ä»¶è·¯å¾„**ï¼š`utils/displayNameHelper.js`

**ä¿®æ”¹ä½ç½®**ï¼šåœ¨ `DICT_TYPES` å¯¹è±¡ä¸­æ·»åŠ ï¼ˆçº¦ç¬¬ 200 è¡Œé™„è¿‘ï¼‰

```javascript
// åœ¨ DICT_TYPES ä¸­æ·»åŠ ä»¥ä¸‹å¸¸é‡
const DICT_TYPES = {
  // ... ç°æœ‰ 56 ç§ç±»å‹ ...
  
  // ==================== æŠ½å¥–å‘Šè­¦ç›¸å…³ï¼ˆæ–°å¢ï¼‰ ====================
  LOTTERY_ALERT_TYPE: 'lottery_alert_type',        // æŠ½å¥–å‘Šè­¦ç±»å‹
  LOTTERY_ALERT_STATUS: 'lottery_alert_status',    // æŠ½å¥–å‘Šè­¦çŠ¶æ€
  LOTTERY_ALERT_SEVERITY: 'lottery_alert_severity' // æŠ½å¥–å‘Šè­¦çº§åˆ«
}
```

---

### ç¬¬4æ­¥ï¼šåç«¯ Service/Route æ”¹é€ æ¸…å•

**å·²ä½¿ç”¨ attachDisplayNames çš„ Serviceï¼ˆ13ä¸ªï¼Œæ— éœ€ä¿®æ”¹ï¼‰**ï¼š

| æ–‡ä»¶ | è°ƒç”¨æ¬¡æ•° | é™„åŠ å­—æ®µ |
|------|---------|----------|
| `services/TradeOrderService.js` | 7 | status (trade_order_status, listing_status) |
| `services/UserService.js` | 3 | status (user_status) |
| `services/AuditLogService.js` | 3 | operation_type, target_type |
| `services/BackpackService.js` | 3 | status |
| `services/FeedbackService.js` | 2 | status, category |
| `services/UserRoleService.js` | 1 | status |
| `services/exchange/QueryService.js` | 2 | status |
| `services/exchange/AdminService.js` | 1 | status |
| `services/consumption/QueryService.js` | 1 | status |
| `services/consumption/MerchantService.js` | 1 | status |
| `services/market-listing/QueryService.js` | 1 | status |
| `services/admin-lottery/QueryService.js` | 1 | status |
| `services/lottery/LotteryHistoryService.js` | 5 | status, campaign_status |

**éœ€è¦æ–°å¢ attachDisplayNames çš„æ–‡ä»¶ï¼ˆ4ä¸ªï¼‰**ï¼š

| æ–‡ä»¶ | éœ€æ·»åŠ ä½ç½® | éœ€é™„åŠ å­—æ®µ | å¯¹åº”å‰ç«¯å‡½æ•° |
|------|-----------|-----------|-------------|
| `services/admin-lottery/CampaignService.js` | getList, getDetail æ–¹æ³• | status, campaign_type | getCampaignStatusText |
| `routes/v4/console/lottery-campaigns.js` | åˆ—è¡¨æ¥å£ | status | getCampaignStatusText |
| `services/StoreService.js` | getList æ–¹æ³• | status | getStoreStatusText |
| `services/admin-lottery/AlertService.js` | getList æ–¹æ³• | type, status, severity | getTypeText, getStatusText, getSeverityText |

**æ”¹é€ ä»£ç ç¤ºä¾‹**ï¼ˆä»¥ CampaignService ä¸ºä¾‹ï¼‰ï¼š

```javascript
// services/admin-lottery/CampaignService.js

// 1. é¡¶éƒ¨æ·»åŠ å¼•å…¥
const { attachDisplayNames, DICT_TYPES } = require('../../utils/displayNameHelper')

// 2. åœ¨ getList æ–¹æ³•è¿”å›æ•°æ®å‰æ·»åŠ 
async getList(params) {
  // ... ç°æœ‰æŸ¥è¯¢é€»è¾‘ ...
  const campaigns = await LotteryCampaign.findAndCountAll({ ... })
  
  // é™„åŠ æ˜¾ç¤ºåç§°
  await attachDisplayNames(campaigns.rows, [
    { field: 'status', dictType: DICT_TYPES.CAMPAIGN_STATUS },
    { field: 'campaign_type', dictType: DICT_TYPES.CAMPAIGN_TYPE }
  ])
  
  return campaigns
}

// 3. åœ¨ getDetail æ–¹æ³•è¿”å›æ•°æ®å‰æ·»åŠ 
async getDetail(campaignId) {
  // ... ç°æœ‰æŸ¥è¯¢é€»è¾‘ ...
  const campaign = await LotteryCampaign.findByPk(campaignId)
  
  // é™„åŠ æ˜¾ç¤ºåç§°
  await attachDisplayNames(campaign, [
    { field: 'status', dictType: DICT_TYPES.CAMPAIGN_STATUS },
    { field: 'campaign_type', dictType: DICT_TYPES.CAMPAIGN_TYPE }
  ])
  
  return campaign
}
```

---

### ç¬¬5æ­¥ï¼šåç«¯è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬

**æ–‡ä»¶è·¯å¾„**ï¼š`scripts/check-display-names.js`

```javascript
#!/usr/bin/env node
/**
 * åç«¯ displayNames æ£€æŸ¥è„šæœ¬
 * éªŒè¯æ‰€æœ‰ API å“åº”æ˜¯å¦åŒ…å« _display å­—æ®µ
 */
require('dotenv').config()
const { sequelize } = require('../models')

async function checkDisplayNames() {
  console.log('ğŸ” æ£€æŸ¥åç«¯ displayNames å®ç°æƒ…å†µ...\n')
  
  // 1. æ£€æŸ¥å­—å…¸æ•°æ®å®Œæ•´æ€§
  const [dictTypes] = await sequelize.query(`
    SELECT dict_type, COUNT(*) as count 
    FROM system_dictionaries 
    WHERE status = 'active'
    GROUP BY dict_type 
    ORDER BY count DESC
  `)
  console.log(`ğŸ“Š å­—å…¸ç±»å‹æ•°é‡: ${dictTypes.length}`)
  console.log(`ğŸ“Š å­—å…¸è®°å½•æ€»æ•°: ${dictTypes.reduce((sum, d) => sum + parseInt(d.count), 0)}`)
  
  // 2. æ£€æŸ¥å¿…éœ€çš„å­—å…¸ç±»å‹æ˜¯å¦å­˜åœ¨
  const requiredTypes = [
    'campaign_status', 'user_status', 'trade_order_status',
    'lottery_alert_type', 'lottery_alert_status', 'lottery_alert_severity'
  ]
  const existingTypes = dictTypes.map(d => d.dict_type)
  const missingTypes = requiredTypes.filter(t => !existingTypes.includes(t))
  
  if (missingTypes.length > 0) {
    console.log(`âŒ ç¼ºå¤±çš„å­—å…¸ç±»å‹: ${missingTypes.join(', ')}`)
    return false
  }
  console.log('âœ… æ‰€æœ‰å¿…éœ€çš„å­—å…¸ç±»å‹å·²å­˜åœ¨')
  
  // 3. æ£€æŸ¥ Service æ–‡ä»¶æ˜¯å¦å¼•å…¥ attachDisplayNames
  const fs = require('fs')
  const path = require('path')
  const servicesDir = path.join(__dirname, '../services')
  
  const serviceFiles = [
    'admin-lottery/CampaignService.js',
    'StoreService.js',
    'admin-lottery/AlertService.js'
  ]
  
  let allPassed = true
  for (const file of serviceFiles) {
    const filePath = path.join(servicesDir, file)
    if (fs.existsSync(filePath)) {
      const content = fs.readFileSync(filePath, 'utf8')
      if (content.includes('attachDisplayNames')) {
        console.log(`âœ… ${file}: å·²ä½¿ç”¨ attachDisplayNames`)
      } else {
        console.log(`âŒ ${file}: æœªä½¿ç”¨ attachDisplayNames`)
        allPassed = false
      }
    } else {
      console.log(`âš ï¸ ${file}: æ–‡ä»¶ä¸å­˜åœ¨`)
    }
  }
  
  return allPassed
}

checkDisplayNames()
  .then(passed => {
    console.log(passed ? '\nâœ… åç«¯æ£€æŸ¥é€šè¿‡' : '\nâŒ åç«¯æ£€æŸ¥æœªé€šè¿‡')
    process.exit(passed ? 0 : 1)
  })
  .catch(err => {
    console.error('âŒ æ£€æŸ¥å¤±è´¥:', err.message)
    process.exit(1)
  })
```

---

### ç¬¬7æ­¥ï¼šå‰ç«¯æ˜ å°„å‡½æ•°åˆ é™¤æ¸…å•

**éœ€åˆ é™¤çš„æ–‡ä»¶å’Œå‡½æ•°ï¼ˆå®é™…æ£€æŸ¥ç»“æœï¼Œå…± 12 ä¸ªæ–‡ä»¶ 19 å¤„ï¼‰**ï¼š

| æ–‡ä»¶è·¯å¾„ | è¡Œå· | å‡½æ•°å | æ›¿æ¢ä¸º |
|----------|------|--------|--------|
| `src/modules/lottery/composables/campaigns.js` | 362 | `getCampaignStatusText` | `item.status_display` |
| `src/modules/lottery/composables/batch-operations.js` | 387 | `getCampaignStatusText` | `item.status_display` |
| `src/modules/lottery/composables/budget.js` | 200 | `getBudgetModeText` | `item.budget_mode_display` |
| `src/modules/lottery/composables/risk-control.js` | 218 | `getRiskLevelText` | `item.risk_level_display` |
| `src/modules/lottery/pages/presets.js` | 619 | `getStatusText` | `item.status_display` |
| `src/modules/lottery/pages/lottery-alerts.js` | 647 | `getSeverityText` | `item.severity_display` |
| `src/modules/lottery/pages/lottery-alerts.js` | 659 | `getTypeText` | `item.type_display` |
| `src/modules/lottery/pages/lottery-alerts.js` | 683 | `getStatusText` | `item.status_display` |
| `src/modules/analytics/composables/campaign-budget.js` | 350 | `getBudgetStatusText` | `item.status_display` |
| `src/modules/analytics/composables/campaign-budget.js` | 367 | `getBudgetModeText` | `item.budget_mode_display` |
| `src/modules/operations/pages/pending-center.js` | 168 | `getStatusText` | `item.status_display` |
| `src/modules/asset/pages/asset-adjustment.js` | 908 | `getStatusText` | `item.status_display` |
| `src/modules/asset/pages/asset-management.js` | 427 | `getStatusText` | `item.status_display` |
| `src/modules/market/pages/trade-management.js` | 357 | `getStatusText` | `item.status_display` |
| `src/modules/market/pages/trade-management.js` | 840 | `getStatusText` | `item.status_display` |
| `src/modules/system/pages/orphan-frozen.js` | 579 | `getStatusText` | `item.status_display` |
| `src/modules/system/pages/risk-alerts.js` | 1102 | `getTypeText` | `item.type_display` |
| `src/modules/system/pages/risk-alerts.js` | 1126 | `getStatusText` | `item.status_display` |
| `src/modules/user/composables/advanced-status.js` | 605 | `getUnlockMethodText` | `item.unlock_method_display` |
| `src/modules/user/composables/advanced-status.js` | 616 | `getRiskLevelText` | `item.risk_level_display` |

**å‰ç«¯ä¿®æ”¹ç¤ºä¾‹**ï¼ˆä»¥ lottery-alerts.js ä¸ºä¾‹ï¼‰ï¼š

```javascript
// âŒ åˆ é™¤è¿™äº›å‡½æ•°ï¼ˆçº¦ç¬¬ 647-690 è¡Œï¼‰
getSeverityText(severity) {
  const labels = { danger: 'å±é™©', warning: 'è­¦å‘Š', info: 'æç¤º' }
  return labels[severity] || severity || '-'
},
getTypeText(type) {
  const labels = { budget_exhaust: 'é¢„ç®—å‘Šæ€¥', ... }
  return labels[type] || type || '-'
},
getStatusText(status) {
  const labels = { active: 'æ´»è·ƒ', acknowledged: 'å·²ç¡®è®¤', resolved: 'å·²è§£å†³' }
  return labels[status] || status || '-'
}
```

**HTML æ¨¡æ¿ä¿®æ”¹**ï¼ˆä»¥ lottery-alerts.html ä¸ºä¾‹ï¼‰ï¼š

```html
<!-- âŒ æ—§å†™æ³• -->
<span x-text="getSeverityText(alert.severity)"></span>
<span x-text="getTypeText(alert.type)"></span>
<span x-text="getStatusText(alert.status)"></span>

<!-- âœ… æ–°å†™æ³• -->
<span x-text="alert.severity_display"></span>
<span x-text="alert.type_display"></span>
<span x-text="alert.status_display"></span>
```

---

### ç¬¬8æ­¥ï¼šå‰ç«¯è‡ªåŠ¨åŒ–æ£€æŸ¥

**ä½¿ç”¨é¡¹ç›®å·²æœ‰çš„æ£€æŸ¥è„šæœ¬**ï¼š

```bash
cd /home/devbox/project/admin
npm run lint:mappings
```

**é¢„æœŸè¾“å‡ºï¼ˆæ”¹é€ å®Œæˆåï¼‰**ï¼š

```
ğŸ“‹ å‰ç«¯ä¸­æ–‡æ˜ å°„æ£€æŸ¥å·¥å…·
============================================================
âœ“ æ£€æŸ¥å®Œæˆï¼šæ‰«æäº† 140 ä¸ªæ–‡ä»¶
âœ… æœªå‘ç°ä¸­æ–‡æ˜ å°„é—®é¢˜
``` |

---

## ğŸ“‹ å‚è€ƒï¼šTradeOrderService æ”¹é€ ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ `services/TradeOrderService.js` ä¸­çš„å®é™…ä»£ç ï¼Œå±•ç¤ºäº†æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ï¼š

```javascript
// é¡¶éƒ¨å¼•å…¥
const { attachDisplayNames, DICT_TYPES } = require('../utils/displayNameHelper')

// åœ¨ getList æ–¹æ³•ä¸­ï¼ˆçº¦ç¬¬ 1053 è¡Œï¼‰
// ä¸ºè®¢å•çŠ¶æ€æ·»åŠ æ˜¾ç¤ºåç§°
await attachDisplayNames(ordersData, [
  { field: 'status', dictType: DICT_TYPES.TRADE_ORDER_STATUS }
])

// ä¸ºå…³è”çš„æŒ‚ç‰Œæ·»åŠ çŠ¶æ€æ˜¾ç¤ºåç§°
for (const order of ordersData) {
  if (order.listing) {
    await attachDisplayNames(order.listing, [
      { field: 'status', dictType: DICT_TYPES.LISTING_STATUS }
    ])
  }
}
```

---

## ğŸ”— æŠ€æœ¯æ ˆå…¼å®¹æ€§æ€»ç»“

### âœ… åç«¯æŠ€æœ¯æ ˆå…¼å®¹æ€§

| æŠ€æœ¯ | å…¼å®¹æ€§ | è¯´æ˜ |
|------|--------|------|
| Node.js >=20.18.0 | âœ… å®Œå…¨å…¼å®¹ | `attachDisplayNames` ä½¿ç”¨ async/await |
| Express | âœ… å®Œå…¨å…¼å®¹ | åœ¨ Route æˆ– Service ä¸­è°ƒç”¨å³å¯ |
| Sequelize | âœ… å®Œå…¨å…¼å®¹ | æ”¯æŒ Model å®ä¾‹å’Œ Plain Object |
| Redis | âœ… å®Œå…¨å…¼å®¹ | `DisplayNameService` è‡ªåŠ¨ç¼“å­˜ |
| MySQL | âœ… å®Œå…¨å…¼å®¹ | `system_dictionaries` è¡¨å·²å­˜åœ¨ |

### âœ… å‰ç«¯æŠ€æœ¯æ ˆå…¼å®¹æ€§

| æŠ€æœ¯ | å…¼å®¹æ€§ | è¯´æ˜ |
|------|--------|------|
| Vite 6.4.1 | âœ… å®Œå…¨å…¼å®¹ | ES Module å¯¼å…¥æ— å½±å“ |
| Alpine.js 3.15.4 | âœ… å®Œå…¨å…¼å®¹ | `x-text="item.xxx_display"` ç›´æ¥ä½¿ç”¨ |
| Tailwind CSS 3.4.19 | âœ… å®Œå…¨å…¼å®¹ | `item.xxx_color` è¿”å› Tailwind ç±»å |
| æ£€æŸ¥è„šæœ¬ | âœ… å·²æœ‰ | `npm run lint:mappings` |

### ğŸ“¦ å¯å¤ç”¨ç»„ä»¶æ¸…å•

**åç«¯**ï¼š
- `utils/displayNameHelper.js` - æ ¸å¿ƒå·¥å…·å‡½æ•°
- `services/DisplayNameService.js` - ç¼“å­˜æœåŠ¡
- `DICT_TYPES` å¸¸é‡ - 56+ ç§å­—å…¸ç±»å‹

**å‰ç«¯**ï¼š
- `scripts/check-frontend-mappings.js` - æ£€æŸ¥è„šæœ¬
- `asyncDataMixin` - API è¯·æ±‚å°è£…ï¼ˆè¿”å›æ•°æ®å·²åŒ…å« `_display`ï¼‰

### ğŸ”„ æ‰©å±•æ–¹å¼

**æ–°å¢å­—å…¸ç±»å‹**ï¼š
1. åœ¨ `system_dictionaries` è¡¨ INSERT æ–°è®°å½•
2. åœ¨ `DICT_TYPES` æ·»åŠ æ–°å¸¸é‡
3. åœ¨ Service ä¸­è°ƒç”¨ `attachDisplayNames`

**è‡ªå®šä¹‰å­—æ®µå**ï¼š
```javascript
await attachDisplayNames(data, [{
  field: 'status',
  dictType: DICT_TYPES.XXX_STATUS,
  displayField: 'status_name',   // è‡ªå®šä¹‰
  colorField: 'status_badge'     // è‡ªå®šä¹‰
}])
```

---

## ğŸ¢ è¡Œä¸šæ–¹æ¡ˆå¯¹æ¯”ä¸å†³ç­–ä¾æ®ï¼ˆ2026-02-06ï¼‰

> åœ¨åšæŠ€æœ¯å†³ç­–å‰ï¼Œå¯¹æ¯”äº†ä¸åŒç±»å‹å…¬å¸çš„è®¾è®¡æ–¹æ¡ˆï¼Œç¡®è®¤å½“å‰æ–¹æ¡ˆæ˜¯æœ€é€‚åˆæœ¬é¡¹ç›®çš„ã€‚

### æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“

| ç»´åº¦ | å¤§å‚é…ç½®ä¸­å¿ƒ | å‰ç«¯æ˜ å°„ | **åç«¯ç»Ÿä¸€è¿”å›** | æšä¸¾API | æ¸¸æˆé…ç½®è¡¨ |
|------|------------|---------|----------------|--------|-----------|
| **æ¶æ„å¤æ‚åº¦** | ğŸ”´ é«˜ | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ |
| **ä¸€è‡´æ€§ä¿è¯** | ğŸŸ¢ å¼º | ğŸ”´ å¼± | ğŸŸ¢ å¼º | ğŸŸ¡ ä¸­ | ğŸŸ¢ å¼º |
| **ç»´æŠ¤æˆæœ¬** | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ |
| **çƒ­æ›´æ–°** | ğŸŸ¢ æ”¯æŒ | ğŸ”´ ä¸æ”¯æŒ | ğŸŸ¢ æ”¯æŒ | ğŸŸ¢ æ”¯æŒ | ğŸŸ¢ æ”¯æŒ |
| **é€‚åˆå›¢é˜Ÿ** | å¤§å›¢é˜Ÿ | å°å›¢é˜Ÿ | **ä¸­å°å›¢é˜Ÿ** | ä¸­å›¢é˜Ÿ | æ¸¸æˆå›¢é˜Ÿ |

### é€‰æ‹©"åç«¯ç»Ÿä¸€è¿”å›"æ–¹æ¡ˆçš„ç†ç”±

1. **åŸºç¡€è®¾æ–½å·²å°±ç»ª** - ä¸éœ€è¦é¢å¤–æŠ•å…¥é…ç½®ä¸­å¿ƒ
2. **ç¬¦åˆæˆæœ¬è€ƒé‡** - ä¸­å°å›¢é˜Ÿæœ€ä¼˜è§£
3. **å€Ÿé‰´æ¸¸æˆæ€æƒ³** - é…ç½®é©±åŠ¨ï¼Œæ•°æ®åº“å³é…ç½®
4. **å•ä¸€æ•°æ®æº** - æœç»å‰åç«¯ä¸ä¸€è‡´é—®é¢˜
5. **æ”¯æŒçƒ­æ›´æ–°** - ä¿®æ”¹æ•°æ®åº“ + æ¸… Redis ç¼“å­˜å³å¯ç”Ÿæ•ˆ

---

**æœ€åæ›´æ–°**: 2026-02-06ï¼ˆæ·»åŠ è¡Œä¸šæ–¹æ¡ˆå¯¹æ¯” + 5é¡¹å†³ç­–æ‰¹å‡†è®°å½•ï¼‰
