<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">å…‘æ¢å¸‚åœº - ç®¡ç†åå°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="/admin/css/common.css" rel="stylesheet">
  <style>
    .sub-nav { background: #f8f9fa; border-bottom: 1px solid #dee2e6; padding: 0.5rem 0; }
    .sub-nav .nav-link { color: #495057; padding: 0.5rem 1rem; border-radius: 0.25rem; margin: 0 0.25rem; }
    .sub-nav .nav-link:hover { background: #e9ecef; }
    .sub-nav .nav-link.active { background: #0d6efd; color: white; }
    [x-cloak] { display: none !important; }
    .stat-card { border: none; box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,.075); }
    .price-badge { font-size: 0.875rem; padding: 0.25rem 0.75rem; }
    .stock-warning { color: #ff6b6b; }
    .stock-low { color: #ffa500; }
    .stock-ok { color: #51cf66; }
    .item-image { width: 60px; height: 60px; object-fit: cover; border-radius: 0.375rem; }
  </style>

  <!-- âœ… Alpine.js Mixin ç³»ç»Ÿ -->
  <script defer src="/admin/js/alpine/mixins-bundle.js"></script>
  <script defer src="/admin/js/alpine/init.js"></script>
  <script defer src="/admin/js/vendor/alpine.min.js"></script>
</head>
<body class="bg-light">
  <nav class="navbar navbar-dark bg-primary">
    <div class="container-fluid">
      <a href="/admin/dashboard.html" class="navbar-brand">
        <i class="bi bi-arrow-left me-2"></i>ğŸ›’ ç®¡ç†åå° - å…‘æ¢å¸‚åœº
      </a>
      <div>
        <span class="text-light me-3" x-data x-text="$store.auth.user?.nickname ? `æ¬¢è¿ï¼Œ${$store.auth.user.nickname}` : 'æ¬¢è¿ï¼Œç®¡ç†å‘˜'">æ¬¢è¿ï¼Œç®¡ç†å‘˜</span>
        <button class="btn btn-outline-light btn-sm" onclick="logout()">é€€å‡ºç™»å½•</button>
      </div>
    </div>
  </nav>

  <!-- å­æ¨¡å—å¯¼èˆª -->
  <div class="sub-nav" x-data="exchangeNavigation()" x-cloak>
    <div class="container-fluid">
      <ul class="nav nav-pills">
        <template x-for="page in subPages" :key="page.id">
          <li class="nav-item">
            <a class="nav-link" :class="{ 'active': currentPage === page.id }" :href="'?page=' + page.id" @click.prevent="switchPage(page.id)">
              <i class="bi me-1" :class="page.icon"></i><span x-text="page.title"></span>
            </a>
          </li>
        </template>
      </ul>
    </div>
  </div>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <div class="container-fluid mt-4" x-data="exchangePageContent()" x-cloak>
    
    <!-- ==================== å•†å“ç®¡ç† ==================== -->
    <div x-show="currentPage === 'items'" x-cloak>
      <!-- ç»Ÿè®¡å¡ç‰‡ -->
      <div class="row g-3 mb-4">
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-box-seam text-primary" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">å•†å“æ€»æ•°</h6>
              <h2 x-text="itemStats.total" class="text-primary mb-0">-</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-check-circle text-success" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">ä¸Šæ¶å•†å“</h6>
              <h2 x-text="itemStats.active" class="text-success mb-0">-</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-exclamation-triangle text-warning" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">åº“å­˜é¢„è­¦</h6>
              <h2 x-text="itemStats.lowStock" class="text-warning mb-0">-</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-cart-check text-info" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">æ€»å…‘æ¢æ¬¡æ•°</h6>
              <h2 x-text="itemStats.totalSold" class="text-info mb-0">-</h2>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-shop"></i> å…‘æ¢å•†å“ç®¡ç†</h5>
          <button class="btn btn-primary btn-sm" @click="openAddItemModal()">
            <i class="bi bi-plus"></i> æ·»åŠ å•†å“
          </button>
        </div>
        <div class="card-body">
          <!-- ç­›é€‰å™¨ -->
          <div class="row mb-3 g-2">
            <div class="col-md-2">
              <select class="form-select form-select-sm" x-model="itemFilters.status">
                <option value="">å…¨éƒ¨çŠ¶æ€</option>
                <option value="active">ä¸Šæ¶</option>
                <option value="inactive">ä¸‹æ¶</option>
              </select>
            </div>
            <div class="col-md-2">
              <select class="form-select form-select-sm" x-model="itemFilters.cost_asset_code">
                <option value="">å…¨éƒ¨èµ„äº§ç±»å‹</option>
                <template x-for="type in assetTypes" :key="type.asset_code">
                  <option :value="type.asset_code" x-text="type.name"></option>
                </template>
              </select>
            </div>
            <div class="col-md-2">
              <button class="btn btn-primary btn-sm w-100" @click="loadItems()">
                <i class="bi bi-search"></i> æœç´¢
              </button>
            </div>
          </div>
          
          <!-- å•†å“è¡¨æ ¼ -->
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>å•†å“ä¿¡æ¯</th>
                  <th>å…‘æ¢ä»·æ ¼</th>
                  <th>åº“å­˜</th>
                  <th>å·²å…‘æ¢</th>
                  <th>çŠ¶æ€</th>
                  <th>æ’åº</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody>
                <template x-if="items.length === 0">
                  <tr><td colspan="7" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td></tr>
                </template>
                <template x-for="item in items" :key="item.item_id">
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <img :src="item.image_url || '/admin/images/default-item.png'" class="item-image me-2">
                        <div>
                          <div class="fw-bold" x-text="item.item_name"></div>
                          <small class="text-muted" x-text="item.item_description || '-'"></small>
                        </div>
                      </div>
                    </td>
                    <td>
                      <span class="badge bg-primary price-badge" x-text="item.cost_amount + ' ' + (item.asset_name || item.cost_asset_code)"></span>
                    </td>
                    <td>
                      <span :class="item.stock <= 0 ? 'stock-warning' : item.stock < 10 ? 'stock-low' : 'stock-ok'" x-text="item.stock"></span>
                    </td>
                    <td x-text="item.sold_count || 0"></td>
                    <td>
                      <span class="badge" :class="item.status === 'active' ? 'bg-success' : 'bg-secondary'" x-text="item.status === 'active' ? 'ä¸Šæ¶' : 'ä¸‹æ¶'"></span>
                    </td>
                    <td x-text="item.sort_order"></td>
                    <td>
                      <button class="btn btn-sm btn-outline-primary me-1" @click="editItem(item)"><i class="bi bi-pencil"></i></button>
                      <button class="btn btn-sm btn-outline-danger" @click="deleteItem(item.item_id)"><i class="bi bi-trash"></i></button>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
          </div>
          
          <!-- åˆ†é¡µ -->
          <nav x-show="itemPagination.totalPages > 1">
            <ul class="pagination pagination-sm justify-content-center mb-0">
              <li class="page-item" :class="{ disabled: itemCurrentPage === 1 }">
                <a class="page-link" href="#" @click.prevent="changeItemPage(itemCurrentPage - 1)">ä¸Šä¸€é¡µ</a>
              </li>
              <template x-for="p in itemPagination.totalPages" :key="p">
                <li class="page-item" :class="{ active: itemCurrentPage === p }">
                  <a class="page-link" href="#" @click.prevent="changeItemPage(p)" x-text="p"></a>
                </li>
              </template>
              <li class="page-item" :class="{ disabled: itemCurrentPage === itemPagination.totalPages }">
                <a class="page-link" href="#" @click.prevent="changeItemPage(itemCurrentPage + 1)">ä¸‹ä¸€é¡µ</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <!-- ==================== è®¢å•ç®¡ç† ==================== -->
    <div x-show="currentPage === 'orders'" x-cloak>
      <!-- ç»Ÿè®¡å¡ç‰‡ -->
      <div class="row g-3 mb-4">
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-receipt text-primary" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">è®¢å•æ€»æ•°</h6>
              <h2 x-text="orderStats.total" class="text-primary mb-0">-</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-clock text-warning" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">å¾…å¤„ç†</h6>
              <h2 x-text="orderStats.pending" class="text-warning mb-0">-</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-truck text-info" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">å·²å‘è´§</h6>
              <h2 x-text="orderStats.shipped" class="text-info mb-0">-</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card">
            <div class="card-body text-center">
              <i class="bi bi-x-circle text-danger" style="font-size: 2rem;"></i>
              <h6 class="text-muted mt-2">å·²å–æ¶ˆ</h6>
              <h2 x-text="orderStats.cancelled" class="text-danger mb-0">-</h2>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header bg-white">
          <h5 class="mb-0"><i class="bi bi-receipt"></i> å…‘æ¢è®¢å•ç®¡ç†</h5>
        </div>
        <div class="card-body">
          <!-- ç­›é€‰å™¨ -->
          <div class="row mb-3 g-2">
            <div class="col-md-2">
              <select class="form-select form-select-sm" x-model="orderFilters.status">
                <option value="">å…¨éƒ¨çŠ¶æ€</option>
                <option value="pending">å¾…å¤„ç†</option>
                <option value="shipped">å·²å‘è´§</option>
                <option value="completed">å·²å®Œæˆ</option>
                <option value="cancelled">å·²å–æ¶ˆ</option>
              </select>
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="è®¢å•å·" x-model="orderFilters.order_no">
            </div>
            <div class="col-md-2">
              <button class="btn btn-primary btn-sm w-100" @click="loadOrders()">
                <i class="bi bi-search"></i> æœç´¢
              </button>
            </div>
          </div>
          
          <!-- è®¢å•è¡¨æ ¼ -->
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>è®¢å•å·</th>
                  <th>ç”¨æˆ·</th>
                  <th>å•†å“</th>
                  <th>æ•°é‡</th>
                  <th>æ”¯ä»˜èµ„äº§</th>
                  <th>çŠ¶æ€</th>
                  <th>ä¸‹å•æ—¶é—´</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody>
                <template x-if="orders.length === 0">
                  <tr><td colspan="8" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td></tr>
                </template>
                <template x-for="order in orders" :key="order.order_no">
                  <tr>
                    <td><code x-text="order.order_no"></code></td>
                    <td x-text="order.user_nickname || order.user_id"></td>
                    <td x-text="order.item_name"></td>
                    <td x-text="order.quantity"></td>
                    <td>
                      <span class="badge bg-info" x-text="order.total_cost + ' ' + (order.asset_name || order.cost_asset_code)"></span>
                    </td>
                    <td>
                      <span class="badge" :class="{
                        'bg-warning': order.status === 'pending',
                        'bg-info': order.status === 'shipped',
                        'bg-success': order.status === 'completed',
                        'bg-danger': order.status === 'cancelled'
                      }" x-text="getOrderStatusText(order.status)"></span>
                    </td>
                    <td x-text="$format.date(order.created_at)"></td>
                    <td>
                      <button class="btn btn-sm btn-outline-primary me-1" @click="viewOrderDetail(order)"><i class="bi bi-eye"></i></button>
                      <button class="btn btn-sm btn-outline-warning" @click="updateOrderStatus(order)" x-show="order.status === 'pending'"><i class="bi bi-truck"></i></button>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
          </div>
          
          <!-- åˆ†é¡µ -->
          <nav x-show="orderPagination.totalPages > 1">
            <ul class="pagination pagination-sm justify-content-center mb-0">
              <li class="page-item" :class="{ disabled: orderCurrentPage === 1 }">
                <a class="page-link" href="#" @click.prevent="changeOrderPage(orderCurrentPage - 1)">ä¸Šä¸€é¡µ</a>
              </li>
              <template x-for="p in orderPagination.totalPages" :key="p">
                <li class="page-item" :class="{ active: orderCurrentPage === p }">
                  <a class="page-link" href="#" @click.prevent="changeOrderPage(p)" x-text="p"></a>
                </li>
              </template>
              <li class="page-item" :class="{ disabled: orderCurrentPage === orderPagination.totalPages }">
                <a class="page-link" href="#" @click.prevent="changeOrderPage(orderCurrentPage + 1)">ä¸‹ä¸€é¡µ</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <!-- ==================== ç»Ÿè®¡åˆ†æ ==================== -->
    <div x-show="currentPage === 'stats'" x-cloak>
      <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
      <div class="row g-3 mb-4">
        <div class="col-md-4">
          <div class="card stat-card">
            <div class="card-body">
              <h6 class="text-muted"><i class="bi bi-receipt me-1"></i>è®¢å•ç»Ÿè®¡</h6>
              <div class="d-flex justify-content-between mt-3">
                <div class="text-center">
                  <div class="text-primary fw-bold" x-text="exchangeStats.orders?.total || 0"></div>
                  <small class="text-muted">æ€»è®¢å•</small>
                </div>
                <div class="text-center">
                  <div class="text-success fw-bold" x-text="exchangeStats.orders?.completed || 0"></div>
                  <small class="text-muted">å·²å®Œæˆ</small>
                </div>
                <div class="text-center">
                  <div class="text-warning fw-bold" x-text="exchangeStats.orders?.pending || 0"></div>
                  <small class="text-muted">å¾…å¤„ç†</small>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card stat-card">
            <div class="card-body">
              <h6 class="text-muted"><i class="bi bi-currency-exchange me-1"></i>æ¶ˆè€—èµ„äº§</h6>
              <div class="d-flex justify-content-between mt-3">
                <div class="text-center">
                  <div class="text-info fw-bold" x-text="exchangeStats.revenue?.total_virtual_value || 0"></div>
                  <small class="text-muted">è™šæ‹Ÿè´§å¸</small>
                </div>
                <div class="text-center">
                  <div class="text-primary fw-bold" x-text="exchangeStats.revenue?.total_points || 0"></div>
                  <small class="text-muted">ç§¯åˆ†</small>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card stat-card">
            <div class="card-body">
              <h6 class="text-muted"><i class="bi bi-box-seam me-1"></i>å•†å“ç»Ÿè®¡</h6>
              <div class="d-flex justify-content-between mt-3">
                <div class="text-center">
                  <div class="text-success fw-bold" x-text="exchangeStats.items?.activeCount || 0"></div>
                  <small class="text-muted">ä¸Šæ¶å•†å“</small>
                </div>
                <div class="text-center">
                  <div class="text-secondary fw-bold" x-text="exchangeStats.items?.inactiveCount || 0"></div>
                  <small class="text-muted">ä¸‹æ¶å•†å“</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å›¾è¡¨åŒºåŸŸ -->
      <div class="row g-3">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-white">
              <h6 class="mb-0"><i class="bi bi-pie-chart"></i> è®¢å•çŠ¶æ€åˆ†å¸ƒ</h6>
            </div>
            <div class="card-body">
              <div id="orderStatusChart" style="height: 300px;"></div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-white">
              <h6 class="mb-0"><i class="bi bi-graph-up"></i> å…‘æ¢è¶‹åŠ¿</h6>
            </div>
            <div class="card-body">
              <div id="exchangeTrendChart" style="height: 300px;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- ==================== æ¨¡æ€æ¡† ==================== -->
  
  <!-- æ·»åŠ /ç¼–è¾‘å•†å“æ¨¡æ€æ¡† -->
  <div class="modal fade" id="itemModal" tabindex="-1" x-ref="itemModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" x-text="editingItemId ? 'ç¼–è¾‘å•†å“' : 'æ·»åŠ å•†å“'"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">å•†å“åç§° <span class="text-danger">*</span></label>
            <input type="text" class="form-control" x-model="itemForm.item_name" required>
          </div>
          <div class="mb-3">
            <label class="form-label">å•†å“æè¿°</label>
            <textarea class="form-control" rows="2" x-model="itemForm.item_description"></textarea>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">å…‘æ¢èµ„äº§ <span class="text-danger">*</span></label>
              <select class="form-select" x-model="itemForm.cost_asset_code" required>
                <option value="">è¯·é€‰æ‹©</option>
                <template x-for="type in assetTypes" :key="type.asset_code">
                  <option :value="type.asset_code" x-text="type.name"></option>
                </template>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">å…‘æ¢æ•°é‡ <span class="text-danger">*</span></label>
              <input type="number" class="form-control" x-model.number="itemForm.cost_amount" min="1" required>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">åº“å­˜ <span class="text-danger">*</span></label>
              <input type="number" class="form-control" x-model.number="itemForm.stock" min="0" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">æ’åº</label>
              <input type="number" class="form-control" x-model.number="itemForm.sort_order" min="0">
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">çŠ¶æ€</label>
            <select class="form-select" x-model="itemForm.status">
              <option value="active">ä¸Šæ¶</option>
              <option value="inactive">ä¸‹æ¶</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å–æ¶ˆ</button>
          <button type="button" class="btn btn-primary" @click="saveItem()" :disabled="saving">
            <span x-show="saving" class="spinner-border spinner-border-sm me-1"></span>
            ä¿å­˜
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- è®¢å•è¯¦æƒ…æ¨¡æ€æ¡† -->
  <div class="modal fade" id="orderDetailModal" tabindex="-1" x-ref="orderDetailModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">è®¢å•è¯¦æƒ…</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" x-show="selectedOrder">
          <div class="row">
            <div class="col-md-6">
              <p><strong>è®¢å•å·ï¼š</strong><code x-text="selectedOrder?.order_no"></code></p>
              <p><strong>ç”¨æˆ·ï¼š</strong><span x-text="selectedOrder?.user_nickname || selectedOrder?.user_id"></span></p>
              <p><strong>å•†å“ï¼š</strong><span x-text="selectedOrder?.item_name"></span></p>
              <p><strong>æ•°é‡ï¼š</strong><span x-text="selectedOrder?.quantity"></span></p>
            </div>
            <div class="col-md-6">
              <p><strong>æ”¯ä»˜èµ„äº§ï¼š</strong><span x-text="(selectedOrder?.total_cost || 0) + ' ' + (selectedOrder?.asset_name || selectedOrder?.cost_asset_code)"></span></p>
              <p><strong>çŠ¶æ€ï¼š</strong><span class="badge" :class="{
                'bg-warning': selectedOrder?.status === 'pending',
                'bg-info': selectedOrder?.status === 'shipped',
                'bg-success': selectedOrder?.status === 'completed',
                'bg-danger': selectedOrder?.status === 'cancelled'
              }" x-text="getOrderStatusText(selectedOrder?.status)"></span></p>
              <p><strong>ä¸‹å•æ—¶é—´ï¼š</strong><span x-text="$format.date(selectedOrder?.created_at)"></span></p>
              <p x-show="selectedOrder?.shipped_at"><strong>å‘è´§æ—¶é—´ï¼š</strong><span x-text="$format.date(selectedOrder?.shipped_at)"></span></p>
            </div>
          </div>
          <div x-show="selectedOrder?.shipping_address" class="mt-3">
            <h6>æ”¶è´§ä¿¡æ¯</h6>
            <p class="mb-1"><strong>æ”¶è´§äººï¼š</strong><span x-text="selectedOrder?.receiver_name"></span></p>
            <p class="mb-1"><strong>è”ç³»ç”µè¯ï¼š</strong><span x-text="selectedOrder?.receiver_phone"></span></p>
            <p class="mb-0"><strong>åœ°å€ï¼š</strong><span x-text="selectedOrder?.shipping_address"></span></p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å…³é—­</button>
        </div>
      </div>
    </div>
  </div>

  <!-- é€šç”¨ä¾èµ– -->
  <script src="/admin/js/api-config.js"></script>
  <script src="/admin/js/admin-common.js"></script>
  <script src="/admin/js/pages/exchange-market.js"></script>
  
  <!-- ECharts (ä»…ç»Ÿè®¡é¡µéœ€è¦) -->
  <script>
    // å»¶è¿ŸåŠ è½½ ECharts
    document.addEventListener('alpine:init', () => {
      if (!window.echarts) {
        const script = document.createElement('script')
        script.src = '/admin/js/vendor/echarts.min.js'
        script.onload = () => console.log('âœ… ECharts å·²åŠ è½½')
        document.head.appendChild(script)
      }
    })
  </script>
</body>
</html>

