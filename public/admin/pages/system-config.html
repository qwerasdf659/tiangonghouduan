<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>系统配置中心 - 管理后台</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="/admin/css/common.css" rel="stylesheet">
  <style>
    .tab-pane { padding-top: 1rem; }
    .nav-link.active { font-weight: bold; }
    .notification-item {
      transition: background 0.2s;
      cursor: pointer;
      border-left: 4px solid transparent;
    }
    .notification-item:hover { background: #f8f9fa; }
    .notification-item.unread {
      background: #e7f3ff;
      border-left-color: #0d6efd;
    }
    .banner-card {
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    .banner-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .banner-preview {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
    }
    .upload-zone {
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      padding: 40px;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.3s;
    }
    .upload-zone:hover { border-color: #0d6efd; }
    .upload-zone.dragover {
      border-color: #0d6efd;
      background: #e7f1ff;
    }
    .image-card { transition: transform 0.2s; }
    .image-card:hover { transform: translateY(-3px); }
    .image-preview {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 4px;
    }
  </style>
</head>
<body class="bg-light">
  <!-- 顶部导航 -->
  <nav class="navbar navbar-dark bg-primary">
    <div class="container-fluid">
      <a href="/admin/dashboard.html" class="navbar-brand">
        <i class="bi bi-arrow-left me-2"></i><i class="bi bi-gear-fill"></i> 管理后台 - 系统配置中心
      </a>
      <div>
        <span class="text-light me-3" id="welcomeText">欢迎，管理员</span>
        <button class="btn btn-outline-light btn-sm" id="logoutBtn">退出登录</button>
      </div>
    </div>
  </nav>

  <div class="container-fluid mt-4">
    <div class="card">
      <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs" id="systemConfigTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="announcements-tab" data-bs-toggle="tab" data-bs-target="#announcements-pane" type="button" role="tab" aria-controls="announcements-pane" aria-selected="true">
              <i class="bi bi-megaphone"></i> 公告管理
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="notifications-tab" data-bs-toggle="tab" data-bs-target="#notifications-pane" type="button" role="tab" aria-controls="notifications-pane" aria-selected="false">
              <i class="bi bi-bell"></i> 系统通知
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="banners-tab" data-bs-toggle="tab" data-bs-target="#banners-pane" type="button" role="tab" aria-controls="banners-pane" aria-selected="false">
              <i class="bi bi-image"></i> 弹窗Banner
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="images-tab" data-bs-toggle="tab" data-bs-target="#images-pane" type="button" role="tab" aria-controls="images-pane" aria-selected="false">
              <i class="bi bi-images"></i> 图片资源
            </button>
          </li>
        </ul>
      </div>
      <div class="card-body">
        <div class="tab-content" id="systemConfigTabsContent">
          <!-- 公告管理 Tab Pane -->
          <div class="tab-pane fade show active" id="announcements-pane" role="tabpanel" aria-labelledby="announcements-tab">
            <!-- 操作按钮 -->
            <div class="d-flex justify-content-between mb-3">
              <h5><i class="bi bi-megaphone"></i> 公告列表</h5>
              <button class="btn btn-primary" id="addAnnouncementBtn">
                <i class="bi bi-plus-lg"></i> 发布新公告
              </button>
            </div>

            <!-- 筛选区域 -->
            <div class="card mb-3">
              <div class="card-body">
                <div class="row g-3">
                  <div class="col-md-3">
                    <label class="form-label">公告状态</label>
                    <select class="form-select" id="announcementStatusFilter">
                      <option value="">全部状态</option>
                      <option value="active">已发布</option>
                      <option value="inactive">已下线</option>
                      <option value="draft">草稿</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">公告类型</label>
                    <select class="form-select" id="announcementTypeFilter">
                      <option value="">全部类型</option>
                      <option value="system">系统公告</option>
                      <option value="notice">通知</option>
                      <option value="activity">活动</option>
                      <option value="maintenance">维护</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">关键词搜索</label>
                    <input type="text" class="form-control" id="announcementKeywordSearch" placeholder="搜索标题或内容">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">&nbsp;</label>
                    <button class="btn btn-primary w-100" id="announcementSearchBtn">
                      <i class="bi bi-search"></i> 查询
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 公告列表 -->
            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover align-middle">
                    <thead class="table-light">
                      <tr>
                        <th style="width: 60px;">ID</th>
                        <th>标题</th>
                        <th>类型</th>
                        <th>状态</th>
                        <th>优先级</th>
                        <th>创建时间</th>
                        <th>过期时间</th>
                        <th style="width: 200px;">操作</th>
                      </tr>
                    </thead>
                    <tbody id="announcementsTableBody">
                      <tr>
                        <td colspan="8" class="text-center py-5">
                          <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                          <p class="mt-2 text-muted">正在加载数据...</p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <nav aria-label="分页" class="mt-3">
                  <ul class="pagination justify-content-end" id="announcementsPagination"></ul>
                </nav>
              </div>
            </div>
          </div>

          <!-- 系统通知 Tab Pane -->
          <div class="tab-pane fade" id="notifications-pane" role="tabpanel" aria-labelledby="notifications-tab">
            <!-- 操作栏 -->
            <div class="card mb-3">
              <div class="card-body">
                <div class="row g-3 align-items-end">
                  <div class="col-md-3">
                    <label class="form-label">通知类型</label>
                    <select class="form-select" id="notificationTypeFilter">
                      <option value="all">全部类型</option>
                      <option value="system">系统通知</option>
                      <option value="user">用户动态</option>
                      <option value="order">订单消息</option>
                      <option value="alert">警告提醒</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">状态筛选</label>
                    <select class="form-select" id="notificationStatusFilter">
                      <option value="all">全部状态</option>
                      <option value="unread">未读</option>
                      <option value="read">已读</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <button class="btn btn-primary w-100" id="loadNotificationsBtn">
                      <i class="bi bi-search"></i> 筛选
                    </button>
                  </div>
                  <div class="col-md-3">
                    <div class="btn-group w-100">
                      <button class="btn btn-outline-success" id="markAllAsReadBtn">
                        <i class="bi bi-check-all"></i> 全部已读
                      </button>
                      <button class="btn btn-outline-danger" id="clearAllBtn">
                        <i class="bi bi-trash"></i> 清空
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 统计信息 -->
            <div class="row g-3 mb-3">
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <h6 class="text-muted">总通知数</h6>
                    <h3 id="totalNotifications">-</h3>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <h6 class="text-muted">未读通知</h6>
                    <h3 class="text-danger" id="unreadNotifications">-</h3>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <h6 class="text-muted">今日通知</h6>
                    <h3 class="text-primary" id="todayNotifications">-</h3>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <h6 class="text-muted">本周通知</h6>
                    <h3 class="text-success" id="weekNotifications">-</h3>
                  </div>
                </div>
              </div>
            </div>

            <!-- 通知列表 -->
            <div class="card">
              <div class="card-header bg-white">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0"><i class="bi bi-bell-fill"></i> 通知列表</h6>
                  <button class="btn btn-sm btn-primary" id="sendNotificationBtn">
                    <i class="bi bi-plus-lg"></i> 发送通知
                  </button>
                </div>
              </div>
              <div class="card-body p-0">
                <div id="notificationsList">
                  <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                      <span class="visually-hidden">加载中...</span>
                    </div>
                    <p class="mt-2 text-muted">正在加载通知...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 弹窗Banner Tab Pane -->
          <div class="tab-pane fade" id="banners-pane" role="tabpanel" aria-labelledby="banners-tab">
            <!-- 统计信息 -->
            <div class="row g-3 mb-4">
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-images text-primary" style="font-size: 2rem;"></i>
                    <h4 class="mt-2" id="bannerStatTotal">-</h4>
                    <small class="text-muted">总弹窗数</small>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-check-circle text-success" style="font-size: 2rem;"></i>
                    <h4 class="mt-2 text-success" id="bannerStatActive">-</h4>
                    <small class="text-muted">已启用</small>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-pause-circle text-secondary" style="font-size: 2rem;"></i>
                    <h4 class="mt-2 text-secondary" id="bannerStatInactive">-</h4>
                    <small class="text-muted">已禁用</small>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-house text-warning" style="font-size: 2rem;"></i>
                    <h4 class="mt-2 text-warning" id="bannerStatHome">-</h4>
                    <small class="text-muted">首页弹窗</small>
                  </div>
                </div>
              </div>
            </div>

            <!-- 操作栏 -->
            <div class="card mb-3">
              <div class="card-body">
                <div class="row g-3 align-items-end">
                  <div class="col-md-2">
                    <label class="form-label">显示位置</label>
                    <select class="form-select" id="bannerFilterPosition">
                      <option value="">全部位置</option>
                      <option value="home">首页</option>
                      <option value="profile">个人中心</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <label class="form-label">状态筛选</label>
                    <select class="form-select" id="bannerFilterStatus">
                      <option value="">全部状态</option>
                      <option value="true">已启用</option>
                      <option value="false">已禁用</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">搜索关键词</label>
                    <input type="text" class="form-control" id="bannerFilterKeyword" placeholder="标题关键词...">
                  </div>
                  <div class="col-md-2">
                    <button class="btn btn-primary w-100" id="bannerSearchBtn">
                      <i class="bi bi-search"></i> 搜索
                    </button>
                  </div>
                  <div class="col-md-3">
                    <button class="btn btn-success w-100" id="addBannerBtn">
                      <i class="bi bi-plus-lg"></i> 新建弹窗
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 弹窗列表 -->
            <div class="card">
              <div class="card-header bg-white">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0"><i class="bi bi-grid-3x3-gap"></i> 弹窗列表</h6>
                  <button class="btn btn-sm btn-outline-secondary" id="bannerRefreshBtn">
                    <i class="bi bi-arrow-clockwise"></i> 刷新
                  </button>
                </div>
              </div>
              <div class="card-body">
                <div id="bannersList" class="row g-3">
                  <div class="text-center py-5 col-12">
                    <div class="spinner-border text-primary" role="status">
                      <span class="visually-hidden">加载中...</span>
                    </div>
                    <p class="mt-2 text-muted">正在加载弹窗列表...</p>
                  </div>
                </div>
              </div>
              <div class="card-footer bg-white">
                <nav>
                  <ul class="pagination pagination-sm mb-0 justify-content-center" id="bannersPagination"></ul>
                </nav>
              </div>
            </div>
          </div>

          <!-- 图片资源 Tab Pane -->
          <div class="tab-pane fade" id="images-pane" role="tabpanel" aria-labelledby="images-tab">
            <!-- 存储统计 -->
            <div class="row g-3 mb-4">
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-image text-primary" style="font-size: 2rem;"></i>
                    <h4 class="mt-2" id="imageTotalImages">0</h4>
                    <small class="text-muted">图片总数</small>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-hdd text-success" style="font-size: 2rem;"></i>
                    <h4 class="mt-2" id="imageTotalSize">0 MB</h4>
                    <small class="text-muted">存储占用</small>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-calendar-week text-warning" style="font-size: 2rem;"></i>
                    <h4 class="mt-2" id="imageWeeklyUploads">0</h4>
                    <small class="text-muted">本周上传</small>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card">
                  <div class="card-body text-center">
                    <i class="bi bi-trash text-danger" style="font-size: 2rem;"></i>
                    <h4 class="mt-2" id="imageOrphanImages">0</h4>
                    <small class="text-muted">孤儿图片</small>
                  </div>
                </div>
              </div>
            </div>

            <!-- 操作区域 -->
            <div class="card mb-3">
              <div class="card-body">
                <div class="row g-3 align-items-end">
                  <div class="col-md-3">
                    <label class="form-label">图片类型</label>
                    <select class="form-select" id="imageTypeFilter">
                      <option value="">全部类型</option>
                      <option value="lottery">抽奖奖品</option>
                      <option value="exchange">兑换商品</option>
                      <option value="trade">交易相关</option>
                      <option value="uploads">通用上传</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">状态</label>
                    <select class="form-select" id="imageStatusFilter">
                      <option value="">全部状态</option>
                      <option value="active">使用中</option>
                      <option value="orphan">孤儿图片</option>
                      <option value="archived">已归档</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <button class="btn btn-primary w-100" id="imageRefreshBtn">
                      <i class="bi bi-arrow-repeat"></i> 刷新
                    </button>
                  </div>
                  <div class="col-md-3">
                    <button class="btn btn-success w-100" id="imageUploadBtn">
                      <i class="bi bi-cloud-upload"></i> 上传图片
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 图片列表 -->
            <div class="card">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0"><i class="bi bi-images"></i> 图片列表</h5>
                <div class="btn-group btn-group-sm">
                  <button class="btn btn-outline-secondary active" id="viewGrid">
                    <i class="bi bi-grid-3x3-gap"></i>
                  </button>
                  <button class="btn btn-outline-secondary" id="viewList">
                    <i class="bi bi-list"></i>
                  </button>
                </div>
              </div>
              <div class="card-body">
                <div class="row g-3" id="imagesContainer">
                  <div class="text-center py-5 col-12">
                    <div class="spinner-border text-primary" role="status">
                      <span class="visually-hidden">加载中...</span>
                    </div>
                    <p class="mt-2 text-muted">正在加载图片...</p>
                  </div>
                </div>
              </div>
              <div class="card-footer bg-white">
                <nav>
                  <ul class="pagination pagination-sm mb-0 justify-content-center" id="imagesPagination"></ul>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 公告模态框 -->
  <div class="modal fade" id="announcementModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="announcementModalTitle">
            <i class="bi bi-megaphone"></i> 发布新公告
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="announcementId">
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label">公告标题 <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="announcementTitle" placeholder="请输入公告标题" maxlength="100" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">公告类型 <span class="text-danger">*</span></label>
              <select class="form-select" id="announcementType" required>
                <option value="notice">通知</option>
                <option value="system">系统公告</option>
                <option value="activity">活动</option>
                <option value="maintenance">维护</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">公告状态 <span class="text-danger">*</span></label>
              <select class="form-select" id="announcementStatus" required>
                <option value="draft">草稿</option>
                <option value="active">发布</option>
                <option value="inactive">下线</option>
              </select>
            </div>
            <div class="col-12">
              <label class="form-label">公告内容 <span class="text-danger">*</span></label>
              <textarea class="form-control" id="announcementContent" rows="6" placeholder="请输入公告内容" required></textarea>
            </div>
            <div class="col-md-6">
              <label class="form-label">优先级</label>
              <select class="form-select" id="announcementPriority">
                <option value="low">低</option>
                <option value="medium" selected>中</option>
                <option value="high">高</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">过期时间</label>
              <input type="datetime-local" class="form-control" id="announcementExpiresAt">
              <small class="text-muted">留空表示永久有效</small>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="submitAnnouncementBtn">
            <i class="bi bi-check-lg"></i> 保存
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 发送通知模态框 -->
  <div class="modal fade" id="sendNotificationModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="bi bi-send"></i> 发送系统通知</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="sendNotificationForm">
            <div class="mb-3">
              <label class="form-label">通知类型 <span class="text-danger">*</span></label>
              <select class="form-select" id="notificationType" required>
                <option value="">请选择</option>
                <option value="system">系统通知</option>
                <option value="user">用户动态</option>
                <option value="order">订单消息</option>
                <option value="alert">警告提醒</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">通知标题 <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="notificationTitle" required>
            </div>
            <div class="mb-3">
              <label class="form-label">通知内容 <span class="text-danger">*</span></label>
              <textarea class="form-control" id="notificationContent" rows="4" required></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">发送对象</label>
              <select class="form-select" id="notificationTarget">
                <option value="all">全部管理员</option>
                <option value="online">在线管理员</option>
                <option value="self">仅自己</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="confirmSendNotificationBtn">
            <i class="bi bi-send"></i> 发送
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 新建弹窗模态框 -->
  <div class="modal fade" id="bannerModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="bannerModalTitle">
            <i class="bi bi-plus-circle"></i> 新建弹窗
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="bannerForm">
            <input type="hidden" id="bannerId">
            <div class="row">
              <div class="col-md-6">
                <h6 class="text-primary mb-3"><i class="bi bi-info-circle"></i> 基本信息</h6>
                <div class="mb-3">
                  <label class="form-label">弹窗标题 <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="bannerTitle" required maxlength="100" placeholder="输入弹窗标题">
                </div>
                <div class="mb-3">
                  <label class="form-label">显示位置 <span class="text-danger">*</span></label>
                  <select class="form-select" id="bannerPosition" required>
                    <option value="home">首页</option>
                    <option value="profile">个人中心</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">显示顺序</label>
                  <input type="number" class="form-control" id="bannerOrder" value="0" min="0" max="999">
                </div>
                <div class="mb-3">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="bannerActive" checked>
                    <label class="form-check-label" for="bannerActive">启用弹窗</label>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <h6 class="text-primary mb-3"><i class="bi bi-image"></i> 弹窗图片</h6>
                <div class="mb-3">
                  <div class="upload-zone" id="bannerUploadZone">
                    <i class="bi bi-cloud-arrow-up text-muted" style="font-size: 3rem;"></i>
                    <p class="mb-1 text-muted">点击或拖拽上传图片</p>
                    <p class="small text-muted mb-0">支持 JPG、PNG、GIF、WebP，最大 5MB</p>
                  </div>
                  <input type="file" id="bannerImageInput" accept="image/*" class="d-none">
                </div>
              </div>
            </div>
            <hr>
            <h6 class="text-primary mb-3"><i class="bi bi-link-45deg"></i> 点击跳转设置</h6>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">跳转类型</label>
                  <select class="form-select" id="bannerLinkType">
                    <option value="none">无跳转（仅展示）</option>
                    <option value="page">小程序页面</option>
                    <option value="miniprogram">其他小程序</option>
                    <option value="webview">H5网页</option>
                  </select>
                </div>
              </div>
              <div class="col-md-8" id="bannerLinkUrlSection" style="display: none;">
                <div class="mb-3">
                  <label class="form-label">跳转链接 <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="bannerLinkUrl" placeholder="输入跳转链接...">
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="saveBannerBtn">
            <i class="bi bi-check-lg"></i> 保存
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 上传图片模态框 -->
  <div class="modal fade" id="uploadModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="bi bi-cloud-upload"></i> 上传图片</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="upload-zone" id="imageUploadZone">
            <i class="bi bi-cloud-arrow-up" style="font-size: 3rem; color: #6c757d;"></i>
            <p class="mt-2 mb-0">拖拽图片到此处或点击选择</p>
            <small class="text-muted">支持 JPG, PNG, GIF, WebP 格式，单个文件最大 5MB</small>
            <input type="file" id="imageFileInput" accept="image/*" multiple style="display: none;">
          </div>
          <div class="mt-3" id="uploadPreviewContainer" style="display: none;">
            <h6>待上传文件</h6>
            <div class="row g-2" id="uploadPreviewList"></div>
          </div>
          <div class="mt-3">
            <label class="form-label">图片类型</label>
            <select class="form-select" id="uploadImageType">
              <option value="uploads">通用上传</option>
              <option value="lottery">抽奖奖品</option>
              <option value="exchange">兑换商品</option>
              <option value="trade">交易相关</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="submitUploadBtn" disabled>
            开始上传
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast 提示组件 -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="successToast" class="toast align-items-center text-white bg-success border-0" role="alert">
      <div class="d-flex">
        <div class="toast-body" id="successToastBody"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    </div>
    <div id="errorToast" class="toast align-items-center text-white bg-danger border-0" role="alert">
      <div class="d-flex">
        <div class="toast-body" id="errorToastBody"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    </div>
  </div>

  <!-- 加载遮罩层 -->
  <div class="loading-overlay" id="loadingOverlay" style="display:none;">
    <div class="spinner-border text-light" style="width: 3rem; height: 3rem;" role="status">
      <span class="visually-hidden">处理中...</span>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/admin/js/admin-common.js"></script>
  <script src="/admin/js/common/toast.js"></script>
  <script src="/admin/js/pages/system-config.js"></script>
</body>
</html>

